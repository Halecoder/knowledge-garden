/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __objRest = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MetadataMenu
});
module.exports = __toCommonJS(main_exports);
var import_obsidian36 = require("obsidian");

// src/settings/MetadataMenuSettingTab.ts
var import_obsidian23 = require("obsidian");

// src/settings/FieldSettingsModal.ts
var import_obsidian21 = require("obsidian");

// src/fields/FieldManager.ts
var import_obsidian2 = require("obsidian");

// src/commands/replaceValues.ts
var import_obsidian = require("obsidian");

// src/utils/parser.ts
var fieldComponents = ["inList", "startStyle", "attribute", "endStyle", "beforeSeparatorSpacer", "afterSeparatorSpacer", "values"];
var genericFieldRegex = "(?<inList>- )?(?<startStyle>[_\\*~`]*)(?<attribute>[0-9\\w\\p{Letter}\\p{Emoji_Presentation}][-0-9\\w\\p{Letter}\\p{Emoji_Presentation}\\s]*)(?<endStyle>[_\\*~`]*)(?<beforeSeparatorSpacer>\\s*)";
var inlineFieldRegex = (attribute) => `(?<inList>- )?(?<startStyle>[_\\*~\`]*)(?<attribute>${attribute})(?<endStyle>[_\\*~\`]*)(?<beforeSeparatorSpacer>\\s*)::(?<afterSeparatorSpacer>\\s*)(?<values>[^\\]]*)`;
var fullLineRegex = new RegExp(`^${genericFieldRegex}::s*(?<values>.*)?`, "u");
var inSentenceRegexBrackets = new RegExp(`\\[${genericFieldRegex}::s*(?<values>[^\\]]+)?\\]`, "gu");
var inSentenceRegexPar = new RegExp(`\\(${genericFieldRegex}::s*(?<values>[^\\]]+)?\\)`, "gu");
var encodeLink = (value) => {
  return value ? value.replace(/\[\[/g, "\u{1F527}\u{1F400}").replace(/\]\]/g, "\u{1F413}\u{1F54C}") : value;
};
var decodeLink = (value) => {
  return value ? value.replace(/🔧🐀/gu, "[[").replace(/🐓🕌/gu, "]]") : value;
};
var getLineFields = (line) => {
  const fields = [];
  const fR = line.match(fullLineRegex);
  if (fR == null ? void 0 : fR.groups) {
    const { attribute, values } = fR == null ? void 0 : fR.groups;
    fields.push({ attribute, values, index: 0, length: line.length });
  } else {
    const sRBk = encodeLink(line).matchAll(inSentenceRegexBrackets);
    let next = sRBk.next();
    while (!next.done) {
      if (next.value.groups) {
        const { attribute, values } = next.value.groups;
        fields.push({ attribute, values: decodeLink(values), index: next.value.index || 0, length: next.value[0].length });
      }
      next = sRBk.next();
    }
    const sRBc = encodeLink(line).matchAll(inSentenceRegexPar);
    next = sRBc.next();
    while (!next.done) {
      if (next.value.groups) {
        const { attribute, values } = next.value.groups;
        fields.push({ attribute, values: decodeLink(values), index: next.value.index || 0, length: next.value[0].length });
      }
      next = sRBc.next();
    }
  }
  fields.sort((a, b) => {
    if (a.index < b.index)
      return -1;
    if (a.index > b.index)
      return 1;
    return 0;
  });
  return fields;
};

// src/commands/replaceValues.ts
var LocationWrapper = {
  "fullLine": { start: "", end: "" },
  "brackets": { start: "[", end: "]" },
  "parenthesis": { start: "(", end: ")" }
};
var matchInlineFields = (regex, line, attribute, input, location = "fullLine") => {
  const sR = line.matchAll(regex);
  let next = sR.next();
  const newFields = [];
  while (!next.done) {
    const match = next.value;
    if (match.groups && Object.keys(match.groups).every((j) => fieldComponents.includes(j))) {
      const { inList, startStyle, endStyle, beforeSeparatorSpacer, afterSeparatorSpacer, values } = match.groups;
      const inputArray = input ? input.replace(/(\,\s+)/g, ",").split(",") : [""];
      const newValue = inputArray.length == 1 ? inputArray[0] : `${inputArray.join(", ")}`;
      const start2 = LocationWrapper[location].start;
      const end2 = LocationWrapper[location].end;
      newFields.push({
        oldField: match[0],
        newField: `${start2}${inList || ""}${startStyle}${attribute}${endStyle}${beforeSeparatorSpacer}::${afterSeparatorSpacer}${newValue}${end2}`
      });
    }
    next = sR.next();
  }
  return newFields;
};
function replaceValues(app2, fileOrFilePath, attribute, input) {
  return __async(this, null, function* () {
    var _a;
    let file;
    if (fileOrFilePath instanceof import_obsidian.TFile) {
      file = fileOrFilePath;
    } else {
      const _file = app2.vault.getAbstractFileByPath(fileOrFilePath);
      if (_file instanceof import_obsidian.TFile && _file.extension == "md") {
        file = _file;
      } else {
        throw Error("path doesn't correspond to a proper file");
      }
    }
    const content = (yield app2.vault.cachedRead(file)).split("\n");
    const frontmatter = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    const { position: { start: start2, end: end2 } } = frontmatter ? frontmatter : { position: { start: void 0, end: void 0 } };
    const newContent = content.map((line, i) => {
      if (frontmatter && i >= start2.line && i <= end2.line) {
        const regex = new RegExp(`${attribute}:`, "u");
        const r = line.match(regex);
        if (r && r.length > 0) {
          const inputArray = input ? input.replace(/(\,\s+)/g, ",").split(",") : [""];
          const newValue = inputArray.length == 1 ? inputArray[0] : `[${inputArray.join(", ")}]`;
          return `${attribute}: ${newValue}`;
        } else {
          return line;
        }
      } else {
        const encodedInput = encodeLink(input);
        let encodedLine = encodeLink(line);
        const fullLineRegex2 = new RegExp(`^${inlineFieldRegex(attribute)}`, "u");
        const fR = encodedLine.match(fullLineRegex2);
        if ((fR == null ? void 0 : fR.groups) && Object.keys(fR.groups).every((j) => fieldComponents.includes(j))) {
          const { inList, startStyle, endStyle, beforeSeparatorSpacer, afterSeparatorSpacer, values } = fR.groups;
          const inputArray = input ? input.replace(/(\,\s+)/g, ",").split(",") : [""];
          const newValue = inputArray.length == 1 ? inputArray[0] : `${inputArray.join(", ")}`;
          return `${inList || ""}${startStyle}${attribute}${endStyle}${beforeSeparatorSpacer}::${afterSeparatorSpacer}${newValue}`;
        } else {
          const newFields = [];
          const inSentenceRegexBrackets2 = new RegExp(`\\[${inlineFieldRegex(attribute)}\\]`, "gu");
          const inSentenceRegexPar2 = new RegExp(`\\(${inlineFieldRegex(attribute)}\\)`, "gu");
          newFields.push(...matchInlineFields(inSentenceRegexBrackets2, encodedLine, attribute, encodedInput, "brackets" /* brackets */));
          newFields.push(...matchInlineFields(inSentenceRegexPar2, encodedLine, attribute, encodedInput, "parenthesis" /* parenthesis */));
          newFields.forEach((field) => {
            const fieldRegex = new RegExp(field.oldField.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"), "u");
            encodedLine = encodedLine.replace(fieldRegex, field.newField);
          });
          return decodeLink(encodedLine);
        }
      }
    });
    app2.vault.modify(file, newContent.join("\n"));
  });
}

// src/fields/FieldManager.ts
var FieldManager2 = class {
  constructor(field, type) {
    if (field.type !== type)
      throw Error(`This field is not of type ${type}`);
    this.field = field;
  }
  validateName(textInput, insertAfter) {
    let error = false;
    if (/^[#>-]/.test(this.field.name)) {
      FieldSettingsModal.setValidationError(textInput, insertAfter, "Field name cannot start with #, >, -");
      error = true;
    }
    ;
    if (this.field.name == "") {
      FieldSettingsModal.setValidationError(textInput, insertAfter, "Field name can not be Empty");
      error = true;
    }
    ;
    return !error;
  }
  validateValue(value) {
    return __async(this, null, function* () {
      return true;
    });
  }
  static replaceValues(app2, path, fieldName, value) {
    const file = app2.vault.getAbstractFileByPath(path);
    if (file instanceof import_obsidian2.TFile && file.extension == "md") {
      replaceValues(app2, file, fieldName, value);
    }
  }
  static isMenu(category) {
    return category.addItem !== void 0;
  }
  static isSelect(category) {
    return category.modals !== void 0;
  }
  static createDefault(name) {
    const field = Field_default.createDefault(name);
    return new FieldManager[field.type](field);
  }
  static stringToBoolean(value) {
    let toBooleanValue = false;
    if (isBoolean(value)) {
      toBooleanValue = value;
    } else if (/true/i.test(value)) {
      toBooleanValue = true;
    } else if (/false/i.test(value)) {
      toBooleanValue = false;
    } else {
      throw Error("this value is not a boolean");
    }
    ;
    return toBooleanValue;
  }
};

// src/optionModals/fields/InputModal.ts
var import_obsidian4 = require("obsidian");

// src/commands/insertValues.ts
var import_obsidian3 = require("obsidian");
function insertValues(app2, fileOrFilePath, fieldName, value, lineNumber, inFrontmatter, top2) {
  return __async(this, null, function* () {
    let file;
    if (fileOrFilePath instanceof import_obsidian3.TFile) {
      file = fileOrFilePath;
    } else {
      const _file = app2.vault.getAbstractFileByPath(fileOrFilePath);
      if (_file instanceof import_obsidian3.TFile && _file.extension == "md") {
        file = _file;
      } else {
        throw Error("path doesn't correspond to a proper file");
      }
    }
    const result = yield app2.vault.read(file);
    let newContent = [];
    if (top2) {
      newContent.push(`${fieldName}${inFrontmatter ? ":" : "::"} ${value}`);
      result.split("\n").forEach((line, _lineNumber) => newContent.push(line));
    } else {
      result.split("\n").forEach((line, _lineNumber) => {
        newContent.push(line);
        if (_lineNumber == lineNumber) {
          newContent.push(`${fieldName}${inFrontmatter ? ":" : "::"} ${value}`);
        }
        ;
      });
    }
    ;
    app2.vault.modify(file, newContent.join("\n"));
  });
}

// src/optionModals/fields/InputModal.ts
var InputModal = class extends import_obsidian4.Modal {
  constructor(app2, file, field, value, lineNumber = -1, inFrontMatter = false, top2 = false) {
    super(app2);
    this.app = app2;
    this.file = file;
    this.field = field;
    this.value = value;
    this.lineNumber = lineNumber;
    this.inFrontmatter = inFrontMatter;
    this.top = top2;
  }
  onOpen() {
    console.log("c'est bien moi");
    const inputDiv = this.contentEl.createDiv({ cls: "metadata-menu-modal-value" });
    this.buildInputEl(inputDiv);
  }
  buildInputEl(inputDiv) {
    const form = inputDiv.createEl("form");
    form.type = "submit";
    const inputEl = new import_obsidian4.TextComponent(form);
    inputEl.inputEl.focus();
    inputEl.setValue(this.value);
    inputEl.inputEl.addClass("metadata-menu-prompt-input");
    form.onsubmit = (e) => __async(this, null, function* () {
      e.preventDefault();
      let inputValue = inputEl.getValue();
      if (this.lineNumber == -1) {
        replaceValues(this.app, this.file, this.field.name, inputValue);
      } else {
        insertValues(this.app, this.file, this.field.name, inputValue, this.lineNumber, this.inFrontmatter, this.top);
      }
      ;
      this.close();
    });
  }
};

// src/fields/fieldManagers/InputField.ts
var InputField = class extends FieldManager2 {
  constructor(field) {
    super(field, "Input" /* Input */);
  }
  getOptionsStr() {
    return "";
  }
  addMenuOption(name, value, app2, file, category) {
    const modal = new InputModal(app2, file, this.field, value);
    modal.titleEl.setText(`Change Value for <${name}>`);
    if (InputField.isMenu(category)) {
      category.addItem((item) => {
        item.setTitle(`Update <${name}>`);
        item.setIcon("pencil");
        item.onClick(() => modal.open());
        item.setSection("target-metadata");
      });
    } else if (InputField.isSelect(category)) {
      category.addOption(`update_${name}`, `Update <${name}>`);
      category.modals[`update_${name}`] = () => modal.open();
    }
    ;
  }
  createSettingContainer(parentContainer, plugin) {
  }
  validateOptions() {
    return true;
  }
  createAndOpenFieldModal(app2, file, selectedFieldName, lineNumber, inFrontmatter, top2) {
    const fieldModal = new InputModal(app2, file, this.field, "", lineNumber, inFrontmatter, top2);
    fieldModal.titleEl.setText(`Enter value for ${selectedFieldName}`);
    fieldModal.open();
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      var _a;
      const fieldValue = dv.el("span", p[this.field.name], attrs);
      const inputContainer = document.createElement("div");
      const input = document.createElement("input");
      input.setAttr("class", "metadata-menu-dv-input");
      inputContainer.appendChild(input);
      input.value = p[this.field.name];
      const spacer = document.createElement("div");
      spacer.setAttr("class", "metadata-menu-dv-field-spacer");
      const button = document.createElement("button");
      button.setText("\u{1F58D}");
      button.setAttr("class", "metadata-menu-dv-field-button");
      if (!((_a = attrs == null ? void 0 : attrs.options) == null ? void 0 : _a.alwaysOn)) {
        button.hide();
        spacer.show();
        fieldContainer.onmouseover = () => {
          button.show();
          spacer.hide();
        };
        fieldContainer.onmouseout = () => {
          button.hide();
          spacer.show();
        };
      }
      const validateIcon = document.createElement("button");
      validateIcon.textContent = "\u2705";
      validateIcon.setAttr("class", "metadata-menu-dv-field-button");
      validateIcon.onclick = (e) => {
        InputField.replaceValues(plugin.app, p["file"]["path"], this.field.name, input.value);
        fieldContainer.removeChild(inputContainer);
      };
      inputContainer == null ? void 0 : inputContainer.appendChild(validateIcon);
      const cancelIcon = document.createElement("button");
      cancelIcon.setAttr("class", "metadata-menu-dv-field-button");
      cancelIcon.textContent = "\u274C";
      cancelIcon.onclick = (e) => {
        fieldContainer.removeChild(inputContainer);
        fieldContainer.appendChild(button);
        fieldContainer.appendChild(fieldValue);
        fieldContainer.appendChild(spacer);
      };
      inputContainer.appendChild(cancelIcon);
      input.focus();
      input.onkeydown = (e) => {
        if (e.key === "Enter") {
          InputField.replaceValues(plugin.app, p["file"]["path"], this.field.name, input.value);
          fieldContainer.removeChild(inputContainer);
        }
        if (e.key === "Escape") {
          fieldContainer.removeChild(inputContainer);
          fieldContainer.appendChild(button);
          fieldContainer.appendChild(fieldValue);
          fieldContainer.appendChild(spacer);
        }
      };
      button.onclick = (e) => {
        fieldContainer.removeChild(fieldValue);
        fieldContainer.removeChild(button);
        fieldContainer.removeChild(spacer);
        fieldContainer.appendChild(inputContainer);
        input.focus();
      };
      fieldContainer.appendChild(button);
      fieldContainer.appendChild(fieldValue);
      fieldContainer.appendChild(spacer);
    });
  }
};

// src/optionModals/fields/BooleanModal.ts
var import_obsidian5 = require("obsidian");
var BooleanModal = class extends import_obsidian5.Modal {
  constructor(app2, file, field, value, lineNumber = -1, inFrontMatter = false, top2 = false) {
    super(app2);
    this.app = app2;
    this.file = file;
    this.value = value;
    this.lineNumber = lineNumber;
    this.inFrontmatter = inFrontMatter;
    this.top = top2;
    this.field = field;
  }
  onOpen() {
    const inputDiv = this.contentEl.createDiv({
      cls: "metadata-menu-toggler"
    });
    this.buildToggleEl(inputDiv);
  }
  buildToggleEl(inputDiv) {
    const toggleEl = new import_obsidian5.ToggleComponent(inputDiv);
    toggleEl.setValue(this.value);
    toggleEl.onChange((value) => {
      this.value = value;
    });
    const footer = this.contentEl.createDiv({ cls: "metadata-menu-value-grid-footer" });
    const saveButton = new import_obsidian5.ButtonComponent(footer);
    saveButton.setIcon("checkmark");
    saveButton.onClick(() => __async(this, null, function* () {
      const value = this.value.toString();
      if (this.lineNumber == -1) {
        replaceValues(this.app, this.file, this.field.name, value);
      } else {
        insertValues(this.app, this.file, this.field.name, value, this.lineNumber, this.inFrontmatter, this.top);
      }
      ;
      this.close();
    }));
  }
};

// src/fields/fieldManagers/BooleanField.ts
var BooleanField = class extends FieldManager2 {
  constructor(field) {
    super(field, "Boolean" /* Boolean */);
  }
  addMenuOption(name, value, app2, file, category) {
    const bValue = BooleanField.stringToBoolean(value);
    if (BooleanField.isMenu(category)) {
      category.addItem((item) => {
        item.setTitle(`<${name}> ${bValue ? "\u2705 \u25B7 \u274C" : "\u274C \u25B7 \u2705"}`);
        item.setIcon("checkmark");
        item.onClick(() => replaceValues(app2, file, name, (!bValue).toString()));
        item.setSection("target-metadata");
      });
    } else if (BooleanField.isSelect(category)) {
      category.addOption(`update_${name}`, `<${name}> ${bValue ? "\u2705 \u25B7 \u274C" : "\u274C \u25B7 \u2705"}`);
      category.modals[`update_${name}`] = () => replaceValues(app2, file, name, (!bValue).toString());
    }
    ;
  }
  getOptionsStr() {
    return "";
  }
  createSettingContainer(parentContainer, plugin) {
  }
  validateValue(value) {
    return __async(this, null, function* () {
      try {
        const bValue = BooleanField.stringToBoolean(value);
        return isBoolean(bValue);
      } catch (error) {
        return false;
      }
    });
  }
  validateOptions() {
    return true;
  }
  createAndOpenFieldModal(app2, file, selectedFieldName, lineNumber, inFrontmatter, top2) {
    const fieldModal = new BooleanModal(app2, file, this.field, false, lineNumber, inFrontmatter, top2);
    fieldModal.titleEl.setText(`Set value for ${selectedFieldName}`);
    fieldModal.open();
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      const checkbox = dv.el("input", "", __spreadProps(__spreadValues({}, attrs), { "type": "checkbox" }));
      checkbox.checked = p[this.field.name];
      fieldContainer.appendChild(checkbox);
      checkbox.onchange = (value) => {
        BooleanField.replaceValues(plugin.app, p["file"]["path"], this.field.name, checkbox.checked.toString());
      };
    });
  }
};

// src/optionModals/fields/NumberModal.ts
var import_obsidian6 = require("obsidian");
var NumbertModal = class extends import_obsidian6.Modal {
  constructor(app2, file, field, value, lineNumber = -1, inFrontMatter = false, top2 = false) {
    super(app2);
    this.app = app2;
    this.file = file;
    this.field = field;
    this.value = value;
    this.lineNumber = lineNumber;
    this.inFrontmatter = inFrontMatter;
    this.top = top2;
    this.fieldManager = new FieldManager[this.field.type](this.field);
  }
  onOpen() {
    const inputDiv = this.contentEl.createDiv();
    this.buildInputEl(inputDiv);
  }
  decrement(inputEl) {
    const { step } = this.field.options;
    const fStep = parseFloat(step);
    if (!isNaN(fStep)) {
      inputEl.setValue((parseFloat(inputEl.getValue()) - fStep).toString());
    } else {
      inputEl.setValue((parseFloat(inputEl.getValue()) - 1).toString());
    }
  }
  increment(inputEl) {
    const { step } = this.field.options;
    const fStep = parseFloat(step);
    if (!isNaN(fStep)) {
      inputEl.setValue((parseFloat(inputEl.getValue()) + fStep).toString());
    } else {
      inputEl.setValue((parseFloat(inputEl.getValue()) + 1).toString());
    }
  }
  toggleButtonsState(minusBtn, plusBtn, inputEl) {
    minusBtn.setDisabled(!this.fieldManager.canDecrement(inputEl.getValue()));
    plusBtn.setDisabled(!this.fieldManager.canIncrement(inputEl.getValue()));
    if (this.fieldManager.canDecrement(inputEl.getValue())) {
      minusBtn.setCta();
    } else {
      minusBtn.removeCta();
    }
    if (this.fieldManager.canIncrement(inputEl.getValue())) {
      plusBtn.setCta();
    } else {
      plusBtn.removeCta();
    }
  }
  buildInputEl(inputDiv) {
    const { step } = this.field.options;
    const form = inputDiv.createEl("form");
    form.type = "submit";
    const fieldContainer = form.createEl("div", { cls: "metadata-menu-modal-value-with-btn" });
    const inputEl = new import_obsidian6.TextComponent(fieldContainer);
    inputEl.inputEl.focus();
    inputEl.setValue(this.value);
    const minusBtn = new import_obsidian6.ButtonComponent(fieldContainer);
    minusBtn.setButtonText(`- ${!!step ? step : 1}`);
    const plusBtn = new import_obsidian6.ButtonComponent(fieldContainer);
    plusBtn.setButtonText(`+ ${!!step ? step : 1}`);
    plusBtn.setDisabled(!this.fieldManager.canIncrement(inputEl.getValue()));
    const errorField = form.createEl("div", { cls: "metadata-menu-modal-value-with-btn-error-field" });
    errorField.hide();
    const footer = form.createEl("div", { cls: "metadata-menu-value-grid-footer" });
    const validateBtn = new import_obsidian6.ButtonComponent(footer);
    validateBtn.setIcon("checkmark");
    const cancelBtn = new import_obsidian6.ButtonComponent(footer);
    cancelBtn.setIcon("cross");
    this.toggleButtonsState(minusBtn, plusBtn, inputEl);
    inputEl.onChange(() => {
      inputEl.inputEl.removeClass("is-invalid");
      errorField.hide();
      errorField.setText("");
      this.toggleButtonsState(minusBtn, plusBtn, inputEl);
    });
    plusBtn.onClick((e) => {
      e.preventDefault();
      this.increment(inputEl);
      this.toggleButtonsState(minusBtn, plusBtn, inputEl);
    });
    minusBtn.onClick((e) => {
      e.preventDefault();
      this.decrement(inputEl);
      this.toggleButtonsState(minusBtn, plusBtn, inputEl);
    });
    cancelBtn.onClick((e) => {
      e.preventDefault();
      this.close();
    });
    form.onsubmit = (e) => __async(this, null, function* () {
      e.preventDefault();
      let inputValue = inputEl.getValue();
      if (!this.fieldManager.validateValue(inputValue)) {
        const { min: min2, max: max2 } = this.field.options;
        errorField.show();
        errorField.setText(`value must be numeric${min2 ? " and >= " + min2 : ""} ${max2 ? " and <= " + max2 : ""}`);
        inputEl.inputEl.setAttr("class", "is-invalid");
        return;
      }
      if (this.lineNumber == -1) {
        replaceValues(this.app, this.file, this.field.name, inputValue);
      } else {
        insertValues(this.app, this.file, this.field.name, inputValue, this.lineNumber, this.inFrontmatter, this.top);
      }
      ;
      this.close();
    });
  }
};

// src/fields/fieldManagers/NumberField.ts
var import_obsidian7 = require("obsidian");
var NumberField = class extends FieldManager2 {
  constructor(field) {
    super(field, "Number" /* Number */);
  }
  getOptionsStr() {
    const options = [];
    Object.keys(this.field.options).forEach((k) => {
      if (this.field.options[k])
        options.push(`${k}: ${this.field.options[k]}`);
    });
    return options.join(" | ");
  }
  canDecrement(value) {
    const { step, min: min2 } = this.field.options;
    const fStep = parseFloat(step);
    const fMin = parseFloat(min2);
    return !(isNaN(parseFloat(value)) || !isNaN(fMin) && (!isNaN(fStep) && (parseFloat(value) - fStep < fMin || parseFloat(value) - 1 < fMin)));
  }
  canIncrement(value) {
    const { step, max: max2 } = this.field.options;
    const fStep = parseFloat(step);
    const fMax = parseFloat(max2);
    return !(isNaN(parseFloat(value)) || !isNaN(fMax) && (!isNaN(fStep) && (parseFloat(value) + fStep > fMax || parseFloat(value) + 1 > fMax)));
  }
  validateValue(value) {
    return __async(this, null, function* () {
      const { min: min2, max: max2 } = this.field.options;
      const fMin = parseFloat(min2);
      const fMax = parseFloat(max2);
      const fValue = parseFloat(value);
      return !isNaN(fValue) && (isNaN(fMin) || fValue >= fMin) && (isNaN(fMax) || fValue <= fMax);
    });
  }
  addMenuOption(name, value, app2, file, category) {
    const modal = new NumbertModal(app2, file, this.field, value);
    modal.titleEl.setText(`Change Value for <${name}>`);
    if (NumberField.isMenu(category)) {
      category.addItem((item) => {
        item.setTitle(`Update <${name}>`);
        item.setIcon("pencil");
        item.onClick(() => modal.open());
        item.setSection("target-metadata");
      });
      const { min: min2, max: max2, step } = this.field.options;
      const fMin = parseFloat(min2);
      const fMax = parseFloat(max2);
      const fStep = parseFloat(step);
      const fValue = parseFloat(value);
      if (fStep) {
        if (isNaN(fMin) || fMin && fValue - fStep > fMin)
          category.addItem((item) => {
            item.setIcon("pencil");
            item.setTitle(`<${name}> \u27A1\uFE0F ${fValue - fStep}`);
            item.onClick(() => replaceValues(app2, file, name, (fValue - fStep).toString()));
            item.setSection("target-metadata");
          });
        if (isNaN(fMax) || fMax && fValue + fStep < fMax)
          category.addItem((item) => {
            item.setIcon("pencil");
            item.setTitle(`<${name}> \u27A1\uFE0F ${fValue + fStep}`);
            item.onClick(() => replaceValues(app2, file, name, (fValue + fStep).toString()));
            item.setSection("target-metadata");
          });
      }
    } else if (NumberField.isSelect(category)) {
      category.addOption(`update_${name}`, `Update <${name}>`);
      category.modals[`update_${name}`] = () => modal.open();
    }
    ;
  }
  createNumberContainer(parentContainer) {
    const numberStepValueContainer = parentContainer.createDiv();
    numberStepValueContainer.createEl("span", { text: "Step (optional)", cls: "metadata-menu-field-option" });
    this.numberStepValue = new import_obsidian7.TextComponent(numberStepValueContainer);
    this.numberStepValue.setValue(this.field.options.step || "");
    const numberMinValueContainer = parentContainer.createDiv();
    numberMinValueContainer.createEl("span", { text: "Min value (optional)", cls: "metadata-menu-field-option" });
    this.numberMinValue = new import_obsidian7.TextComponent(numberMinValueContainer);
    this.numberMinValue.setValue(this.field.options.min || "");
    const numberMaxValueContainer = parentContainer.createDiv();
    numberMaxValueContainer.createEl("span", { text: "Max value (optional)", cls: "metadata-menu-field-option" });
    this.numberMaxValue = new import_obsidian7.TextComponent(numberMaxValueContainer);
    this.numberMaxValue.setValue(this.field.options.max || "");
    this.numberStepValue.onChange((value) => {
      this.field.options.step = value;
      FieldSettingsModal.removeValidationError(this.numberStepValue);
    });
    this.numberMinValue.onChange((value) => {
      this.field.options.min = value;
      FieldSettingsModal.removeValidationError(this.numberMinValue);
    });
    this.numberMaxValue.onChange((value) => {
      this.field.options.max = value;
      FieldSettingsModal.removeValidationError(this.numberMaxValue);
    });
  }
  createSettingContainer(parentContainer, plugin) {
    this.numberValidatorField = parentContainer.createDiv({ cls: "metadata-menu-number-options" });
    this.createNumberContainer(this.numberValidatorField);
    this.numberValidatorField.createDiv({ cls: "metadata-menu-separator" }).createEl("hr");
  }
  validateOptions() {
    let error = false;
    if (this.field.options.step && isNaN(parseFloat(this.field.options.step))) {
      FieldSettingsModal.setValidationError(this.numberStepValue, this.numberStepValue.inputEl, "Values must be numeric.");
      error = true;
    }
    if (this.field.options.min && isNaN(parseFloat(this.field.options.min))) {
      FieldSettingsModal.setValidationError(this.numberMinValue, this.numberMinValue.inputEl, "Values must be numeric.");
      error = true;
    }
    if (this.field.options.max && isNaN(parseFloat(this.field.options.max))) {
      FieldSettingsModal.setValidationError(this.numberMaxValue, this.numberMaxValue.inputEl, "Values must be numeric.");
      error = true;
    }
    return !error;
  }
  createAndOpenFieldModal(app2, file, selectedFieldName, lineNumber, inFrontmatter, top2) {
    const fieldModal = new NumbertModal(app2, file, this.field, "", lineNumber, inFrontmatter, top2);
    fieldModal.titleEl.setText(`Enter value for ${selectedFieldName}`);
    fieldModal.open();
  }
  toggleDvButtons(decrementBtn, incrementBtn, value) {
    if (this.canDecrement(value)) {
      decrementBtn.removeClass("disabled");
    } else {
      decrementBtn.addClass("disabled");
    }
    if (this.canIncrement(value)) {
      incrementBtn.removeClass("disabled");
    } else {
      incrementBtn.addClass("disabled");
      ;
    }
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      var _a;
      const fieldValue = dv.el("span", p[this.field.name], attrs);
      const inputContainer = document.createElement("div");
      const input = document.createElement("input");
      input.setAttr("class", "metadata-menu-dv-input");
      inputContainer.appendChild(input);
      input.value = p[this.field.name];
      const tripleSpacer = document.createElement("div");
      tripleSpacer.setAttr("class", "metadata-menu-dv-field-triple-spacer");
      const editButton = document.createElement("button");
      editButton.setText("\u{1F58D}");
      editButton.setAttr("class", "metadata-menu-dv-field-button");
      const decrementButton = document.createElement("button");
      decrementButton.setText("\u25C0\uFE0F");
      decrementButton.setAttr("class", "metadata-menu-dv-field-button");
      const incrementButton = document.createElement("button");
      incrementButton.setText("\u25B6\uFE0F");
      incrementButton.setAttr("class", "metadata-menu-dv-field-button");
      if (!((_a = attrs == null ? void 0 : attrs.options) == null ? void 0 : _a.alwaysOn)) {
        editButton.hide();
        decrementButton.hide();
        incrementButton.hide();
        tripleSpacer.show();
        fieldContainer.onmouseover = () => {
          editButton.show();
          decrementButton.show();
          incrementButton.show();
          tripleSpacer.hide();
        };
        fieldContainer.onmouseout = () => {
          editButton.hide();
          decrementButton.hide();
          incrementButton.hide();
          tripleSpacer.show();
        };
      }
      const validateIcon = document.createElement("a");
      validateIcon.textContent = "\u2705";
      validateIcon.setAttr("class", "metadata-menu-dv-field-button");
      validateIcon.onclick = () => __async(this, null, function* () {
        if (yield this.validateValue(input.value)) {
          const file = plugin.app.vault.getAbstractFileByPath(p["file"]["path"]);
          if (file instanceof import_obsidian7.TFile && file.extension == "md") {
            yield replaceValues(plugin.app, file, this.field.name, input.value);
            this.toggleDvButtons(decrementButton, incrementButton, input.value);
          }
          fieldContainer.removeChild(inputContainer);
        }
      });
      inputContainer == null ? void 0 : inputContainer.appendChild(validateIcon);
      const cancelIcon = document.createElement("a");
      cancelIcon.setAttr("class", "metadata-menu-dv-field-button");
      cancelIcon.textContent = "\u274C";
      cancelIcon.onclick = (e) => {
        fieldContainer.removeChild(inputContainer);
        fieldContainer.appendChild(decrementButton);
        fieldContainer.appendChild(fieldValue);
        fieldContainer.appendChild(editButton);
        fieldContainer.appendChild(incrementButton);
        fieldContainer.appendChild(tripleSpacer);
      };
      inputContainer.appendChild(cancelIcon);
      input.focus();
      input.onkeyup = (e) => {
        if (!this.validateValue(input.value)) {
          input.addClass("is-invalid");
          validateIcon.addClass("disabled");
        } else {
          input.removeClass("is-invalid");
          validateIcon.removeClass("disabled");
        }
      };
      input.onkeydown = (e) => __async(this, null, function* () {
        if (e.key === "Enter") {
          if (yield this.validateValue(input.value)) {
            const file = plugin.app.vault.getAbstractFileByPath(p["file"]["path"]);
            if (file instanceof import_obsidian7.TFile && file.extension == "md") {
              yield replaceValues(plugin.app, file, this.field.name, input.value);
              this.toggleDvButtons(decrementButton, incrementButton, input.value);
            }
            fieldContainer.removeChild(inputContainer);
          }
        }
        if (e.key === "Escape") {
          fieldContainer.removeChild(inputContainer);
          fieldContainer.appendChild(decrementButton);
          fieldContainer.appendChild(fieldValue);
          fieldContainer.appendChild(editButton);
          fieldContainer.appendChild(incrementButton);
          fieldContainer.appendChild(tripleSpacer);
        }
      });
      editButton.onclick = () => {
        fieldContainer.removeChild(fieldValue);
        fieldContainer.removeChild(editButton);
        fieldContainer.removeChild(decrementButton);
        fieldContainer.removeChild(incrementButton);
        fieldContainer.removeChild(tripleSpacer);
        fieldContainer.appendChild(inputContainer);
        input.focus();
      };
      decrementButton.onclick = () => __async(this, null, function* () {
        if (this.canDecrement(p[this.field.name])) {
          const { step } = this.field.options;
          const fStep = parseFloat(step);
          const file = plugin.app.vault.getAbstractFileByPath(p["file"]["path"]);
          if (file instanceof import_obsidian7.TFile && file.extension == "md") {
            const newValue = (!!fStep ? p[this.field.name] - fStep : p[this.field.name] - 1).toString();
            yield replaceValues(plugin.app, file, this.field.name, newValue);
            this.toggleDvButtons(decrementButton, incrementButton, newValue);
          }
        }
      });
      incrementButton.onclick = () => {
        if (this.canIncrement(p[this.field.name])) {
          const { step } = this.field.options;
          const fStep = parseFloat(step);
          const file = plugin.app.vault.getAbstractFileByPath(p["file"]["path"]);
          if (file instanceof import_obsidian7.TFile && file.extension == "md") {
            const newValue = (!!fStep ? p[this.field.name] + fStep : p[this.field.name] + 1).toString();
            replaceValues(plugin.app, file, this.field.name, newValue);
            this.toggleDvButtons(decrementButton, incrementButton, newValue);
          }
        }
      };
      fieldContainer.appendChild(decrementButton);
      fieldContainer.appendChild(fieldValue);
      fieldContainer.appendChild(editButton);
      fieldContainer.appendChild(incrementButton);
      fieldContainer.appendChild(tripleSpacer);
      this.toggleDvButtons(decrementButton, incrementButton, p[this.field.name]);
    });
  }
};

// src/fields/fieldManagers/AbstractListBasedField.ts
var import_obsidian12 = require("obsidian");

// src/settings/FieldSetting.ts
var import_obsidian8 = require("obsidian");
var FieldSetting = class extends import_obsidian8.Setting {
  constructor(containerEl, property, app2, plugin) {
    super(containerEl);
    this.containerEl = containerEl;
    this.field = property;
    this.app = app2;
    this.plugin = plugin;
    this.setTextContentWithname();
    this.addEditButton();
    this.addDeleteButton();
  }
  setTextContentWithname() {
    const manager = new FieldManager[this.field.type](this.field);
    this.infoEl.textContent = "";
    this.infoEl.addClass("metadata-menu-setting-item");
    this.fieldNameContainer = this.infoEl.createEl("div", "metadata-menu-setting-item-name");
    this.fieldNameContainer.setText(this.field.name);
    this.typeContainer = this.infoEl.createEl("div");
    this.typeContainer.setAttr("class", `metadata-menu-setting-item-info-type ${FieldTypeTagClass[this.field.type]}`);
    this.typeContainer.setText(this.field.type);
    this.fieldOptionsContainer = this.infoEl.createEl("div");
    this.fieldOptionsContainer.setText(`${manager.getOptionsStr()}`);
  }
  addEditButton() {
    this.addButton((b) => {
      b.setIcon("pencil").setTooltip("Edit").onClick(() => {
        let modal = new FieldSettingsModal(this.app, this.plugin, this.containerEl, this, this.field);
        modal.open();
      });
    });
  }
  addDeleteButton() {
    this.addButton((b) => {
      b.setIcon("trash").setTooltip("Delete").onClick(() => {
        var _a;
        const currentExistingProperty = this.plugin.initialProperties.filter((p) => p.id == this.field.id)[0];
        if (currentExistingProperty) {
          this.plugin.initialProperties.remove(currentExistingProperty);
        }
        ;
        (_a = this.settingEl.parentElement) == null ? void 0 : _a.removeChild(this.settingEl);
        this.plugin.saveSettings();
      });
    });
  }
  static getValuesListFromNote(notePath, app2) {
    return __async(this, null, function* () {
      let values = [];
      const file = app2.vault.getAbstractFileByPath(notePath);
      if (file instanceof import_obsidian8.TFile && file.extension == "md") {
        const result = yield app2.vault.read(file);
        result.split("\n").forEach((line) => {
          if (/^(.*)$/.test(line)) {
            values.push(line.trim());
          }
          ;
        });
        return values;
      } else {
        return [];
      }
      ;
    });
  }
};

// src/suggester/FileSuggester.ts
var import_obsidian11 = require("obsidian");

// src/suggester/suggest.ts
var import_obsidian9 = require("obsidian");

// node_modules/@popperjs/core/lib/enums.js
var top = "top";
var bottom = "bottom";
var right = "right";
var left = "left";
var auto = "auto";
var basePlacements = [top, bottom, right, left];
var start = "start";
var end = "end";
var clippingParents = "clippingParents";
var viewport = "viewport";
var popper = "popper";
var reference = "reference";
var variationPlacements = /* @__PURE__ */ basePlacements.reduce(function(acc, placement) {
  return acc.concat([placement + "-" + start, placement + "-" + end]);
}, []);
var placements = /* @__PURE__ */ [].concat(basePlacements, [auto]).reduce(function(acc, placement) {
  return acc.concat([placement, placement + "-" + start, placement + "-" + end]);
}, []);
var beforeRead = "beforeRead";
var read = "read";
var afterRead = "afterRead";
var beforeMain = "beforeMain";
var main = "main";
var afterMain = "afterMain";
var beforeWrite = "beforeWrite";
var write = "write";
var afterWrite = "afterWrite";
var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];

// node_modules/@popperjs/core/lib/dom-utils/getNodeName.js
function getNodeName(element) {
  return element ? (element.nodeName || "").toLowerCase() : null;
}

// node_modules/@popperjs/core/lib/dom-utils/getWindow.js
function getWindow(node) {
  if (node == null) {
    return window;
  }
  if (node.toString() !== "[object Window]") {
    var ownerDocument = node.ownerDocument;
    return ownerDocument ? ownerDocument.defaultView || window : window;
  }
  return node;
}

// node_modules/@popperjs/core/lib/dom-utils/instanceOf.js
function isElement(node) {
  var OwnElement = getWindow(node).Element;
  return node instanceof OwnElement || node instanceof Element;
}
function isHTMLElement(node) {
  var OwnElement = getWindow(node).HTMLElement;
  return node instanceof OwnElement || node instanceof HTMLElement;
}
function isShadowRoot(node) {
  if (typeof ShadowRoot === "undefined") {
    return false;
  }
  var OwnElement = getWindow(node).ShadowRoot;
  return node instanceof OwnElement || node instanceof ShadowRoot;
}

// node_modules/@popperjs/core/lib/modifiers/applyStyles.js
function applyStyles(_ref) {
  var state = _ref.state;
  Object.keys(state.elements).forEach(function(name) {
    var style = state.styles[name] || {};
    var attributes = state.attributes[name] || {};
    var element = state.elements[name];
    if (!isHTMLElement(element) || !getNodeName(element)) {
      return;
    }
    Object.assign(element.style, style);
    Object.keys(attributes).forEach(function(name2) {
      var value = attributes[name2];
      if (value === false) {
        element.removeAttribute(name2);
      } else {
        element.setAttribute(name2, value === true ? "" : value);
      }
    });
  });
}
function effect(_ref2) {
  var state = _ref2.state;
  var initialStyles = {
    popper: {
      position: state.options.strategy,
      left: "0",
      top: "0",
      margin: "0"
    },
    arrow: {
      position: "absolute"
    },
    reference: {}
  };
  Object.assign(state.elements.popper.style, initialStyles.popper);
  state.styles = initialStyles;
  if (state.elements.arrow) {
    Object.assign(state.elements.arrow.style, initialStyles.arrow);
  }
  return function() {
    Object.keys(state.elements).forEach(function(name) {
      var element = state.elements[name];
      var attributes = state.attributes[name] || {};
      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]);
      var style = styleProperties.reduce(function(style2, property) {
        style2[property] = "";
        return style2;
      }, {});
      if (!isHTMLElement(element) || !getNodeName(element)) {
        return;
      }
      Object.assign(element.style, style);
      Object.keys(attributes).forEach(function(attribute) {
        element.removeAttribute(attribute);
      });
    });
  };
}
var applyStyles_default = {
  name: "applyStyles",
  enabled: true,
  phase: "write",
  fn: applyStyles,
  effect,
  requires: ["computeStyles"]
};

// node_modules/@popperjs/core/lib/utils/getBasePlacement.js
function getBasePlacement(placement) {
  return placement.split("-")[0];
}

// node_modules/@popperjs/core/lib/utils/math.js
var max = Math.max;
var min = Math.min;
var round = Math.round;

// node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js
function getBoundingClientRect(element, includeScale) {
  if (includeScale === void 0) {
    includeScale = false;
  }
  var rect = element.getBoundingClientRect();
  var scaleX = 1;
  var scaleY = 1;
  if (isHTMLElement(element) && includeScale) {
    var offsetHeight = element.offsetHeight;
    var offsetWidth = element.offsetWidth;
    if (offsetWidth > 0) {
      scaleX = round(rect.width) / offsetWidth || 1;
    }
    if (offsetHeight > 0) {
      scaleY = round(rect.height) / offsetHeight || 1;
    }
  }
  return {
    width: rect.width / scaleX,
    height: rect.height / scaleY,
    top: rect.top / scaleY,
    right: rect.right / scaleX,
    bottom: rect.bottom / scaleY,
    left: rect.left / scaleX,
    x: rect.left / scaleX,
    y: rect.top / scaleY
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js
function getLayoutRect(element) {
  var clientRect = getBoundingClientRect(element);
  var width = element.offsetWidth;
  var height = element.offsetHeight;
  if (Math.abs(clientRect.width - width) <= 1) {
    width = clientRect.width;
  }
  if (Math.abs(clientRect.height - height) <= 1) {
    height = clientRect.height;
  }
  return {
    x: element.offsetLeft,
    y: element.offsetTop,
    width,
    height
  };
}

// node_modules/@popperjs/core/lib/dom-utils/contains.js
function contains(parent, child) {
  var rootNode = child.getRootNode && child.getRootNode();
  if (parent.contains(child)) {
    return true;
  } else if (rootNode && isShadowRoot(rootNode)) {
    var next = child;
    do {
      if (next && parent.isSameNode(next)) {
        return true;
      }
      next = next.parentNode || next.host;
    } while (next);
  }
  return false;
}

// node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js
function getComputedStyle(element) {
  return getWindow(element).getComputedStyle(element);
}

// node_modules/@popperjs/core/lib/dom-utils/isTableElement.js
function isTableElement(element) {
  return ["table", "td", "th"].indexOf(getNodeName(element)) >= 0;
}

// node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js
function getDocumentElement(element) {
  return ((isElement(element) ? element.ownerDocument : element.document) || window.document).documentElement;
}

// node_modules/@popperjs/core/lib/dom-utils/getParentNode.js
function getParentNode(element) {
  if (getNodeName(element) === "html") {
    return element;
  }
  return element.assignedSlot || element.parentNode || (isShadowRoot(element) ? element.host : null) || getDocumentElement(element);
}

// node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js
function getTrueOffsetParent(element) {
  if (!isHTMLElement(element) || getComputedStyle(element).position === "fixed") {
    return null;
  }
  return element.offsetParent;
}
function getContainingBlock(element) {
  var isFirefox = navigator.userAgent.toLowerCase().indexOf("firefox") !== -1;
  var isIE = navigator.userAgent.indexOf("Trident") !== -1;
  if (isIE && isHTMLElement(element)) {
    var elementCss = getComputedStyle(element);
    if (elementCss.position === "fixed") {
      return null;
    }
  }
  var currentNode = getParentNode(element);
  if (isShadowRoot(currentNode)) {
    currentNode = currentNode.host;
  }
  while (isHTMLElement(currentNode) && ["html", "body"].indexOf(getNodeName(currentNode)) < 0) {
    var css = getComputedStyle(currentNode);
    if (css.transform !== "none" || css.perspective !== "none" || css.contain === "paint" || ["transform", "perspective"].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === "filter" || isFirefox && css.filter && css.filter !== "none") {
      return currentNode;
    } else {
      currentNode = currentNode.parentNode;
    }
  }
  return null;
}
function getOffsetParent(element) {
  var window2 = getWindow(element);
  var offsetParent = getTrueOffsetParent(element);
  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === "static") {
    offsetParent = getTrueOffsetParent(offsetParent);
  }
  if (offsetParent && (getNodeName(offsetParent) === "html" || getNodeName(offsetParent) === "body" && getComputedStyle(offsetParent).position === "static")) {
    return window2;
  }
  return offsetParent || getContainingBlock(element) || window2;
}

// node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js
function getMainAxisFromPlacement(placement) {
  return ["top", "bottom"].indexOf(placement) >= 0 ? "x" : "y";
}

// node_modules/@popperjs/core/lib/utils/within.js
function within(min2, value, max2) {
  return max(min2, min(value, max2));
}
function withinMaxClamp(min2, value, max2) {
  var v = within(min2, value, max2);
  return v > max2 ? max2 : v;
}

// node_modules/@popperjs/core/lib/utils/getFreshSideObject.js
function getFreshSideObject() {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0
  };
}

// node_modules/@popperjs/core/lib/utils/mergePaddingObject.js
function mergePaddingObject(paddingObject) {
  return Object.assign({}, getFreshSideObject(), paddingObject);
}

// node_modules/@popperjs/core/lib/utils/expandToHashMap.js
function expandToHashMap(value, keys) {
  return keys.reduce(function(hashMap, key) {
    hashMap[key] = value;
    return hashMap;
  }, {});
}

// node_modules/@popperjs/core/lib/modifiers/arrow.js
var toPaddingObject = function toPaddingObject2(padding, state) {
  padding = typeof padding === "function" ? padding(Object.assign({}, state.rects, {
    placement: state.placement
  })) : padding;
  return mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
};
function arrow(_ref) {
  var _state$modifiersData$;
  var state = _ref.state, name = _ref.name, options = _ref.options;
  var arrowElement = state.elements.arrow;
  var popperOffsets2 = state.modifiersData.popperOffsets;
  var basePlacement = getBasePlacement(state.placement);
  var axis = getMainAxisFromPlacement(basePlacement);
  var isVertical = [left, right].indexOf(basePlacement) >= 0;
  var len = isVertical ? "height" : "width";
  if (!arrowElement || !popperOffsets2) {
    return;
  }
  var paddingObject = toPaddingObject(options.padding, state);
  var arrowRect = getLayoutRect(arrowElement);
  var minProp = axis === "y" ? top : left;
  var maxProp = axis === "y" ? bottom : right;
  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets2[axis] - state.rects.popper[len];
  var startDiff = popperOffsets2[axis] - state.rects.reference[axis];
  var arrowOffsetParent = getOffsetParent(arrowElement);
  var clientSize = arrowOffsetParent ? axis === "y" ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;
  var centerToReference = endDiff / 2 - startDiff / 2;
  var min2 = paddingObject[minProp];
  var max2 = clientSize - arrowRect[len] - paddingObject[maxProp];
  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;
  var offset2 = within(min2, center, max2);
  var axisProp = axis;
  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset2, _state$modifiersData$.centerOffset = offset2 - center, _state$modifiersData$);
}
function effect2(_ref2) {
  var state = _ref2.state, options = _ref2.options;
  var _options$element = options.element, arrowElement = _options$element === void 0 ? "[data-popper-arrow]" : _options$element;
  if (arrowElement == null) {
    return;
  }
  if (typeof arrowElement === "string") {
    arrowElement = state.elements.popper.querySelector(arrowElement);
    if (!arrowElement) {
      return;
    }
  }
  if (true) {
    if (!isHTMLElement(arrowElement)) {
      console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).', "To use an SVG arrow, wrap it in an HTMLElement that will be used as", "the arrow."].join(" "));
    }
  }
  if (!contains(state.elements.popper, arrowElement)) {
    if (true) {
      console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper', "element."].join(" "));
    }
    return;
  }
  state.elements.arrow = arrowElement;
}
var arrow_default = {
  name: "arrow",
  enabled: true,
  phase: "main",
  fn: arrow,
  effect: effect2,
  requires: ["popperOffsets"],
  requiresIfExists: ["preventOverflow"]
};

// node_modules/@popperjs/core/lib/utils/getVariation.js
function getVariation(placement) {
  return placement.split("-")[1];
}

// node_modules/@popperjs/core/lib/modifiers/computeStyles.js
var unsetSides = {
  top: "auto",
  right: "auto",
  bottom: "auto",
  left: "auto"
};
function roundOffsetsByDPR(_ref) {
  var x = _ref.x, y = _ref.y;
  var win = window;
  var dpr = win.devicePixelRatio || 1;
  return {
    x: round(x * dpr) / dpr || 0,
    y: round(y * dpr) / dpr || 0
  };
}
function mapToStyles(_ref2) {
  var _Object$assign2;
  var popper2 = _ref2.popper, popperRect = _ref2.popperRect, placement = _ref2.placement, variation = _ref2.variation, offsets = _ref2.offsets, position = _ref2.position, gpuAcceleration = _ref2.gpuAcceleration, adaptive = _ref2.adaptive, roundOffsets = _ref2.roundOffsets, isFixed = _ref2.isFixed;
  var _offsets$x = offsets.x, x = _offsets$x === void 0 ? 0 : _offsets$x, _offsets$y = offsets.y, y = _offsets$y === void 0 ? 0 : _offsets$y;
  var _ref3 = typeof roundOffsets === "function" ? roundOffsets({
    x,
    y
  }) : {
    x,
    y
  };
  x = _ref3.x;
  y = _ref3.y;
  var hasX = offsets.hasOwnProperty("x");
  var hasY = offsets.hasOwnProperty("y");
  var sideX = left;
  var sideY = top;
  var win = window;
  if (adaptive) {
    var offsetParent = getOffsetParent(popper2);
    var heightProp = "clientHeight";
    var widthProp = "clientWidth";
    if (offsetParent === getWindow(popper2)) {
      offsetParent = getDocumentElement(popper2);
      if (getComputedStyle(offsetParent).position !== "static" && position === "absolute") {
        heightProp = "scrollHeight";
        widthProp = "scrollWidth";
      }
    }
    offsetParent = offsetParent;
    if (placement === top || (placement === left || placement === right) && variation === end) {
      sideY = bottom;
      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : offsetParent[heightProp];
      y -= offsetY - popperRect.height;
      y *= gpuAcceleration ? 1 : -1;
    }
    if (placement === left || (placement === top || placement === bottom) && variation === end) {
      sideX = right;
      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : offsetParent[widthProp];
      x -= offsetX - popperRect.width;
      x *= gpuAcceleration ? 1 : -1;
    }
  }
  var commonStyles = Object.assign({
    position
  }, adaptive && unsetSides);
  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({
    x,
    y
  }) : {
    x,
    y
  };
  x = _ref4.x;
  y = _ref4.y;
  if (gpuAcceleration) {
    var _Object$assign;
    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? "0" : "", _Object$assign[sideX] = hasX ? "0" : "", _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? "translate(" + x + "px, " + y + "px)" : "translate3d(" + x + "px, " + y + "px, 0)", _Object$assign));
  }
  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + "px" : "", _Object$assign2[sideX] = hasX ? x + "px" : "", _Object$assign2.transform = "", _Object$assign2));
}
function computeStyles(_ref5) {
  var state = _ref5.state, options = _ref5.options;
  var _options$gpuAccelerat = options.gpuAcceleration, gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat, _options$adaptive = options.adaptive, adaptive = _options$adaptive === void 0 ? true : _options$adaptive, _options$roundOffsets = options.roundOffsets, roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;
  if (true) {
    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || "";
    if (adaptive && ["transform", "top", "right", "bottom", "left"].some(function(property) {
      return transitionProperty.indexOf(property) >= 0;
    })) {
      console.warn(["Popper: Detected CSS transitions on at least one of the following", 'CSS properties: "transform", "top", "right", "bottom", "left".', "\n\n", 'Disable the "computeStyles" modifier\'s `adaptive` option to allow', "for smooth transitions, or remove these properties from the CSS", "transition declaration on the popper element if only transitioning", "opacity or background-color for example.", "\n\n", "We recommend using the popper element as a wrapper around an inner", "element that can have any CSS property transitioned for animations."].join(" "));
    }
  }
  var commonStyles = {
    placement: getBasePlacement(state.placement),
    variation: getVariation(state.placement),
    popper: state.elements.popper,
    popperRect: state.rects.popper,
    gpuAcceleration,
    isFixed: state.options.strategy === "fixed"
  };
  if (state.modifiersData.popperOffsets != null) {
    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.popperOffsets,
      position: state.options.strategy,
      adaptive,
      roundOffsets
    })));
  }
  if (state.modifiersData.arrow != null) {
    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {
      offsets: state.modifiersData.arrow,
      position: "absolute",
      adaptive: false,
      roundOffsets
    })));
  }
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    "data-popper-placement": state.placement
  });
}
var computeStyles_default = {
  name: "computeStyles",
  enabled: true,
  phase: "beforeWrite",
  fn: computeStyles,
  data: {}
};

// node_modules/@popperjs/core/lib/modifiers/eventListeners.js
var passive = {
  passive: true
};
function effect3(_ref) {
  var state = _ref.state, instance = _ref.instance, options = _ref.options;
  var _options$scroll = options.scroll, scroll = _options$scroll === void 0 ? true : _options$scroll, _options$resize = options.resize, resize = _options$resize === void 0 ? true : _options$resize;
  var window2 = getWindow(state.elements.popper);
  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);
  if (scroll) {
    scrollParents.forEach(function(scrollParent) {
      scrollParent.addEventListener("scroll", instance.update, passive);
    });
  }
  if (resize) {
    window2.addEventListener("resize", instance.update, passive);
  }
  return function() {
    if (scroll) {
      scrollParents.forEach(function(scrollParent) {
        scrollParent.removeEventListener("scroll", instance.update, passive);
      });
    }
    if (resize) {
      window2.removeEventListener("resize", instance.update, passive);
    }
  };
}
var eventListeners_default = {
  name: "eventListeners",
  enabled: true,
  phase: "write",
  fn: function fn() {
  },
  effect: effect3,
  data: {}
};

// node_modules/@popperjs/core/lib/utils/getOppositePlacement.js
var hash = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function getOppositePlacement(placement) {
  return placement.replace(/left|right|bottom|top/g, function(matched) {
    return hash[matched];
  });
}

// node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js
var hash2 = {
  start: "end",
  end: "start"
};
function getOppositeVariationPlacement(placement) {
  return placement.replace(/start|end/g, function(matched) {
    return hash2[matched];
  });
}

// node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js
function getWindowScroll(node) {
  var win = getWindow(node);
  var scrollLeft = win.pageXOffset;
  var scrollTop = win.pageYOffset;
  return {
    scrollLeft,
    scrollTop
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js
function getWindowScrollBarX(element) {
  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;
}

// node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js
function getViewportRect(element) {
  var win = getWindow(element);
  var html = getDocumentElement(element);
  var visualViewport = win.visualViewport;
  var width = html.clientWidth;
  var height = html.clientHeight;
  var x = 0;
  var y = 0;
  if (visualViewport) {
    width = visualViewport.width;
    height = visualViewport.height;
    if (!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {
      x = visualViewport.offsetLeft;
      y = visualViewport.offsetTop;
    }
  }
  return {
    width,
    height,
    x: x + getWindowScrollBarX(element),
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js
function getDocumentRect(element) {
  var _element$ownerDocumen;
  var html = getDocumentElement(element);
  var winScroll = getWindowScroll(element);
  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;
  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);
  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);
  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);
  var y = -winScroll.scrollTop;
  if (getComputedStyle(body || html).direction === "rtl") {
    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;
  }
  return {
    width,
    height,
    x,
    y
  };
}

// node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js
function isScrollParent(element) {
  var _getComputedStyle = getComputedStyle(element), overflow = _getComputedStyle.overflow, overflowX = _getComputedStyle.overflowX, overflowY = _getComputedStyle.overflowY;
  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);
}

// node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js
function getScrollParent(node) {
  if (["html", "body", "#document"].indexOf(getNodeName(node)) >= 0) {
    return node.ownerDocument.body;
  }
  if (isHTMLElement(node) && isScrollParent(node)) {
    return node;
  }
  return getScrollParent(getParentNode(node));
}

// node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js
function listScrollParents(element, list) {
  var _element$ownerDocumen;
  if (list === void 0) {
    list = [];
  }
  var scrollParent = getScrollParent(element);
  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);
  var win = getWindow(scrollParent);
  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;
  var updatedList = list.concat(target);
  return isBody ? updatedList : updatedList.concat(listScrollParents(getParentNode(target)));
}

// node_modules/@popperjs/core/lib/utils/rectToClientRect.js
function rectToClientRect(rect) {
  return Object.assign({}, rect, {
    left: rect.x,
    top: rect.y,
    right: rect.x + rect.width,
    bottom: rect.y + rect.height
  });
}

// node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js
function getInnerBoundingClientRect(element) {
  var rect = getBoundingClientRect(element);
  rect.top = rect.top + element.clientTop;
  rect.left = rect.left + element.clientLeft;
  rect.bottom = rect.top + element.clientHeight;
  rect.right = rect.left + element.clientWidth;
  rect.width = element.clientWidth;
  rect.height = element.clientHeight;
  rect.x = rect.left;
  rect.y = rect.top;
  return rect;
}
function getClientRectFromMixedType(element, clippingParent) {
  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));
}
function getClippingParents(element) {
  var clippingParents2 = listScrollParents(getParentNode(element));
  var canEscapeClipping = ["absolute", "fixed"].indexOf(getComputedStyle(element).position) >= 0;
  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;
  if (!isElement(clipperElement)) {
    return [];
  }
  return clippingParents2.filter(function(clippingParent) {
    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== "body";
  });
}
function getClippingRect(element, boundary, rootBoundary) {
  var mainClippingParents = boundary === "clippingParents" ? getClippingParents(element) : [].concat(boundary);
  var clippingParents2 = [].concat(mainClippingParents, [rootBoundary]);
  var firstClippingParent = clippingParents2[0];
  var clippingRect = clippingParents2.reduce(function(accRect, clippingParent) {
    var rect = getClientRectFromMixedType(element, clippingParent);
    accRect.top = max(rect.top, accRect.top);
    accRect.right = min(rect.right, accRect.right);
    accRect.bottom = min(rect.bottom, accRect.bottom);
    accRect.left = max(rect.left, accRect.left);
    return accRect;
  }, getClientRectFromMixedType(element, firstClippingParent));
  clippingRect.width = clippingRect.right - clippingRect.left;
  clippingRect.height = clippingRect.bottom - clippingRect.top;
  clippingRect.x = clippingRect.left;
  clippingRect.y = clippingRect.top;
  return clippingRect;
}

// node_modules/@popperjs/core/lib/utils/computeOffsets.js
function computeOffsets(_ref) {
  var reference2 = _ref.reference, element = _ref.element, placement = _ref.placement;
  var basePlacement = placement ? getBasePlacement(placement) : null;
  var variation = placement ? getVariation(placement) : null;
  var commonX = reference2.x + reference2.width / 2 - element.width / 2;
  var commonY = reference2.y + reference2.height / 2 - element.height / 2;
  var offsets;
  switch (basePlacement) {
    case top:
      offsets = {
        x: commonX,
        y: reference2.y - element.height
      };
      break;
    case bottom:
      offsets = {
        x: commonX,
        y: reference2.y + reference2.height
      };
      break;
    case right:
      offsets = {
        x: reference2.x + reference2.width,
        y: commonY
      };
      break;
    case left:
      offsets = {
        x: reference2.x - element.width,
        y: commonY
      };
      break;
    default:
      offsets = {
        x: reference2.x,
        y: reference2.y
      };
  }
  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;
  if (mainAxis != null) {
    var len = mainAxis === "y" ? "height" : "width";
    switch (variation) {
      case start:
        offsets[mainAxis] = offsets[mainAxis] - (reference2[len] / 2 - element[len] / 2);
        break;
      case end:
        offsets[mainAxis] = offsets[mainAxis] + (reference2[len] / 2 - element[len] / 2);
        break;
      default:
    }
  }
  return offsets;
}

// node_modules/@popperjs/core/lib/utils/detectOverflow.js
function detectOverflow(state, options) {
  if (options === void 0) {
    options = {};
  }
  var _options = options, _options$placement = _options.placement, placement = _options$placement === void 0 ? state.placement : _options$placement, _options$boundary = _options.boundary, boundary = _options$boundary === void 0 ? clippingParents : _options$boundary, _options$rootBoundary = _options.rootBoundary, rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary, _options$elementConte = _options.elementContext, elementContext = _options$elementConte === void 0 ? popper : _options$elementConte, _options$altBoundary = _options.altBoundary, altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary, _options$padding = _options.padding, padding = _options$padding === void 0 ? 0 : _options$padding;
  var paddingObject = mergePaddingObject(typeof padding !== "number" ? padding : expandToHashMap(padding, basePlacements));
  var altContext = elementContext === popper ? reference : popper;
  var popperRect = state.rects.popper;
  var element = state.elements[altBoundary ? altContext : elementContext];
  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);
  var referenceClientRect = getBoundingClientRect(state.elements.reference);
  var popperOffsets2 = computeOffsets({
    reference: referenceClientRect,
    element: popperRect,
    strategy: "absolute",
    placement
  });
  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets2));
  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect;
  var overflowOffsets = {
    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,
    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,
    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,
    right: elementClientRect.right - clippingClientRect.right + paddingObject.right
  };
  var offsetData = state.modifiersData.offset;
  if (elementContext === popper && offsetData) {
    var offset2 = offsetData[placement];
    Object.keys(overflowOffsets).forEach(function(key) {
      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;
      var axis = [top, bottom].indexOf(key) >= 0 ? "y" : "x";
      overflowOffsets[key] += offset2[axis] * multiply;
    });
  }
  return overflowOffsets;
}

// node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js
function computeAutoPlacement(state, options) {
  if (options === void 0) {
    options = {};
  }
  var _options = options, placement = _options.placement, boundary = _options.boundary, rootBoundary = _options.rootBoundary, padding = _options.padding, flipVariations = _options.flipVariations, _options$allowedAutoP = _options.allowedAutoPlacements, allowedAutoPlacements = _options$allowedAutoP === void 0 ? placements : _options$allowedAutoP;
  var variation = getVariation(placement);
  var placements2 = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function(placement2) {
    return getVariation(placement2) === variation;
  }) : basePlacements;
  var allowedPlacements = placements2.filter(function(placement2) {
    return allowedAutoPlacements.indexOf(placement2) >= 0;
  });
  if (allowedPlacements.length === 0) {
    allowedPlacements = placements2;
    if (true) {
      console.error(["Popper: The `allowedAutoPlacements` option did not allow any", "placements. Ensure the `placement` option matches the variation", "of the allowed placements.", 'For example, "auto" cannot be used to allow "bottom-start".', 'Use "auto-start" instead.'].join(" "));
    }
  }
  var overflows = allowedPlacements.reduce(function(acc, placement2) {
    acc[placement2] = detectOverflow(state, {
      placement: placement2,
      boundary,
      rootBoundary,
      padding
    })[getBasePlacement(placement2)];
    return acc;
  }, {});
  return Object.keys(overflows).sort(function(a, b) {
    return overflows[a] - overflows[b];
  });
}

// node_modules/@popperjs/core/lib/modifiers/flip.js
function getExpandedFallbackPlacements(placement) {
  if (getBasePlacement(placement) === auto) {
    return [];
  }
  var oppositePlacement = getOppositePlacement(placement);
  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];
}
function flip(_ref) {
  var state = _ref.state, options = _ref.options, name = _ref.name;
  if (state.modifiersData[name]._skip) {
    return;
  }
  var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis, specifiedFallbackPlacements = options.fallbackPlacements, padding = options.padding, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, _options$flipVariatio = options.flipVariations, flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio, allowedAutoPlacements = options.allowedAutoPlacements;
  var preferredPlacement = state.options.placement;
  var basePlacement = getBasePlacement(preferredPlacement);
  var isBasePlacement = basePlacement === preferredPlacement;
  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));
  var placements2 = [preferredPlacement].concat(fallbackPlacements).reduce(function(acc, placement2) {
    return acc.concat(getBasePlacement(placement2) === auto ? computeAutoPlacement(state, {
      placement: placement2,
      boundary,
      rootBoundary,
      padding,
      flipVariations,
      allowedAutoPlacements
    }) : placement2);
  }, []);
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var checksMap = /* @__PURE__ */ new Map();
  var makeFallbackChecks = true;
  var firstFittingPlacement = placements2[0];
  for (var i = 0; i < placements2.length; i++) {
    var placement = placements2[i];
    var _basePlacement = getBasePlacement(placement);
    var isStartVariation = getVariation(placement) === start;
    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;
    var len = isVertical ? "width" : "height";
    var overflow = detectOverflow(state, {
      placement,
      boundary,
      rootBoundary,
      altBoundary,
      padding
    });
    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;
    if (referenceRect[len] > popperRect[len]) {
      mainVariationSide = getOppositePlacement(mainVariationSide);
    }
    var altVariationSide = getOppositePlacement(mainVariationSide);
    var checks = [];
    if (checkMainAxis) {
      checks.push(overflow[_basePlacement] <= 0);
    }
    if (checkAltAxis) {
      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);
    }
    if (checks.every(function(check) {
      return check;
    })) {
      firstFittingPlacement = placement;
      makeFallbackChecks = false;
      break;
    }
    checksMap.set(placement, checks);
  }
  if (makeFallbackChecks) {
    var numberOfChecks = flipVariations ? 3 : 1;
    var _loop = function _loop2(_i2) {
      var fittingPlacement = placements2.find(function(placement2) {
        var checks2 = checksMap.get(placement2);
        if (checks2) {
          return checks2.slice(0, _i2).every(function(check) {
            return check;
          });
        }
      });
      if (fittingPlacement) {
        firstFittingPlacement = fittingPlacement;
        return "break";
      }
    };
    for (var _i = numberOfChecks; _i > 0; _i--) {
      var _ret = _loop(_i);
      if (_ret === "break")
        break;
    }
  }
  if (state.placement !== firstFittingPlacement) {
    state.modifiersData[name]._skip = true;
    state.placement = firstFittingPlacement;
    state.reset = true;
  }
}
var flip_default = {
  name: "flip",
  enabled: true,
  phase: "main",
  fn: flip,
  requiresIfExists: ["offset"],
  data: {
    _skip: false
  }
};

// node_modules/@popperjs/core/lib/modifiers/hide.js
function getSideOffsets(overflow, rect, preventedOffsets) {
  if (preventedOffsets === void 0) {
    preventedOffsets = {
      x: 0,
      y: 0
    };
  }
  return {
    top: overflow.top - rect.height - preventedOffsets.y,
    right: overflow.right - rect.width + preventedOffsets.x,
    bottom: overflow.bottom - rect.height + preventedOffsets.y,
    left: overflow.left - rect.width - preventedOffsets.x
  };
}
function isAnySideFullyClipped(overflow) {
  return [top, right, bottom, left].some(function(side) {
    return overflow[side] >= 0;
  });
}
function hide(_ref) {
  var state = _ref.state, name = _ref.name;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var preventedOffsets = state.modifiersData.preventOverflow;
  var referenceOverflow = detectOverflow(state, {
    elementContext: "reference"
  });
  var popperAltOverflow = detectOverflow(state, {
    altBoundary: true
  });
  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);
  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);
  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);
  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);
  state.modifiersData[name] = {
    referenceClippingOffsets,
    popperEscapeOffsets,
    isReferenceHidden,
    hasPopperEscaped
  };
  state.attributes.popper = Object.assign({}, state.attributes.popper, {
    "data-popper-reference-hidden": isReferenceHidden,
    "data-popper-escaped": hasPopperEscaped
  });
}
var hide_default = {
  name: "hide",
  enabled: true,
  phase: "main",
  requiresIfExists: ["preventOverflow"],
  fn: hide
};

// node_modules/@popperjs/core/lib/modifiers/offset.js
function distanceAndSkiddingToXY(placement, rects, offset2) {
  var basePlacement = getBasePlacement(placement);
  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;
  var _ref = typeof offset2 === "function" ? offset2(Object.assign({}, rects, {
    placement
  })) : offset2, skidding = _ref[0], distance = _ref[1];
  skidding = skidding || 0;
  distance = (distance || 0) * invertDistance;
  return [left, right].indexOf(basePlacement) >= 0 ? {
    x: distance,
    y: skidding
  } : {
    x: skidding,
    y: distance
  };
}
function offset(_ref2) {
  var state = _ref2.state, options = _ref2.options, name = _ref2.name;
  var _options$offset = options.offset, offset2 = _options$offset === void 0 ? [0, 0] : _options$offset;
  var data = placements.reduce(function(acc, placement) {
    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset2);
    return acc;
  }, {});
  var _data$state$placement = data[state.placement], x = _data$state$placement.x, y = _data$state$placement.y;
  if (state.modifiersData.popperOffsets != null) {
    state.modifiersData.popperOffsets.x += x;
    state.modifiersData.popperOffsets.y += y;
  }
  state.modifiersData[name] = data;
}
var offset_default = {
  name: "offset",
  enabled: true,
  phase: "main",
  requires: ["popperOffsets"],
  fn: offset
};

// node_modules/@popperjs/core/lib/modifiers/popperOffsets.js
function popperOffsets(_ref) {
  var state = _ref.state, name = _ref.name;
  state.modifiersData[name] = computeOffsets({
    reference: state.rects.reference,
    element: state.rects.popper,
    strategy: "absolute",
    placement: state.placement
  });
}
var popperOffsets_default = {
  name: "popperOffsets",
  enabled: true,
  phase: "read",
  fn: popperOffsets,
  data: {}
};

// node_modules/@popperjs/core/lib/utils/getAltAxis.js
function getAltAxis(axis) {
  return axis === "x" ? "y" : "x";
}

// node_modules/@popperjs/core/lib/modifiers/preventOverflow.js
function preventOverflow(_ref) {
  var state = _ref.state, options = _ref.options, name = _ref.name;
  var _options$mainAxis = options.mainAxis, checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis, _options$altAxis = options.altAxis, checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis, boundary = options.boundary, rootBoundary = options.rootBoundary, altBoundary = options.altBoundary, padding = options.padding, _options$tether = options.tether, tether = _options$tether === void 0 ? true : _options$tether, _options$tetherOffset = options.tetherOffset, tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;
  var overflow = detectOverflow(state, {
    boundary,
    rootBoundary,
    padding,
    altBoundary
  });
  var basePlacement = getBasePlacement(state.placement);
  var variation = getVariation(state.placement);
  var isBasePlacement = !variation;
  var mainAxis = getMainAxisFromPlacement(basePlacement);
  var altAxis = getAltAxis(mainAxis);
  var popperOffsets2 = state.modifiersData.popperOffsets;
  var referenceRect = state.rects.reference;
  var popperRect = state.rects.popper;
  var tetherOffsetValue = typeof tetherOffset === "function" ? tetherOffset(Object.assign({}, state.rects, {
    placement: state.placement
  })) : tetherOffset;
  var normalizedTetherOffsetValue = typeof tetherOffsetValue === "number" ? {
    mainAxis: tetherOffsetValue,
    altAxis: tetherOffsetValue
  } : Object.assign({
    mainAxis: 0,
    altAxis: 0
  }, tetherOffsetValue);
  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;
  var data = {
    x: 0,
    y: 0
  };
  if (!popperOffsets2) {
    return;
  }
  if (checkMainAxis) {
    var _offsetModifierState$;
    var mainSide = mainAxis === "y" ? top : left;
    var altSide = mainAxis === "y" ? bottom : right;
    var len = mainAxis === "y" ? "height" : "width";
    var offset2 = popperOffsets2[mainAxis];
    var min2 = offset2 + overflow[mainSide];
    var max2 = offset2 - overflow[altSide];
    var additive = tether ? -popperRect[len] / 2 : 0;
    var minLen = variation === start ? referenceRect[len] : popperRect[len];
    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len];
    var arrowElement = state.elements.arrow;
    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {
      width: 0,
      height: 0
    };
    var arrowPaddingObject = state.modifiersData["arrow#persistent"] ? state.modifiersData["arrow#persistent"].padding : getFreshSideObject();
    var arrowPaddingMin = arrowPaddingObject[mainSide];
    var arrowPaddingMax = arrowPaddingObject[altSide];
    var arrowLen = within(0, referenceRect[len], arrowRect[len]);
    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;
    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;
    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);
    var clientOffset = arrowOffsetParent ? mainAxis === "y" ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;
    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;
    var tetherMin = offset2 + minOffset - offsetModifierValue - clientOffset;
    var tetherMax = offset2 + maxOffset - offsetModifierValue;
    var preventedOffset = within(tether ? min(min2, tetherMin) : min2, offset2, tether ? max(max2, tetherMax) : max2);
    popperOffsets2[mainAxis] = preventedOffset;
    data[mainAxis] = preventedOffset - offset2;
  }
  if (checkAltAxis) {
    var _offsetModifierState$2;
    var _mainSide = mainAxis === "x" ? top : left;
    var _altSide = mainAxis === "x" ? bottom : right;
    var _offset = popperOffsets2[altAxis];
    var _len = altAxis === "y" ? "height" : "width";
    var _min = _offset + overflow[_mainSide];
    var _max = _offset - overflow[_altSide];
    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;
    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;
    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;
    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;
    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);
    popperOffsets2[altAxis] = _preventedOffset;
    data[altAxis] = _preventedOffset - _offset;
  }
  state.modifiersData[name] = data;
}
var preventOverflow_default = {
  name: "preventOverflow",
  enabled: true,
  phase: "main",
  fn: preventOverflow,
  requiresIfExists: ["offset"]
};

// node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js
function getHTMLElementScroll(element) {
  return {
    scrollLeft: element.scrollLeft,
    scrollTop: element.scrollTop
  };
}

// node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js
function getNodeScroll(node) {
  if (node === getWindow(node) || !isHTMLElement(node)) {
    return getWindowScroll(node);
  } else {
    return getHTMLElementScroll(node);
  }
}

// node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js
function isElementScaled(element) {
  var rect = element.getBoundingClientRect();
  var scaleX = round(rect.width) / element.offsetWidth || 1;
  var scaleY = round(rect.height) / element.offsetHeight || 1;
  return scaleX !== 1 || scaleY !== 1;
}
function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {
  if (isFixed === void 0) {
    isFixed = false;
  }
  var isOffsetParentAnElement = isHTMLElement(offsetParent);
  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);
  var documentElement = getDocumentElement(offsetParent);
  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled);
  var scroll = {
    scrollLeft: 0,
    scrollTop: 0
  };
  var offsets = {
    x: 0,
    y: 0
  };
  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {
    if (getNodeName(offsetParent) !== "body" || isScrollParent(documentElement)) {
      scroll = getNodeScroll(offsetParent);
    }
    if (isHTMLElement(offsetParent)) {
      offsets = getBoundingClientRect(offsetParent, true);
      offsets.x += offsetParent.clientLeft;
      offsets.y += offsetParent.clientTop;
    } else if (documentElement) {
      offsets.x = getWindowScrollBarX(documentElement);
    }
  }
  return {
    x: rect.left + scroll.scrollLeft - offsets.x,
    y: rect.top + scroll.scrollTop - offsets.y,
    width: rect.width,
    height: rect.height
  };
}

// node_modules/@popperjs/core/lib/utils/orderModifiers.js
function order(modifiers) {
  var map = /* @__PURE__ */ new Map();
  var visited = /* @__PURE__ */ new Set();
  var result = [];
  modifiers.forEach(function(modifier) {
    map.set(modifier.name, modifier);
  });
  function sort(modifier) {
    visited.add(modifier.name);
    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);
    requires.forEach(function(dep) {
      if (!visited.has(dep)) {
        var depModifier = map.get(dep);
        if (depModifier) {
          sort(depModifier);
        }
      }
    });
    result.push(modifier);
  }
  modifiers.forEach(function(modifier) {
    if (!visited.has(modifier.name)) {
      sort(modifier);
    }
  });
  return result;
}
function orderModifiers(modifiers) {
  var orderedModifiers = order(modifiers);
  return modifierPhases.reduce(function(acc, phase) {
    return acc.concat(orderedModifiers.filter(function(modifier) {
      return modifier.phase === phase;
    }));
  }, []);
}

// node_modules/@popperjs/core/lib/utils/debounce.js
function debounce(fn2) {
  var pending;
  return function() {
    if (!pending) {
      pending = new Promise(function(resolve) {
        Promise.resolve().then(function() {
          pending = void 0;
          resolve(fn2());
        });
      });
    }
    return pending;
  };
}

// node_modules/@popperjs/core/lib/utils/format.js
function format(str) {
  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }
  return [].concat(args).reduce(function(p, c) {
    return p.replace(/%s/, c);
  }, str);
}

// node_modules/@popperjs/core/lib/utils/validateModifiers.js
var INVALID_MODIFIER_ERROR = 'Popper: modifier "%s" provided an invalid %s property, expected %s but got %s';
var MISSING_DEPENDENCY_ERROR = 'Popper: modifier "%s" requires "%s", but "%s" modifier is not available';
var VALID_PROPERTIES = ["name", "enabled", "phase", "fn", "effect", "requires", "options"];
function validateModifiers(modifiers) {
  modifiers.forEach(function(modifier) {
    [].concat(Object.keys(modifier), VALID_PROPERTIES).filter(function(value, index, self) {
      return self.indexOf(value) === index;
    }).forEach(function(key) {
      switch (key) {
        case "name":
          if (typeof modifier.name !== "string") {
            console.error(format(INVALID_MODIFIER_ERROR, String(modifier.name), '"name"', '"string"', '"' + String(modifier.name) + '"'));
          }
          break;
        case "enabled":
          if (typeof modifier.enabled !== "boolean") {
            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '"enabled"', '"boolean"', '"' + String(modifier.enabled) + '"'));
          }
          break;
        case "phase":
          if (modifierPhases.indexOf(modifier.phase) < 0) {
            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '"phase"', "either " + modifierPhases.join(", "), '"' + String(modifier.phase) + '"'));
          }
          break;
        case "fn":
          if (typeof modifier.fn !== "function") {
            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '"fn"', '"function"', '"' + String(modifier.fn) + '"'));
          }
          break;
        case "effect":
          if (modifier.effect != null && typeof modifier.effect !== "function") {
            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '"effect"', '"function"', '"' + String(modifier.fn) + '"'));
          }
          break;
        case "requires":
          if (modifier.requires != null && !Array.isArray(modifier.requires)) {
            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '"requires"', '"array"', '"' + String(modifier.requires) + '"'));
          }
          break;
        case "requiresIfExists":
          if (!Array.isArray(modifier.requiresIfExists)) {
            console.error(format(INVALID_MODIFIER_ERROR, modifier.name, '"requiresIfExists"', '"array"', '"' + String(modifier.requiresIfExists) + '"'));
          }
          break;
        case "options":
        case "data":
          break;
        default:
          console.error('PopperJS: an invalid property has been provided to the "' + modifier.name + '" modifier, valid properties are ' + VALID_PROPERTIES.map(function(s) {
            return '"' + s + '"';
          }).join(", ") + '; but "' + key + '" was provided.');
      }
      modifier.requires && modifier.requires.forEach(function(requirement) {
        if (modifiers.find(function(mod) {
          return mod.name === requirement;
        }) == null) {
          console.error(format(MISSING_DEPENDENCY_ERROR, String(modifier.name), requirement, requirement));
        }
      });
    });
  });
}

// node_modules/@popperjs/core/lib/utils/uniqueBy.js
function uniqueBy(arr, fn2) {
  var identifiers = /* @__PURE__ */ new Set();
  return arr.filter(function(item) {
    var identifier = fn2(item);
    if (!identifiers.has(identifier)) {
      identifiers.add(identifier);
      return true;
    }
  });
}

// node_modules/@popperjs/core/lib/utils/mergeByName.js
function mergeByName(modifiers) {
  var merged = modifiers.reduce(function(merged2, current) {
    var existing = merged2[current.name];
    merged2[current.name] = existing ? Object.assign({}, existing, current, {
      options: Object.assign({}, existing.options, current.options),
      data: Object.assign({}, existing.data, current.data)
    }) : current;
    return merged2;
  }, {});
  return Object.keys(merged).map(function(key) {
    return merged[key];
  });
}

// node_modules/@popperjs/core/lib/createPopper.js
var INVALID_ELEMENT_ERROR = "Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.";
var INFINITE_LOOP_ERROR = "Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.";
var DEFAULT_OPTIONS = {
  placement: "bottom",
  modifiers: [],
  strategy: "absolute"
};
function areValidElements() {
  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
    args[_key] = arguments[_key];
  }
  return !args.some(function(element) {
    return !(element && typeof element.getBoundingClientRect === "function");
  });
}
function popperGenerator(generatorOptions) {
  if (generatorOptions === void 0) {
    generatorOptions = {};
  }
  var _generatorOptions = generatorOptions, _generatorOptions$def = _generatorOptions.defaultModifiers, defaultModifiers2 = _generatorOptions$def === void 0 ? [] : _generatorOptions$def, _generatorOptions$def2 = _generatorOptions.defaultOptions, defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;
  return function createPopper2(reference2, popper2, options) {
    if (options === void 0) {
      options = defaultOptions;
    }
    var state = {
      placement: "bottom",
      orderedModifiers: [],
      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),
      modifiersData: {},
      elements: {
        reference: reference2,
        popper: popper2
      },
      attributes: {},
      styles: {}
    };
    var effectCleanupFns = [];
    var isDestroyed = false;
    var instance = {
      state,
      setOptions: function setOptions(setOptionsAction) {
        var options2 = typeof setOptionsAction === "function" ? setOptionsAction(state.options) : setOptionsAction;
        cleanupModifierEffects();
        state.options = Object.assign({}, defaultOptions, state.options, options2);
        state.scrollParents = {
          reference: isElement(reference2) ? listScrollParents(reference2) : reference2.contextElement ? listScrollParents(reference2.contextElement) : [],
          popper: listScrollParents(popper2)
        };
        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers2, state.options.modifiers)));
        state.orderedModifiers = orderedModifiers.filter(function(m) {
          return m.enabled;
        });
        if (true) {
          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function(_ref) {
            var name = _ref.name;
            return name;
          });
          validateModifiers(modifiers);
          if (getBasePlacement(state.options.placement) === auto) {
            var flipModifier = state.orderedModifiers.find(function(_ref2) {
              var name = _ref2.name;
              return name === "flip";
            });
            if (!flipModifier) {
              console.error(['Popper: "auto" placements require the "flip" modifier be', "present and enabled to work."].join(" "));
            }
          }
          var _getComputedStyle = getComputedStyle(popper2), marginTop = _getComputedStyle.marginTop, marginRight = _getComputedStyle.marginRight, marginBottom = _getComputedStyle.marginBottom, marginLeft = _getComputedStyle.marginLeft;
          if ([marginTop, marginRight, marginBottom, marginLeft].some(function(margin) {
            return parseFloat(margin);
          })) {
            console.warn(['Popper: CSS "margin" styles cannot be used to apply padding', "between the popper and its reference element or boundary.", "To replicate margin, use the `offset` modifier, as well as", "the `padding` option in the `preventOverflow` and `flip`", "modifiers."].join(" "));
          }
        }
        runModifierEffects();
        return instance.update();
      },
      forceUpdate: function forceUpdate() {
        if (isDestroyed) {
          return;
        }
        var _state$elements = state.elements, reference3 = _state$elements.reference, popper3 = _state$elements.popper;
        if (!areValidElements(reference3, popper3)) {
          if (true) {
            console.error(INVALID_ELEMENT_ERROR);
          }
          return;
        }
        state.rects = {
          reference: getCompositeRect(reference3, getOffsetParent(popper3), state.options.strategy === "fixed"),
          popper: getLayoutRect(popper3)
        };
        state.reset = false;
        state.placement = state.options.placement;
        state.orderedModifiers.forEach(function(modifier) {
          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);
        });
        var __debug_loops__ = 0;
        for (var index = 0; index < state.orderedModifiers.length; index++) {
          if (true) {
            __debug_loops__ += 1;
            if (__debug_loops__ > 100) {
              console.error(INFINITE_LOOP_ERROR);
              break;
            }
          }
          if (state.reset === true) {
            state.reset = false;
            index = -1;
            continue;
          }
          var _state$orderedModifie = state.orderedModifiers[index], fn2 = _state$orderedModifie.fn, _state$orderedModifie2 = _state$orderedModifie.options, _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2, name = _state$orderedModifie.name;
          if (typeof fn2 === "function") {
            state = fn2({
              state,
              options: _options,
              name,
              instance
            }) || state;
          }
        }
      },
      update: debounce(function() {
        return new Promise(function(resolve) {
          instance.forceUpdate();
          resolve(state);
        });
      }),
      destroy: function destroy() {
        cleanupModifierEffects();
        isDestroyed = true;
      }
    };
    if (!areValidElements(reference2, popper2)) {
      if (true) {
        console.error(INVALID_ELEMENT_ERROR);
      }
      return instance;
    }
    instance.setOptions(options).then(function(state2) {
      if (!isDestroyed && options.onFirstUpdate) {
        options.onFirstUpdate(state2);
      }
    });
    function runModifierEffects() {
      state.orderedModifiers.forEach(function(_ref3) {
        var name = _ref3.name, _ref3$options = _ref3.options, options2 = _ref3$options === void 0 ? {} : _ref3$options, effect4 = _ref3.effect;
        if (typeof effect4 === "function") {
          var cleanupFn = effect4({
            state,
            name,
            instance,
            options: options2
          });
          var noopFn = function noopFn2() {
          };
          effectCleanupFns.push(cleanupFn || noopFn);
        }
      });
    }
    function cleanupModifierEffects() {
      effectCleanupFns.forEach(function(fn2) {
        return fn2();
      });
      effectCleanupFns = [];
    }
    return instance;
  };
}

// node_modules/@popperjs/core/lib/popper.js
var defaultModifiers = [eventListeners_default, popperOffsets_default, computeStyles_default, applyStyles_default, offset_default, flip_default, preventOverflow_default, arrow_default, hide_default];
var createPopper = /* @__PURE__ */ popperGenerator({
  defaultModifiers
});

// src/suggester/suggest.ts
var wrapAround = (value, size) => {
  return (value % size + size) % size;
};
var Suggest = class {
  constructor(owner, containerEl, scope) {
    this.owner = owner;
    this.containerEl = containerEl;
    containerEl.on("click", ".suggestion-item", this.onSuggestionClick.bind(this));
    containerEl.on("mousemove", ".suggestion-item", this.onSuggestionMouseover.bind(this));
    scope.register([], "ArrowUp", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem - 1, true);
        return false;
      }
    });
    scope.register([], "ArrowDown", (event) => {
      if (!event.isComposing) {
        this.setSelectedItem(this.selectedItem + 1, true);
        return false;
      }
    });
    scope.register([], "Enter", (event) => {
      if (!event.isComposing) {
        this.useSelectedItem(event);
        return false;
      }
    });
  }
  onSuggestionClick(event, el) {
    event.preventDefault();
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
    this.useSelectedItem(event);
  }
  onSuggestionMouseover(_event, el) {
    const item = this.suggestions.indexOf(el);
    this.setSelectedItem(item, false);
  }
  setSuggestions(values) {
    this.containerEl.empty();
    const suggestionEls = [];
    values.forEach((value) => {
      const suggestionEl = this.containerEl.createDiv("suggestion-item");
      this.owner.renderSuggestion(value, suggestionEl);
      suggestionEls.push(suggestionEl);
    });
    this.values = values;
    this.suggestions = suggestionEls;
    this.setSelectedItem(0, false);
  }
  useSelectedItem(event) {
    const currentValue = this.values[this.selectedItem];
    if (currentValue) {
      this.owner.selectSuggestion(currentValue, event);
    }
  }
  setSelectedItem(selectedIndex, scrollIntoView) {
    const normalizedIndex = wrapAround(selectedIndex, this.suggestions.length);
    const prevSelectedSuggestion = this.suggestions[this.selectedItem];
    const selectedSuggestion = this.suggestions[normalizedIndex];
    prevSelectedSuggestion == null ? void 0 : prevSelectedSuggestion.removeClass("is-selected");
    selectedSuggestion == null ? void 0 : selectedSuggestion.addClass("is-selected");
    this.selectedItem = normalizedIndex;
    if (scrollIntoView) {
      selectedSuggestion.scrollIntoView(false);
    }
  }
};
var TextInputSuggest = class {
  constructor(app2, inputEl) {
    this.app = app2;
    this.inputEl = inputEl;
    this.scope = new import_obsidian9.Scope();
    this.suggestEl = createDiv("suggestion-container");
    const suggestion = this.suggestEl.createDiv("suggestion");
    this.suggest = new Suggest(this, suggestion, this.scope);
    this.scope.register([], "Escape", this.close.bind(this));
    this.inputEl.addEventListener("input", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("focus", this.onInputChanged.bind(this));
    this.inputEl.addEventListener("blur", this.close.bind(this));
    this.suggestEl.on("mousedown", ".suggestion-container", (event) => {
      event.preventDefault();
    });
  }
  onInputChanged() {
    const inputStr = this.inputEl.value;
    const suggestions = this.getSuggestions(inputStr);
    if (!suggestions) {
      this.close();
      return;
    }
    if (suggestions.length > 0) {
      this.suggest.setSuggestions(suggestions);
      this.open(this.app.dom.appContainerEl, this.inputEl);
    } else {
      this.close();
    }
  }
  open(container, inputEl) {
    this.app.keymap.pushScope(this.scope);
    container.appendChild(this.suggestEl);
    this.popper = createPopper(inputEl, this.suggestEl, {
      placement: "bottom-start",
      modifiers: [
        {
          name: "sameWidth",
          enabled: true,
          fn: ({ state, instance }) => {
            const targetWidth = `${state.rects.reference.width}px`;
            if (state.styles.popper.width === targetWidth) {
              return;
            }
            state.styles.popper.width = targetWidth;
            instance.update();
          },
          phase: "beforeWrite",
          requires: ["computeStyles"]
        }
      ]
    });
  }
  close() {
    this.app.keymap.popScope(this.scope);
    this.suggest.setSuggestions([]);
    if (this.popper)
      this.popper.destroy();
    this.suggestEl.detach();
  }
};

// src/utils/fileUtils.ts
var import_obsidian10 = require("obsidian");
function resolve_tfolder(app2, folder_str) {
  folder_str = (0, import_obsidian10.normalizePath)(folder_str);
  const folder = app2.vault.getAbstractFileByPath(folder_str);
  if (!folder) {
    throw new Error(`Folder "${folder_str}" doesn't exist`);
  }
  if (!(folder instanceof import_obsidian10.TFolder)) {
    throw new Error(`${folder_str} is a file, not a folder`);
  }
  return folder;
}
function get_tfiles_from_folder(app2, folder_str) {
  const folder = resolve_tfolder(app2, folder_str);
  const files = [];
  import_obsidian10.Vault.recurseChildren(folder, (file) => {
    if (file instanceof import_obsidian10.TFile) {
      files.push(file);
    }
  });
  files.sort((a, b) => {
    return a.basename.localeCompare(b.basename);
  });
  return files;
}

// src/suggester/FileSuggester.ts
var FileSuggest = class extends TextInputSuggest {
  constructor(app2, inputEl, plugin, folder) {
    super(app2, inputEl);
    this.app = app2;
    this.inputEl = inputEl;
    this.plugin = plugin;
    this.folder = folder;
  }
  getSuggestions(input_str) {
    const all_files = [];
    try {
      all_files.push(...get_tfiles_from_folder(this.app, this.folder));
    } catch (error) {
    }
    const files = [];
    const lower_input_str = input_str.toLowerCase();
    all_files.forEach((file) => {
      if (file instanceof import_obsidian11.TFile && file.extension === "md" && file.path.toLowerCase().contains(lower_input_str)) {
        files.push(file);
      }
    });
    return files;
  }
  renderSuggestion(file, el) {
    el.setText(file.path);
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/fields/fieldManagers/AbstractListBasedField.ts
var AbstractListBasedField = class extends FieldManager2 {
  constructor(field, type) {
    super(field, type);
  }
  setValueListText(header) {
    header.setText(`Preset options: ${Object.values(this.field.options).join(", ")}`);
  }
  createListNoteContainer(parentNode, plugin) {
    const listNoteContainerLabel = parentNode.createDiv({ cls: "metadata-menu-setting-fileClass-search" });
    listNoteContainerLabel.setText(`Path of the note containing the values:`);
    const input = new import_obsidian12.TextComponent(listNoteContainerLabel);
    new FileSuggest(plugin.app, input.inputEl, plugin, "/");
    const listNotePath = this.field.valuesListNotePath;
    input.setValue(listNotePath);
    input.setPlaceholder("Path/of/the/note.md");
    input.onChange((value) => this.field.valuesListNotePath = value);
  }
  removePresetValue(key) {
    let newValues = {};
    for (let _key in this.field.options) {
      if (key !== _key) {
        newValues[_key] = this.field.options[_key];
      }
      ;
    }
    ;
    this.field.options = newValues;
  }
  createValueContainer(parentNode, header, key) {
    const options = this.field.options;
    const presetValue = options[key];
    const valueContainer = parentNode.createDiv({
      cls: "metadata-menu-prompt-container"
    });
    const input = new import_obsidian12.TextComponent(valueContainer);
    this.valuesPromptComponents.push(input);
    input.setValue(presetValue);
    input.onChange((value) => {
      this.field.options[key] = value;
      this.setValueListText(header);
      FieldSettingsModal.removeValidationError(input);
    });
    const valueRemoveButton = new import_obsidian12.ButtonComponent(valueContainer);
    valueRemoveButton.setIcon("trash").onClick((evt) => {
      evt.preventDefault;
      this.removePresetValue(key);
      this.setValueListText(header);
      parentNode.removeChild(valueContainer);
      this.valuesPromptComponents.remove(input);
    });
    if (key != Object.keys(this.field.options)[0]) {
      const valueUpgradeButton = new import_obsidian12.ButtonComponent(valueContainer);
      valueUpgradeButton.setButtonText("\u25B2");
      valueUpgradeButton.onClick((evt) => {
        const thisValue = options[key];
        const inputIndex = this.valuesPromptComponents.indexOf(input);
        const upperComponent = inputIndex !== -1 ? this.valuesPromptComponents[inputIndex - 1] : this.valuesPromptComponents.last();
        if (upperComponent) {
          const upperValue = upperComponent.inputEl.value;
          const upperKey = Object.keys(options).filter((k) => options[k] == upperValue)[0];
          if (upperKey) {
            upperComponent.setValue(thisValue);
            options[upperKey] = thisValue;
            input.setValue(upperValue);
            options[key] = upperValue;
          }
          ;
        }
        ;
      });
    }
    ;
    return input;
  }
  validateValue(value) {
    return __async(this, null, function* () {
      if (this.field.options && Object.values(this.field.options).length > 0) {
        return Object.values(this.field.options).includes(value.trim());
      } else if (this.field.valuesListNotePath) {
        const listNoteValues = yield FieldSetting.getValuesListFromNote(this.field.valuesListNotePath, app);
        return listNoteValues.contains(value.trim());
      } else {
        return false;
      }
    });
  }
  getOptionsStr() {
    if (this.field.valuesListNotePath)
      return this.field.valuesListNotePath;
    else if (Object.values(this.field.options).length)
      return Object.values(this.field.options).join(", ");
    else
      return "";
  }
  validateOptions() {
    let error = false;
    this.valuesPromptComponents.forEach((input) => {
      var _a, _b, _c;
      if (/^[#>-]/.test(input.inputEl.value) && ((_a = input.inputEl.parentElement) == null ? void 0 : _a.lastElementChild)) {
        FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values cannot cannot start with #, >, -");
        error = true;
      }
      ;
      if (/[,]/gu.test(input.inputEl.value) && ((_b = input.inputEl.parentElement) == null ? void 0 : _b.lastElementChild)) {
        FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values cannot contain a comma");
        error = true;
      }
      ;
      if (input.inputEl.value == "" && ((_c = input.inputEl.parentElement) == null ? void 0 : _c.lastElementChild)) {
        FieldSettingsModal.setValidationError(input, input.inputEl.parentElement.lastElementChild, "Values can't be null.");
        error = true;
      }
      ;
    });
    return !error;
  }
  createAddButton(valuesList, valuesListBody, valuesListHeader) {
    const valuesListFooter = valuesList.createDiv();
    const addValue = valuesListFooter.createEl("button");
    addValue.type = "button";
    addValue.textContent = "Add";
    addValue.onClickEvent((evt) => __async(this, null, function* () {
      evt.preventDefault;
      const newKey = yield this.field.insertNewValue("");
      this.createValueContainer(valuesListBody, valuesListHeader, newKey);
    }));
    valuesList.createDiv({ cls: "metadata-menu-separator" }).createEl("hr");
  }
  createSettingContainer(parentContainer, plugin, location) {
    if (location === 0 /* PluginSettings */)
      this.createListNoteContainer(parentContainer, plugin);
    this.presetValuesFields = parentContainer.createDiv();
    this.presetValuesFields.createDiv({ cls: "metadata-menu-separator" }).createEl("hr");
    const valuesList = this.presetValuesFields.createDiv();
    const valuesListHeader = valuesList.createDiv();
    valuesListHeader.createEl("h2");
    valuesListHeader.setText(`Preset options: ${Object.values(this.field.options).join(", ")}`);
    const valuesListBody = valuesList.createDiv();
    Object.keys(this.field.options).forEach((key) => {
      this.valuesPromptComponents.push(this.createValueContainer(valuesListBody, valuesListHeader, key));
    });
    this.createAddButton(valuesList, valuesListBody, valuesListHeader);
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      const fieldValue = dv.el("span", p[this.field.name]);
      fieldContainer.appendChild(fieldValue);
    });
  }
};

// src/optionModals/fields/SelectModal.ts
var import_obsidian13 = require("obsidian");
var valueSelectModal = class extends import_obsidian13.Modal {
  constructor(app2, file, value, field, lineNumber = -1, inFrontMatter = false, top2 = false) {
    super(app2);
    this.app = app2;
    this.file = file;
    this.field = field;
    this.value = value;
    this.newValue = null;
    this.lineNumber = lineNumber;
    this.inFrontmatter = inFrontMatter;
    this.top = top2;
  }
  onOpen() {
    return __async(this, null, function* () {
      this.containerEl.addClass("metadata-menu");
      const inputDiv = this.contentEl.createDiv({ cls: "metadata-menu-modal-value" });
      yield this.buildInputEl(inputDiv);
    });
  }
  buildInputEl(inputDiv) {
    return __async(this, null, function* () {
      const selectEl = new import_obsidian13.DropdownComponent(inputDiv);
      selectEl.selectEl.addClass("metadata-menu-select");
      const options = this.field.options;
      selectEl.addOption("", "--Empty--");
      const listNoteValues = yield FieldSetting.getValuesListFromNote(this.field.valuesListNotePath, this.app);
      listNoteValues.forEach((value) => selectEl.addOption(value, value));
      if (listNoteValues.includes(this.value)) {
        selectEl.setValue(this.value);
      }
      ;
      if (listNoteValues.length === 0) {
        Object.keys(options).forEach((key) => {
          selectEl.addOption(options[key], options[key]);
        });
        if (Object.values(options).includes(this.value)) {
          selectEl.setValue(this.value);
        }
        ;
      }
      selectEl.onChange((value) => this.newValue = value != "--Empty--" ? value : "");
      const submitButton = new import_obsidian13.ButtonComponent(inputDiv);
      submitButton.setTooltip("Save").setIcon("checkmark").onClick(() => __async(this, null, function* () {
        if (this.lineNumber == -1) {
          if (this.newValue || this.newValue == "") {
            replaceValues(this.app, this.file, this.field.name, this.newValue);
          }
          ;
        } else {
          insertValues(this.app, this.file, this.field.name, selectEl.getValue(), this.lineNumber, this.inFrontmatter, this.top);
        }
        ;
        this.close();
      }));
    });
  }
};

// src/fields/fieldManagers/SelectField.ts
var SelectField = class extends AbstractListBasedField {
  constructor(field) {
    super(field, "Select" /* Select */);
    this.valuesPromptComponents = [];
  }
  addMenuOption(name, value, app2, file, category) {
    const modal = new valueSelectModal(app2, file, value, this.field);
    modal.titleEl.setText("Select value");
    if (SelectField.isMenu(category)) {
      category.addItem((item) => {
        item.setTitle(`Update ${name}`);
        item.setIcon("right-triangle");
        item.onClick(() => modal.open());
        item.setSection("target-metadata");
      });
    } else if (SelectField.isSelect(category)) {
      category.addOption(`update_${name}`, `Update <${name}>`);
      category.modals[`update_${name}`] = () => modal.open();
    }
    ;
  }
  createAndOpenFieldModal(app2, file, selectedFieldName, lineNumber, inFrontmatter, top2) {
    const fieldModal = new valueSelectModal(app2, file, "", this.field, lineNumber, inFrontmatter, top2);
    fieldModal.titleEl.setText(`Select option for ${selectedFieldName}`);
    fieldModal.open();
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      var _a;
      const valueContainer = document.createElement("div");
      ;
      const valueLabel = dv.el("span", p[this.field.name] || "");
      valueContainer.appendChild(valueLabel);
      const dropDownButton = document.createElement("button");
      dropDownButton.setText("\u{1F53D}");
      dropDownButton.addClass("metadata-menu-dv-field-button");
      valueContainer.appendChild(dropDownButton);
      const selectContainer = document.createElement("div");
      const select = document.createElement("select");
      select.setAttr("class", "metadata-menu-dv-select");
      selectContainer.appendChild(select);
      const dismissBtn = document.createElement("button");
      dismissBtn.setText("\u274C");
      dismissBtn.addClass("metadata-menu-dv-field-button");
      selectContainer.appendChild(dismissBtn);
      const nullOption = new Option("--select--", void 0);
      select.add(nullOption);
      const listNoteValues = yield FieldSetting.getValuesListFromNote(this.field.valuesListNotePath, plugin.app);
      if (listNoteValues.length) {
        listNoteValues.forEach((o) => {
          const option = new Option(o, o);
          if (p[this.field.name] === o || p[this.field.name] && Object.keys(p[this.field.name]).includes("path") && `[[${p[this.field.name].path.replace(".md", "")}]]` === o) {
            option.selected = true;
          }
          select.add(option);
          select.onchange = () => {
            let newValue = "";
            if (select.value !== void 0) {
              newValue = select.value;
            }
            fieldContainer.removeChild(selectContainer);
            fieldContainer.appendChild(valueContainer);
            SelectField.replaceValues(plugin.app, p["file"]["path"], this.field.name, newValue);
          };
        });
      } else {
        Object.keys(this.field.options).forEach((o) => {
          const option = new Option(this.field.options[o], o);
          if (p[this.field.name] === this.field.options[o] || p[this.field.name] && Object.keys(p[this.field.name]).includes("path") && `[[${p[this.field.name].path.replace(".md", "")}]]` === this.field.options[o]) {
            option.selected = true;
          }
          select.add(option);
          select.onchange = () => {
            let newValue = "";
            if (select.value !== void 0) {
              newValue = this.field.options[select.value];
            }
            fieldContainer.removeChild(selectContainer);
            fieldContainer.appendChild(valueContainer);
            SelectField.replaceValues(plugin.app, p["file"]["path"], this.field.name, newValue);
          };
        });
      }
      dropDownButton.onclick = () => {
        fieldContainer.removeChild(valueContainer);
        fieldContainer.appendChild(selectContainer);
      };
      dismissBtn.onclick = () => {
        fieldContainer.removeChild(selectContainer);
        fieldContainer.appendChild(valueContainer);
      };
      if (!((_a = attrs == null ? void 0 : attrs.options) == null ? void 0 : _a.alwaysOn)) {
        fieldContainer.appendChild(valueContainer);
      } else {
        fieldContainer.appendChild(selectContainer);
      }
    });
  }
};

// src/fields/fieldManagers/CycleField.ts
var CycleField = class extends AbstractListBasedField {
  constructor(field) {
    super(field, "Cycle" /* Cycle */);
    this.valuesPromptComponents = [];
  }
  addMenuOption(name, value, app2, file, category) {
    const options = this.field.options;
    const keys = Object.keys(options);
    const keyForValue = keys.find((key) => options[key] === value);
    let nextOption;
    if (keyForValue) {
      const nextKey = keys[(keys.indexOf(keyForValue) + 1) % keys.length];
      nextOption = options[nextKey];
    } else {
      nextOption = options[Object.keys(options)[0]];
    }
    ;
    if (CycleField.isMenu(category)) {
      category.addItem((item) => {
        item.setTitle(`${name} : ${value} \u25B7 ${nextOption}`);
        item.setIcon("switch");
        item.onClick(() => replaceValues(app2, file, name, nextOption));
        item.setSection("target-metadata");
      });
    } else if (CycleField.isSelect(category)) {
      category.addOption(`${name}_${value}_${nextOption}`, `${name} : ${value} \u25B7 ${nextOption}`);
      category.modals[`${name}_${value}_${nextOption}`] = () => replaceValues(app2, file, name, nextOption);
    }
    ;
  }
  createAndOpenFieldModal(app2, file, selectedFieldName, lineNumber, inFrontmatter, top2) {
    const fieldModal = new valueSelectModal(app2, file, "", this.field, lineNumber, inFrontmatter, top2);
    fieldModal.titleEl.setText(`Select option for ${selectedFieldName}`);
    fieldModal.open();
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      var _a;
      const options = this.field.options;
      const keys = Object.keys(options);
      const keyForValue = keys.find((key) => options[key] === p[this.field.name]);
      let nextOption;
      if (keyForValue) {
        const nextKey = keys[(keys.indexOf(keyForValue) + 1) % keys.length];
        nextOption = options[nextKey];
      } else {
        nextOption = options[Object.keys(options)[0]];
      }
      ;
      const fieldValue = dv.el("span", p[this.field.name], attrs);
      const spacer = document.createElement("div");
      spacer.setAttr("class", "metadata-menu-dv-field-spacer");
      const button = document.createElement("button");
      button.setText("\u25B6\uFE0F");
      button.setAttr("class", "metadata-menu-dv-field-button");
      if (!((_a = attrs == null ? void 0 : attrs.options) == null ? void 0 : _a.alwaysOn)) {
        button.hide();
        spacer.show();
        fieldContainer.onmouseover = () => {
          button.show();
          spacer.hide();
        };
        fieldContainer.onmouseout = () => {
          button.hide();
          spacer.show();
        };
      }
      button.onclick = (e) => {
        var _a2;
        CycleField.replaceValues(plugin.app, p["file"]["path"], this.field.name, nextOption);
        if (!((_a2 = attrs == null ? void 0 : attrs.options) == null ? void 0 : _a2.alwaysOn)) {
          button.hide();
          spacer.show();
        }
      };
      fieldContainer.appendChild(button);
      fieldContainer.appendChild(fieldValue);
      fieldContainer.appendChild(spacer);
    });
  }
};

// src/optionModals/fields/MultiSelectModal.ts
var import_obsidian14 = require("obsidian");
var MultiSelectModal = class extends import_obsidian14.Modal {
  constructor(app2, file, field, initialOptions, lineNumber = -1, inFrontMatter = false, top2 = false) {
    super(app2);
    this.app = app2;
    this.file = file;
    this.field = field;
    if (initialOptions) {
      if (initialOptions.toString().startsWith("[[")) {
        this.options = initialOptions.split(",").map((item) => item.trim());
      } else {
        this.options = initialOptions.toString().replace(/^\[(.*)\]$/, "$1").split(",").map((item) => item.trim());
      }
      ;
    } else {
      this.options = [];
    }
    ;
    this.lineNumber = lineNumber;
    this.inFrontmatter = inFrontMatter;
    this.top = top2;
  }
  onOpen() {
    return __async(this, null, function* () {
      this.containerEl.addClass("metadata-menu");
      const valueGrid = this.contentEl.createDiv({
        cls: "metadata-menu-value-grid"
      });
      const listNoteValues = yield FieldSetting.getValuesListFromNote(this.field.valuesListNotePath, this.app);
      yield this.populateValuesGrid(valueGrid, listNoteValues);
    });
  }
  populateValuesGrid(valueGrid, listNoteValues) {
    return __async(this, null, function* () {
      if (listNoteValues.length === 0) {
        Object.keys(this.field.options).forEach((key) => {
          const presetValue = this.field.options[key];
          this.buildValueToggler(valueGrid, presetValue);
        });
      }
      ;
      listNoteValues.forEach((value) => {
        this.buildValueToggler(valueGrid, value);
      });
      const footer = this.contentEl.createDiv({ cls: "metadata-menu-value-grid-footer" });
      const saveButton = new import_obsidian14.ButtonComponent(footer);
      saveButton.setIcon("checkmark");
      saveButton.onClick(() => __async(this, null, function* () {
        if (this.lineNumber == -1) {
          replaceValues(this.app, this.file, this.field.name, this.options.join(","));
        } else {
          const renderedValues = !this.inFrontmatter ? this.options.join(",") : this.options.length > 1 ? `[${this.options.join(", ")}]` : this.options[0];
          insertValues(this.app, this.file, this.field.name, renderedValues, this.lineNumber, this.inFrontmatter, this.top);
        }
        ;
        this.close();
      }));
      const cancelButton = new import_obsidian14.ExtraButtonComponent(footer);
      cancelButton.setIcon("cross");
      cancelButton.onClick(() => this.close());
    });
  }
  buildValueToggler(valueGrid, presetOption) {
    const valueSelectorContainer = valueGrid.createDiv({
      cls: "metadata-menu-value-selector-container"
    });
    const valueTogglerContainer = valueSelectorContainer.createDiv({
      cls: "metadata-menu-value-selector-toggler"
    });
    const valueToggler = new import_obsidian14.ToggleComponent(valueTogglerContainer);
    this.options.forEach((options) => {
      if (options == presetOption) {
        valueToggler.setValue(true);
      }
      ;
    });
    valueToggler.onChange((value) => {
      if (value && !this.options.includes(presetOption)) {
        this.options.push(presetOption);
      }
      ;
      if (!value) {
        this.options.remove(presetOption);
      }
      ;
    });
    const valueLabel = valueSelectorContainer.createDiv({ cls: "metadata-menu-value-selector-label" });
    valueLabel.setText(presetOption);
  }
};

// src/fields/fieldManagers/MultiField.ts
var MultiField = class extends AbstractListBasedField {
  constructor(field) {
    super(field, "Multi" /* Multi */);
    this.valuesPromptComponents = [];
  }
  addMenuOption(name, value, app2, file, category) {
    const modal = new MultiSelectModal(app2, file, this.field, value);
    modal.titleEl.setText("Select values");
    if (MultiField.isMenu(category)) {
      category.addItem((item) => {
        item.setTitle(`Update <${name}>`);
        item.setIcon("bullet-list");
        item.onClick(() => modal.open());
        item.setSection("target-metadata");
      });
    } else if (MultiField.isSelect(category)) {
      category.addOption(`update_${name}`, `Update <${name}>`);
      category.modals[`update_${name}`] = () => modal.open();
    }
    ;
  }
  createAndOpenFieldModal(app2, file, selectedFieldName, lineNumber, inFrontmatter, top2) {
    const fieldModal = new MultiSelectModal(app2, file, this.field, "", lineNumber, inFrontmatter, top2);
    fieldModal.titleEl.setText(`Select options for ${selectedFieldName}`);
    fieldModal.open();
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      var _a, _b;
      let valueHovered = false;
      let currentValues = [];
      if (p[this.field.name]) {
        if (Object.keys(p[this.field.name]).includes("path")) {
          currentValues = [`[[${p[this.field.name].path.replace(".md", "")}]]`];
        } else if (Array.isArray(p[this.field.name])) {
          currentValues.push(...p[this.field.name].last().split(",").map((v) => v.trim()));
        } else {
          currentValues = p[this.field.name].split(",").map((v) => v.trim());
        }
      }
      const selectContainer = document.createElement("div");
      const select = document.createElement("select");
      select.setAttr("class", "metadata-menu-dv-select");
      selectContainer.appendChild(select);
      const nullOption = new Option("--select--", void 0);
      select.add(nullOption);
      Object.keys(this.field.options).filter((o) => !currentValues.contains(this.field.options[o])).forEach((o) => {
        const option = new Option(this.field.options[o], o);
        if (p[this.field.name] === this.field.options[o]) {
          option.selected = true;
        }
        select.add(option);
      });
      select.onchange = () => {
        const newValues = [...currentValues, this.field.options[select.value]].join(", ");
        MultiField.replaceValues(plugin.app, p["file"]["path"], this.field.name, newValues);
        singleSpacer.hide();
        doubleSpacer.show();
        addBtn.hide();
        fieldContainer.appendChild(valuesContainer);
        fieldContainer.appendChild(singleSpacer);
        fieldContainer.appendChild(doubleSpacer);
        fieldContainer.removeChild(selectContainer);
      };
      select.onkeydown = (e) => {
        if (e.key === "Escape") {
          fieldContainer.appendChild(valuesContainer);
          fieldContainer.appendChild(singleSpacer);
          fieldContainer.appendChild(doubleSpacer);
          fieldContainer.removeChild(selectContainer);
        }
      };
      const closeSelect = document.createElement("button");
      closeSelect.setText("\u274C");
      closeSelect.addClass("metadata-menu-dv-field-button");
      closeSelect.addClass("multi");
      closeSelect.onclick = () => {
        fieldContainer.appendChild(valuesContainer);
        fieldContainer.appendChild(singleSpacer);
        fieldContainer.appendChild(doubleSpacer);
        fieldContainer.removeChild(selectContainer);
      };
      selectContainer.appendChild(closeSelect);
      const valuesContainer = document.createElement("div");
      valuesContainer.addClass("metadata-menu-dv-multi-values-container");
      currentValues.forEach((v) => {
        const valueContainer = document.createElement("div");
        valueContainer.addClass("metadata-menu-dv-multi-values-container");
        const valueRemoveBtn = document.createElement("button");
        valueRemoveBtn.setText("\u274C");
        valueRemoveBtn.addClass("metadata-menu-dv-field-button");
        valueRemoveBtn.addClass("multi");
        valueRemoveBtn.hide();
        valueRemoveBtn.onclick = () => {
          const remainingValues = currentValues.filter((cV) => cV !== v).join(", ");
          MultiField.replaceValues(plugin.app, p["file"]["path"], this.field.name, remainingValues);
        };
        valueContainer.appendChild(valueRemoveBtn);
        const valueLabel = document.createElement("div");
        valueLabel.setText(v);
        valueLabel.addClass("metadata-menu-dv-multi-value-label");
        valueContainer.appendChild(valueLabel);
        valueContainer.onmouseover = () => {
          valueHovered = true;
          doubleSpacer.hide();
          singleSpacer.hide();
          valueRemoveBtn.show();
          valueLabel.addClass("hovered");
        };
        valueContainer.onmouseout = () => {
          valueHovered = false;
          valueRemoveBtn.hide();
          singleSpacer.show();
          doubleSpacer.hide();
          valueLabel.removeClass("hovered");
        };
        valuesContainer.appendChild(valueContainer);
      });
      const addBtn = document.createElement("button");
      addBtn.setText("\u2795");
      addBtn.setAttr("class", "metadata-menu-dv-field-button");
      valuesContainer.appendChild(addBtn);
      addBtn.onclick = () => {
        fieldContainer.removeChild(valuesContainer);
        fieldContainer.removeChild(singleSpacer);
        fieldContainer.removeChild(doubleSpacer);
        fieldContainer.appendChild(selectContainer);
      };
      const singleSpacer = document.createElement("div");
      singleSpacer.setAttr("class", "metadata-menu-dv-field-spacer");
      const doubleSpacer = document.createElement("div");
      doubleSpacer.setAttr("class", "metadata-menu-dv-field-double-spacer");
      if (!((_a = attrs == null ? void 0 : attrs.options) == null ? void 0 : _a.alwaysOn)) {
        addBtn.hide();
        fieldContainer.onmouseover = () => {
          addBtn.show();
          doubleSpacer.hide();
          if (!valueHovered)
            singleSpacer.show();
        };
        fieldContainer.onmouseout = () => {
          addBtn.hide();
          singleSpacer.hide();
          doubleSpacer.show();
        };
      }
      if (!((_b = attrs == null ? void 0 : attrs.options) == null ? void 0 : _b.alwaysOn)) {
        singleSpacer.hide();
        doubleSpacer.show();
        addBtn.hide();
      } else {
        singleSpacer.show();
        doubleSpacer.hide();
        addBtn.show();
      }
      fieldContainer.appendChild(valuesContainer);
      fieldContainer.appendChild(singleSpacer);
      fieldContainer.appendChild(doubleSpacer);
    });
  }
};

// src/fields/fieldManagers/FileField.ts
var import_obsidian16 = require("obsidian");

// src/optionModals/fields/SingleFileModal.ts
var import_obsidian15 = require("obsidian");
var FileFuzzySuggester = class extends import_obsidian15.FuzzySuggestModal {
  constructor(app2, file, field, lineNumber = -1, inFrontMatter = false, top2 = false) {
    super(app2);
    this.app = app2;
    this.file = file;
    this.field = field;
    this.lineNumber = lineNumber;
    this.inFrontmatter = inFrontMatter;
    this.top = top2;
  }
  getItems() {
    try {
      const fileManager = new FieldManager[this.field.type](this.field);
      return fileManager.getFiles();
    } catch (error) {
      this.close();
      throw error;
    }
  }
  getItemText(item) {
    return item.basename;
  }
  onChooseItem(item) {
    if (this.lineNumber == -1) {
      replaceValues(this.app, this.file, this.field.name, FileField.buildMarkDownLink(this.app, this.file, item.basename));
    } else {
      insertValues(this.app, this.file, this.field.name, FileField.buildMarkDownLink(this.app, this.file, item.basename), this.lineNumber, this.inFrontmatter, this.top);
    }
    ;
  }
};

// src/fields/fieldManagers/FileField.ts
var FileField = class extends FieldManager2 {
  constructor(field) {
    super(field, "File" /* File */);
    this.getFiles = () => {
      const getResults = (api) => {
        try {
          return new Function("dv", `return ${this.field.options.dvQueryString}`)(api);
        } catch (error) {
          new import_obsidian16.Notice(`Wrong query for field <${this.field.name}>
check your settings`, 3e3);
        }
      };
      const dataview = app.plugins.plugins["dataview"];
      if (this.field.options.dvQueryString && (dataview == null ? void 0 : dataview.settings.enableDataviewJs) && (dataview == null ? void 0 : dataview.settings.enableInlineDataviewJs)) {
        try {
          const filesPath = getResults(dataview.api).values.map((v) => v.file.path);
          return app.vault.getMarkdownFiles().filter((f) => filesPath.includes(f.path));
        } catch (error) {
          throw error;
        }
      } else {
        return app.vault.getMarkdownFiles();
      }
    };
  }
  static buildMarkDownLink(app2, file, path) {
    const destFile = app2.metadataCache.getFirstLinkpathDest(path, file.path);
    if (destFile) {
      return app2.fileManager.generateMarkdownLink(destFile, file.path, void 0, destFile.basename);
    }
    return "";
  }
  addMenuOption(name, value, app2, file, category) {
    const modal = new FileFuzzySuggester(app2, file, this.field);
    modal.titleEl.setText("Select value");
    if (FileField.isMenu(category)) {
      category.addItem((item) => {
        item.setTitle(`Update ${name}`);
        item.setIcon("search");
        item.onClick(() => modal.open());
        item.setSection("target-metadata");
      });
    } else if (FileField.isSelect(category)) {
      category.addOption(`update_${name}`, `Update <${name}>`);
      category.modals[`update_${name}`] = () => modal.open();
    }
    ;
  }
  createAndOpenFieldModal(app2, file, selectedFieldName, lineNumber, inFrontmatter, top2) {
    const fieldModal = new FileFuzzySuggester(app2, file, this.field, lineNumber, inFrontmatter, top2);
    fieldModal.titleEl.setText(`Enter value for ${selectedFieldName}`);
    fieldModal.open();
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      var _a;
      const fieldValue = dv.el("span", p[this.field.name], attrs);
      const searchBtn = document.createElement("button");
      searchBtn.setText("\u{1F50E}");
      searchBtn.addClass("metadata-menu-dv-field-button");
      const spacer = document.createElement("div");
      spacer.setAttr("class", "metadata-menu-dv-field-spacer");
      const file = app.vault.getAbstractFileByPath(p["file"]["path"]);
      let fieldModal;
      if (file instanceof import_obsidian16.TFile && file.extension == "md") {
        fieldModal = new FileFuzzySuggester(app, file, this.field);
      } else {
        throw Error("path doesn't correspond to a proper file");
      }
      searchBtn.onclick = () => {
        fieldModal.open();
      };
      if (!((_a = attrs == null ? void 0 : attrs.options) == null ? void 0 : _a.alwaysOn)) {
        searchBtn.hide();
        spacer.show();
        fieldContainer.onmouseover = () => {
          searchBtn.show();
          spacer.hide();
        };
        fieldContainer.onmouseout = () => {
          searchBtn.hide();
          spacer.show();
        };
      }
      fieldContainer.appendChild(fieldValue);
      fieldContainer.appendChild(searchBtn);
      fieldContainer.appendChild(spacer);
    });
  }
  createFileContainer(parentContainer) {
    const dvQueryStringContainer = parentContainer.createDiv();
    dvQueryStringContainer.createEl("span", { text: "Dataview Query (optional)", cls: "metadata-menu-field-option" });
    this.dvQueryString = new import_obsidian16.TextAreaComponent(dvQueryStringContainer);
    this.dvQueryString.inputEl.cols = 60;
    this.dvQueryString.inputEl.rows = 6;
    this.dvQueryString.setValue(this.field.options.dvQueryString || "");
    this.dvQueryString.onChange((value) => {
      this.field.options.dvQueryString = value;
      FieldSettingsModal.removeValidationError(this.dvQueryString);
    });
  }
  createSettingContainer(parentContainer, plugin, location) {
    this.fileValidatorField = parentContainer.createDiv({ cls: "metadata-menu-number-options" });
    this.createFileContainer(this.fileValidatorField);
    this.fileValidatorField.createDiv({ cls: "metadata-menu-separator" }).createEl("hr");
  }
  getOptionsStr() {
    return this.field.options.dvQueryString || "";
  }
  validateOptions() {
    return true;
  }
  validateValue(value) {
    return __async(this, null, function* () {
      const basename = value.trim().replace(/^\[\[/g, "").replace(/\]\]$/g, "");
      return !!this.getFiles().map((f) => f.basename).find((item) => item === basename);
    });
  }
};

// src/fields/fieldManagers/DateField.ts
var import_obsidian19 = require("obsidian");
var import_obsidian20 = require("obsidian");

// src/optionModals/fields/DateModal.ts
var import_obsidian17 = require("obsidian");
var import_obsidian18 = require("obsidian");

// node_modules/flatpickr/dist/esm/types/options.js
var HOOKS = [
  "onChange",
  "onClose",
  "onDayCreate",
  "onDestroy",
  "onKeyDown",
  "onMonthChange",
  "onOpen",
  "onParseConfig",
  "onReady",
  "onValueUpdate",
  "onYearChange",
  "onPreCalendarPosition"
];
var defaults = {
  _disable: [],
  allowInput: false,
  allowInvalidPreload: false,
  altFormat: "F j, Y",
  altInput: false,
  altInputClass: "form-control input",
  animate: typeof window === "object" && window.navigator.userAgent.indexOf("MSIE") === -1,
  ariaDateFormat: "F j, Y",
  autoFillDefaultTime: true,
  clickOpens: true,
  closeOnSelect: true,
  conjunction: ", ",
  dateFormat: "Y-m-d",
  defaultHour: 12,
  defaultMinute: 0,
  defaultSeconds: 0,
  disable: [],
  disableMobile: false,
  enableSeconds: false,
  enableTime: false,
  errorHandler: function(err) {
    return typeof console !== "undefined" && console.warn(err);
  },
  getWeek: function(givenDate) {
    var date = new Date(givenDate.getTime());
    date.setHours(0, 0, 0, 0);
    date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);
    var week1 = new Date(date.getFullYear(), 0, 4);
    return 1 + Math.round(((date.getTime() - week1.getTime()) / 864e5 - 3 + (week1.getDay() + 6) % 7) / 7);
  },
  hourIncrement: 1,
  ignoredFocusElements: [],
  inline: false,
  locale: "default",
  minuteIncrement: 5,
  mode: "single",
  monthSelectorType: "dropdown",
  nextArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",
  noCalendar: false,
  now: new Date(),
  onChange: [],
  onClose: [],
  onDayCreate: [],
  onDestroy: [],
  onKeyDown: [],
  onMonthChange: [],
  onOpen: [],
  onParseConfig: [],
  onReady: [],
  onValueUpdate: [],
  onYearChange: [],
  onPreCalendarPosition: [],
  plugins: [],
  position: "auto",
  positionElement: void 0,
  prevArrow: "<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",
  shorthandCurrentMonth: false,
  showMonths: 1,
  static: false,
  time_24hr: false,
  weekNumbers: false,
  wrap: false
};

// node_modules/flatpickr/dist/esm/l10n/default.js
var english = {
  weekdays: {
    shorthand: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    longhand: [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday"
    ]
  },
  months: {
    shorthand: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ],
    longhand: [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ]
  },
  daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
  firstDayOfWeek: 0,
  ordinal: function(nth) {
    var s = nth % 100;
    if (s > 3 && s < 21)
      return "th";
    switch (s % 10) {
      case 1:
        return "st";
      case 2:
        return "nd";
      case 3:
        return "rd";
      default:
        return "th";
    }
  },
  rangeSeparator: " to ",
  weekAbbreviation: "Wk",
  scrollTitle: "Scroll to increment",
  toggleTitle: "Click to toggle",
  amPM: ["AM", "PM"],
  yearAriaLabel: "Year",
  monthAriaLabel: "Month",
  hourAriaLabel: "Hour",
  minuteAriaLabel: "Minute",
  time_24hr: false
};
var default_default = english;

// node_modules/flatpickr/dist/esm/utils/index.js
var pad = function(number, length) {
  if (length === void 0) {
    length = 2;
  }
  return ("000" + number).slice(length * -1);
};
var int = function(bool) {
  return bool === true ? 1 : 0;
};
function debounce2(fn2, wait) {
  var t;
  return function() {
    var _this = this;
    var args = arguments;
    clearTimeout(t);
    t = setTimeout(function() {
      return fn2.apply(_this, args);
    }, wait);
  };
}
var arrayify = function(obj) {
  return obj instanceof Array ? obj : [obj];
};

// node_modules/flatpickr/dist/esm/utils/dom.js
function toggleClass(elem, className, bool) {
  if (bool === true)
    return elem.classList.add(className);
  elem.classList.remove(className);
}
function createElement(tag, className, content) {
  var e = window.document.createElement(tag);
  className = className || "";
  content = content || "";
  e.className = className;
  if (content !== void 0)
    e.textContent = content;
  return e;
}
function clearNode(node) {
  while (node.firstChild)
    node.removeChild(node.firstChild);
}
function findParent(node, condition) {
  if (condition(node))
    return node;
  else if (node.parentNode)
    return findParent(node.parentNode, condition);
  return void 0;
}
function createNumberInput(inputClassName, opts) {
  var wrapper = createElement("div", "numInputWrapper"), numInput = createElement("input", "numInput " + inputClassName), arrowUp = createElement("span", "arrowUp"), arrowDown = createElement("span", "arrowDown");
  if (navigator.userAgent.indexOf("MSIE 9.0") === -1) {
    numInput.type = "number";
  } else {
    numInput.type = "text";
    numInput.pattern = "\\d*";
  }
  if (opts !== void 0)
    for (var key in opts)
      numInput.setAttribute(key, opts[key]);
  wrapper.appendChild(numInput);
  wrapper.appendChild(arrowUp);
  wrapper.appendChild(arrowDown);
  return wrapper;
}
function getEventTarget(event) {
  try {
    if (typeof event.composedPath === "function") {
      var path = event.composedPath();
      return path[0];
    }
    return event.target;
  } catch (error) {
    return event.target;
  }
}

// node_modules/flatpickr/dist/esm/utils/formatting.js
var doNothing = function() {
  return void 0;
};
var monthToStr = function(monthNumber, shorthand, locale) {
  return locale.months[shorthand ? "shorthand" : "longhand"][monthNumber];
};
var revFormat = {
  D: doNothing,
  F: function(dateObj, monthName, locale) {
    dateObj.setMonth(locale.months.longhand.indexOf(monthName));
  },
  G: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  H: function(dateObj, hour) {
    dateObj.setHours(parseFloat(hour));
  },
  J: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  K: function(dateObj, amPM, locale) {
    dateObj.setHours(dateObj.getHours() % 12 + 12 * int(new RegExp(locale.amPM[1], "i").test(amPM)));
  },
  M: function(dateObj, shortMonth, locale) {
    dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));
  },
  S: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  U: function(_, unixSeconds) {
    return new Date(parseFloat(unixSeconds) * 1e3);
  },
  W: function(dateObj, weekNum, locale) {
    var weekNumber = parseInt(weekNum);
    var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);
    date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);
    return date;
  },
  Y: function(dateObj, year) {
    dateObj.setFullYear(parseFloat(year));
  },
  Z: function(_, ISODate) {
    return new Date(ISODate);
  },
  d: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  h: function(dateObj, hour) {
    dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));
  },
  i: function(dateObj, minutes) {
    dateObj.setMinutes(parseFloat(minutes));
  },
  j: function(dateObj, day) {
    dateObj.setDate(parseFloat(day));
  },
  l: doNothing,
  m: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  n: function(dateObj, month) {
    dateObj.setMonth(parseFloat(month) - 1);
  },
  s: function(dateObj, seconds) {
    dateObj.setSeconds(parseFloat(seconds));
  },
  u: function(_, unixMillSeconds) {
    return new Date(parseFloat(unixMillSeconds));
  },
  w: doNothing,
  y: function(dateObj, year) {
    dateObj.setFullYear(2e3 + parseFloat(year));
  }
};
var tokenRegex = {
  D: "",
  F: "",
  G: "(\\d\\d|\\d)",
  H: "(\\d\\d|\\d)",
  J: "(\\d\\d|\\d)\\w+",
  K: "",
  M: "",
  S: "(\\d\\d|\\d)",
  U: "(.+)",
  W: "(\\d\\d|\\d)",
  Y: "(\\d{4})",
  Z: "(.+)",
  d: "(\\d\\d|\\d)",
  h: "(\\d\\d|\\d)",
  i: "(\\d\\d|\\d)",
  j: "(\\d\\d|\\d)",
  l: "",
  m: "(\\d\\d|\\d)",
  n: "(\\d\\d|\\d)",
  s: "(\\d\\d|\\d)",
  u: "(.+)",
  w: "(\\d\\d|\\d)",
  y: "(\\d{2})"
};
var formats = {
  Z: function(date) {
    return date.toISOString();
  },
  D: function(date, locale, options) {
    return locale.weekdays.shorthand[formats.w(date, locale, options)];
  },
  F: function(date, locale, options) {
    return monthToStr(formats.n(date, locale, options) - 1, false, locale);
  },
  G: function(date, locale, options) {
    return pad(formats.h(date, locale, options));
  },
  H: function(date) {
    return pad(date.getHours());
  },
  J: function(date, locale) {
    return locale.ordinal !== void 0 ? date.getDate() + locale.ordinal(date.getDate()) : date.getDate();
  },
  K: function(date, locale) {
    return locale.amPM[int(date.getHours() > 11)];
  },
  M: function(date, locale) {
    return monthToStr(date.getMonth(), true, locale);
  },
  S: function(date) {
    return pad(date.getSeconds());
  },
  U: function(date) {
    return date.getTime() / 1e3;
  },
  W: function(date, _, options) {
    return options.getWeek(date);
  },
  Y: function(date) {
    return pad(date.getFullYear(), 4);
  },
  d: function(date) {
    return pad(date.getDate());
  },
  h: function(date) {
    return date.getHours() % 12 ? date.getHours() % 12 : 12;
  },
  i: function(date) {
    return pad(date.getMinutes());
  },
  j: function(date) {
    return date.getDate();
  },
  l: function(date, locale) {
    return locale.weekdays.longhand[date.getDay()];
  },
  m: function(date) {
    return pad(date.getMonth() + 1);
  },
  n: function(date) {
    return date.getMonth() + 1;
  },
  s: function(date) {
    return date.getSeconds();
  },
  u: function(date) {
    return date.getTime();
  },
  w: function(date) {
    return date.getDay();
  },
  y: function(date) {
    return String(date.getFullYear()).substring(2);
  }
};

// node_modules/flatpickr/dist/esm/utils/dates.js
var createDateFormatter = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;
  return function(dateObj, frmt, overrideLocale) {
    var locale = overrideLocale || l10n;
    if (config.formatDate !== void 0 && !isMobile) {
      return config.formatDate(dateObj, frmt, locale);
    }
    return frmt.split("").map(function(c, i, arr) {
      return formats[c] && arr[i - 1] !== "\\" ? formats[c](dateObj, locale, config) : c !== "\\" ? c : "";
    }).join("");
  };
};
var createDateParser = function(_a) {
  var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;
  return function(date, givenFormat, timeless, customLocale) {
    if (date !== 0 && !date)
      return void 0;
    var locale = customLocale || l10n;
    var parsedDate;
    var dateOrig = date;
    if (date instanceof Date)
      parsedDate = new Date(date.getTime());
    else if (typeof date !== "string" && date.toFixed !== void 0)
      parsedDate = new Date(date);
    else if (typeof date === "string") {
      var format2 = givenFormat || (config || defaults).dateFormat;
      var datestr = String(date).trim();
      if (datestr === "today") {
        parsedDate = new Date();
        timeless = true;
      } else if (config && config.parseDate) {
        parsedDate = config.parseDate(date, format2);
      } else if (/Z$/.test(datestr) || /GMT$/.test(datestr)) {
        parsedDate = new Date(date);
      } else {
        var matched = void 0, ops = [];
        for (var i = 0, matchIndex = 0, regexStr = ""; i < format2.length; i++) {
          var token = format2[i];
          var isBackSlash = token === "\\";
          var escaped = format2[i - 1] === "\\" || isBackSlash;
          if (tokenRegex[token] && !escaped) {
            regexStr += tokenRegex[token];
            var match = new RegExp(regexStr).exec(date);
            if (match && (matched = true)) {
              ops[token !== "Y" ? "push" : "unshift"]({
                fn: revFormat[token],
                val: match[++matchIndex]
              });
            }
          } else if (!isBackSlash)
            regexStr += ".";
        }
        parsedDate = !config || !config.noCalendar ? new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0) : new Date(new Date().setHours(0, 0, 0, 0));
        ops.forEach(function(_a2) {
          var fn2 = _a2.fn, val = _a2.val;
          return parsedDate = fn2(parsedDate, val, locale) || parsedDate;
        });
        parsedDate = matched ? parsedDate : void 0;
      }
    }
    if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {
      config.errorHandler(new Error("Invalid date provided: " + dateOrig));
      return void 0;
    }
    if (timeless === true)
      parsedDate.setHours(0, 0, 0, 0);
    return parsedDate;
  };
};
function compareDates(date1, date2, timeless) {
  if (timeless === void 0) {
    timeless = true;
  }
  if (timeless !== false) {
    return new Date(date1.getTime()).setHours(0, 0, 0, 0) - new Date(date2.getTime()).setHours(0, 0, 0, 0);
  }
  return date1.getTime() - date2.getTime();
}
var isBetween = function(ts, ts1, ts2) {
  return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);
};
var calculateSecondsSinceMidnight = function(hours, minutes, seconds) {
  return hours * 3600 + minutes * 60 + seconds;
};
var parseSeconds = function(secondsSinceMidnight) {
  var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;
  return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];
};
var duration = {
  DAY: 864e5
};
function getDefaultHours(config) {
  var hours = config.defaultHour;
  var minutes = config.defaultMinute;
  var seconds = config.defaultSeconds;
  if (config.minDate !== void 0) {
    var minHour = config.minDate.getHours();
    var minMinutes = config.minDate.getMinutes();
    var minSeconds = config.minDate.getSeconds();
    if (hours < minHour) {
      hours = minHour;
    }
    if (hours === minHour && minutes < minMinutes) {
      minutes = minMinutes;
    }
    if (hours === minHour && minutes === minMinutes && seconds < minSeconds)
      seconds = config.minDate.getSeconds();
  }
  if (config.maxDate !== void 0) {
    var maxHr = config.maxDate.getHours();
    var maxMinutes = config.maxDate.getMinutes();
    hours = Math.min(hours, maxHr);
    if (hours === maxHr)
      minutes = Math.min(maxMinutes, minutes);
    if (hours === maxHr && minutes === maxMinutes)
      seconds = config.maxDate.getSeconds();
  }
  return { hours, minutes, seconds };
}

// node_modules/flatpickr/dist/esm/utils/polyfills.js
if (typeof Object.assign !== "function") {
  Object.assign = function(target) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      args[_i - 1] = arguments[_i];
    }
    if (!target) {
      throw TypeError("Cannot convert undefined or null to object");
    }
    var _loop_1 = function(source2) {
      if (source2) {
        Object.keys(source2).forEach(function(key) {
          return target[key] = source2[key];
        });
      }
    };
    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {
      var source = args_1[_a];
      _loop_1(source);
    }
    return target;
  };
}

// node_modules/flatpickr/dist/esm/index.js
var __assign = function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s)
        if (Object.prototype.hasOwnProperty.call(s, p))
          t[p] = s[p];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var __spreadArrays = function() {
  for (var s = 0, i = 0, il = arguments.length; i < il; i++)
    s += arguments[i].length;
  for (var r = Array(s), k = 0, i = 0; i < il; i++)
    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
      r[k] = a[j];
  return r;
};
var DEBOUNCED_CHANGE_MS = 300;
function FlatpickrInstance(element, instanceConfig) {
  var self = {
    config: __assign(__assign({}, defaults), flatpickr.defaultConfig),
    l10n: default_default
  };
  self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  self._handlers = [];
  self.pluginElements = [];
  self.loadedPlugins = [];
  self._bind = bind;
  self._setHoursFromDate = setHoursFromDate;
  self._positionCalendar = positionCalendar;
  self.changeMonth = changeMonth;
  self.changeYear = changeYear;
  self.clear = clear;
  self.close = close;
  self.onMouseOver = onMouseOver;
  self._createElement = createElement;
  self.createDay = createDay;
  self.destroy = destroy;
  self.isEnabled = isEnabled;
  self.jumpToDate = jumpToDate;
  self.updateValue = updateValue;
  self.open = open;
  self.redraw = redraw;
  self.set = set;
  self.setDate = setDate;
  self.toggle = toggle;
  function setupHelperFunctions() {
    self.utils = {
      getDaysInMonth: function(month, yr) {
        if (month === void 0) {
          month = self.currentMonth;
        }
        if (yr === void 0) {
          yr = self.currentYear;
        }
        if (month === 1 && (yr % 4 === 0 && yr % 100 !== 0 || yr % 400 === 0))
          return 29;
        return self.l10n.daysInMonth[month];
      }
    };
  }
  function init() {
    self.element = self.input = element;
    self.isOpen = false;
    parseConfig();
    setupLocale();
    setupInputs();
    setupDates();
    setupHelperFunctions();
    if (!self.isMobile)
      build();
    bindEvents();
    if (self.selectedDates.length || self.config.noCalendar) {
      if (self.config.enableTime) {
        setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : void 0);
      }
      updateValue(false);
    }
    setCalendarWidth();
    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    if (!self.isMobile && isSafari) {
      positionCalendar();
    }
    triggerEvent("onReady");
  }
  function getClosestActiveElement() {
    var _a;
    return ((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode()).activeElement || document.activeElement;
  }
  function bindToInstance(fn2) {
    return fn2.bind(self);
  }
  function setCalendarWidth() {
    var config = self.config;
    if (config.weekNumbers === false && config.showMonths === 1) {
      return;
    } else if (config.noCalendar !== true) {
      window.requestAnimationFrame(function() {
        if (self.calendarContainer !== void 0) {
          self.calendarContainer.style.visibility = "hidden";
          self.calendarContainer.style.display = "block";
        }
        if (self.daysContainer !== void 0) {
          var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;
          self.daysContainer.style.width = daysWidth + "px";
          self.calendarContainer.style.width = daysWidth + (self.weekWrapper !== void 0 ? self.weekWrapper.offsetWidth : 0) + "px";
          self.calendarContainer.style.removeProperty("visibility");
          self.calendarContainer.style.removeProperty("display");
        }
      });
    }
  }
  function updateTime(e) {
    if (self.selectedDates.length === 0) {
      var defaultDate = self.config.minDate === void 0 || compareDates(new Date(), self.config.minDate) >= 0 ? new Date() : new Date(self.config.minDate.getTime());
      var defaults2 = getDefaultHours(self.config);
      defaultDate.setHours(defaults2.hours, defaults2.minutes, defaults2.seconds, defaultDate.getMilliseconds());
      self.selectedDates = [defaultDate];
      self.latestSelectedDateObj = defaultDate;
    }
    if (e !== void 0 && e.type !== "blur") {
      timeWrapper(e);
    }
    var prevValue = self._input.value;
    setHoursFromInputs();
    updateValue();
    if (self._input.value !== prevValue) {
      self._debouncedChange();
    }
  }
  function ampm2military(hour, amPM) {
    return hour % 12 + 12 * int(amPM === self.l10n.amPM[1]);
  }
  function military2ampm(hour) {
    switch (hour % 24) {
      case 0:
      case 12:
        return 12;
      default:
        return hour % 12;
    }
  }
  function setHoursFromInputs() {
    if (self.hourElement === void 0 || self.minuteElement === void 0)
      return;
    var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== void 0 ? (parseInt(self.secondElement.value, 10) || 0) % 60 : 0;
    if (self.amPM !== void 0) {
      hours = ampm2military(hours, self.amPM.textContent);
    }
    var limitMinHours = self.config.minTime !== void 0 || self.config.minDate && self.minDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.minDate, true) === 0;
    var limitMaxHours = self.config.maxTime !== void 0 || self.config.maxDate && self.maxDateHasTime && self.latestSelectedDateObj && compareDates(self.latestSelectedDateObj, self.config.maxDate, true) === 0;
    if (self.config.maxTime !== void 0 && self.config.minTime !== void 0 && self.config.minTime > self.config.maxTime) {
      var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());
      var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());
      var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);
      if (currentTime > maxBound && currentTime < minBound) {
        var result = parseSeconds(minBound);
        hours = result[0];
        minutes = result[1];
        seconds = result[2];
      }
    } else {
      if (limitMaxHours) {
        var maxTime = self.config.maxTime !== void 0 ? self.config.maxTime : self.config.maxDate;
        hours = Math.min(hours, maxTime.getHours());
        if (hours === maxTime.getHours())
          minutes = Math.min(minutes, maxTime.getMinutes());
        if (minutes === maxTime.getMinutes())
          seconds = Math.min(seconds, maxTime.getSeconds());
      }
      if (limitMinHours) {
        var minTime = self.config.minTime !== void 0 ? self.config.minTime : self.config.minDate;
        hours = Math.max(hours, minTime.getHours());
        if (hours === minTime.getHours() && minutes < minTime.getMinutes())
          minutes = minTime.getMinutes();
        if (minutes === minTime.getMinutes())
          seconds = Math.max(seconds, minTime.getSeconds());
      }
    }
    setHours(hours, minutes, seconds);
  }
  function setHoursFromDate(dateObj) {
    var date = dateObj || self.latestSelectedDateObj;
    if (date && date instanceof Date) {
      setHours(date.getHours(), date.getMinutes(), date.getSeconds());
    }
  }
  function setHours(hours, minutes, seconds) {
    if (self.latestSelectedDateObj !== void 0) {
      self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);
    }
    if (!self.hourElement || !self.minuteElement || self.isMobile)
      return;
    self.hourElement.value = pad(!self.config.time_24hr ? (12 + hours) % 12 + 12 * int(hours % 12 === 0) : hours);
    self.minuteElement.value = pad(minutes);
    if (self.amPM !== void 0)
      self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];
    if (self.secondElement !== void 0)
      self.secondElement.value = pad(seconds);
  }
  function onYearInput(event) {
    var eventTarget = getEventTarget(event);
    var year = parseInt(eventTarget.value) + (event.delta || 0);
    if (year / 1e3 > 1 || event.key === "Enter" && !/[^\d]/.test(year.toString())) {
      changeYear(year);
    }
  }
  function bind(element2, event, handler, options) {
    if (event instanceof Array)
      return event.forEach(function(ev) {
        return bind(element2, ev, handler, options);
      });
    if (element2 instanceof Array)
      return element2.forEach(function(el) {
        return bind(el, event, handler, options);
      });
    element2.addEventListener(event, handler, options);
    self._handlers.push({
      remove: function() {
        return element2.removeEventListener(event, handler, options);
      }
    });
  }
  function triggerChange() {
    triggerEvent("onChange");
  }
  function bindEvents() {
    if (self.config.wrap) {
      ["open", "close", "toggle", "clear"].forEach(function(evt) {
        Array.prototype.forEach.call(self.element.querySelectorAll("[data-" + evt + "]"), function(el) {
          return bind(el, "click", self[evt]);
        });
      });
    }
    if (self.isMobile) {
      setupMobile();
      return;
    }
    var debouncedResize = debounce2(onResize, 50);
    self._debouncedChange = debounce2(triggerChange, DEBOUNCED_CHANGE_MS);
    if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))
      bind(self.daysContainer, "mouseover", function(e) {
        if (self.config.mode === "range")
          onMouseOver(getEventTarget(e));
      });
    bind(self._input, "keydown", onKeyDown);
    if (self.calendarContainer !== void 0) {
      bind(self.calendarContainer, "keydown", onKeyDown);
    }
    if (!self.config.inline && !self.config.static)
      bind(window, "resize", debouncedResize);
    if (window.ontouchstart !== void 0)
      bind(window.document, "touchstart", documentClick);
    else
      bind(window.document, "mousedown", documentClick);
    bind(window.document, "focus", documentClick, { capture: true });
    if (self.config.clickOpens === true) {
      bind(self._input, "focus", self.open);
      bind(self._input, "click", self.open);
    }
    if (self.daysContainer !== void 0) {
      bind(self.monthNav, "click", onMonthNavClick);
      bind(self.monthNav, ["keyup", "increment"], onYearInput);
      bind(self.daysContainer, "click", selectDate);
    }
    if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0) {
      var selText = function(e) {
        return getEventTarget(e).select();
      };
      bind(self.timeContainer, ["increment"], updateTime);
      bind(self.timeContainer, "blur", updateTime, { capture: true });
      bind(self.timeContainer, "click", timeIncrement);
      bind([self.hourElement, self.minuteElement], ["focus", "click"], selText);
      if (self.secondElement !== void 0)
        bind(self.secondElement, "focus", function() {
          return self.secondElement && self.secondElement.select();
        });
      if (self.amPM !== void 0) {
        bind(self.amPM, "click", function(e) {
          updateTime(e);
        });
      }
    }
    if (self.config.allowInput) {
      bind(self._input, "blur", onBlur);
    }
  }
  function jumpToDate(jumpDate, triggerChange2) {
    var jumpTo = jumpDate !== void 0 ? self.parseDate(jumpDate) : self.latestSelectedDateObj || (self.config.minDate && self.config.minDate > self.now ? self.config.minDate : self.config.maxDate && self.config.maxDate < self.now ? self.config.maxDate : self.now);
    var oldYear = self.currentYear;
    var oldMonth = self.currentMonth;
    try {
      if (jumpTo !== void 0) {
        self.currentYear = jumpTo.getFullYear();
        self.currentMonth = jumpTo.getMonth();
      }
    } catch (e) {
      e.message = "Invalid date supplied: " + jumpTo;
      self.config.errorHandler(e);
    }
    if (triggerChange2 && self.currentYear !== oldYear) {
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    if (triggerChange2 && (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {
      triggerEvent("onMonthChange");
    }
    self.redraw();
  }
  function timeIncrement(e) {
    var eventTarget = getEventTarget(e);
    if (~eventTarget.className.indexOf("arrow"))
      incrementNumInput(e, eventTarget.classList.contains("arrowUp") ? 1 : -1);
  }
  function incrementNumInput(e, delta, inputElem) {
    var target = e && getEventTarget(e);
    var input = inputElem || target && target.parentNode && target.parentNode.firstChild;
    var event = createEvent("increment");
    event.delta = delta;
    input && input.dispatchEvent(event);
  }
  function build() {
    var fragment = window.document.createDocumentFragment();
    self.calendarContainer = createElement("div", "flatpickr-calendar");
    self.calendarContainer.tabIndex = -1;
    if (!self.config.noCalendar) {
      fragment.appendChild(buildMonthNav());
      self.innerContainer = createElement("div", "flatpickr-innerContainer");
      if (self.config.weekNumbers) {
        var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;
        self.innerContainer.appendChild(weekWrapper);
        self.weekNumbers = weekNumbers;
        self.weekWrapper = weekWrapper;
      }
      self.rContainer = createElement("div", "flatpickr-rContainer");
      self.rContainer.appendChild(buildWeekdays());
      if (!self.daysContainer) {
        self.daysContainer = createElement("div", "flatpickr-days");
        self.daysContainer.tabIndex = -1;
      }
      buildDays();
      self.rContainer.appendChild(self.daysContainer);
      self.innerContainer.appendChild(self.rContainer);
      fragment.appendChild(self.innerContainer);
    }
    if (self.config.enableTime) {
      fragment.appendChild(buildTime());
    }
    toggleClass(self.calendarContainer, "rangeMode", self.config.mode === "range");
    toggleClass(self.calendarContainer, "animate", self.config.animate === true);
    toggleClass(self.calendarContainer, "multiMonth", self.config.showMonths > 1);
    self.calendarContainer.appendChild(fragment);
    var customAppend = self.config.appendTo !== void 0 && self.config.appendTo.nodeType !== void 0;
    if (self.config.inline || self.config.static) {
      self.calendarContainer.classList.add(self.config.inline ? "inline" : "static");
      if (self.config.inline) {
        if (!customAppend && self.element.parentNode)
          self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);
        else if (self.config.appendTo !== void 0)
          self.config.appendTo.appendChild(self.calendarContainer);
      }
      if (self.config.static) {
        var wrapper = createElement("div", "flatpickr-wrapper");
        if (self.element.parentNode)
          self.element.parentNode.insertBefore(wrapper, self.element);
        wrapper.appendChild(self.element);
        if (self.altInput)
          wrapper.appendChild(self.altInput);
        wrapper.appendChild(self.calendarContainer);
      }
    }
    if (!self.config.static && !self.config.inline)
      (self.config.appendTo !== void 0 ? self.config.appendTo : window.document.body).appendChild(self.calendarContainer);
  }
  function createDay(className, date, _dayNumber, i) {
    var dateIsEnabled = isEnabled(date, true), dayElement = createElement("span", className, date.getDate().toString());
    dayElement.dateObj = date;
    dayElement.$i = i;
    dayElement.setAttribute("aria-label", self.formatDate(date, self.config.ariaDateFormat));
    if (className.indexOf("hidden") === -1 && compareDates(date, self.now) === 0) {
      self.todayDateElem = dayElement;
      dayElement.classList.add("today");
      dayElement.setAttribute("aria-current", "date");
    }
    if (dateIsEnabled) {
      dayElement.tabIndex = -1;
      if (isDateSelected(date)) {
        dayElement.classList.add("selected");
        self.selectedDateElem = dayElement;
        if (self.config.mode === "range") {
          toggleClass(dayElement, "startRange", self.selectedDates[0] && compareDates(date, self.selectedDates[0], true) === 0);
          toggleClass(dayElement, "endRange", self.selectedDates[1] && compareDates(date, self.selectedDates[1], true) === 0);
          if (className === "nextMonthDay")
            dayElement.classList.add("inRange");
        }
      }
    } else {
      dayElement.classList.add("flatpickr-disabled");
    }
    if (self.config.mode === "range") {
      if (isDateInRange(date) && !isDateSelected(date))
        dayElement.classList.add("inRange");
    }
    if (self.weekNumbers && self.config.showMonths === 1 && className !== "prevMonthDay" && i % 7 === 6) {
      self.weekNumbers.insertAdjacentHTML("beforeend", "<span class='flatpickr-day'>" + self.config.getWeek(date) + "</span>");
    }
    triggerEvent("onDayCreate", dayElement);
    return dayElement;
  }
  function focusOnDayElem(targetNode) {
    targetNode.focus();
    if (self.config.mode === "range")
      onMouseOver(targetNode);
  }
  function getFirstAvailableDay(delta) {
    var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    for (var m = startMonth; m != endMonth; m += delta) {
      var month = self.daysContainer.children[m];
      var startIndex = delta > 0 ? 0 : month.children.length - 1;
      var endIndex = delta > 0 ? month.children.length : -1;
      for (var i = startIndex; i != endIndex; i += delta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj))
          return c;
      }
    }
    return void 0;
  }
  function getNextAvailableDay(current, delta) {
    var givenMonth = current.className.indexOf("Month") === -1 ? current.dateObj.getMonth() : self.currentMonth;
    var endMonth = delta > 0 ? self.config.showMonths : -1;
    var loopDelta = delta > 0 ? 1 : -1;
    for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {
      var month = self.daysContainer.children[m];
      var startIndex = givenMonth - self.currentMonth === m ? current.$i + delta : delta < 0 ? month.children.length - 1 : 0;
      var numMonthDays = month.children.length;
      for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {
        var c = month.children[i];
        if (c.className.indexOf("hidden") === -1 && isEnabled(c.dateObj) && Math.abs(current.$i - i) >= Math.abs(delta))
          return focusOnDayElem(c);
      }
    }
    self.changeMonth(loopDelta);
    focusOnDay(getFirstAvailableDay(loopDelta), 0);
    return void 0;
  }
  function focusOnDay(current, offset2) {
    var activeElement = getClosestActiveElement();
    var dayFocused = isInView(activeElement || document.body);
    var startElem = current !== void 0 ? current : dayFocused ? activeElement : self.selectedDateElem !== void 0 && isInView(self.selectedDateElem) ? self.selectedDateElem : self.todayDateElem !== void 0 && isInView(self.todayDateElem) ? self.todayDateElem : getFirstAvailableDay(offset2 > 0 ? 1 : -1);
    if (startElem === void 0) {
      self._input.focus();
    } else if (!dayFocused) {
      focusOnDayElem(startElem);
    } else {
      getNextAvailableDay(startElem, offset2);
    }
  }
  function buildMonthDays(year, month) {
    var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;
    var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);
    var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? "prevMonthDay hidden" : "prevMonthDay", nextMonthDayClass = isMultiMonth ? "nextMonthDay hidden" : "nextMonthDay";
    var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;
    for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));
    }
    for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day", new Date(year, month, dayNumber), dayNumber, dayIndex));
    }
    for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth && (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {
      days.appendChild(createDay("flatpickr-day " + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));
    }
    var dayContainer = createElement("div", "dayContainer");
    dayContainer.appendChild(days);
    return dayContainer;
  }
  function buildDays() {
    if (self.daysContainer === void 0) {
      return;
    }
    clearNode(self.daysContainer);
    if (self.weekNumbers)
      clearNode(self.weekNumbers);
    var frag = document.createDocumentFragment();
    for (var i = 0; i < self.config.showMonths; i++) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));
    }
    self.daysContainer.appendChild(frag);
    self.days = self.daysContainer.firstChild;
    if (self.config.mode === "range" && self.selectedDates.length === 1) {
      onMouseOver();
    }
  }
  function buildMonthSwitch() {
    if (self.config.showMonths > 1 || self.config.monthSelectorType !== "dropdown")
      return;
    var shouldBuildMonth = function(month2) {
      if (self.config.minDate !== void 0 && self.currentYear === self.config.minDate.getFullYear() && month2 < self.config.minDate.getMonth()) {
        return false;
      }
      return !(self.config.maxDate !== void 0 && self.currentYear === self.config.maxDate.getFullYear() && month2 > self.config.maxDate.getMonth());
    };
    self.monthsDropdownContainer.tabIndex = -1;
    self.monthsDropdownContainer.innerHTML = "";
    for (var i = 0; i < 12; i++) {
      if (!shouldBuildMonth(i))
        continue;
      var month = createElement("option", "flatpickr-monthDropdown-month");
      month.value = new Date(self.currentYear, i).getMonth().toString();
      month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);
      month.tabIndex = -1;
      if (self.currentMonth === i) {
        month.selected = true;
      }
      self.monthsDropdownContainer.appendChild(month);
    }
  }
  function buildMonth() {
    var container = createElement("div", "flatpickr-month");
    var monthNavFragment = window.document.createDocumentFragment();
    var monthElement;
    if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
      monthElement = createElement("span", "cur-month");
    } else {
      self.monthsDropdownContainer = createElement("select", "flatpickr-monthDropdown-months");
      self.monthsDropdownContainer.setAttribute("aria-label", self.l10n.monthAriaLabel);
      bind(self.monthsDropdownContainer, "change", function(e) {
        var target = getEventTarget(e);
        var selectedMonth = parseInt(target.value, 10);
        self.changeMonth(selectedMonth - self.currentMonth);
        triggerEvent("onMonthChange");
      });
      buildMonthSwitch();
      monthElement = self.monthsDropdownContainer;
    }
    var yearInput = createNumberInput("cur-year", { tabindex: "-1" });
    var yearElement = yearInput.getElementsByTagName("input")[0];
    yearElement.setAttribute("aria-label", self.l10n.yearAriaLabel);
    if (self.config.minDate) {
      yearElement.setAttribute("min", self.config.minDate.getFullYear().toString());
    }
    if (self.config.maxDate) {
      yearElement.setAttribute("max", self.config.maxDate.getFullYear().toString());
      yearElement.disabled = !!self.config.minDate && self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();
    }
    var currentMonth = createElement("div", "flatpickr-current-month");
    currentMonth.appendChild(monthElement);
    currentMonth.appendChild(yearInput);
    monthNavFragment.appendChild(currentMonth);
    container.appendChild(monthNavFragment);
    return {
      container,
      yearElement,
      monthElement
    };
  }
  function buildMonths() {
    clearNode(self.monthNav);
    self.monthNav.appendChild(self.prevMonthNav);
    if (self.config.showMonths) {
      self.yearElements = [];
      self.monthElements = [];
    }
    for (var m = self.config.showMonths; m--; ) {
      var month = buildMonth();
      self.yearElements.push(month.yearElement);
      self.monthElements.push(month.monthElement);
      self.monthNav.appendChild(month.container);
    }
    self.monthNav.appendChild(self.nextMonthNav);
  }
  function buildMonthNav() {
    self.monthNav = createElement("div", "flatpickr-months");
    self.yearElements = [];
    self.monthElements = [];
    self.prevMonthNav = createElement("span", "flatpickr-prev-month");
    self.prevMonthNav.innerHTML = self.config.prevArrow;
    self.nextMonthNav = createElement("span", "flatpickr-next-month");
    self.nextMonthNav.innerHTML = self.config.nextArrow;
    buildMonths();
    Object.defineProperty(self, "_hidePrevMonthArrow", {
      get: function() {
        return self.__hidePrevMonthArrow;
      },
      set: function(bool) {
        if (self.__hidePrevMonthArrow !== bool) {
          toggleClass(self.prevMonthNav, "flatpickr-disabled", bool);
          self.__hidePrevMonthArrow = bool;
        }
      }
    });
    Object.defineProperty(self, "_hideNextMonthArrow", {
      get: function() {
        return self.__hideNextMonthArrow;
      },
      set: function(bool) {
        if (self.__hideNextMonthArrow !== bool) {
          toggleClass(self.nextMonthNav, "flatpickr-disabled", bool);
          self.__hideNextMonthArrow = bool;
        }
      }
    });
    self.currentYearElement = self.yearElements[0];
    updateNavigationCurrentMonth();
    return self.monthNav;
  }
  function buildTime() {
    self.calendarContainer.classList.add("hasTime");
    if (self.config.noCalendar)
      self.calendarContainer.classList.add("noCalendar");
    var defaults2 = getDefaultHours(self.config);
    self.timeContainer = createElement("div", "flatpickr-time");
    self.timeContainer.tabIndex = -1;
    var separator = createElement("span", "flatpickr-time-separator", ":");
    var hourInput = createNumberInput("flatpickr-hour", {
      "aria-label": self.l10n.hourAriaLabel
    });
    self.hourElement = hourInput.getElementsByTagName("input")[0];
    var minuteInput = createNumberInput("flatpickr-minute", {
      "aria-label": self.l10n.minuteAriaLabel
    });
    self.minuteElement = minuteInput.getElementsByTagName("input")[0];
    self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;
    self.hourElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getHours() : self.config.time_24hr ? defaults2.hours : military2ampm(defaults2.hours));
    self.minuteElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getMinutes() : defaults2.minutes);
    self.hourElement.setAttribute("step", self.config.hourIncrement.toString());
    self.minuteElement.setAttribute("step", self.config.minuteIncrement.toString());
    self.hourElement.setAttribute("min", self.config.time_24hr ? "0" : "1");
    self.hourElement.setAttribute("max", self.config.time_24hr ? "23" : "12");
    self.hourElement.setAttribute("maxlength", "2");
    self.minuteElement.setAttribute("min", "0");
    self.minuteElement.setAttribute("max", "59");
    self.minuteElement.setAttribute("maxlength", "2");
    self.timeContainer.appendChild(hourInput);
    self.timeContainer.appendChild(separator);
    self.timeContainer.appendChild(minuteInput);
    if (self.config.time_24hr)
      self.timeContainer.classList.add("time24hr");
    if (self.config.enableSeconds) {
      self.timeContainer.classList.add("hasSeconds");
      var secondInput = createNumberInput("flatpickr-second");
      self.secondElement = secondInput.getElementsByTagName("input")[0];
      self.secondElement.value = pad(self.latestSelectedDateObj ? self.latestSelectedDateObj.getSeconds() : defaults2.seconds);
      self.secondElement.setAttribute("step", self.minuteElement.getAttribute("step"));
      self.secondElement.setAttribute("min", "0");
      self.secondElement.setAttribute("max", "59");
      self.secondElement.setAttribute("maxlength", "2");
      self.timeContainer.appendChild(createElement("span", "flatpickr-time-separator", ":"));
      self.timeContainer.appendChild(secondInput);
    }
    if (!self.config.time_24hr) {
      self.amPM = createElement("span", "flatpickr-am-pm", self.l10n.amPM[int((self.latestSelectedDateObj ? self.hourElement.value : self.config.defaultHour) > 11)]);
      self.amPM.title = self.l10n.toggleTitle;
      self.amPM.tabIndex = -1;
      self.timeContainer.appendChild(self.amPM);
    }
    return self.timeContainer;
  }
  function buildWeekdays() {
    if (!self.weekdayContainer)
      self.weekdayContainer = createElement("div", "flatpickr-weekdays");
    else
      clearNode(self.weekdayContainer);
    for (var i = self.config.showMonths; i--; ) {
      var container = createElement("div", "flatpickr-weekdaycontainer");
      self.weekdayContainer.appendChild(container);
    }
    updateWeekdays();
    return self.weekdayContainer;
  }
  function updateWeekdays() {
    if (!self.weekdayContainer) {
      return;
    }
    var firstDayOfWeek = self.l10n.firstDayOfWeek;
    var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);
    if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {
      weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));
    }
    for (var i = self.config.showMonths; i--; ) {
      self.weekdayContainer.children[i].innerHTML = "\n      <span class='flatpickr-weekday'>\n        " + weekdays.join("</span><span class='flatpickr-weekday'>") + "\n      </span>\n      ";
    }
  }
  function buildWeeks() {
    self.calendarContainer.classList.add("hasWeeks");
    var weekWrapper = createElement("div", "flatpickr-weekwrapper");
    weekWrapper.appendChild(createElement("span", "flatpickr-weekday", self.l10n.weekAbbreviation));
    var weekNumbers = createElement("div", "flatpickr-weeks");
    weekWrapper.appendChild(weekNumbers);
    return {
      weekWrapper,
      weekNumbers
    };
  }
  function changeMonth(value, isOffset) {
    if (isOffset === void 0) {
      isOffset = true;
    }
    var delta = isOffset ? value : value - self.currentMonth;
    if (delta < 0 && self._hidePrevMonthArrow === true || delta > 0 && self._hideNextMonthArrow === true)
      return;
    self.currentMonth += delta;
    if (self.currentMonth < 0 || self.currentMonth > 11) {
      self.currentYear += self.currentMonth > 11 ? 1 : -1;
      self.currentMonth = (self.currentMonth + 12) % 12;
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
    buildDays();
    triggerEvent("onMonthChange");
    updateNavigationCurrentMonth();
  }
  function clear(triggerChangeEvent, toInitial) {
    if (triggerChangeEvent === void 0) {
      triggerChangeEvent = true;
    }
    if (toInitial === void 0) {
      toInitial = true;
    }
    self.input.value = "";
    if (self.altInput !== void 0)
      self.altInput.value = "";
    if (self.mobileInput !== void 0)
      self.mobileInput.value = "";
    self.selectedDates = [];
    self.latestSelectedDateObj = void 0;
    if (toInitial === true) {
      self.currentYear = self._initialDate.getFullYear();
      self.currentMonth = self._initialDate.getMonth();
    }
    if (self.config.enableTime === true) {
      var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;
      setHours(hours, minutes, seconds);
    }
    self.redraw();
    if (triggerChangeEvent)
      triggerEvent("onChange");
  }
  function close() {
    self.isOpen = false;
    if (!self.isMobile) {
      if (self.calendarContainer !== void 0) {
        self.calendarContainer.classList.remove("open");
      }
      if (self._input !== void 0) {
        self._input.classList.remove("active");
      }
    }
    triggerEvent("onClose");
  }
  function destroy() {
    if (self.config !== void 0)
      triggerEvent("onDestroy");
    for (var i = self._handlers.length; i--; ) {
      self._handlers[i].remove();
    }
    self._handlers = [];
    if (self.mobileInput) {
      if (self.mobileInput.parentNode)
        self.mobileInput.parentNode.removeChild(self.mobileInput);
      self.mobileInput = void 0;
    } else if (self.calendarContainer && self.calendarContainer.parentNode) {
      if (self.config.static && self.calendarContainer.parentNode) {
        var wrapper = self.calendarContainer.parentNode;
        wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);
        if (wrapper.parentNode) {
          while (wrapper.firstChild)
            wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);
          wrapper.parentNode.removeChild(wrapper);
        }
      } else
        self.calendarContainer.parentNode.removeChild(self.calendarContainer);
    }
    if (self.altInput) {
      self.input.type = "text";
      if (self.altInput.parentNode)
        self.altInput.parentNode.removeChild(self.altInput);
      delete self.altInput;
    }
    if (self.input) {
      self.input.type = self.input._type;
      self.input.classList.remove("flatpickr-input");
      self.input.removeAttribute("readonly");
    }
    [
      "_showTimeInput",
      "latestSelectedDateObj",
      "_hideNextMonthArrow",
      "_hidePrevMonthArrow",
      "__hideNextMonthArrow",
      "__hidePrevMonthArrow",
      "isMobile",
      "isOpen",
      "selectedDateElem",
      "minDateHasTime",
      "maxDateHasTime",
      "days",
      "daysContainer",
      "_input",
      "_positionElement",
      "innerContainer",
      "rContainer",
      "monthNav",
      "todayDateElem",
      "calendarContainer",
      "weekdayContainer",
      "prevMonthNav",
      "nextMonthNav",
      "monthsDropdownContainer",
      "currentMonthElement",
      "currentYearElement",
      "navigationCurrentMonth",
      "selectedDateElem",
      "config"
    ].forEach(function(k) {
      try {
        delete self[k];
      } catch (_) {
      }
    });
  }
  function isCalendarElem(elem) {
    return self.calendarContainer.contains(elem);
  }
  function documentClick(e) {
    if (self.isOpen && !self.config.inline) {
      var eventTarget_1 = getEventTarget(e);
      var isCalendarElement = isCalendarElem(eventTarget_1);
      var isInput = eventTarget_1 === self.input || eventTarget_1 === self.altInput || self.element.contains(eventTarget_1) || e.path && e.path.indexOf && (~e.path.indexOf(self.input) || ~e.path.indexOf(self.altInput));
      var lostFocus = !isInput && !isCalendarElement && !isCalendarElem(e.relatedTarget);
      var isIgnored = !self.config.ignoredFocusElements.some(function(elem) {
        return elem.contains(eventTarget_1);
      });
      if (lostFocus && isIgnored) {
        if (self.config.allowInput) {
          self.setDate(self._input.value, false, self.config.altInput ? self.config.altFormat : self.config.dateFormat);
        }
        if (self.timeContainer !== void 0 && self.minuteElement !== void 0 && self.hourElement !== void 0 && self.input.value !== "" && self.input.value !== void 0) {
          updateTime();
        }
        self.close();
        if (self.config && self.config.mode === "range" && self.selectedDates.length === 1)
          self.clear(false);
      }
    }
  }
  function changeYear(newYear) {
    if (!newYear || self.config.minDate && newYear < self.config.minDate.getFullYear() || self.config.maxDate && newYear > self.config.maxDate.getFullYear())
      return;
    var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;
    self.currentYear = newYearNum || self.currentYear;
    if (self.config.maxDate && self.currentYear === self.config.maxDate.getFullYear()) {
      self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);
    } else if (self.config.minDate && self.currentYear === self.config.minDate.getFullYear()) {
      self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);
    }
    if (isNewYear) {
      self.redraw();
      triggerEvent("onYearChange");
      buildMonthSwitch();
    }
  }
  function isEnabled(date, timeless) {
    var _a;
    if (timeless === void 0) {
      timeless = true;
    }
    var dateToCheck = self.parseDate(date, void 0, timeless);
    if (self.config.minDate && dateToCheck && compareDates(dateToCheck, self.config.minDate, timeless !== void 0 ? timeless : !self.minDateHasTime) < 0 || self.config.maxDate && dateToCheck && compareDates(dateToCheck, self.config.maxDate, timeless !== void 0 ? timeless : !self.maxDateHasTime) > 0)
      return false;
    if (!self.config.enable && self.config.disable.length === 0)
      return true;
    if (dateToCheck === void 0)
      return false;
    var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;
    for (var i = 0, d = void 0; i < array.length; i++) {
      d = array[i];
      if (typeof d === "function" && d(dateToCheck))
        return bool;
      else if (d instanceof Date && dateToCheck !== void 0 && d.getTime() === dateToCheck.getTime())
        return bool;
      else if (typeof d === "string") {
        var parsed = self.parseDate(d, void 0, true);
        return parsed && parsed.getTime() === dateToCheck.getTime() ? bool : !bool;
      } else if (typeof d === "object" && dateToCheck !== void 0 && d.from && d.to && dateToCheck.getTime() >= d.from.getTime() && dateToCheck.getTime() <= d.to.getTime())
        return bool;
    }
    return !bool;
  }
  function isInView(elem) {
    if (self.daysContainer !== void 0)
      return elem.className.indexOf("hidden") === -1 && elem.className.indexOf("flatpickr-disabled") === -1 && self.daysContainer.contains(elem);
    return false;
  }
  function onBlur(e) {
    var isInput = e.target === self._input;
    var valueChanged = self._input.value.trimEnd() !== getDateStr();
    if (isInput && valueChanged && !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {
      self.setDate(self._input.value, true, e.target === self.altInput ? self.config.altFormat : self.config.dateFormat);
    }
  }
  function onKeyDown(e) {
    var eventTarget = getEventTarget(e);
    var isInput = self.config.wrap ? element.contains(eventTarget) : eventTarget === self._input;
    var allowInput = self.config.allowInput;
    var allowKeydown = self.isOpen && (!allowInput || !isInput);
    var allowInlineKeydown = self.config.inline && isInput && !allowInput;
    if (e.keyCode === 13 && isInput) {
      if (allowInput) {
        self.setDate(self._input.value, true, eventTarget === self.altInput ? self.config.altFormat : self.config.dateFormat);
        self.close();
        return eventTarget.blur();
      } else {
        self.open();
      }
    } else if (isCalendarElem(eventTarget) || allowKeydown || allowInlineKeydown) {
      var isTimeObj = !!self.timeContainer && self.timeContainer.contains(eventTarget);
      switch (e.keyCode) {
        case 13:
          if (isTimeObj) {
            e.preventDefault();
            updateTime();
            focusAndClose();
          } else
            selectDate(e);
          break;
        case 27:
          e.preventDefault();
          focusAndClose();
          break;
        case 8:
        case 46:
          if (isInput && !self.config.allowInput) {
            e.preventDefault();
            self.clear();
          }
          break;
        case 37:
        case 39:
          if (!isTimeObj && !isInput) {
            e.preventDefault();
            var activeElement = getClosestActiveElement();
            if (self.daysContainer !== void 0 && (allowInput === false || activeElement && isInView(activeElement))) {
              var delta_1 = e.keyCode === 39 ? 1 : -1;
              if (!e.ctrlKey)
                focusOnDay(void 0, delta_1);
              else {
                e.stopPropagation();
                changeMonth(delta_1);
                focusOnDay(getFirstAvailableDay(1), 0);
              }
            }
          } else if (self.hourElement)
            self.hourElement.focus();
          break;
        case 38:
        case 40:
          e.preventDefault();
          var delta = e.keyCode === 40 ? 1 : -1;
          if (self.daysContainer && eventTarget.$i !== void 0 || eventTarget === self.input || eventTarget === self.altInput) {
            if (e.ctrlKey) {
              e.stopPropagation();
              changeYear(self.currentYear - delta);
              focusOnDay(getFirstAvailableDay(1), 0);
            } else if (!isTimeObj)
              focusOnDay(void 0, delta * 7);
          } else if (eventTarget === self.currentYearElement) {
            changeYear(self.currentYear - delta);
          } else if (self.config.enableTime) {
            if (!isTimeObj && self.hourElement)
              self.hourElement.focus();
            updateTime(e);
            self._debouncedChange();
          }
          break;
        case 9:
          if (isTimeObj) {
            var elems = [
              self.hourElement,
              self.minuteElement,
              self.secondElement,
              self.amPM
            ].concat(self.pluginElements).filter(function(x) {
              return x;
            });
            var i = elems.indexOf(eventTarget);
            if (i !== -1) {
              var target = elems[i + (e.shiftKey ? -1 : 1)];
              e.preventDefault();
              (target || self._input).focus();
            }
          } else if (!self.config.noCalendar && self.daysContainer && self.daysContainer.contains(eventTarget) && e.shiftKey) {
            e.preventDefault();
            self._input.focus();
          }
          break;
        default:
          break;
      }
    }
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      switch (e.key) {
        case self.l10n.amPM[0].charAt(0):
        case self.l10n.amPM[0].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[0];
          setHoursFromInputs();
          updateValue();
          break;
        case self.l10n.amPM[1].charAt(0):
        case self.l10n.amPM[1].charAt(0).toLowerCase():
          self.amPM.textContent = self.l10n.amPM[1];
          setHoursFromInputs();
          updateValue();
          break;
      }
    }
    if (isInput || isCalendarElem(eventTarget)) {
      triggerEvent("onKeyDown", e);
    }
  }
  function onMouseOver(elem, cellClass) {
    if (cellClass === void 0) {
      cellClass = "flatpickr-day";
    }
    if (self.selectedDates.length !== 1 || elem && (!elem.classList.contains(cellClass) || elem.classList.contains("flatpickr-disabled")))
      return;
    var hoverDate = elem ? elem.dateObj.getTime() : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], void 0, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());
    var containsDisabled = false;
    var minRange = 0, maxRange = 0;
    for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {
      if (!isEnabled(new Date(t), true)) {
        containsDisabled = containsDisabled || t > rangeStartDate && t < rangeEndDate;
        if (t < initialDate && (!minRange || t > minRange))
          minRange = t;
        else if (t > initialDate && (!maxRange || t < maxRange))
          maxRange = t;
      }
    }
    var hoverableCells = Array.from(self.rContainer.querySelectorAll("*:nth-child(-n+" + self.config.showMonths + ") > ." + cellClass));
    hoverableCells.forEach(function(dayElem) {
      var date = dayElem.dateObj;
      var timestamp = date.getTime();
      var outOfRange = minRange > 0 && timestamp < minRange || maxRange > 0 && timestamp > maxRange;
      if (outOfRange) {
        dayElem.classList.add("notAllowed");
        ["inRange", "startRange", "endRange"].forEach(function(c) {
          dayElem.classList.remove(c);
        });
        return;
      } else if (containsDisabled && !outOfRange)
        return;
      ["startRange", "inRange", "endRange", "notAllowed"].forEach(function(c) {
        dayElem.classList.remove(c);
      });
      if (elem !== void 0) {
        elem.classList.add(hoverDate <= self.selectedDates[0].getTime() ? "startRange" : "endRange");
        if (initialDate < hoverDate && timestamp === initialDate)
          dayElem.classList.add("startRange");
        else if (initialDate > hoverDate && timestamp === initialDate)
          dayElem.classList.add("endRange");
        if (timestamp >= minRange && (maxRange === 0 || timestamp <= maxRange) && isBetween(timestamp, initialDate, hoverDate))
          dayElem.classList.add("inRange");
      }
    });
  }
  function onResize() {
    if (self.isOpen && !self.config.static && !self.config.inline)
      positionCalendar();
  }
  function open(e, positionElement) {
    if (positionElement === void 0) {
      positionElement = self._positionElement;
    }
    if (self.isMobile === true) {
      if (e) {
        e.preventDefault();
        var eventTarget = getEventTarget(e);
        if (eventTarget) {
          eventTarget.blur();
        }
      }
      if (self.mobileInput !== void 0) {
        self.mobileInput.focus();
        self.mobileInput.click();
      }
      triggerEvent("onOpen");
      return;
    } else if (self._input.disabled || self.config.inline) {
      return;
    }
    var wasOpen = self.isOpen;
    self.isOpen = true;
    if (!wasOpen) {
      self.calendarContainer.classList.add("open");
      self._input.classList.add("active");
      triggerEvent("onOpen");
      positionCalendar(positionElement);
    }
    if (self.config.enableTime === true && self.config.noCalendar === true) {
      if (self.config.allowInput === false && (e === void 0 || !self.timeContainer.contains(e.relatedTarget))) {
        setTimeout(function() {
          return self.hourElement.select();
        }, 50);
      }
    }
  }
  function minMaxDateSetter(type) {
    return function(date) {
      var dateObj = self.config["_" + type + "Date"] = self.parseDate(date, self.config.dateFormat);
      var inverseDateObj = self.config["_" + (type === "min" ? "max" : "min") + "Date"];
      if (dateObj !== void 0) {
        self[type === "min" ? "minDateHasTime" : "maxDateHasTime"] = dateObj.getHours() > 0 || dateObj.getMinutes() > 0 || dateObj.getSeconds() > 0;
      }
      if (self.selectedDates) {
        self.selectedDates = self.selectedDates.filter(function(d) {
          return isEnabled(d);
        });
        if (!self.selectedDates.length && type === "min")
          setHoursFromDate(dateObj);
        updateValue();
      }
      if (self.daysContainer) {
        redraw();
        if (dateObj !== void 0)
          self.currentYearElement[type] = dateObj.getFullYear().toString();
        else
          self.currentYearElement.removeAttribute(type);
        self.currentYearElement.disabled = !!inverseDateObj && dateObj !== void 0 && inverseDateObj.getFullYear() === dateObj.getFullYear();
      }
    };
  }
  function parseConfig() {
    var boolOpts = [
      "wrap",
      "weekNumbers",
      "allowInput",
      "allowInvalidPreload",
      "clickOpens",
      "time_24hr",
      "enableTime",
      "noCalendar",
      "altInput",
      "shorthandCurrentMonth",
      "inline",
      "static",
      "enableSeconds",
      "disableMobile"
    ];
    var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);
    var formats2 = {};
    self.config.parseDate = userConfig.parseDate;
    self.config.formatDate = userConfig.formatDate;
    Object.defineProperty(self.config, "enable", {
      get: function() {
        return self.config._enable;
      },
      set: function(dates) {
        self.config._enable = parseDateRules(dates);
      }
    });
    Object.defineProperty(self.config, "disable", {
      get: function() {
        return self.config._disable;
      },
      set: function(dates) {
        self.config._disable = parseDateRules(dates);
      }
    });
    var timeMode = userConfig.mode === "time";
    if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {
      var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaults.dateFormat;
      formats2.dateFormat = userConfig.noCalendar || timeMode ? "H:i" + (userConfig.enableSeconds ? ":S" : "") : defaultDateFormat + " H:i" + (userConfig.enableSeconds ? ":S" : "");
    }
    if (userConfig.altInput && (userConfig.enableTime || timeMode) && !userConfig.altFormat) {
      var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaults.altFormat;
      formats2.altFormat = userConfig.noCalendar || timeMode ? "h:i" + (userConfig.enableSeconds ? ":S K" : " K") : defaultAltFormat + (" h:i" + (userConfig.enableSeconds ? ":S" : "") + " K");
    }
    Object.defineProperty(self.config, "minDate", {
      get: function() {
        return self.config._minDate;
      },
      set: minMaxDateSetter("min")
    });
    Object.defineProperty(self.config, "maxDate", {
      get: function() {
        return self.config._maxDate;
      },
      set: minMaxDateSetter("max")
    });
    var minMaxTimeSetter = function(type) {
      return function(val) {
        self.config[type === "min" ? "_minTime" : "_maxTime"] = self.parseDate(val, "H:i:S");
      };
    };
    Object.defineProperty(self.config, "minTime", {
      get: function() {
        return self.config._minTime;
      },
      set: minMaxTimeSetter("min")
    });
    Object.defineProperty(self.config, "maxTime", {
      get: function() {
        return self.config._maxTime;
      },
      set: minMaxTimeSetter("max")
    });
    if (userConfig.mode === "time") {
      self.config.noCalendar = true;
      self.config.enableTime = true;
    }
    Object.assign(self.config, formats2, userConfig);
    for (var i = 0; i < boolOpts.length; i++)
      self.config[boolOpts[i]] = self.config[boolOpts[i]] === true || self.config[boolOpts[i]] === "true";
    HOOKS.filter(function(hook) {
      return self.config[hook] !== void 0;
    }).forEach(function(hook) {
      self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);
    });
    self.isMobile = !self.config.disableMobile && !self.config.inline && self.config.mode === "single" && !self.config.disable.length && !self.config.enable && !self.config.weekNumbers && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    for (var i = 0; i < self.config.plugins.length; i++) {
      var pluginConf = self.config.plugins[i](self) || {};
      for (var key in pluginConf) {
        if (HOOKS.indexOf(key) > -1) {
          self.config[key] = arrayify(pluginConf[key]).map(bindToInstance).concat(self.config[key]);
        } else if (typeof userConfig[key] === "undefined")
          self.config[key] = pluginConf[key];
      }
    }
    if (!userConfig.altInputClass) {
      self.config.altInputClass = getInputElem().className + " " + self.config.altInputClass;
    }
    triggerEvent("onParseConfig");
  }
  function getInputElem() {
    return self.config.wrap ? element.querySelector("[data-input]") : element;
  }
  function setupLocale() {
    if (typeof self.config.locale !== "object" && typeof flatpickr.l10ns[self.config.locale] === "undefined")
      self.config.errorHandler(new Error("flatpickr: invalid locale " + self.config.locale));
    self.l10n = __assign(__assign({}, flatpickr.l10ns.default), typeof self.config.locale === "object" ? self.config.locale : self.config.locale !== "default" ? flatpickr.l10ns[self.config.locale] : void 0);
    tokenRegex.D = "(" + self.l10n.weekdays.shorthand.join("|") + ")";
    tokenRegex.l = "(" + self.l10n.weekdays.longhand.join("|") + ")";
    tokenRegex.M = "(" + self.l10n.months.shorthand.join("|") + ")";
    tokenRegex.F = "(" + self.l10n.months.longhand.join("|") + ")";
    tokenRegex.K = "(" + self.l10n.amPM[0] + "|" + self.l10n.amPM[1] + "|" + self.l10n.amPM[0].toLowerCase() + "|" + self.l10n.amPM[1].toLowerCase() + ")";
    var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));
    if (userConfig.time_24hr === void 0 && flatpickr.defaultConfig.time_24hr === void 0) {
      self.config.time_24hr = self.l10n.time_24hr;
    }
    self.formatDate = createDateFormatter(self);
    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });
  }
  function positionCalendar(customPositionElement) {
    if (typeof self.config.position === "function") {
      return void self.config.position(self, customPositionElement);
    }
    if (self.calendarContainer === void 0)
      return;
    triggerEvent("onPreCalendarPosition");
    var positionElement = customPositionElement || self._positionElement;
    var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, function(acc, child) {
      return acc + child.offsetHeight;
    }, 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(" "), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === "above" || configPosVertical !== "below" && distanceFromBottom < calendarHeight && inputBounds.top > calendarHeight;
    var top2 = window.pageYOffset + inputBounds.top + (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);
    toggleClass(self.calendarContainer, "arrowTop", !showOnTop);
    toggleClass(self.calendarContainer, "arrowBottom", showOnTop);
    if (self.config.inline)
      return;
    var left2 = window.pageXOffset + inputBounds.left;
    var isCenter = false;
    var isRight = false;
    if (configPosHorizontal === "center") {
      left2 -= (calendarWidth - inputBounds.width) / 2;
      isCenter = true;
    } else if (configPosHorizontal === "right") {
      left2 -= calendarWidth - inputBounds.width;
      isRight = true;
    }
    toggleClass(self.calendarContainer, "arrowLeft", !isCenter && !isRight);
    toggleClass(self.calendarContainer, "arrowCenter", isCenter);
    toggleClass(self.calendarContainer, "arrowRight", isRight);
    var right2 = window.document.body.offsetWidth - (window.pageXOffset + inputBounds.right);
    var rightMost = left2 + calendarWidth > window.document.body.offsetWidth;
    var centerMost = right2 + calendarWidth > window.document.body.offsetWidth;
    toggleClass(self.calendarContainer, "rightMost", rightMost);
    if (self.config.static)
      return;
    self.calendarContainer.style.top = top2 + "px";
    if (!rightMost) {
      self.calendarContainer.style.left = left2 + "px";
      self.calendarContainer.style.right = "auto";
    } else if (!centerMost) {
      self.calendarContainer.style.left = "auto";
      self.calendarContainer.style.right = right2 + "px";
    } else {
      var doc = getDocumentStyleSheet();
      if (doc === void 0)
        return;
      var bodyWidth = window.document.body.offsetWidth;
      var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);
      var centerBefore = ".flatpickr-calendar.centerMost:before";
      var centerAfter = ".flatpickr-calendar.centerMost:after";
      var centerIndex = doc.cssRules.length;
      var centerStyle = "{left:" + inputBounds.left + "px;right:auto;}";
      toggleClass(self.calendarContainer, "rightMost", false);
      toggleClass(self.calendarContainer, "centerMost", true);
      doc.insertRule(centerBefore + "," + centerAfter + centerStyle, centerIndex);
      self.calendarContainer.style.left = centerLeft + "px";
      self.calendarContainer.style.right = "auto";
    }
  }
  function getDocumentStyleSheet() {
    var editableSheet = null;
    for (var i = 0; i < document.styleSheets.length; i++) {
      var sheet = document.styleSheets[i];
      if (!sheet.cssRules)
        continue;
      try {
        sheet.cssRules;
      } catch (err) {
        continue;
      }
      editableSheet = sheet;
      break;
    }
    return editableSheet != null ? editableSheet : createStyleSheet();
  }
  function createStyleSheet() {
    var style = document.createElement("style");
    document.head.appendChild(style);
    return style.sheet;
  }
  function redraw() {
    if (self.config.noCalendar || self.isMobile)
      return;
    buildMonthSwitch();
    updateNavigationCurrentMonth();
    buildDays();
  }
  function focusAndClose() {
    self._input.focus();
    if (window.navigator.userAgent.indexOf("MSIE") !== -1 || navigator.msMaxTouchPoints !== void 0) {
      setTimeout(self.close, 0);
    } else {
      self.close();
    }
  }
  function selectDate(e) {
    e.preventDefault();
    e.stopPropagation();
    var isSelectable = function(day) {
      return day.classList && day.classList.contains("flatpickr-day") && !day.classList.contains("flatpickr-disabled") && !day.classList.contains("notAllowed");
    };
    var t = findParent(getEventTarget(e), isSelectable);
    if (t === void 0)
      return;
    var target = t;
    var selectedDate = self.latestSelectedDateObj = new Date(target.dateObj.getTime());
    var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth || selectedDate.getMonth() > self.currentMonth + self.config.showMonths - 1) && self.config.mode !== "range";
    self.selectedDateElem = target;
    if (self.config.mode === "single")
      self.selectedDates = [selectedDate];
    else if (self.config.mode === "multiple") {
      var selectedIndex = isDateSelected(selectedDate);
      if (selectedIndex)
        self.selectedDates.splice(parseInt(selectedIndex), 1);
      else
        self.selectedDates.push(selectedDate);
    } else if (self.config.mode === "range") {
      if (self.selectedDates.length === 2) {
        self.clear(false, false);
      }
      self.latestSelectedDateObj = selectedDate;
      self.selectedDates.push(selectedDate);
      if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)
        self.selectedDates.sort(function(a, b) {
          return a.getTime() - b.getTime();
        });
    }
    setHoursFromInputs();
    if (shouldChangeMonth) {
      var isNewYear = self.currentYear !== selectedDate.getFullYear();
      self.currentYear = selectedDate.getFullYear();
      self.currentMonth = selectedDate.getMonth();
      if (isNewYear) {
        triggerEvent("onYearChange");
        buildMonthSwitch();
      }
      triggerEvent("onMonthChange");
    }
    updateNavigationCurrentMonth();
    buildDays();
    updateValue();
    if (!shouldChangeMonth && self.config.mode !== "range" && self.config.showMonths === 1)
      focusOnDayElem(target);
    else if (self.selectedDateElem !== void 0 && self.hourElement === void 0) {
      self.selectedDateElem && self.selectedDateElem.focus();
    }
    if (self.hourElement !== void 0)
      self.hourElement !== void 0 && self.hourElement.focus();
    if (self.config.closeOnSelect) {
      var single = self.config.mode === "single" && !self.config.enableTime;
      var range = self.config.mode === "range" && self.selectedDates.length === 2 && !self.config.enableTime;
      if (single || range) {
        focusAndClose();
      }
    }
    triggerChange();
  }
  var CALLBACKS = {
    locale: [setupLocale, updateWeekdays],
    showMonths: [buildMonths, setCalendarWidth, buildWeekdays],
    minDate: [jumpToDate],
    maxDate: [jumpToDate],
    positionElement: [updatePositionElement],
    clickOpens: [
      function() {
        if (self.config.clickOpens === true) {
          bind(self._input, "focus", self.open);
          bind(self._input, "click", self.open);
        } else {
          self._input.removeEventListener("focus", self.open);
          self._input.removeEventListener("click", self.open);
        }
      }
    ]
  };
  function set(option, value) {
    if (option !== null && typeof option === "object") {
      Object.assign(self.config, option);
      for (var key in option) {
        if (CALLBACKS[key] !== void 0)
          CALLBACKS[key].forEach(function(x) {
            return x();
          });
      }
    } else {
      self.config[option] = value;
      if (CALLBACKS[option] !== void 0)
        CALLBACKS[option].forEach(function(x) {
          return x();
        });
      else if (HOOKS.indexOf(option) > -1)
        self.config[option] = arrayify(value);
    }
    self.redraw();
    updateValue(true);
  }
  function setSelectedDate(inputDate, format2) {
    var dates = [];
    if (inputDate instanceof Array)
      dates = inputDate.map(function(d) {
        return self.parseDate(d, format2);
      });
    else if (inputDate instanceof Date || typeof inputDate === "number")
      dates = [self.parseDate(inputDate, format2)];
    else if (typeof inputDate === "string") {
      switch (self.config.mode) {
        case "single":
        case "time":
          dates = [self.parseDate(inputDate, format2)];
          break;
        case "multiple":
          dates = inputDate.split(self.config.conjunction).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        case "range":
          dates = inputDate.split(self.l10n.rangeSeparator).map(function(date) {
            return self.parseDate(date, format2);
          });
          break;
        default:
          break;
      }
    } else
      self.config.errorHandler(new Error("Invalid date supplied: " + JSON.stringify(inputDate)));
    self.selectedDates = self.config.allowInvalidPreload ? dates : dates.filter(function(d) {
      return d instanceof Date && isEnabled(d, false);
    });
    if (self.config.mode === "range")
      self.selectedDates.sort(function(a, b) {
        return a.getTime() - b.getTime();
      });
  }
  function setDate(date, triggerChange2, format2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = false;
    }
    if (format2 === void 0) {
      format2 = self.config.dateFormat;
    }
    if (date !== 0 && !date || date instanceof Array && date.length === 0)
      return self.clear(triggerChange2);
    setSelectedDate(date, format2);
    self.latestSelectedDateObj = self.selectedDates[self.selectedDates.length - 1];
    self.redraw();
    jumpToDate(void 0, triggerChange2);
    setHoursFromDate();
    if (self.selectedDates.length === 0) {
      self.clear(false);
    }
    updateValue(triggerChange2);
    if (triggerChange2)
      triggerEvent("onChange");
  }
  function parseDateRules(arr) {
    return arr.slice().map(function(rule) {
      if (typeof rule === "string" || typeof rule === "number" || rule instanceof Date) {
        return self.parseDate(rule, void 0, true);
      } else if (rule && typeof rule === "object" && rule.from && rule.to)
        return {
          from: self.parseDate(rule.from, void 0),
          to: self.parseDate(rule.to, void 0)
        };
      return rule;
    }).filter(function(x) {
      return x;
    });
  }
  function setupDates() {
    self.selectedDates = [];
    self.now = self.parseDate(self.config.now) || new Date();
    var preloadedDate = self.config.defaultDate || ((self.input.nodeName === "INPUT" || self.input.nodeName === "TEXTAREA") && self.input.placeholder && self.input.value === self.input.placeholder ? null : self.input.value);
    if (preloadedDate)
      setSelectedDate(preloadedDate, self.config.dateFormat);
    self._initialDate = self.selectedDates.length > 0 ? self.selectedDates[0] : self.config.minDate && self.config.minDate.getTime() > self.now.getTime() ? self.config.minDate : self.config.maxDate && self.config.maxDate.getTime() < self.now.getTime() ? self.config.maxDate : self.now;
    self.currentYear = self._initialDate.getFullYear();
    self.currentMonth = self._initialDate.getMonth();
    if (self.selectedDates.length > 0)
      self.latestSelectedDateObj = self.selectedDates[0];
    if (self.config.minTime !== void 0)
      self.config.minTime = self.parseDate(self.config.minTime, "H:i");
    if (self.config.maxTime !== void 0)
      self.config.maxTime = self.parseDate(self.config.maxTime, "H:i");
    self.minDateHasTime = !!self.config.minDate && (self.config.minDate.getHours() > 0 || self.config.minDate.getMinutes() > 0 || self.config.minDate.getSeconds() > 0);
    self.maxDateHasTime = !!self.config.maxDate && (self.config.maxDate.getHours() > 0 || self.config.maxDate.getMinutes() > 0 || self.config.maxDate.getSeconds() > 0);
  }
  function setupInputs() {
    self.input = getInputElem();
    if (!self.input) {
      self.config.errorHandler(new Error("Invalid input element specified"));
      return;
    }
    self.input._type = self.input.type;
    self.input.type = "text";
    self.input.classList.add("flatpickr-input");
    self._input = self.input;
    if (self.config.altInput) {
      self.altInput = createElement(self.input.nodeName, self.config.altInputClass);
      self._input = self.altInput;
      self.altInput.placeholder = self.input.placeholder;
      self.altInput.disabled = self.input.disabled;
      self.altInput.required = self.input.required;
      self.altInput.tabIndex = self.input.tabIndex;
      self.altInput.type = "text";
      self.input.setAttribute("type", "hidden");
      if (!self.config.static && self.input.parentNode)
        self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);
    }
    if (!self.config.allowInput)
      self._input.setAttribute("readonly", "readonly");
    updatePositionElement();
  }
  function updatePositionElement() {
    self._positionElement = self.config.positionElement || self._input;
  }
  function setupMobile() {
    var inputType = self.config.enableTime ? self.config.noCalendar ? "time" : "datetime-local" : "date";
    self.mobileInput = createElement("input", self.input.className + " flatpickr-mobile");
    self.mobileInput.tabIndex = 1;
    self.mobileInput.type = inputType;
    self.mobileInput.disabled = self.input.disabled;
    self.mobileInput.required = self.input.required;
    self.mobileInput.placeholder = self.input.placeholder;
    self.mobileFormatStr = inputType === "datetime-local" ? "Y-m-d\\TH:i:S" : inputType === "date" ? "Y-m-d" : "H:i:S";
    if (self.selectedDates.length > 0) {
      self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);
    }
    if (self.config.minDate)
      self.mobileInput.min = self.formatDate(self.config.minDate, "Y-m-d");
    if (self.config.maxDate)
      self.mobileInput.max = self.formatDate(self.config.maxDate, "Y-m-d");
    if (self.input.getAttribute("step"))
      self.mobileInput.step = String(self.input.getAttribute("step"));
    self.input.type = "hidden";
    if (self.altInput !== void 0)
      self.altInput.type = "hidden";
    try {
      if (self.input.parentNode)
        self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);
    } catch (_a) {
    }
    bind(self.mobileInput, "change", function(e) {
      self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);
      triggerEvent("onChange");
      triggerEvent("onClose");
    });
  }
  function toggle(e) {
    if (self.isOpen === true)
      return self.close();
    self.open(e);
  }
  function triggerEvent(event, data) {
    if (self.config === void 0)
      return;
    var hooks = self.config[event];
    if (hooks !== void 0 && hooks.length > 0) {
      for (var i = 0; hooks[i] && i < hooks.length; i++)
        hooks[i](self.selectedDates, self.input.value, self, data);
    }
    if (event === "onChange") {
      self.input.dispatchEvent(createEvent("change"));
      self.input.dispatchEvent(createEvent("input"));
    }
  }
  function createEvent(name) {
    var e = document.createEvent("Event");
    e.initEvent(name, true, true);
    return e;
  }
  function isDateSelected(date) {
    for (var i = 0; i < self.selectedDates.length; i++) {
      var selectedDate = self.selectedDates[i];
      if (selectedDate instanceof Date && compareDates(selectedDate, date) === 0)
        return "" + i;
    }
    return false;
  }
  function isDateInRange(date) {
    if (self.config.mode !== "range" || self.selectedDates.length < 2)
      return false;
    return compareDates(date, self.selectedDates[0]) >= 0 && compareDates(date, self.selectedDates[1]) <= 0;
  }
  function updateNavigationCurrentMonth() {
    if (self.config.noCalendar || self.isMobile || !self.monthNav)
      return;
    self.yearElements.forEach(function(yearElement, i) {
      var d = new Date(self.currentYear, self.currentMonth, 1);
      d.setMonth(self.currentMonth + i);
      if (self.config.showMonths > 1 || self.config.monthSelectorType === "static") {
        self.monthElements[i].textContent = monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + " ";
      } else {
        self.monthsDropdownContainer.value = d.getMonth().toString();
      }
      yearElement.value = d.getFullYear().toString();
    });
    self._hidePrevMonthArrow = self.config.minDate !== void 0 && (self.currentYear === self.config.minDate.getFullYear() ? self.currentMonth <= self.config.minDate.getMonth() : self.currentYear < self.config.minDate.getFullYear());
    self._hideNextMonthArrow = self.config.maxDate !== void 0 && (self.currentYear === self.config.maxDate.getFullYear() ? self.currentMonth + 1 > self.config.maxDate.getMonth() : self.currentYear > self.config.maxDate.getFullYear());
  }
  function getDateStr(specificFormat) {
    var format2 = specificFormat || (self.config.altInput ? self.config.altFormat : self.config.dateFormat);
    return self.selectedDates.map(function(dObj) {
      return self.formatDate(dObj, format2);
    }).filter(function(d, i, arr) {
      return self.config.mode !== "range" || self.config.enableTime || arr.indexOf(d) === i;
    }).join(self.config.mode !== "range" ? self.config.conjunction : self.l10n.rangeSeparator);
  }
  function updateValue(triggerChange2) {
    if (triggerChange2 === void 0) {
      triggerChange2 = true;
    }
    if (self.mobileInput !== void 0 && self.mobileFormatStr) {
      self.mobileInput.value = self.latestSelectedDateObj !== void 0 ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr) : "";
    }
    self.input.value = getDateStr(self.config.dateFormat);
    if (self.altInput !== void 0) {
      self.altInput.value = getDateStr(self.config.altFormat);
    }
    if (triggerChange2 !== false)
      triggerEvent("onValueUpdate");
  }
  function onMonthNavClick(e) {
    var eventTarget = getEventTarget(e);
    var isPrevMonth = self.prevMonthNav.contains(eventTarget);
    var isNextMonth = self.nextMonthNav.contains(eventTarget);
    if (isPrevMonth || isNextMonth) {
      changeMonth(isPrevMonth ? -1 : 1);
    } else if (self.yearElements.indexOf(eventTarget) >= 0) {
      eventTarget.select();
    } else if (eventTarget.classList.contains("arrowUp")) {
      self.changeYear(self.currentYear + 1);
    } else if (eventTarget.classList.contains("arrowDown")) {
      self.changeYear(self.currentYear - 1);
    }
  }
  function timeWrapper(e) {
    e.preventDefault();
    var isKeyDown = e.type === "keydown", eventTarget = getEventTarget(e), input = eventTarget;
    if (self.amPM !== void 0 && eventTarget === self.amPM) {
      self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
    }
    var min2 = parseFloat(input.getAttribute("min")), max2 = parseFloat(input.getAttribute("max")), step = parseFloat(input.getAttribute("step")), curValue = parseInt(input.value, 10), delta = e.delta || (isKeyDown ? e.which === 38 ? 1 : -1 : 0);
    var newValue = curValue + step * delta;
    if (typeof input.value !== "undefined" && input.value.length === 2) {
      var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;
      if (newValue < min2) {
        newValue = max2 + newValue + int(!isHourElem) + (int(isHourElem) && int(!self.amPM));
        if (isMinuteElem)
          incrementNumInput(void 0, -1, self.hourElement);
      } else if (newValue > max2) {
        newValue = input === self.hourElement ? newValue - max2 - int(!self.amPM) : min2;
        if (isMinuteElem)
          incrementNumInput(void 0, 1, self.hourElement);
      }
      if (self.amPM && isHourElem && (step === 1 ? newValue + curValue === 23 : Math.abs(newValue - curValue) > step)) {
        self.amPM.textContent = self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];
      }
      input.value = pad(newValue);
    }
  }
  init();
  return self;
}
function _flatpickr(nodeList, config) {
  var nodes = Array.prototype.slice.call(nodeList).filter(function(x) {
    return x instanceof HTMLElement;
  });
  var instances = [];
  for (var i = 0; i < nodes.length; i++) {
    var node = nodes[i];
    try {
      if (node.getAttribute("data-fp-omit") !== null)
        continue;
      if (node._flatpickr !== void 0) {
        node._flatpickr.destroy();
        node._flatpickr = void 0;
      }
      node._flatpickr = FlatpickrInstance(node, config || {});
      instances.push(node._flatpickr);
    } catch (e) {
      console.error(e);
    }
  }
  return instances.length === 1 ? instances[0] : instances;
}
if (typeof HTMLElement !== "undefined" && typeof HTMLCollection !== "undefined" && typeof NodeList !== "undefined") {
  HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
  HTMLElement.prototype.flatpickr = function(config) {
    return _flatpickr([this], config);
  };
}
var flatpickr = function(selector, config) {
  if (typeof selector === "string") {
    return _flatpickr(window.document.querySelectorAll(selector), config);
  } else if (selector instanceof Node) {
    return _flatpickr([selector], config);
  } else {
    return _flatpickr(selector, config);
  }
};
flatpickr.defaultConfig = {};
flatpickr.l10ns = {
  en: __assign({}, default_default),
  default: __assign({}, default_default)
};
flatpickr.localize = function(l10n) {
  flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);
};
flatpickr.setDefaults = function(config) {
  flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);
};
flatpickr.parseDate = createDateParser({});
flatpickr.formatDate = createDateFormatter({});
flatpickr.compareDates = compareDates;
if (typeof jQuery !== "undefined" && typeof jQuery.fn !== "undefined") {
  jQuery.fn.flatpickr = function(config) {
    return _flatpickr(this, config);
  };
}
Date.prototype.fp_incr = function(days) {
  return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === "string" ? parseInt(days, 10) : days));
};
if (typeof window !== "undefined") {
  window.flatpickr = flatpickr;
}
var esm_default = flatpickr;

// src/optionModals/fields/DateModal.ts
var DateModal = class extends import_obsidian17.Modal {
  constructor(app2, file, field, value, lineNumber = -1, inFrontMatter = false, top2 = false) {
    super(app2);
    this.app = app2;
    this.file = file;
    this.field = field;
    this.value = value.replace(/^\[\[/g, "").replace(/\]\]$/g, "");
    this.lineNumber = lineNumber;
    this.inFrontmatter = inFrontMatter;
    this.top = top2;
    this.insertAsLink = FieldManager2.stringToBoolean(this.field.options.defaultInsertAsLink) || false;
    this.format = this.field.options.dateFormat || this.field.options.defaultDateFormat;
    if (this.app.plugins.enabledPlugins.has("metadata-menu")) {
      this.plugin = this.app.plugins.plugins["metadata-menu"];
    }
  }
  onOpen() {
    const fieldContainer = this.contentEl.createDiv({ cls: "metadata-menu-modal-value" });
    this.buildForm(fieldContainer);
  }
  buildForm(parentContainer) {
    const form = parentContainer.createEl("form");
    form.type = "submit";
    this.buildInputEl(form);
    this.errorField = form.createEl("div", { cls: "metadata-menu-modal-value-error-field" });
    this.errorField.hide();
    this.buildInsertAsLinkToggler(form);
    const saveBtnContainer = form.createEl("div", { cls: "metadata-menu-value-grid-footer" });
    const saveBtn = new import_obsidian17.ButtonComponent(saveBtnContainer);
    saveBtn.setIcon("checkmark");
    form.onsubmit = (e) => __async(this, null, function* () {
      e.preventDefault();
      let newValue;
      if (app.plugins.enabledPlugins.has("nldates-obsidian")) {
        try {
          const nldates = app.plugins.plugins["nldates-obsidian"];
          newValue = nldates.parseDate(this.value).moment;
        } catch (error) {
          newValue = (0, import_obsidian18.moment)(this.value, this.format);
        }
      } else {
        newValue = (0, import_obsidian18.moment)(this.value, this.format);
      }
      if (newValue.isValid()) {
        const linkPath = app.metadataCache.getFirstLinkpathDest(this.field.options.linkPath + newValue.format(this.format), this.file.path);
        const formattedValue = this.insertAsLink ? `[[${this.field.options.linkPath || ""}${newValue.format(this.format)}${linkPath ? "|" + linkPath.basename : ""}]]` : newValue.format(this.format);
        if (this.lineNumber == -1) {
          replaceValues(this.app, this.file, this.field.name, formattedValue);
        } else {
          insertValues(this.app, this.file, this.field.name, formattedValue, this.lineNumber, this.inFrontmatter, this.top);
        }
        ;
        this.close();
      } else {
        this.errorField.show();
        this.errorField.setText(`value must be a valid date`);
        this.inputEl.inputEl.addClass("is-invalid");
        return;
      }
    });
  }
  buildInsertAsLinkToggler(form) {
    const togglerContainer = form.createDiv({ cls: "metadata-menu-toggler-with-label" });
    const togglerContainerLabel = togglerContainer.createDiv({
      cls: "metadata-menu-toggler-label"
    });
    togglerContainerLabel.setText("Insert as link");
    const toggleEl = new import_obsidian17.ToggleComponent(togglerContainer);
    toggleEl.setValue(FieldManager2.stringToBoolean(this.field.options.defaultInsertAsLink || "false"));
    toggleEl.onChange((value) => {
      this.insertAsLink = value;
    });
  }
  buildInputEl(form) {
    var _a;
    const inputContainer = form.createDiv({ cls: "metadata-menu-dateinput-with-picker" });
    this.inputEl = new import_obsidian17.TextComponent(inputContainer);
    this.inputEl.inputEl.focus();
    this.inputEl.setValue(((_a = this.value.replace(/^\[\[/g, "").replace(/\]\]$/g, "").split("|").first()) == null ? void 0 : _a.split("/").last()) || "");
    this.inputEl.inputEl.addClass("metadata-menu-prompt-input");
    this.inputEl.onChange((value) => {
      this.inputEl.inputEl.removeClass("is-invalid");
      this.errorField.hide();
      this.errorField.setText("");
      this.value = value;
    });
    const calendarDisplayBtn = inputContainer.createEl("div", { cls: "metadata-menu-calendar-display-btn" });
    calendarDisplayBtn.setText("\u{1F4C6}");
    const datePickerContainer = form.createDiv({ cls: "metadata-menu-picker-container" });
    const datePicker = esm_default(datePickerContainer, {
      locale: {
        firstDayOfWeek: this.plugin.settings.firstDayOfWeek
      }
    });
    datePicker.config.onChange.push((value) => {
      const newDate = (0, import_obsidian18.moment)(value.toString()).format(this.format);
      this.inputEl.setValue(newDate);
      this.value = newDate;
    });
    calendarDisplayBtn.onclick = (e) => {
      datePicker.setDate(datePicker.parseDate(this.inputEl.getValue()) || new Date());
      datePicker.open();
    };
  }
};

// src/fields/fieldManagers/DateField.ts
var DateField = class extends FieldManager2 {
  constructor(field) {
    super(field, "Date" /* Date */);
    this.defaultDateFormat = "YYYY-MM-DD";
  }
  addMenuOption(name, value, app2, file, category) {
    const modal = new DateModal(app2, file, this.field, value);
    modal.titleEl.setText(`Change date for <${name}>`);
    if (DateField.isMenu(category)) {
      category.addItem((item) => {
        item.setTitle(`Update <${name}>`);
        item.setIcon("calendar-glyph");
        item.onClick(() => modal.open());
        item.setSection("target-metadata");
      });
    } else if (DateField.isSelect(category)) {
      category.addOption(`update_${name}`, `Update <${name}>`);
      category.modals[`update_${name}`] = () => modal.open();
    }
    ;
  }
  createAndOpenFieldModal(app2, file, selectedFieldName, lineNumber, inFrontmatter, top2) {
    const fieldModal = new DateModal(app2, file, this.field, "", lineNumber, inFrontmatter, top2);
    fieldModal.titleEl.setText(`Enter date for ${selectedFieldName}`);
    fieldModal.open();
  }
  createDateContainer(parentContainer) {
    if (!this.field.options.dateFormat)
      this.field.options.dateFormat = this.defaultDateFormat;
    if (!this.field.options.defaultInsertAsLink)
      this.field.options.defaultInsertAsLink = "false";
    const dateFormatContainer = parentContainer.createDiv();
    dateFormatContainer.createEl("span", { text: "Date format", cls: "metadata-menu-field-option" });
    const dateFormatInput = new import_obsidian19.TextComponent(dateFormatContainer);
    dateFormatInput.setValue(this.field.options.dateFormat);
    const dateExample = dateFormatContainer.createEl("span", { text: "", cls: "metadata-menu-field-option" });
    dateExample.setText(`example: ${(0, import_obsidian20.moment)().format(dateFormatInput.getValue())}`);
    dateFormatInput.onChange((value) => {
      this.field.options.dateFormat = value;
      dateExample.setText(`example: ${(0, import_obsidian20.moment)().format(value)}`);
    });
    const dateLinkPathContainer = parentContainer.createDiv();
    dateLinkPathContainer.createEl("span", { text: "Link path (optional)", cls: "metadata-menu-field-option" });
    const dateLinkPathInput = new import_obsidian19.TextComponent(dateLinkPathContainer);
    dateLinkPathInput.setValue(this.field.options.linkPath);
    dateLinkPathInput.onChange((value) => {
      this.field.options.linkPath = value.endsWith("/") ? value : value + "/";
    });
    const defaultInsertAsLinkContainer = parentContainer.createDiv();
    defaultInsertAsLinkContainer.createEl("span", { text: "Insert as link by default", cls: "metadata-menu-field-option" });
    const defaultInsertAsLink = new import_obsidian19.ToggleComponent(defaultInsertAsLinkContainer);
    defaultInsertAsLink.setValue(DateField.stringToBoolean(this.field.options.defaultInsertAsLink));
    defaultInsertAsLink.onChange((value) => {
      this.field.options.defaultInsertAsLink = value.toString();
    });
  }
  createSettingContainer(parentContainer, plugin, location) {
    this.dateValidatorField = parentContainer.createDiv({ cls: "metadata-menu-number-options" });
    this.createDateContainer(this.dateValidatorField);
    this.dateValidatorField.createDiv({ cls: "metadata-menu-separator" }).createEl("hr");
  }
  createDvField(plugin, dv, p, fieldContainer, attrs) {
    return __async(this, null, function* () {
      var _a;
      const fieldValue = dv.el("span", p[this.field.name], attrs);
      const dateBtn = document.createElement("button");
      dateBtn.setText("\u{1F4C6}");
      dateBtn.addClass("metadata-menu-dv-field-button");
      const spacer = document.createElement("div");
      spacer.setAttr("class", "metadata-menu-dv-field-spacer");
      const file = app.vault.getAbstractFileByPath(p["file"]["path"]);
      let fieldModal;
      if (file instanceof import_obsidian19.TFile && file.extension == "md") {
        if (p[this.field.name] && p[this.field.name].hasOwnProperty("path")) {
          const dateFile = app.vault.getAbstractFileByPath(p[this.field.name]);
          if (dateFile instanceof import_obsidian19.TFile && dateFile.extension == "md") {
            fieldModal = new DateModal(app, file, this.field, dateFile.name);
          } else {
            fieldModal = new DateModal(app, file, this.field, p[this.field.name].path.split("/").last().replace(".md", ""));
          }
        } else if (p[this.field.name]) {
          fieldModal = new DateModal(app, file, this.field, p[this.field.name]);
        } else {
          fieldModal = new DateModal(app, file, this.field, "");
        }
      } else {
        throw Error("path doesn't correspond to a proper file");
      }
      fieldModal.onClose = () => {
        fieldModal.contentEl.innerHTML = "";
      };
      dateBtn.onclick = () => {
        fieldModal.open();
      };
      if (!((_a = attrs == null ? void 0 : attrs.options) == null ? void 0 : _a.alwaysOn)) {
        dateBtn.hide();
        spacer.show();
        fieldContainer.onmouseover = () => {
          dateBtn.show();
          spacer.hide();
        };
        fieldContainer.onmouseout = () => {
          dateBtn.hide();
          spacer.show();
        };
      }
      fieldContainer.appendChild(fieldValue);
      fieldContainer.appendChild(dateBtn);
      fieldContainer.appendChild(spacer);
    });
  }
  getOptionsStr() {
    return this.field.options.dateFormat;
  }
  validateOptions() {
    return true;
  }
  validateValue(value) {
    return __async(this, null, function* () {
      var _a;
      return (0, import_obsidian20.moment)((_a = value.replace(/^\[\[/g, "").replace(/\]\]$/g, "").split("|").first()) == null ? void 0 : _a.split("/").last(), this.field.options.dateFormat).isValid();
    });
  }
};

// src/fields/fieldManagers/Managers.ts
var Managers = {
  Input: InputField,
  Boolean: BooleanField,
  Number: NumberField,
  Select: SelectField,
  Cycle: CycleField,
  Multi: MultiField,
  File: FileField,
  Date: DateField
};
var Managers_default = Managers;

// src/types/fieldTypes.ts
var FieldTypeLabelMapping = {
  "Input": "Input" /* Input */,
  "Select": "Select" /* Select */,
  "Multi": "Multi" /* Multi */,
  "Cycle": "Cycle" /* Cycle */,
  "Boolean": "Boolean" /* Boolean */,
  "Number": "Number" /* Number */,
  "File": "File" /* File */,
  "Date": "Date" /* Date */
};
var FieldTypeTagClass = {
  "Input": "single",
  "Select": "select",
  "Multi": "multi",
  "Cycle": "cycle",
  "Boolean": "boolean",
  "Number": "number",
  "File": "file",
  "Date": "date"
};
var FieldTypeTooltip = {
  "Input": "Accept any value",
  "Select": "Accept a single value from a list",
  "Multi": "Accept multiple values from a list",
  "Cycle": "Cycle through values from a list",
  "Boolean": "Accept true of false",
  "Number": "Accept a number",
  "File": "Accept a link to a file in your vault",
  "Date": "Accept a date"
};
var FieldManager = {
  "Input": Managers_default.Input,
  "Select": Managers_default.Select,
  "Multi": Managers_default.Multi,
  "Cycle": Managers_default.Cycle,
  "Boolean": Managers_default.Boolean,
  "Number": Managers_default.Number,
  "File": Managers_default.File,
  "Date": Managers_default.Date
};

// src/fields/Field.ts
var Field = class {
  constructor(name = "", options = {}, id = "", valuesListNotePath = "", type = "Input" /* Input */) {
    this.name = name;
    this.options = options;
    this.id = id;
    this.valuesListNotePath = valuesListNotePath;
    this.type = type;
    this.insertNewValue.bind(this);
  }
  insertNewValue(value) {
    return __async(this, null, function* () {
      let newKey = 1;
      Object.keys(this.options).forEach((key) => {
        if (parseInt(key) && parseInt(key) >= newKey) {
          newKey = parseInt(key) + 1;
        }
        ;
      });
      this.options[newKey.toString()] = value;
      return newKey.toString();
    });
  }
  static copyProperty(target, source) {
    target.id = source.id;
    target.name = source.name;
    target.valuesListNotePath = source.valuesListNotePath;
    target.type = source.type;
    Object.keys(source.options).forEach((k) => {
      target.options[k] = source.options[k];
    });
    Object.keys(target.options).forEach((k) => {
      if (!Object.keys(source.options).includes(k)) {
        delete target.options[k];
      }
      ;
    });
  }
  static createDefault(name) {
    const field = new Field();
    field.type = "Input" /* Input */;
    field.name = name;
    return field;
  }
};
var Field_default = Field;

// src/settings/FieldSettingsModal.ts
var FieldSettingsModal = class extends import_obsidian21.Modal {
  constructor(app2, plugin, parentSettingContainer, parentSetting, field) {
    super(app2);
    this.saved = false;
    this.new = true;
    this.plugin = plugin;
    this.parentSetting = parentSetting;
    this.initialField = new Field_default();
    this.parentSettingContainer = parentSettingContainer;
    if (field) {
      this.new = false;
      this.field = field;
      Field_default.copyProperty(this.initialField, this.field);
    } else {
      let newId = 1;
      this.plugin.initialProperties.forEach((prop) => {
        if (parseInt(prop.id) && parseInt(prop.id) >= newId) {
          newId = parseInt(prop.id) + 1;
        }
        ;
      });
      this.field = new Field_default();
      this.field.id = newId.toString();
      this.initialField.id = newId.toString();
    }
    ;
    this.fieldManager = new FieldManager[this.field.type](this.field);
  }
  onOpen() {
    return __async(this, null, function* () {
      if (this.field.name == "") {
        this.titleEl.setText(`Add a field and define options`);
      } else {
        this.titleEl.setText(`Manage settings options for ${this.field.name}`);
      }
      ;
      yield this.createForm();
    });
  }
  onClose() {
    Object.assign(this.field, this.initialField);
    if (!this.new && this.parentSetting) {
      this.parentSetting.setTextContentWithname();
    } else if (this.saved) {
      new FieldSetting(this.parentSettingContainer, this.field, this.app, this.plugin);
    }
    ;
  }
  createnameInputContainer(parentNode) {
    const fieldNameContainerLabel = parentNode.createDiv();
    fieldNameContainerLabel.setText(`Field Name:`);
    const input = new import_obsidian21.TextComponent(parentNode);
    const name = this.field.name;
    input.setValue(name);
    input.setPlaceholder("Name of the field");
    input.onChange((value) => {
      this.field.name = value;
      this.titleEl.setText(`Manage predefined options for ${this.field.name}`);
      FieldSettingsModal.removeValidationError(input);
    });
    return input;
  }
  createTypeSelectorContainer(parentNode) {
    const typeSelectorContainerLabel = parentNode.createDiv();
    typeSelectorContainerLabel.setText(`Field type:`);
    const select = new import_obsidian21.DropdownComponent(parentNode);
    Object.keys(FieldTypeLabelMapping).forEach((f) => select.addOption(f, FieldTypeTooltip[f]));
    if (this.field.type) {
      select.setValue(this.field.type);
    }
    select.onChange((typeLabel) => {
      this.field = new Field_default();
      Field_default.copyProperty(this.field, this.initialField);
      this.field.name = this.namePromptComponent.getValue();
      this.field.type = FieldTypeLabelMapping[typeLabel];
      if (this.field.type !== this.initialField.type && ![this.field.type, this.initialField.type].every((fieldType) => ["Multi" /* Multi */, "Select" /* Select */, "Cycle" /* Cycle */].includes(fieldType))) {
        this.field.options = {};
      }
      while (this.fieldOptionsContainer.firstChild) {
        this.fieldOptionsContainer.removeChild(this.fieldOptionsContainer.firstChild);
      }
      this.fieldManager = new FieldManager[this.field.type](this.field);
      this.fieldManager.createSettingContainer(this.fieldOptionsContainer, this.plugin, 0 /* PluginSettings */);
    });
  }
  createForm() {
    return __async(this, null, function* () {
      const div = this.contentEl.createDiv({ cls: "metadata-menu-prompt-div" });
      const mainDiv = div.createDiv({ cls: "metadata-menu-prompt-form" });
      const nameContainer = mainDiv.createDiv();
      this.namePromptComponent = this.createnameInputContainer(nameContainer);
      mainDiv.createDiv({ cls: "metadata-menu-separator" }).createEl("hr");
      const typeSelectContainer = mainDiv.createDiv();
      this.fieldOptionsContainer = mainDiv.createDiv();
      const footerEl = this.contentEl.createDiv();
      const footerButtons = new import_obsidian21.Setting(footerEl);
      footerButtons.addButton((b) => this.createSaveButton(b));
      footerButtons.addExtraButton((b) => this.createCancelButton(b));
      this.createTypeSelectorContainer(typeSelectContainer);
      this.fieldManager.createSettingContainer(this.fieldOptionsContainer, this.plugin, 0 /* PluginSettings */);
    });
  }
  validateFields() {
    return this.fieldManager.validateName(this.namePromptComponent, this.namePromptComponent.inputEl) && this.fieldManager.validateOptions();
  }
  createSaveButton(b) {
    b.setTooltip("Save");
    b.setIcon("checkmark");
    b.onClick(() => __async(this, null, function* () {
      var _a;
      let error = !this.validateFields();
      if (error) {
        new import_obsidian21.Notice("Fix errors before saving.");
        return;
      }
      ;
      this.saved = true;
      const currentExistingField = this.plugin.initialProperties.filter((p) => p.id == this.field.id)[0];
      if (currentExistingField) {
        Field_default.copyProperty(currentExistingField, this.field);
      } else {
        this.plugin.initialProperties.push(this.field);
      }
      ;
      Field_default.copyProperty(this.initialField, this.field);
      if (this.parentSetting)
        Field_default.copyProperty(this.parentSetting.field, this.field);
      (_a = this.parentSetting) == null ? void 0 : _a.setTextContentWithname();
      this.plugin.saveSettings();
      this.close();
    }));
    return b;
  }
  createCancelButton(b) {
    b.setIcon("cross").setTooltip("Cancel").onClick(() => {
      this.saved = false;
      if (this.initialField.name != "") {
        Object.assign(this.field, this.initialField);
      }
      ;
      this.close();
    });
    return b;
  }
  static setValidationError(textInput, insertAfter, message) {
    var _a;
    textInput.inputEl.addClass("is-invalid");
    if (message && ((_a = textInput.inputEl.parentElement) == null ? void 0 : _a.lastElementChild)) {
      let mDiv = textInput.inputEl.parentElement.querySelector(".invalid-feedback");
      if (!mDiv) {
        mDiv = createDiv({ cls: "invalid-feedback" });
      }
      mDiv.innerText = message;
      mDiv.insertAfter(insertAfter);
    }
  }
  static removeValidationError(textInput) {
    var _a;
    if (textInput.inputEl.hasClass("is-invalid") && ((_a = textInput.inputEl.parentElement) == null ? void 0 : _a.lastElementChild)) {
      textInput.inputEl.removeClass("is-invalid");
      textInput.inputEl.parentElement.removeChild(textInput.inputEl.parentElement.lastElementChild);
    }
    ;
  }
};

// src/suggester/FolderSuggester.ts
var import_obsidian22 = require("obsidian");
var FolderSuggest = class extends TextInputSuggest {
  getSuggestions(inputStr) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const folders = [];
    const lowerCaseInputStr = inputStr.toLowerCase();
    abstractFiles.forEach((folder) => {
      if (folder instanceof import_obsidian22.TFolder && folder.path.toLowerCase().contains(lowerCaseInputStr)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(file, el) {
    el.setText(file.path);
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/settings/MetadataMenuSettingTab.ts
var SettingsMigrationConfirmModal = class extends import_obsidian23.Modal {
  constructor(plugin, tab) {
    super(plugin.app);
    this.plugin = plugin;
    this.tab = tab;
  }
  onOpen() {
    this.titleEl.setText("Confirm");
    const body = this.contentEl.createDiv({
      cls: "modal-text-danger"
    });
    body.setText("This will erase current settings. Are you sure?");
    const confirmButton = new import_obsidian23.ButtonComponent(this.contentEl);
    confirmButton.setIcon("check");
    confirmButton.onClick(() => {
      if (this.app.plugins.plugins.hasOwnProperty("supercharged-links-obsidian")) {
        let settings = this.app.plugins.plugins["supercharged-links-obsidian"].settings;
        this.plugin.initialProperties = [];
        settings.presetFields.forEach((prop) => {
          const field = new Field_default();
          Object.assign(field, prop);
          this.plugin.initialProperties.push(field);
        });
        this.plugin.saveSettings();
        this.close();
      }
      ;
    });
  }
  onClose() {
    this.tab.display();
  }
};
var MetadataMenuSettingTab = class extends import_obsidian23.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    const globalSettings = containerEl.createEl("div");
    globalSettings.createEl("h4", { text: "Global settings", cls: "metadata-menu-setting-section-header" });
    globalSettings.createEl("div", {
      cls: "setting-item-description metadata-menu-setting-section-desc",
      text: "Global settings to apply to your whole vault"
    });
    new import_obsidian23.Setting(globalSettings).setName("Display field options in context menu").setDesc("Choose to show or hide fields options in the context menu of a link or a file").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.displayFieldsInContextMenu);
      toggle.onChange((value) => __async(this, null, function* () {
        this.plugin.settings.displayFieldsInContextMenu = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian23.Setting(globalSettings).setName("Globally ignored fields").setDesc("Fields to be ignored by the plugin when adding options to the context menu").addTextArea((text) => {
      text.setPlaceholder("Enter fields as string, comma separated").setValue(this.plugin.settings.globallyIgnoredFields.join(", ")).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.globallyIgnoredFields = value.replace(/\s/g, "").split(",");
        yield this.plugin.saveSettings();
      }));
      text.inputEl.rows = 6;
      text.inputEl.cols = 25;
    });
    new import_obsidian23.Setting(globalSettings).setName("First day of week").setDesc("For date fields, which day the date picker's week should start with").addDropdown((cb) => {
      for (let i = 0; i < 2; i++) {
        cb.addOption(i.toString(), (0, import_obsidian23.moment)().day(i).format("dddd"));
      }
      cb.setValue(this.plugin.settings.firstDayOfWeek.toString() || "1");
      cb.onChange((value) => __async(this, null, function* () {
        this.plugin.settings.firstDayOfWeek = parseInt(value);
        yield this.plugin.saveSettings();
      }));
    });
    const presetFieldsSettings = containerEl.createEl("div");
    presetFieldsSettings.createEl("h4", { text: "Preset Fields settings", cls: "metadata-menu-setting-section-header" });
    presetFieldsSettings.createEl("div", {
      cls: "setting-item-description metadata-menu-setting-section-desc",
      text: "Manage globally predefined type and options for a field throughout your whole vault"
    });
    new import_obsidian23.Setting(presetFieldsSettings).setName("Add New Field Setting").setDesc("Add a new Frontmatter property for which you want preset options.").addButton((button) => {
      return button.setTooltip("Add New Property Manager").setButtonText("+").onClick(() => __async(this, null, function* () {
        let modal = new FieldSettingsModal(this.app, this.plugin, presetFieldsSettings);
        modal.open();
      }));
    });
    this.plugin.initialProperties.forEach((prop) => {
      const property = new Field_default();
      Object.assign(property, prop);
      new FieldSetting(presetFieldsSettings, property, this.app, this.plugin);
    });
    const classFilesSettings = containerEl.createEl("div");
    classFilesSettings.createEl("h4", { text: "FileClass settings", cls: "metadata-menu-setting-section-header" });
    classFilesSettings.createEl("div", {
      cls: "setting-item-description metadata-menu-setting-section-desc",
      text: "Manage fileClass folder and alias. When a note has a fielClass defined, fileClass field properties will override global preset fields settings for the same field name"
    });
    new import_obsidian23.Setting(classFilesSettings).setName("class Files path").setDesc("Path to the files containing the authorized fields for a type of note").addSearch((cfs) => {
      new FolderSuggest(this.app, cfs.inputEl);
      cfs.setPlaceholder("Folder").setValue(this.plugin.settings.classFilesPath).onChange((new_folder) => {
        const newPath = new_folder.endsWith("/") ? new_folder : new_folder + "/";
        this.plugin.settings.classFilesPath = newPath;
        this.plugin.saveSettings();
      });
      cfs.containerEl.addClass("metadata-menu-setting-fileClass-search");
    });
    new import_obsidian23.Setting(classFilesSettings).setName("fileClass field alias").setDesc("Choose another name for fileClass field in frontmatter (example: Category, type, ...").addText((text) => {
      text.setValue(this.plugin.settings.fileClassAlias).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.fileClassAlias = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian23.Setting(classFilesSettings).setName("global fileClass").setDesc("Choose one fileClass to be applicable to all files (even it is not present as a fileClass attribute in their frontmatter). This will override the preset Fields defined above").addSearch((cfs) => {
      new FileSuggest(this.app, cfs.inputEl, this.plugin, this.plugin.settings.classFilesPath);
      cfs.setPlaceholder("Global fileClass");
      cfs.setValue(this.plugin.settings.globalFileClass ? this.plugin.settings.classFilesPath + this.plugin.settings.globalFileClass + ".md" : "").onChange((newPath) => {
        var _a;
        this.plugin.settings.globalFileClass = newPath ? (_a = newPath.split("\\").pop().split("/").pop()) == null ? void 0 : _a.replace(".md", "") : "";
        this.plugin.saveSettings();
      });
      cfs.containerEl.addClass("metadata-menu-setting-fileClass-search");
    });
    const migrateSettings = containerEl.createEl("div");
    migrateSettings.createEl("h4", { text: "Migrate" });
    new import_obsidian23.Setting(migrateSettings).setName("Copy settings from supercharged links plugin").setDesc("Copy settings from supercharged links plugin").addButton((button) => {
      return button.setTooltip("Get settings from supercharged links").setButtonText("Copy").onClick(() => __async(this, null, function* () {
        let modal = new SettingsMigrationConfirmModal(this.plugin, this);
        modal.open();
      }));
    });
  }
};

// src/settings/MetadataMenuSettings.ts
var DEFAULT_SETTINGS = {
  presetFields: [],
  displayFieldsInContextMenu: true,
  globallyIgnoredFields: [],
  classFilesPath: "",
  isAutosuggestEnabled: true,
  fileClassAlias: "fileClass",
  settingsVersion: void 0,
  globalFileClass: void 0,
  firstDayOfWeek: 1
};

// src/commands/getValues.ts
var import_obsidian24 = require("obsidian");
function getValues(app2, fileOrfilePath, attribute) {
  return __async(this, null, function* () {
    var _a;
    let file;
    if (fileOrfilePath instanceof import_obsidian24.TFile) {
      file = fileOrfilePath;
    } else {
      const _file = app2.vault.getAbstractFileByPath(fileOrfilePath);
      if (_file instanceof import_obsidian24.TFile && _file.extension == "md") {
        file = _file;
      } else {
        throw Error("path doesn't correspond to a proper file");
      }
    }
    const content = (yield app2.vault.cachedRead(file)).split("\n");
    const frontmatter = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    const { position: { start: start2, end: end2 } } = frontmatter ? frontmatter : { position: { start: void 0, end: void 0 } };
    const result = [];
    content.map((line, i) => {
      if (frontmatter && i >= start2.line && i <= end2.line) {
        const regex = new RegExp(`${attribute}:(.*)`, "u");
        const r = line.match(regex);
        if (r && r.length > 0)
          result.push(r[1]);
      } else {
        const fullLineRegex2 = new RegExp(`^${inlineFieldRegex(attribute)}`, "u");
        const fR = encodeLink(line).match(fullLineRegex2);
        if (fR == null ? void 0 : fR.groups) {
          result.push(decodeLink(fR.groups.values));
        }
        ;
        const inSentenceRegexBrackets2 = new RegExp(`\\[${inlineFieldRegex(attribute)}\\]`, "gu");
        const sRB = encodeLink(line).matchAll(inSentenceRegexBrackets2);
        let next = sRB.next();
        while (!next.done) {
          if (next.value.groups) {
            result.push(decodeLink(next.value.groups.values));
          }
          next = sRB.next();
        }
        const inSentenceRegexPar2 = new RegExp(`\\(${inlineFieldRegex(attribute)}\\)`, "gu");
        const sRP = encodeLink(line).matchAll(inSentenceRegexPar2);
        next = sRP.next();
        while (!next.done) {
          if (next.value.groups) {
            result.push(decodeLink(next.value.groups.values));
          }
          next = sRP.next();
        }
      }
    });
    return result;
  });
}

// src/commands/getField.ts
function getField(plugin, propertyName, fileClass) {
  const matchingSettings = plugin.settings.presetFields.filter((p) => p.name == propertyName);
  if (fileClass) {
    const fileClassAttributesWithName = fileClass.attributes.filter((attr) => attr.name == propertyName);
    if (fileClassAttributesWithName.length > 0) {
      const fileClassAttribute = fileClassAttributesWithName[0];
      if (fileClassAttribute.type) {
        return fileClassAttribute.getField();
      } else if (matchingSettings.length > 0) {
        return matchingSettings[0];
      }
      ;
    }
  } else if (matchingSettings.length > 0) {
    return matchingSettings[0];
  }
  ;
}

// src/utils/textUtils.ts
var capitalize = (s) => {
  return s && s[0].toUpperCase() + s.slice(1);
};

// src/fileClass/fileClassAttribute.ts
var FileClassAttribute = class {
  constructor(raw, origin) {
    var _a, _b;
    this.origin = origin;
    const completeRegex = new RegExp(`^${genericFieldRegex}::(?<fieldSettings>.+)?`, "u");
    const nameRegex = new RegExp(`^${genericFieldRegex}$`, "u");
    let fieldName;
    let { attribute, fieldSettings } = ((_a = raw.match(completeRegex)) == null ? void 0 : _a.groups) || {};
    if (attribute) {
      fieldName = attribute;
    } else {
      let { attribute: attribute2 } = ((_b = raw.match(nameRegex)) == null ? void 0 : _b.groups) || {};
      fieldName = attribute2;
    }
    if (fieldName) {
      this.name = fieldName.trim();
      if (fieldSettings) {
        const settings = JSON.parse(`${fieldSettings.trim()}`);
        this.type = FieldTypeLabelMapping[capitalize(settings["type"])];
        this.options = settings["options"];
      } else {
        this.type = "Input" /* Input */;
      }
    } else {
      const error = new Error("Improper value");
      throw error;
    }
  }
  getField() {
    var _a;
    let options = {};
    if (Array.isArray(this.options)) {
      (_a = this.options) == null ? void 0 : _a.forEach((option, index) => {
        options[index] = option;
      });
    } else {
      options = this.options;
    }
    return new Field_default(this.name, options, this.name, void 0, this.type);
  }
};

// src/fileClass/fileClass.ts
var import_obsidian25 = require("obsidian");
var FileClassManager = class {
  constructor(instance) {
    this.instance = instance;
  }
  all() {
    const filesWithFileClassName = this.instance.plugin.app.vault.getMarkdownFiles().filter((file) => {
      const cache = this.instance.plugin.app.metadataCache.getFileCache(file);
      const fileClassAlias = this.instance.plugin.settings.fileClassAlias;
      return (cache == null ? void 0 : cache.frontmatter) && Object.keys(cache.frontmatter).includes(fileClassAlias) && cache.frontmatter[fileClassAlias] == this.instance.name;
    });
    return filesWithFileClassName;
  }
  get(name) {
    const filesWithName = this.all().filter((file) => file.basename == name);
    if (filesWithName.length > 1) {
      const error = new Error("More than one value found");
      throw error;
    }
    if (filesWithName.length == 0) {
      const error = new Error("No file value found");
      throw error;
    }
    return filesWithName[0];
  }
  getPath(path) {
    const filesWithName = this.all().filter((file) => file.path == path);
    if (filesWithName.length > 1) {
      const error = new Error("More than one value found");
      throw error;
    }
    if (filesWithName.length == 0) {
      const error = new Error("No file value found");
      throw error;
    }
    return filesWithName[0];
  }
};
var FileClass = class {
  constructor(plugin, name) {
    this.plugin = plugin;
    this.name = name;
    this.objects = new FileClassManager(this);
    this.attributes = [];
  }
  getClassFile() {
    const filesClassPath = this.plugin.settings.classFilesPath;
    const file = this.plugin.app.vault.getAbstractFileByPath(`${filesClassPath}${this.name}.md`);
    if (file instanceof import_obsidian25.TFile && file.extension == "md") {
      return file;
    } else {
      const error = new Error(`no file named <${this.name}.md> in <${filesClassPath}> folder to match <${this.plugin.settings.fileClassAlias}: ${this.name}> in one of these notes`);
      throw error;
    }
  }
  getParentClass() {
    return;
  }
  getAttributes(excludeParents = false) {
    return __async(this, null, function* () {
      var _a, _b, _c, _d;
      try {
        const file = this.getClassFile();
        let attributes = [];
        let errors = [];
        const result = yield this.plugin.app.vault.cachedRead(file);
        const parent = (_b = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter) == null ? void 0 : _b.extends;
        const excludedFields = (_d = (_c = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _c.frontmatter) == null ? void 0 : _d.excludes;
        if (parent && !excludeParents) {
          try {
            const parentFileClass = yield createFileClass(this.plugin, parent);
            yield parentFileClass.getAttributes();
            attributes = [...parentFileClass.attributes];
          } catch (error) {
            errors.push(error);
          }
        }
        result.split("\n").forEach((line) => {
          try {
            const attribute = new FileClassAttribute(line, this.name);
            attributes.push(attribute);
          } catch (error) {
            errors.push(error);
          }
        });
        this.attributes = Array.isArray(excludedFields) ? attributes.filter((attr) => !excludedFields.includes(attr.name)) : attributes;
        this.errors = errors;
      } catch (error) {
        throw error;
      }
    });
  }
  updateAttribute(newType, newName, newOptions, attr) {
    return __async(this, null, function* () {
      const file = this.getClassFile();
      let result = yield this.plugin.app.vault.read(file);
      if (attr) {
        let newContent = [];
        result.split("\n").forEach((line) => {
          if (line.startsWith(attr.name)) {
            if (newType == "Input") {
              newContent.push(`${newName}:: {"type": "Input"}`);
            } else {
              let settings = {};
              settings["type"] = newType;
              if (newOptions)
                settings["options"] = newOptions;
              newContent.push(`${newName}:: ${JSON.stringify(settings)}`);
            }
          } else {
            newContent.push(line);
          }
        });
        this.plugin.app.vault.modify(file, newContent.join("\n"));
      } else {
        let settings = {};
        settings["type"] = newType;
        if (newOptions)
          settings["options"] = newOptions;
        result += `
${newName}:: ${JSON.stringify(settings)}`;
        yield this.plugin.app.vault.modify(file, result);
      }
    });
  }
  removeAttribute(attr) {
    return __async(this, null, function* () {
      const file = this.getClassFile();
      const result = yield this.plugin.app.vault.read(file);
      let newContent = [];
      result.split("\n").forEach((line) => {
        if (!line.startsWith(attr.name)) {
          newContent.push(line);
        }
      });
      yield this.plugin.app.vault.modify(file, newContent.join("\n"));
    });
  }
};
function createFileClass(plugin, name, excludeParent = false) {
  return __async(this, null, function* () {
    return new Promise((resolve, reject) => {
      const fileClass = new FileClass(plugin, name);
      fileClass.getAttributes(excludeParent).then(() => {
        resolve(fileClass);
      }).catch((error) => {
        reject(error);
      });
    });
  });
}

// src/commands/fieldModifier.ts
function fieldModifier(plugin, dv, p, fieldName, attrs) {
  return __async(this, null, function* () {
    const fieldContainer = dv.el("div", "");
    fieldContainer.setAttr("class", "metadata-menu-dv-field-container");
    if (p[fieldName] === void 0) {
      const emptyField = dv.el("span", null, attrs);
      fieldContainer.appendChild(emptyField);
    } else {
      const fileClassAlias = plugin.settings.fileClassAlias;
      if (p[fileClassAlias] || plugin.settings.globalFileClass) {
        const fileClassName = p[fileClassAlias] || plugin.settings.globalFileClass;
        const fileClass = yield createFileClass(plugin, fileClassName);
        const field = getField(plugin, fieldName, fileClass);
        if (field == null ? void 0 : field.type) {
          const fieldManager = new FieldManager[field.type](field);
          yield fieldManager.createDvField(plugin, dv, p, fieldContainer, attrs);
        } else {
          const fieldManager = FieldManager2.createDefault(fieldName);
          yield fieldManager.createDvField(plugin, dv, p, fieldContainer, attrs);
        }
      } else if (plugin.settings.presetFields.filter((attr) => attr.name == fieldName)) {
        const field = getField(plugin, fieldName);
        if (field == null ? void 0 : field.type) {
          const fieldManager = new FieldManager[field.type](field);
          yield fieldManager.createDvField(plugin, dv, p, fieldContainer, attrs);
        } else {
          const fieldManager = FieldManager2.createDefault(fieldName);
          yield fieldManager.createDvField(plugin, dv, p, fieldContainer, attrs);
        }
      } else {
        const fieldManager = FieldManager2.createDefault(fieldName);
        yield fieldManager.createDvField(plugin, dv, p, fieldContainer, attrs);
      }
    }
    return fieldContainer;
  });
}

// src/commands/fileFields.ts
var import_obsidian26 = require("obsidian");
var FieldInfo = class {
  constructor() {
    this.type = void 0;
    this.sourceType = void 0;
    this.fileClass = void 0;
    this.options = void 0;
    this.isValid = void 0;
    this.value = "";
    this.valuesListNotePath = void 0;
    this.unique = true;
  }
  setInfos(plugin, fieldName, value, fileClass) {
    return __async(this, null, function* () {
      this.value = value;
      this.ignoreInMenu = plugin.settings.globallyIgnoredFields.includes(fieldName);
      if (fileClass) {
        const fileClassFields = fileClass.attributes.map((attr) => attr.name);
        if (fileClassFields.includes(fieldName)) {
          const field = getField(plugin, fieldName, fileClass);
          if (field) {
            const fieldManager = new FieldManager[field.type](field);
            this.isValid = yield fieldManager.validateValue(value);
            this.sourceType = "fileClass";
            const attribute = fileClass.attributes.filter((a) => a.name === fieldName)[0];
            this.fileClass = attribute.origin;
            this.type = attribute.type;
            this.options = attribute.options;
          }
        }
      } else if (plugin.settings.presetFields.map((f) => f.name).includes(fieldName)) {
        const field = getField(plugin, fieldName);
        if (field) {
          const fieldManager = new FieldManager[field.type](field);
          this.isValid = yield fieldManager.validateValue(value);
          this.type = field.type;
          this.options = field.options;
          this.valuesListNotePath = field.valuesListNotePath;
          this.sourceType = "settings";
        }
      }
    });
  }
};
function fileFields(plugin, fileOrfilePath) {
  return __async(this, null, function* () {
    var _a;
    let file;
    if (fileOrfilePath instanceof import_obsidian26.TFile) {
      file = fileOrfilePath;
    } else {
      const _file = app.vault.getAbstractFileByPath(fileOrfilePath);
      if (_file instanceof import_obsidian26.TFile && _file.extension == "md") {
        file = _file;
      } else {
        throw Error("path doesn't correspond to a proper file");
      }
    }
    const frontmatter = (_a = plugin.app.metadataCache.getCache(file.path)) == null ? void 0 : _a.frontmatter;
    const fields = {};
    let fileClass;
    if (plugin.settings.globalFileClass) {
      try {
        fileClass = yield createFileClass(plugin, plugin.settings.globalFileClass);
      } catch (error) {
        fileClass = void 0;
      }
    }
    if (frontmatter) {
      const _b = frontmatter, { position } = _b, attributes = __objRest(_b, ["position"]);
      const fileClassAlias = plugin.settings.fileClassAlias;
      if (Object.keys(attributes).includes(fileClassAlias)) {
        const fileClassName = attributes[fileClassAlias];
        try {
          fileClass = yield createFileClass(plugin, fileClassName);
        } catch (error) {
          fileClass = void 0;
        }
      }
      Object.keys(attributes).forEach((key) => __async(this, null, function* () {
        const fieldInfo = new FieldInfo();
        fieldInfo.unique = !Object.keys(fields).includes(key);
        fields[key] = fieldInfo;
        yield fieldInfo.setInfos(plugin, key, attributes[key], fileClass);
      }));
    }
    const result = yield plugin.app.vault.read(file);
    result.split("\n").map((line) => __async(this, null, function* () {
      const lineFields = getLineFields(line);
      lineFields.forEach((_0) => __async(this, [_0], function* ({ attribute, values }) {
        const fieldName = attribute.trim();
        const fieldInfo = new FieldInfo();
        fieldInfo.unique = !Object.keys(fields).includes(fieldName);
        fields[fieldName] = fieldInfo;
        yield fieldInfo.setInfos(plugin, fieldName, values, fileClass);
      }));
    }));
    return fields;
  });
}

// src/MetadataMenuApi.ts
var MetadataMenuApi = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  make() {
    return {
      getValues: this.getValues(),
      replaceValues: this.replaceValues(),
      insertValues: this.insertValues(),
      fieldModifier: this.fieldModifier(),
      fileFields: this.fileFields()
    };
  }
  getValues() {
    return (fileOrFilePath, attribute) => __async(this, null, function* () {
      return getValues(this.plugin.app, fileOrFilePath, attribute);
    });
  }
  replaceValues() {
    return (fileOrFilePath, attribute, input) => __async(this, null, function* () {
      return replaceValues(this.plugin.app, fileOrFilePath, attribute, input);
    });
  }
  insertValues() {
    return (fileOrFilePath, fieldName, value, lineNumber, inFrontmatter, top2) => __async(this, null, function* () {
      return insertValues(this.plugin.app, fileOrFilePath, fieldName, value, lineNumber, inFrontmatter, top2);
    });
  }
  fieldModifier() {
    return (dv, p, fieldName, attrs) => fieldModifier(this.plugin, dv, p, fieldName, attrs);
  }
  fileFields() {
    return (fileOrFilePath) => __async(this, null, function* () {
      return fileFields(this.plugin, fileOrFilePath);
    });
  }
};

// src/options/linkContextMenu.ts
var import_obsidian34 = require("obsidian");

// src/optionModals/chooseSectionModal.ts
var import_obsidian29 = require("obsidian");

// src/optionModals/fieldSelectModal.ts
var import_obsidian28 = require("obsidian");

// src/optionModals/addNewFieldModal.ts
var import_obsidian27 = require("obsidian");
var addNewFieldModal = class extends import_obsidian27.Modal {
  constructor(plugin, lineNumber, file, inFrontmatter, top2) {
    super(plugin.app);
    this.lineNumber = lineNumber;
    this.inFrontmatter = inFrontmatter;
    this.file = file;
    this.top = top2;
  }
  onOpen() {
    this.titleEl.setText("Insert new field");
    const addNewFieldContainer = this.contentEl.createDiv();
    const nameInputContainer = addNewFieldContainer.createDiv();
    nameInputContainer.setText("Field Name: ");
    const nameInputEl = new import_obsidian27.TextComponent(nameInputContainer);
    nameInputEl.setPlaceholder("Field name");
    const valueInputContainer = addNewFieldContainer.createDiv();
    valueInputContainer.setText("Field value: ");
    const valueInputEl = new import_obsidian27.TextComponent(valueInputContainer);
    valueInputEl.setPlaceholder("Field value");
    const footerButtons = this.contentEl.createDiv({
      cls: "metadata-menu-textarea-buttons"
    });
    const saveButton = new import_obsidian27.ButtonComponent(footerButtons);
    saveButton.setIcon("checkmark");
    saveButton.onClick(() => __async(this, null, function* () {
      insertValues(this.app, this.file, nameInputEl.getValue(), valueInputEl.getValue(), this.lineNumber, this.inFrontmatter, this.top);
    }));
    const cancelButton = new import_obsidian27.ExtraButtonComponent(footerButtons);
    cancelButton.setIcon("cross");
    cancelButton.onClick(() => {
      this.close();
    });
  }
};

// src/optionModals/fieldSelectModal.ts
var fieldSelectModal = class extends import_obsidian28.Modal {
  constructor(plugin, file, lineNumber, line, inFrontmatter, top2, fileClass) {
    super(plugin.app);
    this.line = line;
    this.lineNumber = lineNumber;
    this.plugin = plugin;
    this.file = file;
    this.inFrontmatter = inFrontmatter;
    this.top = top2;
    this.fileClass = fileClass;
  }
  onOpen() {
    this.titleEl.setText(`Insert field after > ${this.line.substring(0, 20)}${this.line.length > 20 ? "..." : ""}`);
    const container = this.contentEl.createDiv({ cls: "metadata-menu-field-select" });
    const settingsDropdownContainer = container.createDiv();
    const settingsSelector = new import_obsidian28.DropdownComponent(settingsDropdownContainer);
    settingsSelector.addOption("---", "Choose Field");
    settingsSelector.addOption("++New", "New");
    if (this.fileClass) {
      this.fileClass.attributes.forEach((attr) => {
        settingsSelector.addOption(attr.name, attr.name);
      });
    } else {
      this.plugin.settings.presetFields.forEach((setting) => {
        settingsSelector.addOption(setting.name, setting.name);
      });
    }
    ;
    settingsSelector.onChange((selectedFieldName) => {
      if (selectedFieldName == "++New") {
        const newFieldModal = new addNewFieldModal(this.plugin, this.lineNumber, this.file, this.inFrontmatter, this.top);
        newFieldModal.open();
        this.close();
      } else if (this.fileClass) {
        const fileClassAttributesWithName = this.fileClass.attributes.filter((attr) => attr.name == selectedFieldName);
        let field;
        let type;
        if (fileClassAttributesWithName.length > 0) {
          const fileClassAttribute = fileClassAttributesWithName[0];
          field = fileClassAttribute.getField();
          type = fileClassAttribute.type;
        }
        if (field) {
          const fieldManager = new FieldManager[field.type](field);
          fieldManager.createAndOpenFieldModal(this.app, this.file, selectedFieldName, this.lineNumber, this.inFrontmatter, this.top);
        }
        this.close();
      } else {
        const field = this.plugin.settings.presetFields.filter((_field) => _field.name == selectedFieldName)[0];
        const fieldManager = new FieldManager[field.type](field);
        fieldManager.createAndOpenFieldModal(this.app, this.file, selectedFieldName, this.lineNumber, this.inFrontmatter, this.top);
        this.close();
      }
      ;
    });
  }
};

// src/optionModals/chooseSectionModal.ts
var chooseSectionModal = class extends import_obsidian29.Modal {
  constructor(plugin, file, fileClass) {
    super(plugin.app);
    this.file = file;
    this.plugin = plugin;
    this.fileClass = fileClass;
  }
  onOpen() {
    return __async(this, null, function* () {
      this.titleEl.setText("Add a field in this note after:");
      const inputDiv = this.contentEl.createDiv({ cls: "metadata-menu-modal-value" });
      const selectEl = new import_obsidian29.DropdownComponent(inputDiv);
      selectEl.selectEl.addClass("metadata-menu-select");
      selectEl.addOption("", "Select line");
      selectEl.addOption("top_0", "top");
      const result = yield this.app.vault.read(this.file);
      let foreHeadText = false;
      let frontmatterStart = false;
      let frontmatterEnd = false;
      let inFrontmatter = false;
      result.split("\n").forEach((line, lineNumber) => {
        if (line != "---" && !foreHeadText && !frontmatterStart) {
          foreHeadText = true;
        }
        ;
        if (line == "---" && !foreHeadText) {
          if (!frontmatterStart) {
            frontmatterStart = true;
            inFrontmatter = true;
          } else if (!frontmatterEnd) {
            frontmatterEnd = true;
            inFrontmatter = false;
          }
          ;
        }
        if (inFrontmatter) {
          selectEl.addOption(`frontmatter_${lineNumber}`, `${line.substring(0, 30)}${line.length > 30 ? "..." : ""}`);
        } else {
          selectEl.addOption(`body_${lineNumber}`, `${line.substring(0, 30)}${line.length > 30 ? "..." : ""}`);
        }
        ;
      });
      selectEl.onChange(() => {
        const valueArray = selectEl.getValue().match(/(\w+)_(\d+)/);
        const position = valueArray && valueArray.length > 0 ? valueArray[1] : 0;
        const lineNumber = Number(valueArray && valueArray.length > 1 ? valueArray[2] : 0);
        const inFrontmatter2 = position == "frontmatter" ? true : false;
        const top2 = position == "top" ? true : false;
        const modal = new fieldSelectModal(this.plugin, this.file, lineNumber, result.split("\n")[lineNumber], inFrontmatter2, top2, this.fileClass);
        this.close();
        modal.open();
      });
    });
  }
};

// src/fileClass/FileClassAttributeSelectModal.ts
var import_obsidian31 = require("obsidian");

// src/fileClass/FileClassAttributeModal.ts
var import_obsidian30 = require("obsidian");
var FileClassAttributeModal = class extends import_obsidian30.Modal {
  constructor(plugin, fileClass, attr) {
    super(plugin.app);
    this.plugin = plugin;
    this.attr = attr;
    this.fileClass = fileClass;
    this.initialField = new Field_default();
    if (this.attr) {
      this.field = attr.getField();
      Field_default.copyProperty(this.initialField, this.field);
    } else {
      this.field = new Field_default();
    }
    this.fieldManager = new FieldManager[this.field.type](this.field);
    this.nameInputContainer = this.contentEl.createDiv();
    this.typeSelectContainer = this.contentEl.createDiv({ cls: "metadata-menu-value-selector-container" });
    this.fieldOptionsContainer = this.contentEl.createDiv();
  }
  buildNameInputContainer() {
    this.nameInputContainer.setText("Name: ");
    this.nameInput = new import_obsidian30.TextComponent(this.nameInputContainer);
    this.attr ? this.nameInput.setValue(this.field.name) : this.nameInput.setPlaceholder("Type a name for this attribute");
    this.nameInput.onChange((value) => {
      this.field.name = value;
      this.attrName.setText(`<${value}>`);
    });
    this.typeSelectContainer.createDiv({ cls: "metadata-menu-separator" }).createEl("hr");
  }
  buildTypeSelectContainer() {
    const typeSelectHeader = this.typeSelectContainer.createDiv();
    const attrLine = typeSelectHeader.createEl("div");
    this.attrName = attrLine.createEl("strong");
    this.attrName.setText(`<${this.field.name}>`);
    attrLine.append(" fields in files with:");
    String(`---
${this.plugin.settings.fileClassAlias}: ${this.fileClass.name}
...
---`).split("\n").forEach((line) => {
      typeSelectHeader.createEl("div", "yaml-metadata-menu-red").setText(line);
    });
    const typeSelectLabel = this.typeSelectContainer.createDiv({ cls: "metadata-menu-value-selector-inline-label" });
    typeSelectLabel.setText("will: ");
    const typeSelectDropDown = this.typeSelectContainer.createDiv({ cls: "metadata-menu-value-selector-toggler" });
    const typeSelect = new import_obsidian30.DropdownComponent(typeSelectDropDown);
    Object.keys(FieldTypeTooltip).forEach((key) => typeSelect.addOption(key, FieldTypeTooltip[key]));
    typeSelect.setValue(this.field.type);
    typeSelect.onChange((typeLabel) => {
      this.field = new Field_default();
      Field_default.copyProperty(this.field, this.initialField);
      this.field.name = this.nameInput.getValue();
      this.field.type = FieldTypeLabelMapping[typeLabel];
      if (this.field.type !== this.initialField.type && ![this.field.type, this.initialField.type].every((fieldType) => ["Multi" /* Multi */, "Select" /* Select */, "Cycle" /* Cycle */].includes(fieldType))) {
        this.field.options = {};
      }
      while (this.fieldOptionsContainer.firstChild) {
        this.fieldOptionsContainer.removeChild(this.fieldOptionsContainer.firstChild);
      }
      this.fieldManager = new FieldManager[this.field.type](this.field);
      this.fieldManager.createSettingContainer(this.fieldOptionsContainer, this.plugin, 1 /* FileClassAttributeSettings */);
    });
  }
  validateFields() {
    return this.fieldManager.validateName(this.nameInput, this.nameInput.inputEl) && this.fieldManager.validateOptions();
  }
  createSaveBtn(container) {
    const saveButton = new import_obsidian30.ButtonComponent(container);
    saveButton.setIcon("checkmark");
    saveButton.onClick(() => {
      let error = !this.validateFields();
      if (error) {
        new import_obsidian30.Notice("Fix errors before saving.");
        return;
      }
      ;
      this.fileClass.updateAttribute(this.field.type, this.field.name, this.field.options, this.attr);
      this.close();
    });
  }
  createRemovelBtn(container) {
    const removeButton = new import_obsidian30.ButtonComponent(container);
    removeButton.setIcon("trash");
    removeButton.onClick(() => {
      var _a;
      const confirmModal = new import_obsidian30.Modal(this.plugin.app);
      confirmModal.titleEl.setText("Please confirm");
      confirmModal.contentEl.createDiv().setText(`Do you really want to remove ${(_a = this.attr) == null ? void 0 : _a.name} attribute from ${this.fileClass.name}?`);
      const confirmFooter = confirmModal.contentEl.createDiv({ cls: "metadata-menu-value-grid-footer" });
      const confirmButton = new import_obsidian30.ButtonComponent(confirmFooter);
      confirmButton.setIcon("checkmark");
      confirmButton.onClick(() => {
        if (this.attr)
          this.fileClass.removeAttribute(this.attr);
        confirmModal.close();
        this.close();
      });
      const dismissButton = new import_obsidian30.ExtraButtonComponent(confirmFooter);
      dismissButton.setIcon("cross");
      dismissButton.onClick(() => this.close());
      confirmModal.open();
    });
  }
  createCancelBtn(container) {
    const cancelButton = new import_obsidian30.ExtraButtonComponent(container);
    cancelButton.setIcon("cross");
    cancelButton.onClick(() => this.close());
  }
  onOpen() {
    this.titleEl.setText(this.attr ? `Manage ${this.attr.name}` : `Create a new attribute for ${this.fileClass.name}`);
    this.buildNameInputContainer();
    this.buildTypeSelectContainer();
    this.fieldManager.createSettingContainer(this.fieldOptionsContainer, this.plugin, 1 /* FileClassAttributeSettings */);
    const footer = this.contentEl.createDiv({ cls: "metadata-menu-value-grid-footer" });
    this.createSaveBtn(footer);
    if (this.attr)
      this.createRemovelBtn(footer);
    this.createCancelBtn(footer);
  }
};

// src/fileClass/FileClassAttributeSelectModal.ts
var FileClassAttributeSelectModal = class extends import_obsidian31.Modal {
  constructor(plugin, file) {
    super(plugin.app);
    this.file = file;
    this.plugin = plugin;
  }
  onOpen() {
    return __async(this, null, function* () {
      this.titleEl.setText(`Select the field to update`);
      const fileClass = yield createFileClass(this.plugin, this.file.basename, true);
      this.titleEl.setText(`Select the field to update in ${fileClass.name}`);
      const selectContainer = this.contentEl.createDiv();
      const select = new import_obsidian31.DropdownComponent(selectContainer);
      select.addOption("select an attribute", "--select an attribute--");
      fileClass.attributes.forEach((attr) => {
        select.addOption(attr.name, attr.name);
      });
      select.addOption("++newAttr++", "++Add a new attribute++");
      select.onChange((attrName) => {
        if (attrName == "++newAttr") {
          const modal = new FileClassAttributeModal(this.plugin, fileClass);
          modal.open();
          this.close();
        } else {
          const modal = new FileClassAttributeModal(this.plugin, fileClass, fileClass.attributes.filter((attr) => attr.name == attrName)[0]);
          modal.open();
          this.close();
        }
      });
    });
  }
};

// src/options/OptionsList.ts
function isMenu(category) {
  return category.addItem !== void 0;
}
function isSelect(category) {
  return category.modals !== void 0;
}
var OptionsList = class {
  constructor(plugin, file, category) {
    this.file = file;
    this.plugin = plugin;
    this.category = category;
    this.attributes = {};
    this.fileClassFields = [];
    this.fileClassForFields = false;
  }
  fetchFrontmatterFields() {
    return __async(this, null, function* () {
      var _a;
      const frontmatter = (_a = this.plugin.app.metadataCache.getCache(this.file.path)) == null ? void 0 : _a.frontmatter;
      if (frontmatter) {
        const _b = frontmatter, { position } = _b, attributes = __objRest(_b, ["position"]);
        Object.keys(attributes).forEach((key) => {
          if (!this.plugin.settings.globallyIgnoredFields.includes(key)) {
            this.attributes[key] = attributes[key];
          }
          ;
        });
        const fileClassAlias = this.plugin.settings.fileClassAlias;
        if (Object.keys(this.attributes).includes(fileClassAlias) || this.plugin.settings.globalFileClass) {
          const fileClass = this.attributes[fileClassAlias] || this.plugin.settings.globalFileClass;
          try {
            const _fileClass = yield createFileClass(this.plugin, fileClass);
            this.fileClass = _fileClass;
            this.fileClassFields = _fileClass.attributes.map((attr) => attr.name);
            this.fileClassForFields = true;
            Object.keys(attributes).forEach((key) => {
              if (!this.fileClassFields.includes(key) && key != fileClassAlias) {
                delete this.attributes[key];
              }
              ;
            });
          } catch (error) {
          }
        }
      }
    });
  }
  fetchInlineFields() {
    return __async(this, null, function* () {
      const result = yield this.plugin.app.vault.read(this.file);
      result.split("\n").map((line) => {
        const lineFields = getLineFields(line);
        lineFields.forEach(({ attribute, values }) => {
          if (attribute && !this.plugin.settings.globallyIgnoredFields.includes(attribute.trim())) {
            if (this.fileClassForFields) {
              if (this.fileClassFields.includes(attribute.trim())) {
                this.attributes[attribute.trim()] = values ? values.trim() : "";
              }
              ;
            } else {
              this.attributes[attribute.trim()] = values ? values.trim() : "";
            }
            ;
          }
          ;
        });
      });
    });
  }
  createExtraOptionList() {
    return __async(this, null, function* () {
      yield this.fetchFrontmatterFields();
      yield this.fetchInlineFields();
      if (this.fileClass) {
        const fileClassAttributeSelectModal = new FileClassAttributeSelectModal(this.plugin, this.fileClass.getClassFile());
        if (isMenu(this.category)) {
          this.category.addSeparator();
          this.category.addItem((item) => {
            item.setIcon("gear");
            item.setTitle(`Manage <${this.fileClass.name}> fields`);
            item.onClick(() => fileClassAttributeSelectModal.open());
          });
        } else {
          this.category.addOption("manage_fileClass_attributes", `Manage <${this.fileClass.name}> fields`);
          this.category.modals["manage_fileClass_attributes"] = () => fileClassAttributeSelectModal.open();
        }
        ;
      }
      if (isMenu(this.category)) {
        this.category.addSeparator();
      }
      ;
      this.buildFieldOptions();
      this.addSectionSelectModalOption();
    });
  }
  buildFieldOptions() {
    Object.keys(this.attributes).forEach((key) => {
      const value = this.attributes[key];
      const field = getField(this.plugin, key, this.fileClass);
      if (field) {
        const fieldManager = new FieldManager[field.type](field);
        fieldManager.addMenuOption(key, value, this.plugin.app, this.file, this.category);
      } else {
        const defaultField = new Field_default(key);
        defaultField.type = "Input" /* Input */;
        const fieldManager = new Managers_default.Input(defaultField);
        fieldManager.addMenuOption(key, value, this.plugin.app, this.file, this.category);
      }
    });
  }
  addSectionSelectModalOption() {
    const modal = new chooseSectionModal(this.plugin, this.file, this.fileClass);
    if (isMenu(this.category)) {
      this.category.addItem((item) => {
        item.setIcon("pencil");
        item.setTitle("Add field at section...");
        item.onClick((evt) => {
          modal.open();
        });
        item.setSection("target-metadata");
      });
    } else if (isSelect(this.category)) {
      this.category.addOption("add_field_at_section", "Add field at section...");
      this.category.modals["add_field_at_section"] = () => modal.open();
    }
    ;
  }
};

// src/options/NoteFieldsCommandsModal.ts
var import_obsidian33 = require("obsidian");

// src/optionModals/SelectModal.ts
var import_obsidian32 = require("obsidian");
var SelectModal = class extends import_obsidian32.DropdownComponent {
  constructor(containerEl) {
    super(containerEl);
    this.modals = {};
  }
};

// src/options/NoteFieldsCommandsModal.ts
var NoteFieldsCommandsModal = class extends import_obsidian33.Modal {
  constructor(app2, plugin, file) {
    super(app2);
    this.app = app2;
    this.plugin = plugin;
    this.file = file;
  }
  onOpen() {
    return __async(this, null, function* () {
      this.titleEl.setText(`Select the field to manage`);
      this.containerEl.addClass("metadata-menu");
      const optionsListContainer = this.contentEl.createDiv({ cls: "field-options" });
      this.select = new SelectModal(optionsListContainer);
      this.select.addOption("---", "Choose Field");
      this.optionsList = new OptionsList(this.plugin, this.file, this.select);
      yield this.optionsList.createExtraOptionList();
      this.select.onChange((value) => {
        this.select.modals[value]();
        this.close();
      });
      this.select.selectEl.focus();
    });
  }
};

// src/options/linkContextMenu.ts
var linkContextMenu = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.createContextMenu();
  }
  createContextMenu() {
    this.plugin.registerEvent(this.plugin.app.workspace.on("file-menu", (menu, abstractFile, source) => {
      const file = this.plugin.app.vault.getAbstractFileByPath(abstractFile.path);
      if (file instanceof import_obsidian34.TFile && file.extension === "md") {
        this.file = file;
        if (file.parent.path + "/" == this.plugin.settings.classFilesPath) {
          menu.addSeparator();
          menu.addItem((item) => {
            item.setIcon("gear");
            item.setTitle(`Manage <${file.basename}> fields`);
            item.onClick((evt) => {
              const fileClassAttributeSelectModal = new FileClassAttributeSelectModal(this.plugin, file);
              fileClassAttributeSelectModal.open();
            });
          });
        } else {
          if (this.plugin.settings.displayFieldsInContextMenu) {
            this.optionsList = new OptionsList(this.plugin, this.file, menu);
            this.optionsList.createExtraOptionList();
          } else {
            this.optionsList = new OptionsList(this.plugin, this.file, menu);
            menu.addItem((item) => {
              item.setIcon("bullet-list"), item.setTitle(`Field Options`), item.onClick((evt) => {
                const fieldOptions = new NoteFieldsCommandsModal(app, this.plugin, file);
                fieldOptions.open();
              });
              item.setSection("target-metadata");
            });
          }
        }
        ;
      }
      ;
    }));
  }
};

// src/suggester/metadataSuggester.ts
var import_obsidian35 = require("obsidian");
var ValueSuggest = class extends import_obsidian35.EditorSuggest {
  constructor(app2, plugin) {
    super(app2);
    this.inFrontmatter = false;
    this.inFullLine = false;
    this.inSentence = false;
    this.didSelect = false;
    this.filterOption = (firstValues, lastValue, option) => {
      return !firstValues || !(firstValues == null ? void 0 : firstValues.contains(encodeLink(option))) && (!lastValue || !!lastValue && encodeLink(option).contains(lastValue));
    };
    this.app = app2;
    this.plugin = plugin;
    this.setInstructions([{ command: "Shift", purpose: "put a space after::" }]);
    this.scope.register(["Shift"], "Enter", (evt) => {
      this.suggestions.useSelectedItem(evt);
      return false;
    });
  }
  onTrigger(cursor, editor, file) {
    if (this.didSelect) {
      this.didSelect = false;
      return null;
    }
    if (!this.plugin.settings.isAutosuggestEnabled) {
      return null;
    }
    ;
    const frontmatter = this.plugin.app.metadataCache.getFileCache(file).frontmatter;
    const fullLine = editor.getLine(editor.getCursor().line);
    this.inFrontmatter = frontmatter !== void 0 && frontmatter.position.start.line < cursor.line && cursor.line < frontmatter.position.end.line;
    if (this.inFrontmatter) {
      const regex = new RegExp(`^${genericFieldRegex}:(?<values>.*)`, "u");
      if (!regex.test(fullLine))
        return null;
    } else if (getLineFields(fullLine).length === 0) {
      return null;
    }
    return {
      start: cursor,
      end: cursor,
      query: editor.getLine(cursor.line)
    };
  }
  getSuggestions(context) {
    return __async(this, null, function* () {
      const suggestions = yield this.getValueSuggestions(context);
      if (suggestions.length) {
        return suggestions;
      }
      return [];
    });
  }
  getValueSuggestions(context) {
    return __async(this, null, function* () {
      var _a;
      const lineNumber = context.start.line;
      const matchField = { attribute: void 0, values: "" };
      if (!this.inFrontmatter) {
        const lineFields = getLineFields(encodeLink(context.editor.getLine(lineNumber)));
        const position = context.editor.getCursor().ch;
        const activeLineField = lineFields.find((lineField) => lineField.index <= position && lineField.index + lineField.length >= position);
        if (activeLineField) {
          this.inSentence = activeLineField.index > 0;
          this.inFullLine = activeLineField.index === 0;
          matchField.attribute = activeLineField.attribute;
          matchField.values = activeLineField.values;
        }
      } else {
        const regex = new RegExp(`^${genericFieldRegex}:(?<values>.+)?`, "u");
        const regexResult = context.editor.getRange({ line: lineNumber, ch: 0 }, context.end).match(regex);
        if (regexResult == null ? void 0 : regexResult.groups) {
          matchField.attribute = regexResult.groups.attribute;
          matchField.values = regexResult.groups.values;
        }
      }
      ;
      if (matchField.attribute) {
        const fieldName = matchField.attribute;
        const valuesList = (_a = matchField.values) == null ? void 0 : _a.replace(/^\[|^\s\[|^\(|^\s\(/, "").replace(/\]$|\)$/, "").split(",").map((o) => encodeLink(o.trim()));
        const lastValue = valuesList == null ? void 0 : valuesList.last();
        const firstValues = valuesList == null ? void 0 : valuesList.slice(0, -1);
        if (fieldName === "tags" && this.inFrontmatter) {
          return Object.keys(this.app.metadataCache.getTags()).filter((t) => lastValue ? t.contains(lastValue) : t).sort().map((tag) => Object({ value: tag.replace(/^#/, "") }));
        }
        const cache = this.plugin.app.metadataCache.getCache(context.file.path);
        let tryWithPresetField = !(cache == null ? void 0 : cache.frontmatter);
        if (cache == null ? void 0 : cache.frontmatter) {
          const _b = cache.frontmatter, { position } = _b, attributes = __objRest(_b, ["position"]);
          const fileClassAlias = this.plugin.settings.fileClassAlias;
          if (Object.keys(attributes).contains(fileClassAlias)) {
            const fileClassValue = attributes[fileClassAlias];
            try {
              const fileClass = yield createFileClass(this.plugin, fileClassValue);
              this.fileClass = fileClass;
              const fileClassAttributes = this.fileClass.attributes;
              if (fileClassAttributes.map((attr) => attr.name).contains(fieldName)) {
                const field = fileClassAttributes.find((attr) => attr.name == fieldName).getField();
                if (["Cycle" /* Cycle */, "Multi" /* Multi */, "Select" /* Select */].contains(field.type)) {
                  const filteredOptions = Array.isArray(field.options) ? field.options.filter((option) => this.filterOption(firstValues, lastValue, option)) : Object.keys(field.options).map((k) => field.options[k]).filter((option) => this.filterOption(firstValues, lastValue, option));
                  return filteredOptions.map((option) => Object({ value: option }));
                } else if (field.type === "File" /* File */) {
                  const fieldManager = new FieldManager[field.type](field);
                  const files = fieldManager.getFiles();
                  if (lastValue) {
                    return files.filter((f) => f.basename.includes(lastValue)).map((f) => Object({ value: FileField.buildMarkDownLink(app, context.file, f.basename) }));
                  } else {
                    return files.map((f) => Object({ value: FileField.buildMarkDownLink(app, context.file, f.basename) }));
                  }
                } else {
                  return [];
                }
              }
            } catch (error) {
              tryWithPresetField = true;
            }
            ;
          } else {
            tryWithPresetField = true;
          }
          ;
        }
        ;
        if (tryWithPresetField) {
          const presetField = this.plugin.settings.presetFields.find((field) => field.name == fieldName);
          if (presetField) {
            if (["Cycle" /* Cycle */, "Multi" /* Multi */, "Select" /* Select */].contains(presetField.type)) {
              if (presetField.valuesListNotePath) {
                const valuesFile = this.plugin.app.vault.getAbstractFileByPath(presetField.valuesListNotePath);
                if (valuesFile instanceof import_obsidian35.TFile && valuesFile.extension == "md") {
                  const values2 = yield (yield this.plugin.app.vault.read(valuesFile)).split("\n").filter((option) => this.filterOption(firstValues, lastValue, option)).map((_value) => Object({ value: _value }));
                  return values2;
                }
                ;
              }
              ;
              const values = Object.entries(presetField.options).map((option) => option[1]).filter((option) => this.filterOption(firstValues, lastValue, option));
              return values.map((_value) => Object({ value: _value }));
            } else if (presetField.type === "File" /* File */) {
              const fieldManager = new FieldManager[presetField.type](presetField);
              const files = fieldManager.getFiles();
              if (lastValue) {
                return files.filter((f) => f.basename.includes(lastValue)).map((f) => Object({ value: FileField.buildMarkDownLink(app, context.file, f.basename) }));
              } else {
                return files.map((f) => Object({ value: FileField.buildMarkDownLink(app, context.file, f.basename) }));
              }
            } else {
              return [];
            }
          }
          ;
        }
        ;
      }
      ;
      return [];
    });
  }
  renderSuggestion(suggestion, el) {
    el.setText(suggestion.value);
  }
  selectSuggestion(suggestion, event) {
    var _a;
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian35.MarkdownView);
    if (!activeView) {
      return;
    }
    ;
    const editor = activeView.editor;
    const activeLine = editor.getLine(this.context.start.line);
    if (this.inFrontmatter) {
      try {
        let parsedField = (0, import_obsidian35.parseYaml)(activeLine);
        let [attr, pastValues] = Object.entries(parsedField)[0];
        let newField;
        if (!pastValues) {
          newField = attr + ": " + suggestion.value;
        } else if (typeof pastValues == "string") {
          if (!pastValues.contains(",")) {
            newField = attr + ": " + suggestion.value;
          } else {
            newField = attr + ": [" + pastValues.split(",").map((o) => o.trim()).slice(0, -1).join(", ") + ", " + suggestion.value + "]";
          }
        } else if (Array.isArray(pastValues)) {
          if (activeLine.endsWith(",]") || activeLine.endsWith(", ]")) {
            newField = attr + ": [" + [...pastValues, suggestion.value].join(", ") + "]";
          } else {
            newField = attr + ": [" + [...pastValues.slice(0, -1), suggestion.value].join(", ") + "]";
          }
        } else {
          newField = attr + ": [" + [...pastValues].join(", ") + "]";
        }
        editor.replaceRange(newField, { line: this.context.start.line, ch: 0 }, { line: this.context.start.line, ch: activeLine.length });
        if (Array.isArray(pastValues) || typeof pastValues === "string" && pastValues.contains(",")) {
          editor.setCursor({ line: this.context.start.line, ch: newField.length - 1 });
        } else {
          editor.setCursor({ line: this.context.start.line, ch: newField.length });
        }
      } catch (error) {
        new import_obsidian35.Notice("Frontmatter wrongly formatted", 2e3);
        this.close();
        return;
      }
    } else if (this.inFullLine) {
      let cleanedLine = activeLine;
      while (![",", ":"].contains(cleanedLine.charAt(cleanedLine.length - 1))) {
        cleanedLine = cleanedLine.slice(0, -1);
      }
      editor.replaceRange(`${cleanedLine}${event.shiftKey ? " " : ""}` + suggestion.value, { line: this.context.start.line, ch: 0 }, this.context.end);
    } else if (this.inSentence) {
      const position = ((_a = this.context) == null ? void 0 : _a.editor.getCursor().ch) || 0;
      let beforeCursor = activeLine.slice(0, position);
      let afterCursor = activeLine.slice(position);
      let separatorPos = position;
      let currentValueLength = 0;
      while (!beforeCursor.endsWith("::") && !beforeCursor.endsWith(",") && beforeCursor.length) {
        separatorPos = separatorPos - 1;
        currentValueLength = currentValueLength + 1;
        beforeCursor = beforeCursor.slice(0, -1);
      }
      let nextBracketPos = position;
      while (!encodeLink(afterCursor).match("(\\]|\\)).*") && afterCursor.length) {
        nextBracketPos = nextBracketPos + 1;
        afterCursor = afterCursor.slice(nextBracketPos - position);
      }
      editor.replaceRange(suggestion.value, { line: this.context.start.line, ch: separatorPos }, { line: this.context.start.line, ch: nextBracketPos });
      editor.setCursor({ line: this.context.start.line, ch: nextBracketPos - currentValueLength + suggestion.value.length });
    }
    this.didSelect = true;
    this.close();
  }
};

// src/settings/migrateSettingV1toV2.ts
var migrateSettingsV1toV2 = (plugin) => __async(void 0, null, function* () {
  const presetFields = plugin.settings.presetFields;
  presetFields.forEach((p) => {
    if (!Object.keys(p).contains("type")) {
      if (p.isMulti)
        p.type = "Multi" /* Multi */;
      else if (p.isCycle)
        p.type = "Cycle" /* Cycle */;
      else if (p.isBoolean)
        p.type = "Boolean" /* Boolean */;
      else if (p.options && Object.keys(p.options).length > 0)
        p.type = "Select" /* Select */;
      else
        p.type = "Input" /* Input */;
    }
    delete p.isMulti;
    delete p.isCycle;
    delete p.isBoolean;
    if (Object.getOwnPropertyDescriptor(p, "values") !== void 0) {
      Object.defineProperty(p, "options", Object.getOwnPropertyDescriptor(p, "values"));
      delete p["values"];
    }
  });
  plugin.settings.settingsVersion = 2;
  yield plugin.saveData(plugin.settings);
  console.log("Metadata menu settings migrated");
});

// main.ts
var MetadataMenu = class extends import_obsidian36.Plugin {
  constructor() {
    super(...arguments);
    this.initialProperties = [];
  }
  onload() {
    return __async(this, null, function* () {
      console.log("Metadata Menu loaded");
      yield this.loadSettings();
      if (this.settings.settingsVersion === void 0) {
        yield migrateSettingsV1toV2(this);
      }
      this.settings.presetFields.forEach((prop) => {
        const property = new Field_default();
        Object.assign(property, prop);
        this.initialProperties.push(property);
      });
      this.addSettingTab(new MetadataMenuSettingTab(this.app, this));
      this.registerEditorSuggest(new ValueSuggest(this.app, this));
      this.api = new MetadataMenuApi(this).make();
      this.addCommand({
        id: "field_options",
        name: "field options",
        checkCallback: (checking) => {
          const view = this.app.workspace.getActiveViewOfType(import_obsidian36.MarkdownView);
          if (checking) {
            return !!(view == null ? void 0 : view.file);
          }
          const fieldsOptionsModal = new NoteFieldsCommandsModal(this.app, this, view.file);
          fieldsOptionsModal.open();
        }
      });
      this.addCommand({
        id: "fileClassAttr_options",
        name: "fileClass attributes options",
        checkCallback: (checking) => {
          const view = this.app.workspace.getActiveViewOfType(import_obsidian36.MarkdownView);
          if (checking) {
            return !!(view == null ? void 0 : view.file) && `${view.file.parent.path}/` == this.settings.classFilesPath;
          }
          const modal = new FileClassAttributeSelectModal(this, view.file);
          modal.open();
        }
      });
      new linkContextMenu(this);
    });
  }
  onunload() {
    console.log("Metadata Menu unloaded");
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      this.settings.presetFields = this.initialProperties;
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvc2V0dGluZ3MvTWV0YWRhdGFNZW51U2V0dGluZ1RhYi50cyIsICJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nc01vZGFsLnRzIiwgInNyYy9maWVsZHMvRmllbGRNYW5hZ2VyLnRzIiwgInNyYy9jb21tYW5kcy9yZXBsYWNlVmFsdWVzLnRzIiwgInNyYy91dGlscy9wYXJzZXIudHMiLCAic3JjL29wdGlvbk1vZGFscy9maWVsZHMvSW5wdXRNb2RhbC50cyIsICJzcmMvY29tbWFuZHMvaW5zZXJ0VmFsdWVzLnRzIiwgInNyYy9maWVsZHMvZmllbGRNYW5hZ2Vycy9JbnB1dEZpZWxkLnRzIiwgInNyYy9vcHRpb25Nb2RhbHMvZmllbGRzL0Jvb2xlYW5Nb2RhbC50cyIsICJzcmMvZmllbGRzL2ZpZWxkTWFuYWdlcnMvQm9vbGVhbkZpZWxkLnRzIiwgInNyYy9vcHRpb25Nb2RhbHMvZmllbGRzL051bWJlck1vZGFsLnRzIiwgInNyYy9maWVsZHMvZmllbGRNYW5hZ2Vycy9OdW1iZXJGaWVsZC50cyIsICJzcmMvZmllbGRzL2ZpZWxkTWFuYWdlcnMvQWJzdHJhY3RMaXN0QmFzZWRGaWVsZC50cyIsICJzcmMvc2V0dGluZ3MvRmllbGRTZXR0aW5nLnRzIiwgInNyYy9zdWdnZXN0ZXIvRmlsZVN1Z2dlc3Rlci50cyIsICJzcmMvc3VnZ2VzdGVyL3N1Z2dlc3QudHMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9lbnVtcy5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXROb2RlTmFtZS5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3cuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaW5zdGFuY2VPZi5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9hcHBseVN0eWxlcy5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9tYXRoLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2NvbnRhaW5zLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNUYWJsZUVsZW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0RG9jdW1lbnRFbGVtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFBhcmVudE5vZGUuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvd2l0aGluLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0RnJlc2hTaWRlT2JqZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZXhwYW5kVG9IYXNoTWFwLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2Fycm93LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0VmFyaWF0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL2NvbXB1dGVTdHlsZXMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2dldE9wcG9zaXRlVmFyaWF0aW9uUGxhY2VtZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFdpbmRvd1Njcm9sbC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2dldFZpZXdwb3J0UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXREb2N1bWVudFJlY3QuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvaXNTY3JvbGxQYXJlbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0U2Nyb2xsUGFyZW50LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvZG9tLXV0aWxzL2xpc3RTY3JvbGxQYXJlbnRzLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvcmVjdFRvQ2xpZW50UmVjdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDbGlwcGluZ1JlY3QuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9jb21wdXRlT2Zmc2V0cy5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvY29tcHV0ZUF1dG9QbGFjZW1lbnQuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9tb2RpZmllcnMvZmxpcC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9oaWRlLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvbW9kaWZpZXJzL29mZnNldC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvZ2V0QWx0QXhpcy5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL21vZGlmaWVycy9wcmV2ZW50T3ZlcmZsb3cuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0SFRNTEVsZW1lbnRTY3JvbGwuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi9kb20tdXRpbHMvZ2V0Tm9kZVNjcm9sbC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2RvbS11dGlscy9nZXRDb21wb3NpdGVSZWN0LmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvb3JkZXJNb2RpZmllcnMuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9kZWJvdW5jZS5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL2Zvcm1hdC5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3V0aWxzL3ZhbGlkYXRlTW9kaWZpZXJzLmpzIiwgIm5vZGVfbW9kdWxlcy9AcG9wcGVyanMvY29yZS9saWIvdXRpbHMvdW5pcXVlQnkuanMiLCAibm9kZV9tb2R1bGVzL0Bwb3BwZXJqcy9jb3JlL2xpYi91dGlscy9tZXJnZUJ5TmFtZS5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL2NyZWF0ZVBvcHBlci5qcyIsICJub2RlX21vZHVsZXMvQHBvcHBlcmpzL2NvcmUvbGliL3BvcHBlci5qcyIsICJzcmMvdXRpbHMvZmlsZVV0aWxzLnRzIiwgInNyYy9vcHRpb25Nb2RhbHMvZmllbGRzL1NlbGVjdE1vZGFsLnRzIiwgInNyYy9maWVsZHMvZmllbGRNYW5hZ2Vycy9TZWxlY3RGaWVsZC50cyIsICJzcmMvZmllbGRzL2ZpZWxkTWFuYWdlcnMvQ3ljbGVGaWVsZC50cyIsICJzcmMvb3B0aW9uTW9kYWxzL2ZpZWxkcy9NdWx0aVNlbGVjdE1vZGFsLnRzIiwgInNyYy9maWVsZHMvZmllbGRNYW5hZ2Vycy9NdWx0aUZpZWxkLnRzIiwgInNyYy9maWVsZHMvZmllbGRNYW5hZ2Vycy9GaWxlRmllbGQudHMiLCAic3JjL29wdGlvbk1vZGFscy9maWVsZHMvU2luZ2xlRmlsZU1vZGFsLnRzIiwgInNyYy9maWVsZHMvZmllbGRNYW5hZ2Vycy9EYXRlRmllbGQudHMiLCAic3JjL29wdGlvbk1vZGFscy9maWVsZHMvRGF0ZU1vZGFsLnRzIiwgIm5vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9lc20vdHlwZXMvb3B0aW9ucy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL2wxMG4vZGVmYXVsdC5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9lc20vdXRpbHMvZG9tLmpzIiwgIm5vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9lc20vdXRpbHMvZm9ybWF0dGluZy5qcyIsICJub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZXNtL3V0aWxzL2RhdGVzLmpzIiwgIm5vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9lc20vdXRpbHMvcG9seWZpbGxzLmpzIiwgIm5vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9lc20vaW5kZXguanMiLCAic3JjL2ZpZWxkcy9maWVsZE1hbmFnZXJzL01hbmFnZXJzLnRzIiwgInNyYy90eXBlcy9maWVsZFR5cGVzLnRzIiwgInNyYy9maWVsZHMvRmllbGQudHMiLCAic3JjL3N1Z2dlc3Rlci9Gb2xkZXJTdWdnZXN0ZXIudHMiLCAic3JjL3NldHRpbmdzL01ldGFkYXRhTWVudVNldHRpbmdzLnRzIiwgInNyYy9jb21tYW5kcy9nZXRWYWx1ZXMudHMiLCAic3JjL2NvbW1hbmRzL2dldEZpZWxkLnRzIiwgInNyYy91dGlscy90ZXh0VXRpbHMudHMiLCAic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3NBdHRyaWJ1dGUudHMiLCAic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3MudHMiLCAic3JjL2NvbW1hbmRzL2ZpZWxkTW9kaWZpZXIudHMiLCAic3JjL2NvbW1hbmRzL2ZpbGVGaWVsZHMudHMiLCAic3JjL01ldGFkYXRhTWVudUFwaS50cyIsICJzcmMvb3B0aW9ucy9saW5rQ29udGV4dE1lbnUudHMiLCAic3JjL29wdGlvbk1vZGFscy9jaG9vc2VTZWN0aW9uTW9kYWwudHMiLCAic3JjL29wdGlvbk1vZGFscy9maWVsZFNlbGVjdE1vZGFsLnRzIiwgInNyYy9vcHRpb25Nb2RhbHMvYWRkTmV3RmllbGRNb2RhbC50cyIsICJzcmMvZmlsZUNsYXNzL0ZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsLnRzIiwgInNyYy9maWxlQ2xhc3MvRmlsZUNsYXNzQXR0cmlidXRlTW9kYWwudHMiLCAic3JjL29wdGlvbnMvT3B0aW9uc0xpc3QudHMiLCAic3JjL29wdGlvbnMvTm90ZUZpZWxkc0NvbW1hbmRzTW9kYWwudHMiLCAic3JjL29wdGlvbk1vZGFscy9TZWxlY3RNb2RhbC50cyIsICJzcmMvc3VnZ2VzdGVyL21ldGFkYXRhU3VnZ2VzdGVyLnRzIiwgInNyYy9zZXR0aW5ncy9taWdyYXRlU2V0dGluZ1YxdG9WMi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTWV0YWRhdGFNZW51U2V0dGluZ1RhYiBmcm9tIFwic3JjL3NldHRpbmdzL01ldGFkYXRhTWVudVNldHRpbmdUYWJcIjtcbmltcG9ydCB7IE1ldGFkYXRhTWVudVNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcInNyYy9zZXR0aW5ncy9NZXRhZGF0YU1lbnVTZXR0aW5nc1wiO1xuaW1wb3J0IHR5cGUgeyBJTWV0YWRhdGFNZW51QXBpIH0gZnJvbSAnc3JjL01ldGFkYXRhTWVudUFwaSc7XG5pbXBvcnQgeyBNZXRhZGF0YU1lbnVBcGkgfSBmcm9tICdzcmMvTWV0YWRhdGFNZW51QXBpJztcbmltcG9ydCBGaWVsZCBmcm9tICdzcmMvZmllbGRzL0ZpZWxkJztcbmltcG9ydCBsaW5rQ29udGV4dE1lbnUgZnJvbSBcInNyYy9vcHRpb25zL2xpbmtDb250ZXh0TWVudVwiO1xuaW1wb3J0IE5vdGVGaWVsZHNDb21tYW5kc01vZGFsIGZyb20gXCJzcmMvb3B0aW9ucy9Ob3RlRmllbGRzQ29tbWFuZHNNb2RhbFwiO1xuaW1wb3J0IEZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsIGZyb20gJ3NyYy9maWxlQ2xhc3MvRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwnO1xuaW1wb3J0IFZhbHVlU3VnZ2VzdCBmcm9tIFwic3JjL3N1Z2dlc3Rlci9tZXRhZGF0YVN1Z2dlc3RlclwiO1xuaW1wb3J0IHsgbWlncmF0ZVNldHRpbmdzVjF0b1YyIH0gZnJvbSAnc3JjL3NldHRpbmdzL21pZ3JhdGVTZXR0aW5nVjF0b1YyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWV0YWRhdGFNZW51IGV4dGVuZHMgUGx1Z2luIHtcblx0cHVibGljIGFwaTogSU1ldGFkYXRhTWVudUFwaTtcblx0cHVibGljIHNldHRpbmdzOiBNZXRhZGF0YU1lbnVTZXR0aW5ncztcblx0cHVibGljIGluaXRpYWxQcm9wZXJ0aWVzOiBBcnJheTxGaWVsZD4gPSBbXTtcblx0cHVibGljIHNldHRpbmdUYWI6IE1ldGFkYXRhTWVudVNldHRpbmdUYWI7XG5cblx0YXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnNvbGUubG9nKCdNZXRhZGF0YSBNZW51IGxvYWRlZCcpO1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2V0dGluZ3NWZXJzaW9uID09PSB1bmRlZmluZWQpIHtcblx0XHRcdGF3YWl0IG1pZ3JhdGVTZXR0aW5nc1YxdG9WMih0aGlzKVxuXHRcdH1cblxuXHRcdHRoaXMuc2V0dGluZ3MucHJlc2V0RmllbGRzLmZvckVhY2gocHJvcCA9PiB7XG5cdFx0XHRjb25zdCBwcm9wZXJ0eSA9IG5ldyBGaWVsZCgpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihwcm9wZXJ0eSwgcHJvcCk7XG5cdFx0XHR0aGlzLmluaXRpYWxQcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpO1xuXHRcdH0pO1xuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTWV0YWRhdGFNZW51U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0dGhpcy5yZWdpc3RlckVkaXRvclN1Z2dlc3QobmV3IFZhbHVlU3VnZ2VzdCh0aGlzLmFwcCwgdGhpcykpO1xuXHRcdHRoaXMuYXBpID0gbmV3IE1ldGFkYXRhTWVudUFwaSh0aGlzKS5tYWtlKCk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZmllbGRfb3B0aW9uc1wiLFxuXHRcdFx0bmFtZTogXCJmaWVsZCBvcHRpb25zXCIsXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldylcblx0XHRcdFx0aWYgKGNoZWNraW5nKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhKHZpZXc/LmZpbGUpXG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgZmllbGRzT3B0aW9uc01vZGFsID0gbmV3IE5vdGVGaWVsZHNDb21tYW5kc01vZGFsKHRoaXMuYXBwLCB0aGlzLCB2aWV3IS5maWxlKVxuXHRcdFx0XHRmaWVsZHNPcHRpb25zTW9kYWwub3BlbigpXG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0LyogVE9ETyA6IGFkZCBhIGNvbnRleHQgbWVudSBmb3IgZmlsZUNsYXNzIGZpbGVzIHRvIHNob3cgdGhlIHNhbWUgb3B0aW9ucyBhcyBpbiBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCovXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImZpbGVDbGFzc0F0dHJfb3B0aW9uc1wiLFxuXHRcdFx0bmFtZTogXCJmaWxlQ2xhc3MgYXR0cmlidXRlcyBvcHRpb25zXCIsXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0Y29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldylcblx0XHRcdFx0aWYgKGNoZWNraW5nKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhKHZpZXc/LmZpbGUpICYmIGAke3ZpZXcuZmlsZS5wYXJlbnQucGF0aH0vYCA9PSB0aGlzLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoXG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwodGhpcywgdmlldyEuZmlsZSlcblx0XHRcdFx0bW9kYWwub3BlbigpXG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0bmV3IGxpbmtDb250ZXh0TWVudSh0aGlzKTtcblx0fTtcblxuXHRvbnVubG9hZCgpIHtcblx0XHRjb25zb2xlLmxvZygnTWV0YWRhdGEgTWVudSB1bmxvYWRlZCcpO1xuXHR9O1xuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fTtcblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncy5wcmVzZXRGaWVsZHMgPSB0aGlzLmluaXRpYWxQcm9wZXJ0aWVzO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH07XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBCdXR0b25Db21wb25lbnQsIFRvZ2dsZUNvbXBvbmVudCwgTW9kYWwsIERyb3Bkb3duQ29tcG9uZW50LCBtb21lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCBGaWVsZFNldHRpbmdzTW9kYWwgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdzTW9kYWxcIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZFwiO1xuaW1wb3J0IEZpZWxkU2V0dGluZyBmcm9tIFwic3JjL3NldHRpbmdzL0ZpZWxkU2V0dGluZ1wiO1xuaW1wb3J0IHsgRm9sZGVyU3VnZ2VzdCB9IGZyb20gXCJzcmMvc3VnZ2VzdGVyL0ZvbGRlclN1Z2dlc3RlclwiO1xuaW1wb3J0IHsgRmlsZVN1Z2dlc3QgfSBmcm9tIFwic3JjL3N1Z2dlc3Rlci9GaWxlU3VnZ2VzdGVyXCI7XG5cbmNsYXNzIFNldHRpbmdzTWlncmF0aW9uQ29uZmlybU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXG5cdHByaXZhdGUgcGx1Z2luOiBNZXRhZGF0YU1lbnU7XG5cdHByaXZhdGUgdGFiOiBNZXRhZGF0YU1lbnVTZXR0aW5nVGFiO1xuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogTWV0YWRhdGFNZW51LCB0YWI6IE1ldGFkYXRhTWVudVNldHRpbmdUYWIpIHtcblx0XHRzdXBlcihwbHVnaW4uYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLnRhYiA9IHRhYjtcblx0fTtcblxuXHRvbk9wZW4oKTogdm9pZCB7XG5cblx0XHR0aGlzLnRpdGxlRWwuc2V0VGV4dChcIkNvbmZpcm1cIik7XG5cdFx0Y29uc3QgYm9keSA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7XG5cdFx0XHRjbHM6IFwibW9kYWwtdGV4dC1kYW5nZXJcIlxuXHRcdH0pO1xuXHRcdGJvZHkuc2V0VGV4dChcIlRoaXMgd2lsbCBlcmFzZSBjdXJyZW50IHNldHRpbmdzLiBBcmUgeW91IHN1cmU/XCIpO1xuXHRcdGNvbnN0IGNvbmZpcm1CdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHRoaXMuY29udGVudEVsKTtcblx0XHRjb25maXJtQnV0dG9uLnNldEljb24oXCJjaGVja1wiKTtcblx0XHRjb25maXJtQnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0Ly9AdHMtaWdub3JlXG5cdFx0XHRpZiAodGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zLmhhc093blByb3BlcnR5KFwic3VwZXJjaGFyZ2VkLWxpbmtzLW9ic2lkaWFuXCIpKSB7XG5cdFx0XHRcdC8vQHRzLWlnbm9yZVxuXHRcdFx0XHRsZXQgc2V0dGluZ3MgPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJzdXBlcmNoYXJnZWQtbGlua3Mtb2JzaWRpYW5cIl0uc2V0dGluZ3M7XG5cdFx0XHRcdC8vZGVlcCBjb3B5aW5nIHByZXNldEZpZWxkcyBpbiBpbml0aWFsUHJvcGVydHlcblx0XHRcdFx0dGhpcy5wbHVnaW4uaW5pdGlhbFByb3BlcnRpZXMgPSBbXTtcblx0XHRcdFx0c2V0dGluZ3MucHJlc2V0RmllbGRzLmZvckVhY2goKHByb3A6IEZpZWxkKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZmllbGQgPSBuZXcgRmllbGQoKTtcblx0XHRcdFx0XHRPYmplY3QuYXNzaWduKGZpZWxkLCBwcm9wKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5pbml0aWFsUHJvcGVydGllcy5wdXNoKGZpZWxkKTtcblx0XHRcdFx0fSlcblxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0fTtcblxuXHRvbkNsb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMudGFiLmRpc3BsYXkoKTtcblx0fTtcbn07XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXRhZGF0YU1lbnVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHByaXZhdGUgcGx1Z2luOiBNZXRhZGF0YU1lbnU7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWV0YWRhdGFNZW51KSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9O1xuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0bGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdC8qIFxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0R2xvYmFsIFNldHRpbmdzIFxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ki9cblx0XHRjb25zdCBnbG9iYWxTZXR0aW5ncyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnKVxuXHRcdGdsb2JhbFNldHRpbmdzLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0dsb2JhbCBzZXR0aW5ncycsIGNsczogXCJtZXRhZGF0YS1tZW51LXNldHRpbmctc2VjdGlvbi1oZWFkZXJcIiB9KTtcblx0XHRnbG9iYWxTZXR0aW5ncy5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0Y2xzOiBcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvbiBtZXRhZGF0YS1tZW51LXNldHRpbmctc2VjdGlvbi1kZXNjXCIsXG5cdFx0XHR0ZXh0OiBcIkdsb2JhbCBzZXR0aW5ncyB0byBhcHBseSB0byB5b3VyIHdob2xlIHZhdWx0XCJcblx0XHR9KVxuXG5cdFx0LyogTWFuYWdlIG1lbnUgb3B0aW9ucyBkaXNwbGF5Ki9cblx0XHRuZXcgU2V0dGluZyhnbG9iYWxTZXR0aW5ncylcblx0XHRcdC5zZXROYW1lKFwiRGlzcGxheSBmaWVsZCBvcHRpb25zIGluIGNvbnRleHQgbWVudVwiKVxuXHRcdFx0LnNldERlc2MoXCJDaG9vc2UgdG8gc2hvdyBvciBoaWRlIGZpZWxkcyBvcHRpb25zIGluIHRoZSBjb250ZXh0IG1lbnUgb2YgYSBsaW5rIG9yIGEgZmlsZVwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlOiBUb2dnbGVDb21wb25lbnQpID0+IHtcblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWVsZHNJbkNvbnRleHRNZW51KVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWVsZHNJbkNvbnRleHRNZW51ID0gdmFsdWVcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdC8qIEV4Y2x1ZGUgRmllbGRzIGZyb20gY29udGV4dCBtZW51Ki9cblx0XHRuZXcgU2V0dGluZyhnbG9iYWxTZXR0aW5ncylcblx0XHRcdC5zZXROYW1lKCdHbG9iYWxseSBpZ25vcmVkIGZpZWxkcycpXG5cdFx0XHQuc2V0RGVzYygnRmllbGRzIHRvIGJlIGlnbm9yZWQgYnkgdGhlIHBsdWdpbiB3aGVuIGFkZGluZyBvcHRpb25zIHRvIHRoZSBjb250ZXh0IG1lbnUnKVxuXHRcdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PiB7XG5cdFx0XHRcdHRleHRcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIGZpZWxkcyBhcyBzdHJpbmcsIGNvbW1hIHNlcGFyYXRlZCcpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbGx5SWdub3JlZEZpZWxkcy5qb2luKCcsICcpKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbGx5SWdub3JlZEZpZWxkcyA9IHZhbHVlLnJlcGxhY2UoL1xccy9nLCAnJykuc3BsaXQoJywnKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR0ZXh0LmlucHV0RWwucm93cyA9IDY7XG5cdFx0XHRcdHRleHQuaW5wdXRFbC5jb2xzID0gMjU7XG5cdFx0XHR9KTtcblxuXG5cdFx0LyogRmlyc3QgZGF5IG9mIHdlZWsgKGZvciBEYXRlIEZpZWxkcyovXG5cdFx0bmV3IFNldHRpbmcoZ2xvYmFsU2V0dGluZ3MpXG5cdFx0XHQuc2V0TmFtZSgnRmlyc3QgZGF5IG9mIHdlZWsnKVxuXHRcdFx0LnNldERlc2MoJ0ZvciBkYXRlIGZpZWxkcywgd2hpY2ggZGF5IHRoZSBkYXRlIHBpY2tlclxcJ3Mgd2VlayBzaG91bGQgc3RhcnQgd2l0aCcpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGNiOiBEcm9wZG93bkNvbXBvbmVudCkgPT4ge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuXHRcdFx0XHRcdGNiLmFkZE9wdGlvbihpLnRvU3RyaW5nKCksIG1vbWVudCgpLmRheShpKS5mb3JtYXQoXCJkZGRkXCIpKVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNiLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpcnN0RGF5T2ZXZWVrLnRvU3RyaW5nKCkgfHwgXCIxXCIpXG5cdFx0XHRcdGNiLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZpcnN0RGF5T2ZXZWVrID0gcGFyc2VJbnQodmFsdWUpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0LyogXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRNYW5hZ2luZyBwcmVkZWZpbmVkIG9wdGlvbnMgZm9yIHByb3BlcnRpZXMgXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQqL1xuXHRcdC8qIEFkZCBuZXcgcHJvcGVydHkgZm9yIHdoaWNoIHdlIHdhbnQgdG8gcHJlc2V0IG9wdGlvbnMqL1xuXHRcdGNvbnN0IHByZXNldEZpZWxkc1NldHRpbmdzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoXCJkaXZcIilcblx0XHRwcmVzZXRGaWVsZHNTZXR0aW5ncy5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdQcmVzZXQgRmllbGRzIHNldHRpbmdzJywgY2xzOiBcIm1ldGFkYXRhLW1lbnUtc2V0dGluZy1zZWN0aW9uLWhlYWRlclwiIH0pO1xuXHRcdHByZXNldEZpZWxkc1NldHRpbmdzLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRjbHM6IFwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uIG1ldGFkYXRhLW1lbnUtc2V0dGluZy1zZWN0aW9uLWRlc2NcIixcblx0XHRcdHRleHQ6IFwiTWFuYWdlIGdsb2JhbGx5IHByZWRlZmluZWQgdHlwZSBhbmQgb3B0aW9ucyBmb3IgYSBmaWVsZCB0aHJvdWdob3V0IHlvdXIgd2hvbGUgdmF1bHRcIlxuXHRcdH0pXG5cdFx0bmV3IFNldHRpbmcocHJlc2V0RmllbGRzU2V0dGluZ3MpXG5cdFx0XHQuc2V0TmFtZShcIkFkZCBOZXcgRmllbGQgU2V0dGluZ1wiKVxuXHRcdFx0LnNldERlc2MoXCJBZGQgYSBuZXcgRnJvbnRtYXR0ZXIgcHJvcGVydHkgZm9yIHdoaWNoIHlvdSB3YW50IHByZXNldCBvcHRpb25zLlwiKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uOiBCdXR0b25Db21wb25lbnQpOiBCdXR0b25Db21wb25lbnQgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYnV0dG9uXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJBZGQgTmV3IFByb3BlcnR5IE1hbmFnZXJcIilcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIitcIilcblx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgbW9kYWwgPSBuZXcgRmllbGRTZXR0aW5nc01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgcHJlc2V0RmllbGRzU2V0dGluZ3MpO1xuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHQvKiBNYW5hZ2VkIHByb3BlcnRpZXMgdGhhdCBjdXJyZW50bHkgaGF2ZSBwcmVzZXQgb3B0aW9ucyAqL1xuXHRcdHRoaXMucGx1Z2luLmluaXRpYWxQcm9wZXJ0aWVzLmZvckVhY2gocHJvcCA9PiB7XG5cdFx0XHRjb25zdCBwcm9wZXJ0eSA9IG5ldyBGaWVsZCgpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihwcm9wZXJ0eSwgcHJvcCk7XG5cdFx0XHRuZXcgRmllbGRTZXR0aW5nKHByZXNldEZpZWxkc1NldHRpbmdzLCBwcm9wZXJ0eSwgdGhpcy5hcHAsIHRoaXMucGx1Z2luKTtcblx0XHR9KTtcblxuXHRcdC8qIFxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0TWFuYWdpbmcgZmlsZUNsYXNzIFxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ki9cblx0XHQvKiBTZXQgY2xhc3NGaWxlcyBQYXRoKi9cblx0XHRjb25zdCBjbGFzc0ZpbGVzU2V0dGluZ3MgPSBjb250YWluZXJFbC5jcmVhdGVFbChcImRpdlwiKVxuXHRcdGNsYXNzRmlsZXNTZXR0aW5ncy5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdGaWxlQ2xhc3Mgc2V0dGluZ3MnLCBjbHM6IFwibWV0YWRhdGEtbWVudS1zZXR0aW5nLXNlY3Rpb24taGVhZGVyXCIgfSk7XG5cdFx0Y2xhc3NGaWxlc1NldHRpbmdzLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRjbHM6IFwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uIG1ldGFkYXRhLW1lbnUtc2V0dGluZy1zZWN0aW9uLWRlc2NcIixcblx0XHRcdHRleHQ6IFwiTWFuYWdlIGZpbGVDbGFzcyBmb2xkZXIgYW5kIGFsaWFzLiBcIiArXG5cdFx0XHRcdFwiV2hlbiBhIG5vdGUgaGFzIGEgZmllbENsYXNzIGRlZmluZWQsIGZpbGVDbGFzcyBmaWVsZCBwcm9wZXJ0aWVzIHdpbGwgb3ZlcnJpZGUgZ2xvYmFsIHByZXNldCBmaWVsZHMgc2V0dGluZ3MgZm9yIHRoZSBzYW1lIGZpZWxkIG5hbWVcIlxuXHRcdH0pXG5cdFx0bmV3IFNldHRpbmcoY2xhc3NGaWxlc1NldHRpbmdzKVxuXHRcdFx0LnNldE5hbWUoJ2NsYXNzIEZpbGVzIHBhdGgnKVxuXHRcdFx0LnNldERlc2MoJ1BhdGggdG8gdGhlIGZpbGVzIGNvbnRhaW5pbmcgdGhlIGF1dGhvcml6ZWQgZmllbGRzIGZvciBhIHR5cGUgb2Ygbm90ZScpXG5cdFx0XHQuYWRkU2VhcmNoKChjZnMpID0+IHtcblx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIGNmcy5pbnB1dEVsKTtcblx0XHRcdFx0Y2ZzLnNldFBsYWNlaG9sZGVyKFwiRm9sZGVyXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoKVxuXHRcdFx0XHRcdC5vbkNoYW5nZSgobmV3X2ZvbGRlcikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbmV3UGF0aCA9IG5ld19mb2xkZXIuZW5kc1dpdGgoXCIvXCIpID8gbmV3X2ZvbGRlciA6IG5ld19mb2xkZXIgKyBcIi9cIjtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoID0gbmV3UGF0aDtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHQvLyBAdHMtaWdub3JlXG5cdFx0XHRcdGNmcy5jb250YWluZXJFbC5hZGRDbGFzcyhcIm1ldGFkYXRhLW1lbnUtc2V0dGluZy1maWxlQ2xhc3Mtc2VhcmNoXCIpXG5cdFx0XHR9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNsYXNzRmlsZXNTZXR0aW5ncylcblx0XHRcdC5zZXROYW1lKCdmaWxlQ2xhc3MgZmllbGQgYWxpYXMnKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBhbm90aGVyIG5hbWUgZm9yIGZpbGVDbGFzcyBmaWVsZCBpbiBmcm9udG1hdHRlciAoZXhhbXBsZTogQ2F0ZWdvcnksIHR5cGUsIC4uLicpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVDbGFzc0FsaWFzKVxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVDbGFzc0FsaWFzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0LyogXG5cblx0XHQvKiBTZXQgZ2xvYmFsIGZpbGVDbGFzcyovXG5cdFx0bmV3IFNldHRpbmcoY2xhc3NGaWxlc1NldHRpbmdzKVxuXHRcdFx0LnNldE5hbWUoJ2dsb2JhbCBmaWxlQ2xhc3MnKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSBvbmUgZmlsZUNsYXNzIHRvIGJlIGFwcGxpY2FibGUgdG8gYWxsIGZpbGVzIChldmVuIGl0IGlzIG5vdCBwcmVzZW50IGFzIGEgZmlsZUNsYXNzIGF0dHJpYnV0ZSBpbiB0aGVpciBmcm9udG1hdHRlcikuIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgcHJlc2V0IEZpZWxkcyBkZWZpbmVkIGFib3ZlJylcblx0XHRcdC5hZGRTZWFyY2goKGNmcykgPT4ge1xuXHRcdFx0XHRuZXcgRmlsZVN1Z2dlc3QoXG5cdFx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdFx0Y2ZzLmlucHV0RWwsXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4sXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xhc3NGaWxlc1BhdGhcblx0XHRcdFx0KTtcblx0XHRcdFx0Y2ZzLnNldFBsYWNlaG9sZGVyKFwiR2xvYmFsIGZpbGVDbGFzc1wiKVxuXHRcdFx0XHRjZnMuc2V0VmFsdWUoXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsRmlsZUNsYXNzID9cblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2xvYmFsRmlsZUNsYXNzICsgXCIubWRcIiA6XG5cdFx0XHRcdFx0XHRcIlwiXG5cdFx0XHRcdClcblx0XHRcdFx0XHQub25DaGFuZ2UoKG5ld1BhdGgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbEZpbGVDbGFzcyA9IG5ld1BhdGggP1xuXHRcdFx0XHRcdFx0XHRuZXdQYXRoLnNwbGl0KCdcXFxcJykucG9wKCkhLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoXCIubWRcIiwgXCJcIikgOlxuXHRcdFx0XHRcdFx0XHRcIlwiO1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0Y2ZzLmNvbnRhaW5lckVsLmFkZENsYXNzKFwibWV0YWRhdGEtbWVudS1zZXR0aW5nLWZpbGVDbGFzcy1zZWFyY2hcIilcblx0XHRcdH0pXG5cblxuXHRcdC8qIFxuXHRcdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRcdE1pZ3JhdGlvbiBzZXR0aW5ncyBcblx0XHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHQqL1xuXHRcdGNvbnN0IG1pZ3JhdGVTZXR0aW5ncyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiZGl2XCIpXG5cdFx0bWlncmF0ZVNldHRpbmdzLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ01pZ3JhdGUnIH0pO1xuXG5cdFx0LyogQWRkIG5ldyBwcm9wZXJ0eSBmb3Igd2hpY2ggd2Ugd2FudCB0byBwcmVzZXQgb3B0aW9ucyovXG5cdFx0bmV3IFNldHRpbmcobWlncmF0ZVNldHRpbmdzKVxuXHRcdFx0LnNldE5hbWUoXCJDb3B5IHNldHRpbmdzIGZyb20gc3VwZXJjaGFyZ2VkIGxpbmtzIHBsdWdpblwiKVxuXHRcdFx0LnNldERlc2MoXCJDb3B5IHNldHRpbmdzIGZyb20gc3VwZXJjaGFyZ2VkIGxpbmtzIHBsdWdpblwiKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uOiBCdXR0b25Db21wb25lbnQpOiBCdXR0b25Db21wb25lbnQgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYnV0dG9uXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJHZXQgc2V0dGluZ3MgZnJvbSBzdXBlcmNoYXJnZWQgbGlua3NcIilcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkNvcHlcIilcblx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgbW9kYWwgPSBuZXcgU2V0dGluZ3NNaWdyYXRpb25Db25maXJtTW9kYWwodGhpcy5wbHVnaW4sIHRoaXMpO1xuXHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdH07XG59O1xuIiwgImltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgQnV0dG9uQ29tcG9uZW50LCBEcm9wZG93bkNvbXBvbmVudCwgRXh0cmFCdXR0b25Db21wb25lbnQsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRleHRDb21wb25lbnQsIFRleHRBcmVhQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcInNyYy9maWVsZHMvRmllbGRcIjtcbmltcG9ydCBGaWVsZFNldHRpbmcgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdcIjtcbmltcG9ydCB7IEZpZWxkTWFuYWdlciBhcyBGLCBTZXR0aW5nTG9jYXRpb24gfSBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZE1hbmFnZXJcIjtcbmltcG9ydCB7IEZpZWxkTWFuYWdlciwgRmllbGRUeXBlLCBGaWVsZFR5cGVMYWJlbE1hcHBpbmcsIEZpZWxkVHlwZVRvb2x0aXAgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmllbGRTZXR0aW5nc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgbmFtZVByb21wdENvbXBvbmVudDogVGV4dENvbXBvbmVudDtcbiAgICBwcml2YXRlIHNhdmVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBmaWVsZDogRmllbGQ7XG4gICAgcHJpdmF0ZSBwbHVnaW46IE1ldGFkYXRhTWVudTtcbiAgICBwcml2YXRlIGluaXRpYWxGaWVsZDogRmllbGQ7XG4gICAgcHJpdmF0ZSBwYXJlbnRTZXR0aW5nPzogRmllbGRTZXR0aW5nO1xuICAgIHByaXZhdGUgbmV3OiBib29sZWFuID0gdHJ1ZTtcbiAgICBwcml2YXRlIHBhcmVudFNldHRpbmdDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgZmllbGRPcHRpb25zQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIGZpZWxkTWFuYWdlcjogRjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1ldGFkYXRhTWVudSwgcGFyZW50U2V0dGluZ0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBhcmVudFNldHRpbmc/OiBGaWVsZFNldHRpbmcsIGZpZWxkPzogRmllbGQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMucGFyZW50U2V0dGluZyA9IHBhcmVudFNldHRpbmc7XG4gICAgICAgIHRoaXMuaW5pdGlhbEZpZWxkID0gbmV3IEZpZWxkKCk7XG4gICAgICAgIHRoaXMucGFyZW50U2V0dGluZ0NvbnRhaW5lciA9IHBhcmVudFNldHRpbmdDb250YWluZXI7XG4gICAgICAgIGlmIChmaWVsZCkge1xuICAgICAgICAgICAgdGhpcy5uZXcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgICAgIEZpZWxkLmNvcHlQcm9wZXJ0eSh0aGlzLmluaXRpYWxGaWVsZCwgdGhpcy5maWVsZClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBuZXdJZCA9IDE7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5pbml0aWFsUHJvcGVydGllcy5mb3JFYWNoKHByb3AgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChwcm9wLmlkKSAmJiBwYXJzZUludChwcm9wLmlkKSA+PSBuZXdJZCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdJZCA9IHBhcnNlSW50KHByb3AuaWQpICsgMTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkID0gbmV3IEZpZWxkKCk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkLmlkID0gbmV3SWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbEZpZWxkLmlkID0gbmV3SWQudG9TdHJpbmcoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5maWVsZE1hbmFnZXIgPSBuZXcgRmllbGRNYW5hZ2VyW3RoaXMuZmllbGQudHlwZV0odGhpcy5maWVsZCk7XG4gICAgfTtcblxuICAgIGFzeW5jIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuZmllbGQubmFtZSA9PSBcIlwiKSB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgQWRkIGEgZmllbGQgYW5kIGRlZmluZSBvcHRpb25zYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgTWFuYWdlIHNldHRpbmdzIG9wdGlvbnMgZm9yICR7dGhpcy5maWVsZC5uYW1lfWApO1xuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUZvcm0oKTtcbiAgICB9O1xuXG4gICAgb25DbG9zZSgpOiB2b2lkIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmZpZWxkLCB0aGlzLmluaXRpYWxGaWVsZCk7XG4gICAgICAgIGlmICghdGhpcy5uZXcgJiYgdGhpcy5wYXJlbnRTZXR0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFNldHRpbmcuc2V0VGV4dENvbnRlbnRXaXRobmFtZSgpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zYXZlZCkge1xuICAgICAgICAgICAgbmV3IEZpZWxkU2V0dGluZyh0aGlzLnBhcmVudFNldHRpbmdDb250YWluZXIsIHRoaXMuZmllbGQsIHRoaXMuYXBwLCB0aGlzLnBsdWdpbik7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHByaXZhdGUgY3JlYXRlbmFtZUlucHV0Q29udGFpbmVyKHBhcmVudE5vZGU6IEhUTUxEaXZFbGVtZW50KTogVGV4dENvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZUNvbnRhaW5lckxhYmVsID0gcGFyZW50Tm9kZS5jcmVhdGVEaXYoKTtcbiAgICAgICAgZmllbGROYW1lQ29udGFpbmVyTGFiZWwuc2V0VGV4dChgRmllbGQgTmFtZTpgKTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChwYXJlbnROb2RlKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZmllbGQubmFtZTtcbiAgICAgICAgaW5wdXQuc2V0VmFsdWUobmFtZSk7XG4gICAgICAgIGlucHV0LnNldFBsYWNlaG9sZGVyKFwiTmFtZSBvZiB0aGUgZmllbGRcIik7XG4gICAgICAgIGlucHV0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQubmFtZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYE1hbmFnZSBwcmVkZWZpbmVkIG9wdGlvbnMgZm9yICR7dGhpcy5maWVsZC5uYW1lfWApO1xuICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnJlbW92ZVZhbGlkYXRpb25FcnJvcihpbnB1dCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfTtcblxuICAgIHByaXZhdGUgY3JlYXRlVHlwZVNlbGVjdG9yQ29udGFpbmVyKHBhcmVudE5vZGU6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHR5cGVTZWxlY3RvckNvbnRhaW5lckxhYmVsID0gcGFyZW50Tm9kZS5jcmVhdGVEaXYoKTtcbiAgICAgICAgdHlwZVNlbGVjdG9yQ29udGFpbmVyTGFiZWwuc2V0VGV4dChgRmllbGQgdHlwZTpgKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHBhcmVudE5vZGUpO1xuICAgICAgICBPYmplY3Qua2V5cyhGaWVsZFR5cGVMYWJlbE1hcHBpbmcpLmZvckVhY2goKGY6IGtleW9mIHR5cGVvZiBGaWVsZFR5cGUpID0+IHNlbGVjdC5hZGRPcHRpb24oZiwgRmllbGRUeXBlVG9vbHRpcFtmXSkpXG4gICAgICAgIGlmICh0aGlzLmZpZWxkLnR5cGUpIHtcbiAgICAgICAgICAgIHNlbGVjdC5zZXRWYWx1ZSh0aGlzLmZpZWxkLnR5cGUpXG4gICAgICAgIH1cbiAgICAgICAgc2VsZWN0Lm9uQ2hhbmdlKCh0eXBlTGFiZWw6IGtleW9mIHR5cGVvZiBGaWVsZFR5cGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQgPSBuZXcgRmllbGQoKTtcbiAgICAgICAgICAgIEZpZWxkLmNvcHlQcm9wZXJ0eSh0aGlzLmZpZWxkLCB0aGlzLmluaXRpYWxGaWVsZCk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkLm5hbWUgPSB0aGlzLm5hbWVQcm9tcHRDb21wb25lbnQuZ2V0VmFsdWUoKVxuICAgICAgICAgICAgdGhpcy5maWVsZC50eXBlID0gRmllbGRUeXBlTGFiZWxNYXBwaW5nW3R5cGVMYWJlbF07XG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZC50eXBlICE9PSB0aGlzLmluaXRpYWxGaWVsZC50eXBlICYmXG4gICAgICAgICAgICAgICAgIVt0aGlzLmZpZWxkLnR5cGUsIHRoaXMuaW5pdGlhbEZpZWxkLnR5cGVdLmV2ZXJ5KGZpZWxkVHlwZSA9PlxuICAgICAgICAgICAgICAgICAgICBbRmllbGRUeXBlLk11bHRpLCBGaWVsZFR5cGUuU2VsZWN0LCBGaWVsZFR5cGUuQ3ljbGVdLmluY2x1ZGVzKGZpZWxkVHlwZSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpZWxkLm9wdGlvbnMgPSB7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKHRoaXMuZmllbGRPcHRpb25zQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpZWxkT3B0aW9uc0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLmZpZWxkT3B0aW9uc0NvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmllbGRNYW5hZ2VyID0gbmV3IEZpZWxkTWFuYWdlclt0aGlzLmZpZWxkLnR5cGVdKHRoaXMuZmllbGQpXG4gICAgICAgICAgICB0aGlzLmZpZWxkTWFuYWdlci5jcmVhdGVTZXR0aW5nQ29udGFpbmVyKHRoaXMuZmllbGRPcHRpb25zQ29udGFpbmVyLCB0aGlzLnBsdWdpbiwgU2V0dGluZ0xvY2F0aW9uLlBsdWdpblNldHRpbmdzKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlRm9ybSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1ldGFkYXRhLW1lbnUtcHJvbXB0LWRpdlwiIH0pO1xuICAgICAgICBjb25zdCBtYWluRGl2ID0gZGl2LmNyZWF0ZURpdih7IGNsczogXCJtZXRhZGF0YS1tZW51LXByb21wdC1mb3JtXCIgfSk7XG5cbiAgICAgICAgLyogU2VjdGlvbnMgKi9cbiAgICAgICAgY29uc3QgbmFtZUNvbnRhaW5lciA9IG1haW5EaXYuY3JlYXRlRGl2KCk7XG4gICAgICAgIHRoaXMubmFtZVByb21wdENvbXBvbmVudCA9IHRoaXMuY3JlYXRlbmFtZUlucHV0Q29udGFpbmVyKG5hbWVDb250YWluZXIpO1xuICAgICAgICBtYWluRGl2LmNyZWF0ZURpdih7IGNsczogJ21ldGFkYXRhLW1lbnUtc2VwYXJhdG9yJyB9KS5jcmVhdGVFbChcImhyXCIpO1xuXG4gICAgICAgIGNvbnN0IHR5cGVTZWxlY3RDb250YWluZXIgPSBtYWluRGl2LmNyZWF0ZURpdigpXG4gICAgICAgIHRoaXMuZmllbGRPcHRpb25zQ29udGFpbmVyID0gbWFpbkRpdi5jcmVhdGVEaXYoKVxuXG4gICAgICAgIC8qIGZvb3RlciBidXR0b25zKi9cbiAgICAgICAgY29uc3QgZm9vdGVyRWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgY29uc3QgZm9vdGVyQnV0dG9ucyA9IG5ldyBTZXR0aW5nKGZvb3RlckVsKTtcbiAgICAgICAgZm9vdGVyQnV0dG9ucy5hZGRCdXR0b24oKGIpID0+IHRoaXMuY3JlYXRlU2F2ZUJ1dHRvbihiKSk7XG4gICAgICAgIGZvb3RlckJ1dHRvbnMuYWRkRXh0cmFCdXR0b24oKGIpID0+IHRoaXMuY3JlYXRlQ2FuY2VsQnV0dG9uKGIpKTtcblxuICAgICAgICAvKiBpbml0IHN0YXRlICovXG4gICAgICAgIHRoaXMuY3JlYXRlVHlwZVNlbGVjdG9yQ29udGFpbmVyKHR5cGVTZWxlY3RDb250YWluZXIpXG4gICAgICAgIHRoaXMuZmllbGRNYW5hZ2VyLmNyZWF0ZVNldHRpbmdDb250YWluZXIodGhpcy5maWVsZE9wdGlvbnNDb250YWluZXIsIHRoaXMucGx1Z2luLCBTZXR0aW5nTG9jYXRpb24uUGx1Z2luU2V0dGluZ3MpXG4gICAgfTtcblxuICAgIHByaXZhdGUgdmFsaWRhdGVGaWVsZHMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkTWFuYWdlci52YWxpZGF0ZU5hbWUoXG4gICAgICAgICAgICB0aGlzLm5hbWVQcm9tcHRDb21wb25lbnQsXG4gICAgICAgICAgICB0aGlzLm5hbWVQcm9tcHRDb21wb25lbnQuaW5wdXRFbFxuICAgICAgICApICYmXG4gICAgICAgICAgICB0aGlzLmZpZWxkTWFuYWdlci52YWxpZGF0ZU9wdGlvbnMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVNhdmVCdXR0b24oYjogQnV0dG9uQ29tcG9uZW50KTogQnV0dG9uQ29tcG9uZW50IHtcbiAgICAgICAgYi5zZXRUb29sdGlwKFwiU2F2ZVwiKTtcbiAgICAgICAgYi5zZXRJY29uKFwiY2hlY2ttYXJrXCIpO1xuICAgICAgICBiLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gIXRoaXMudmFsaWRhdGVGaWVsZHMoKTtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJGaXggZXJyb3JzIGJlZm9yZSBzYXZpbmcuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNhdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFeGlzdGluZ0ZpZWxkID0gdGhpcy5wbHVnaW4uaW5pdGlhbFByb3BlcnRpZXMuZmlsdGVyKHAgPT4gcC5pZCA9PSB0aGlzLmZpZWxkLmlkKVswXTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50RXhpc3RpbmdGaWVsZCkge1xuICAgICAgICAgICAgICAgIEZpZWxkLmNvcHlQcm9wZXJ0eShjdXJyZW50RXhpc3RpbmdGaWVsZCwgdGhpcy5maWVsZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmluaXRpYWxQcm9wZXJ0aWVzLnB1c2godGhpcy5maWVsZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgRmllbGQuY29weVByb3BlcnR5KHRoaXMuaW5pdGlhbEZpZWxkLCB0aGlzLmZpZWxkKVxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50U2V0dGluZykgRmllbGQuY29weVByb3BlcnR5KHRoaXMucGFyZW50U2V0dGluZy5maWVsZCwgdGhpcy5maWVsZCk7XG4gICAgICAgICAgICB0aGlzLnBhcmVudFNldHRpbmc/LnNldFRleHRDb250ZW50V2l0aG5hbWUoKVxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYjtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBjcmVhdGVDYW5jZWxCdXR0b24oYjogRXh0cmFCdXR0b25Db21wb25lbnQpOiBFeHRyYUJ1dHRvbkNvbXBvbmVudCB7XG4gICAgICAgIGIuc2V0SWNvbihcImNyb3NzXCIpXG4gICAgICAgICAgICAuc2V0VG9vbHRpcChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAvKiByZXNldCBvcHRpb25zIGZyb20gc2V0dGluZ3MgKi9cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsRmllbGQubmFtZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5maWVsZCwgdGhpcy5pbml0aWFsRmllbGQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBiO1xuICAgIH07XG5cbiAgICAvKiB1dGlscyBmdW5jdGlvbnMgKi9cblxuICAgIHB1YmxpYyBzdGF0aWMgc2V0VmFsaWRhdGlvbkVycm9yKHRleHRJbnB1dDogVGV4dENvbXBvbmVudCwgaW5zZXJ0QWZ0ZXI6IEVsZW1lbnQsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgdGV4dElucHV0LmlucHV0RWwuYWRkQ2xhc3MoXCJpcy1pbnZhbGlkXCIpO1xuICAgICAgICBpZiAobWVzc2FnZSAmJiB0ZXh0SW5wdXQuaW5wdXRFbC5wYXJlbnRFbGVtZW50Py5sYXN0RWxlbWVudENoaWxkKSB7XG5cbiAgICAgICAgICAgIGxldCBtRGl2ID0gdGV4dElucHV0LmlucHV0RWwucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgIFwiLmludmFsaWQtZmVlZGJhY2tcIlxuICAgICAgICAgICAgKSBhcyBIVE1MRGl2RWxlbWVudDtcblxuICAgICAgICAgICAgaWYgKCFtRGl2KSB7XG4gICAgICAgICAgICAgICAgbURpdiA9IGNyZWF0ZURpdih7IGNsczogXCJpbnZhbGlkLWZlZWRiYWNrXCIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtRGl2LmlubmVyVGV4dCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICBtRGl2Lmluc2VydEFmdGVyKGluc2VydEFmdGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZVZhbGlkYXRpb25FcnJvcih0ZXh0SW5wdXQ6IFRleHRDb21wb25lbnQgfCBUZXh0QXJlYUNvbXBvbmVudCkge1xuICAgICAgICBpZiAodGV4dElucHV0LmlucHV0RWwuaGFzQ2xhc3MoXCJpcy1pbnZhbGlkXCIpICYmIHRleHRJbnB1dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQ/Lmxhc3RFbGVtZW50Q2hpbGQpIHtcbiAgICAgICAgICAgIHRleHRJbnB1dC5pbnB1dEVsLnJlbW92ZUNsYXNzKFwiaXMtaW52YWxpZFwiKVxuICAgICAgICAgICAgdGV4dElucHV0LmlucHV0RWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQuaW5wdXRFbC5wYXJlbnRFbGVtZW50Lmxhc3RFbGVtZW50Q2hpbGRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH07XG4gICAgfTtcbn07IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIE1lbnUsIFRleHRDb21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9TZWxlY3RNb2RhbFwiO1xuaW1wb3J0IHsgRmllbGRUeXBlIH0gZnJvbSBcInNyYy90eXBlcy9maWVsZFR5cGVzXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcIi4vRmllbGRcIjtcbmltcG9ydCBGaWVsZFNldHRpbmdzTW9kYWwgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdzTW9kYWxcIjtcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL2NvbW1hbmRzL3JlcGxhY2VWYWx1ZXNcIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEZpZWxkTWFuYWdlciBhcyBGTSB9IGZyb20gXCJzcmMvdHlwZXMvZmllbGRUeXBlc1wiO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgRmllbGRNYW5hZ2VyIHtcbiAgICBmaWVsZDogRmllbGQ7XG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIFNldHRpbmdMb2NhdGlvbiB7XG4gICAgXCJQbHVnaW5TZXR0aW5nc1wiLFxuICAgIFwiRmlsZUNsYXNzQXR0cmlidXRlU2V0dGluZ3NcIlxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRmllbGRNYW5hZ2VyIHtcblxuICAgIGFic3RyYWN0IGFkZE1lbnVPcHRpb24obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhcHA6IEFwcCwgZmlsZTogVEZpbGUsIGNhdGVnb3J5OiBNZW51IHwgU2VsZWN0TW9kYWwpOiB2b2lkO1xuICAgIGFic3RyYWN0IHZhbGlkYXRlT3B0aW9ucygpOiBib29sZWFuO1xuICAgIGFic3RyYWN0IGNyZWF0ZVNldHRpbmdDb250YWluZXIocGFyZW50Q29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCwgcGx1Z2luOiBNZXRhZGF0YU1lbnUsIGxvY2F0aW9uPzogU2V0dGluZ0xvY2F0aW9uKTogdm9pZDtcbiAgICBhYnN0cmFjdCBjcmVhdGVEdkZpZWxkKHBsdWdpbjogTWV0YWRhdGFNZW51LCBkdjogYW55LCBwOiBhbnksIGZpZWxkQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgYXR0cnM/OiB7IGNscz86IHN0cmluZywgYXR0cj86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IH0pOiBQcm9taXNlPHZvaWQ+XG4gICAgYWJzdHJhY3QgZ2V0T3B0aW9uc1N0cigpOiBzdHJpbmc7XG4gICAgYWJzdHJhY3QgY3JlYXRlQW5kT3BlbkZpZWxkTW9kYWwoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBzZWxlY3RlZEZpZWxkTmFtZTogc3RyaW5nLCBsaW5lTnVtYmVyPzogbnVtYmVyLCBpbkZyb250bWF0dGVyPzogYm9vbGVhbiwgdG9wPzogYm9vbGVhbik6IHZvaWRcblxuICAgIGNvbnN0cnVjdG9yKGZpZWxkOiBGaWVsZCwgdHlwZTogRmllbGRUeXBlKSB7XG4gICAgICAgIGlmIChmaWVsZC50eXBlICE9PSB0eXBlKSB0aHJvdyBFcnJvcihgVGhpcyBmaWVsZCBpcyBub3Qgb2YgdHlwZSAke3R5cGV9YClcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkXG4gICAgfVxuXG4gICAgdmFsaWRhdGVOYW1lKHRleHRJbnB1dDogVGV4dENvbXBvbmVudCwgaW5zZXJ0QWZ0ZXI6IEVsZW1lbnQpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGVycm9yID0gZmFsc2U7XG4gICAgICAgIGlmICgvXlsjPi1dLy50ZXN0KHRoaXMuZmllbGQubmFtZSkpIHtcbiAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgdGV4dElucHV0LCBpbnNlcnRBZnRlcixcbiAgICAgICAgICAgICAgICBcIkZpZWxkIG5hbWUgY2Fubm90IHN0YXJ0IHdpdGggIywgPiwgLVwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5maWVsZC5uYW1lID09IFwiXCIpIHtcbiAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgdGV4dElucHV0LCBpbnNlcnRBZnRlcixcbiAgICAgICAgICAgICAgICBcIkZpZWxkIG5hbWUgY2FuIG5vdCBiZSBFbXB0eVwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gIWVycm9yXG4gICAgfVxuXG4gICAgYXN5bmMgdmFsaWRhdGVWYWx1ZSh2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHN0YXRpYyByZXBsYWNlVmFsdWVzKGFwcDogQXBwLCBwYXRoOiBzdHJpbmcsIGZpZWxkTmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpXG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT0gXCJtZFwiKSB7XG4gICAgICAgICAgICByZXBsYWNlVmFsdWVzKGFwcCwgZmlsZSwgZmllbGROYW1lLCB2YWx1ZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBpc01lbnUoY2F0ZWdvcnk6IE1lbnUgfCBTZWxlY3RNb2RhbCk6IGNhdGVnb3J5IGlzIE1lbnUge1xuICAgICAgICByZXR1cm4gKGNhdGVnb3J5IGFzIE1lbnUpLmFkZEl0ZW0gIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgc3RhdGljIGlzU2VsZWN0KGNhdGVnb3J5OiBNZW51IHwgU2VsZWN0TW9kYWwpOiBjYXRlZ29yeSBpcyBTZWxlY3RNb2RhbCB7XG4gICAgICAgIHJldHVybiAoY2F0ZWdvcnkgYXMgU2VsZWN0TW9kYWwpLm1vZGFscyAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZURlZmF1bHQobmFtZTogc3RyaW5nKTogRmllbGRNYW5hZ2VyIHtcbiAgICAgICAgY29uc3QgZmllbGQgPSBGaWVsZC5jcmVhdGVEZWZhdWx0KG5hbWUpO1xuICAgICAgICByZXR1cm4gbmV3IEZNW2ZpZWxkLnR5cGVdKGZpZWxkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHN0cmluZ1RvQm9vbGVhbih2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCB0b0Jvb2xlYW5WYWx1ZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICBpZiAoaXNCb29sZWFuKHZhbHVlKSkge1xuICAgICAgICAgICAgdG9Cb29sZWFuVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmICgvdHJ1ZS9pLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgICB0b0Jvb2xlYW5WYWx1ZSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoL2ZhbHNlL2kudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRvQm9vbGVhblZhbHVlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcInRoaXMgdmFsdWUgaXMgbm90IGEgYm9vbGVhblwiKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdG9Cb29sZWFuVmFsdWU7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBmaWVsZENvbXBvbmVudHMsIGlubGluZUZpZWxkUmVnZXgsIGVuY29kZUxpbmssIGRlY29kZUxpbmsgfSBmcm9tIFwic3JjL3V0aWxzL3BhcnNlclwiO1xuXG5jb25zdCBlbnVtIExvY2F0aW9uIHtcbiAgICAnZnVsbExpbmUnID0gJ2Z1bGxMaW5lJyxcbiAgICAnYnJhY2tldHMnID0gJ2JyYWNrZXRzJyxcbiAgICAncGFyZW50aGVzaXMnID0gJ3BhcmVudGhlc2lzJ1xufVxuXG5jb25zdCBMb2NhdGlvbldyYXBwZXI6IFJlY29yZDxrZXlvZiB0eXBlb2YgTG9jYXRpb24sIHsgc3RhcnQ6IFwiXCIgfCBcIltcIiB8IFwiKFwiLCBlbmQ6IFwiXCIgfCBcIl1cIiB8IFwiKVwiIH0+ID0ge1xuICAgIFwiZnVsbExpbmVcIjogeyBzdGFydDogXCJcIiwgZW5kOiBcIlwiIH0sXG4gICAgXCJicmFja2V0c1wiOiB7IHN0YXJ0OiBcIltcIiwgZW5kOiBcIl1cIiB9LFxuICAgIFwicGFyZW50aGVzaXNcIjogeyBzdGFydDogXCIoXCIsIGVuZDogXCIpXCIgfVxufVxuXG50eXBlIEZpZWxkUmVwbGFjZSA9IHtcbiAgICBvbGRGaWVsZDogc3RyaW5nLFxuICAgIG5ld0ZpZWxkOiBzdHJpbmcsXG59XG5cbmV4cG9ydCBjb25zdCBtYXRjaElubGluZUZpZWxkcyA9IChyZWdleDogUmVnRXhwLCBsaW5lOiBzdHJpbmcsIGF0dHJpYnV0ZTogc3RyaW5nLCBpbnB1dDogc3RyaW5nLCBsb2NhdGlvbjoga2V5b2YgdHlwZW9mIExvY2F0aW9uID0gXCJmdWxsTGluZVwiKTogRmllbGRSZXBsYWNlW10gPT4ge1xuICAgIGNvbnN0IHNSID0gbGluZS5tYXRjaEFsbChyZWdleCk7XG4gICAgbGV0IG5leHQgPSBzUi5uZXh0KCk7XG4gICAgY29uc3QgbmV3RmllbGRzOiBGaWVsZFJlcGxhY2VbXSA9IFtdO1xuICAgIHdoaWxlICghbmV4dC5kb25lKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gbmV4dC52YWx1ZTtcbiAgICAgICAgaWYgKG1hdGNoLmdyb3VwcyAmJiBPYmplY3Qua2V5cyhtYXRjaC5ncm91cHMpLmV2ZXJ5KGogPT4gZmllbGRDb21wb25lbnRzLmluY2x1ZGVzKGopKSkge1xuICAgICAgICAgICAgY29uc3QgeyBpbkxpc3QsIHN0YXJ0U3R5bGUsIGVuZFN0eWxlLCBiZWZvcmVTZXBhcmF0b3JTcGFjZXIsIGFmdGVyU2VwYXJhdG9yU3BhY2VyLCB2YWx1ZXMgfSA9IG1hdGNoLmdyb3Vwc1xuICAgICAgICAgICAgY29uc3QgaW5wdXRBcnJheSA9IGlucHV0ID8gaW5wdXQucmVwbGFjZSgvKFxcLFxccyspL2csICcsJykuc3BsaXQoJywnKSA6IFtcIlwiXTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gaW5wdXRBcnJheS5sZW5ndGggPT0gMSA/IGlucHV0QXJyYXlbMF0gOiBgJHtpbnB1dEFycmF5LmpvaW4oJywgJyl9YDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gTG9jYXRpb25XcmFwcGVyW2xvY2F0aW9uXS5zdGFydDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IExvY2F0aW9uV3JhcHBlcltsb2NhdGlvbl0uZW5kO1xuICAgICAgICAgICAgbmV3RmllbGRzLnB1c2goe1xuICAgICAgICAgICAgICAgIG9sZEZpZWxkOiBtYXRjaFswXSxcbiAgICAgICAgICAgICAgICBuZXdGaWVsZDogYCR7c3RhcnR9JHtpbkxpc3QgfHwgXCJcIn0ke3N0YXJ0U3R5bGV9JHthdHRyaWJ1dGV9JHtlbmRTdHlsZX0ke2JlZm9yZVNlcGFyYXRvclNwYWNlcn06OiR7YWZ0ZXJTZXBhcmF0b3JTcGFjZXJ9JHtuZXdWYWx1ZX0ke2VuZH1gLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBuZXh0ID0gc1IubmV4dCgpXG4gICAgfVxuICAgIHJldHVybiBuZXdGaWVsZHNcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcGxhY2VWYWx1ZXMoXG4gICAgYXBwOiBBcHAsXG4gICAgZmlsZU9yRmlsZVBhdGg6IFRGaWxlIHwgc3RyaW5nLFxuICAgIGF0dHJpYnV0ZTogc3RyaW5nLFxuICAgIGlucHV0OiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGxldCBmaWxlOiBURmlsZTtcbiAgICBpZiAoZmlsZU9yRmlsZVBhdGggaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBmaWxlID0gZmlsZU9yRmlsZVBhdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgX2ZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVPckZpbGVQYXRoKVxuICAgICAgICBpZiAoX2ZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBfZmlsZS5leHRlbnNpb24gPT0gXCJtZFwiKSB7XG4gICAgICAgICAgICBmaWxlID0gX2ZpbGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcInBhdGggZG9lc24ndCBjb3JyZXNwb25kIHRvIGEgcHJvcGVyIGZpbGVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY29udGVudCA9IChhd2FpdCBhcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKSkuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGZyb250bWF0dGVyID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgIGNvbnN0IHsgcG9zaXRpb246IHsgc3RhcnQsIGVuZCB9IH0gPSBmcm9udG1hdHRlciA/IGZyb250bWF0dGVyIDogeyBwb3NpdGlvbjogeyBzdGFydDogdW5kZWZpbmVkLCBlbmQ6IHVuZGVmaW5lZCB9IH07XG4gICAgY29uc3QgbmV3Q29udGVudCA9IGNvbnRlbnQubWFwKChsaW5lLCBpKSA9PiB7XG4gICAgICAgIGlmIChmcm9udG1hdHRlciAmJiBpID49IHN0YXJ0LmxpbmUgJiYgaSA8PSBlbmQubGluZSkge1xuICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGAke2F0dHJpYnV0ZX06YCwgJ3UnKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBsaW5lLm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgICAgIGlmIChyICYmIHIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0QXJyYXkgPSBpbnB1dCA/IGlucHV0LnJlcGxhY2UoLyhcXCxcXHMrKS9nLCAnLCcpLnNwbGl0KCcsJykgOiBbXCJcIl07XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBpbnB1dEFycmF5Lmxlbmd0aCA9PSAxID8gaW5wdXRBcnJheVswXSA6IGBbJHtpbnB1dEFycmF5LmpvaW4oJywgJyl9XWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2F0dHJpYnV0ZX06ICR7bmV3VmFsdWV9YDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlbmNvZGVkSW5wdXQgPSBlbmNvZGVMaW5rKGlucHV0KVxuICAgICAgICAgICAgbGV0IGVuY29kZWRMaW5lID0gZW5jb2RlTGluayhsaW5lKVxuICAgICAgICAgICAgY29uc3QgZnVsbExpbmVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2lubGluZUZpZWxkUmVnZXgoYXR0cmlidXRlKX1gLCBcInVcIik7XG4gICAgICAgICAgICBjb25zdCBmUiA9IGVuY29kZWRMaW5lLm1hdGNoKGZ1bGxMaW5lUmVnZXgpO1xuICAgICAgICAgICAgaWYgKGZSPy5ncm91cHMgJiYgT2JqZWN0LmtleXMoZlIuZ3JvdXBzKS5ldmVyeShqID0+IGZpZWxkQ29tcG9uZW50cy5pbmNsdWRlcyhqKSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGluTGlzdCwgc3RhcnRTdHlsZSwgZW5kU3R5bGUsIGJlZm9yZVNlcGFyYXRvclNwYWNlciwgYWZ0ZXJTZXBhcmF0b3JTcGFjZXIsIHZhbHVlcyB9ID0gZlIuZ3JvdXBzXG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRBcnJheSA9IGlucHV0ID8gaW5wdXQucmVwbGFjZSgvKFxcLFxccyspL2csICcsJykuc3BsaXQoJywnKSA6IFtcIlwiXTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGlucHV0QXJyYXkubGVuZ3RoID09IDEgPyBpbnB1dEFycmF5WzBdIDogYCR7aW5wdXRBcnJheS5qb2luKCcsICcpfWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2luTGlzdCB8fCBcIlwifSR7c3RhcnRTdHlsZX0ke2F0dHJpYnV0ZX0ke2VuZFN0eWxlfSR7YmVmb3JlU2VwYXJhdG9yU3BhY2VyfTo6JHthZnRlclNlcGFyYXRvclNwYWNlcn0ke25ld1ZhbHVlfWA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpZWxkczogRmllbGRSZXBsYWNlW10gPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpblNlbnRlbmNlUmVnZXhCcmFja2V0cyA9IG5ldyBSZWdFeHAoYFxcXFxbJHtpbmxpbmVGaWVsZFJlZ2V4KGF0dHJpYnV0ZSl9XFxcXF1gLCBcImd1XCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGluU2VudGVuY2VSZWdleFBhciA9IG5ldyBSZWdFeHAoYFxcXFwoJHtpbmxpbmVGaWVsZFJlZ2V4KGF0dHJpYnV0ZSl9XFxcXClgLCBcImd1XCIpO1xuICAgICAgICAgICAgICAgIG5ld0ZpZWxkcy5wdXNoKC4uLm1hdGNoSW5saW5lRmllbGRzKGluU2VudGVuY2VSZWdleEJyYWNrZXRzLCBlbmNvZGVkTGluZSwgYXR0cmlidXRlLCBlbmNvZGVkSW5wdXQsIExvY2F0aW9uLmJyYWNrZXRzKSlcbiAgICAgICAgICAgICAgICBuZXdGaWVsZHMucHVzaCguLi5tYXRjaElubGluZUZpZWxkcyhpblNlbnRlbmNlUmVnZXhQYXIsIGVuY29kZWRMaW5lLCBhdHRyaWJ1dGUsIGVuY29kZWRJbnB1dCwgTG9jYXRpb24ucGFyZW50aGVzaXMpKVxuICAgICAgICAgICAgICAgIG5ld0ZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRSZWdleCA9IG5ldyBSZWdFeHAoZmllbGQub2xkRmllbGQucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKSwgXCJ1XCIpXG4gICAgICAgICAgICAgICAgICAgIGVuY29kZWRMaW5lID0gZW5jb2RlZExpbmUucmVwbGFjZShmaWVsZFJlZ2V4LCBmaWVsZC5uZXdGaWVsZCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlTGluayhlbmNvZGVkTGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIGFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudC5qb2luKCdcXG4nKSk7XG59IiwgImV4cG9ydCBjb25zdCBmaWVsZENvbXBvbmVudHMgPSBbJ2luTGlzdCcsICdzdGFydFN0eWxlJywgJ2F0dHJpYnV0ZScsICdlbmRTdHlsZScsICdiZWZvcmVTZXBhcmF0b3JTcGFjZXInLCAnYWZ0ZXJTZXBhcmF0b3JTcGFjZXInLCAndmFsdWVzJ11cblxuZXhwb3J0IGNvbnN0IGdlbmVyaWNGaWVsZFJlZ2V4ID0gXCIoPzxpbkxpc3Q+LSApPyg/PHN0YXJ0U3R5bGU+W19cXFxcKn5gXSopKD88YXR0cmlidXRlPlswLTlcXFxcd1xcXFxwe0xldHRlcn1cXFxccHtFbW9qaV9QcmVzZW50YXRpb259XVstMC05XFxcXHdcXFxccHtMZXR0ZXJ9XFxcXHB7RW1vamlfUHJlc2VudGF0aW9ufVxcXFxzXSopKD88ZW5kU3R5bGU+W19cXFxcKn5gXSopKD88YmVmb3JlU2VwYXJhdG9yU3BhY2VyPlxcXFxzKilcIjtcblxuZXhwb3J0IGNvbnN0IGlubGluZUZpZWxkUmVnZXggPSAoYXR0cmlidXRlOiBzdHJpbmcpID0+IGAoPzxpbkxpc3Q+LSApPyg/PHN0YXJ0U3R5bGU+W19cXFxcKn5cXGBdKikoPzxhdHRyaWJ1dGU+JHthdHRyaWJ1dGV9KSg/PGVuZFN0eWxlPltfXFxcXCp+XFxgXSopKD88YmVmb3JlU2VwYXJhdG9yU3BhY2VyPlxcXFxzKik6Oig/PGFmdGVyU2VwYXJhdG9yU3BhY2VyPlxcXFxzKikoPzx2YWx1ZXM+W15cXFxcXV0qKWA7XG5cbmV4cG9ydCBjb25zdCBmdWxsTGluZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7Z2VuZXJpY0ZpZWxkUmVnZXh9OjpcXHMqKD88dmFsdWVzPi4qKT9gLCBcInVcIik7XG5cbi8vc2VhcmNoIGZvciB0aGVtXG5leHBvcnQgY29uc3QgaW5TZW50ZW5jZVJlZ2V4QnJhY2tldHMgPSBuZXcgUmVnRXhwKGBcXFxcWyR7Z2VuZXJpY0ZpZWxkUmVnZXh9OjpcXHMqKD88dmFsdWVzPlteXFxcXF1dKyk/XFxcXF1gLCBcImd1XCIpO1xuZXhwb3J0IGNvbnN0IGluU2VudGVuY2VSZWdleFBhciA9IG5ldyBSZWdFeHAoYFxcXFwoJHtnZW5lcmljRmllbGRSZWdleH06OlxccyooPzx2YWx1ZXM+W15cXFxcXV0rKT9cXFxcKWAsIFwiZ3VcIik7XG5cbmV4cG9ydCBjb25zdCBlbmNvZGVMaW5rID0gKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIC8qIHJlcGxhY2UgbGluayBicmFja2V0cyBieSBcImltcG9zc2libGVcIiBjb21iaW5hdGlvbiBvZiBjaGFyYWN0ZXJzIHNvIHRoYXQgdGhleSB3b24ndCBiZSBtaXhlZCB1cCB3aXRoIGluU2VudGVuY2UgZmllbGQgYnJhY2tldHMgd2hlbiBzZWFjaGluZyB3aXRoIHJlZ2V4Ki9cbiAgICByZXR1cm4gdmFsdWUgPyB2YWx1ZVxuICAgICAgICAucmVwbGFjZSgvXFxbXFxbL2csIFwiXHVEODNEXHVERDI3XHVEODNEXHVEQzAwXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXF1cXF0vZywgXCJcdUQ4M0RcdURDMTNcdUQ4M0RcdURENENcIikgOiB2YWx1ZVxufVxuXG5leHBvcnQgY29uc3QgZGVjb2RlTGluayA9ICh2YWx1ZTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICAvKiByZXBsYWNlIGxpbmsgYnJhY2tldHMgYnkgXCJpbXBvc3NpYmxlXCIgY29tYmluYXRpb24gb2YgY2hhcmFjdGVycyBzbyB0aGF0IHRoZXkgd29uJ3QgYmUgbWl4ZWQgdXAgd2l0aCBpblNlbnRlbmNlIGZpZWxkIGJyYWNrZXRzIHdoZW4gc2VhY2hpbmcgd2l0aCByZWdleCovXG4gICAgcmV0dXJuIHZhbHVlID8gdmFsdWVcbiAgICAgICAgLnJlcGxhY2UoL1x1RDgzRFx1REQyN1x1RDgzRFx1REMwMC9ndSwgXCJbW1wiKVxuICAgICAgICAucmVwbGFjZSgvXHVEODNEXHVEQzEzXHVEODNEXHVERDRDL2d1LCBcIl1dXCIpIDogdmFsdWVcbn1cblxuZXhwb3J0IGNvbnN0IGdldExpbmVGaWVsZHMgPSAobGluZTogc3RyaW5nKTogeyBhdHRyaWJ1dGU6IHN0cmluZywgdmFsdWVzOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyIH1bXSA9PiB7XG4gICAgY29uc3QgZmllbGRzOiB7IGF0dHJpYnV0ZTogc3RyaW5nLCB2YWx1ZXM6IHN0cmluZywgaW5kZXg6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIgfVtdID0gW11cbiAgICBjb25zdCBmUiA9IGxpbmUubWF0Y2goZnVsbExpbmVSZWdleCk7XG4gICAgaWYgKGZSPy5ncm91cHMpIHtcbiAgICAgICAgY29uc3QgeyBhdHRyaWJ1dGUsIHZhbHVlcyB9ID0gZlI/Lmdyb3Vwc1xuICAgICAgICBmaWVsZHMucHVzaCh7IGF0dHJpYnV0ZSwgdmFsdWVzLCBpbmRleDogMCwgbGVuZ3RoOiBsaW5lLmxlbmd0aCB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNSQmsgPSBlbmNvZGVMaW5rKGxpbmUpLm1hdGNoQWxsKGluU2VudGVuY2VSZWdleEJyYWNrZXRzKTtcbiAgICAgICAgbGV0IG5leHQgPSBzUkJrLm5leHQoKTtcbiAgICAgICAgd2hpbGUgKCFuZXh0LmRvbmUpIHtcbiAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLmdyb3Vwcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYXR0cmlidXRlLCB2YWx1ZXMgfSA9IG5leHQudmFsdWUuZ3JvdXBzO1xuICAgICAgICAgICAgICAgIGZpZWxkcy5wdXNoKHsgYXR0cmlidXRlLCB2YWx1ZXM6IGRlY29kZUxpbmsodmFsdWVzKSwgaW5kZXg6IG5leHQudmFsdWUuaW5kZXggfHwgMCwgbGVuZ3RoOiBuZXh0LnZhbHVlWzBdLmxlbmd0aCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHQgPSBzUkJrLm5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzUkJjID0gZW5jb2RlTGluayhsaW5lKS5tYXRjaEFsbChpblNlbnRlbmNlUmVnZXhQYXIpO1xuICAgICAgICBuZXh0ID0gc1JCYy5uZXh0KCk7XG4gICAgICAgIHdoaWxlICghbmV4dC5kb25lKSB7XG4gICAgICAgICAgICBpZiAobmV4dC52YWx1ZS5ncm91cHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGF0dHJpYnV0ZSwgdmFsdWVzIH0gPSBuZXh0LnZhbHVlLmdyb3VwcztcbiAgICAgICAgICAgICAgICBmaWVsZHMucHVzaCh7IGF0dHJpYnV0ZSwgdmFsdWVzOiBkZWNvZGVMaW5rKHZhbHVlcyksIGluZGV4OiBuZXh0LnZhbHVlLmluZGV4IHx8IDAsIGxlbmd0aDogbmV4dC52YWx1ZVswXS5sZW5ndGggfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0ID0gc1JCYy5uZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmllbGRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEuaW5kZXggPCBiLmluZGV4KSByZXR1cm4gLTE7XG4gICAgICAgIGlmIChhLmluZGV4ID4gYi5pbmRleCkgcmV0dXJuIDE7XG4gICAgICAgIHJldHVybiAwXG4gICAgfSlcbiAgICByZXR1cm4gZmllbGRzXG59ICAgIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFRleHRDb21wb25lbnQsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBpbnNlcnRWYWx1ZXMgfSBmcm9tIFwic3JjL2NvbW1hbmRzL2luc2VydFZhbHVlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZVZhbHVlcyB9IGZyb20gXCJzcmMvY29tbWFuZHMvcmVwbGFjZVZhbHVlc1wiO1xuaW1wb3J0IEZpZWxkIGZyb20gXCJzcmMvZmllbGRzL0ZpZWxkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xuICAgIHByaXZhdGUgdmFsdWU6IHN0cmluZztcbiAgICBwcml2YXRlIGxpbmVOdW1iZXI6IG51bWJlcjtcbiAgICBwcml2YXRlIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSB0b3A6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBmaWVsZDogRmllbGQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZTogVEZpbGUsIGZpZWxkOiBGaWVsZCwgdmFsdWU6IHN0cmluZywgbGluZU51bWJlcjogbnVtYmVyID0gLTEsIGluRnJvbnRNYXR0ZXI6IGJvb2xlYW4gPSBmYWxzZSwgdG9wOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyO1xuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250TWF0dGVyO1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICB9O1xuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImMnZXN0IGJpZW4gbW9pXCIpXG4gICAgICAgIGNvbnN0IGlucHV0RGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1ldGFkYXRhLW1lbnUtbW9kYWwtdmFsdWVcIiB9KTtcbiAgICAgICAgdGhpcy5idWlsZElucHV0RWwoaW5wdXREaXYpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGJ1aWxkSW5wdXRFbChpbnB1dERpdjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGlucHV0RGl2LmNyZWF0ZUVsKFwiZm9ybVwiKTtcbiAgICAgICAgZm9ybS50eXBlID0gXCJzdWJtaXRcIjtcblxuICAgICAgICBjb25zdCBpbnB1dEVsID0gbmV3IFRleHRDb21wb25lbnQoZm9ybSk7XG4gICAgICAgIGlucHV0RWwuaW5wdXRFbC5mb2N1cygpO1xuICAgICAgICBpbnB1dEVsLnNldFZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICBpbnB1dEVsLmlucHV0RWwuYWRkQ2xhc3MoXCJtZXRhZGF0YS1tZW51LXByb21wdC1pbnB1dFwiKTtcblxuICAgICAgICBmb3JtLm9uc3VibWl0ID0gYXN5bmMgKGU6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsZXQgaW5wdXRWYWx1ZSA9IGlucHV0RWwuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVOdW1iZXIgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlVmFsdWVzKHRoaXMuYXBwLCB0aGlzLmZpbGUsIHRoaXMuZmllbGQubmFtZSwgaW5wdXRWYWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGluc2VydFZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLmZpZWxkLm5hbWUsIGlucHV0VmFsdWUsIHRoaXMubGluZU51bWJlciwgdGhpcy5pbkZyb250bWF0dGVyLCB0aGlzLnRvcCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH07XG59OyIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRWYWx1ZXMoXG4gICAgYXBwOiBBcHAsXG4gICAgZmlsZU9yRmlsZVBhdGg6IFRGaWxlIHwgc3RyaW5nLFxuICAgIGZpZWxkTmFtZTogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgbGluZU51bWJlcj86IG51bWJlcixcbiAgICBpbkZyb250bWF0dGVyPzogYm9vbGVhbixcbiAgICB0b3A/OiBib29sZWFuXG4pOiBQcm9taXNlPHZvaWQ+IHtcblxuICAgIGxldCBmaWxlOiBURmlsZTtcbiAgICBpZiAoZmlsZU9yRmlsZVBhdGggaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBmaWxlID0gZmlsZU9yRmlsZVBhdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgX2ZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVPckZpbGVQYXRoKVxuICAgICAgICBpZiAoX2ZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBfZmlsZS5leHRlbnNpb24gPT0gXCJtZFwiKSB7XG4gICAgICAgICAgICBmaWxlID0gX2ZpbGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcInBhdGggZG9lc24ndCBjb3JyZXNwb25kIHRvIGEgcHJvcGVyIGZpbGVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSlcbiAgICBsZXQgbmV3Q29udGVudDogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAodG9wKSB7XG4gICAgICAgIG5ld0NvbnRlbnQucHVzaChgJHtmaWVsZE5hbWV9JHtpbkZyb250bWF0dGVyID8gXCI6XCIgOiBcIjo6XCJ9ICR7dmFsdWV9YCk7XG4gICAgICAgIHJlc3VsdC5zcGxpdChcIlxcblwiKS5mb3JFYWNoKChsaW5lLCBfbGluZU51bWJlcikgPT4gbmV3Q29udGVudC5wdXNoKGxpbmUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgX2xpbmVOdW1iZXIpID0+IHtcbiAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKTtcbiAgICAgICAgICAgIGlmIChfbGluZU51bWJlciA9PSBsaW5lTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke2ZpZWxkTmFtZX0ke2luRnJvbnRtYXR0ZXIgPyBcIjpcIiA6IFwiOjpcIn0gJHt2YWx1ZX1gKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50LmpvaW4oJ1xcbicpKTtcbn0iLCAiaW1wb3J0IHsgRmllbGRUeXBlIH0gZnJvbSBcInNyYy90eXBlcy9maWVsZFR5cGVzXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcIi4uL0ZpZWxkXCI7XG5pbXBvcnQgeyBGaWVsZE1hbmFnZXIgfSBmcm9tIFwiLi4vRmllbGRNYW5hZ2VyXCI7XG5pbXBvcnQgSW5wdXRNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9maWVsZHMvSW5wdXRNb2RhbFwiO1xuaW1wb3J0IHsgQXBwLCBNZW51LCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEZpZWxkU2VsZWN0TW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvU2VsZWN0TW9kYWxcIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5wdXRGaWVsZCBleHRlbmRzIEZpZWxkTWFuYWdlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihmaWVsZDogRmllbGQpIHtcbiAgICAgICAgc3VwZXIoZmllbGQsIEZpZWxkVHlwZS5JbnB1dClcbiAgICB9XG5cbiAgICBnZXRPcHRpb25zU3RyKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIlwiXG4gICAgfVxuXG4gICAgYWRkTWVudU9wdGlvbihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGFwcDogQXBwLCBmaWxlOiBURmlsZSwgY2F0ZWdvcnk6IE1lbnUgfCBGaWVsZFNlbGVjdE1vZGFsKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IElucHV0TW9kYWwoYXBwLCBmaWxlLCB0aGlzLmZpZWxkLCB2YWx1ZSk7XG4gICAgICAgIG1vZGFsLnRpdGxlRWwuc2V0VGV4dChgQ2hhbmdlIFZhbHVlIGZvciA8JHtuYW1lfT5gKTtcbiAgICAgICAgaWYgKElucHV0RmllbGQuaXNNZW51KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYFVwZGF0ZSA8JHtuYW1lfT5gKTtcbiAgICAgICAgICAgICAgICBpdGVtLnNldEljb24oJ3BlbmNpbCcpO1xuICAgICAgICAgICAgICAgIGl0ZW0ub25DbGljaygoKSA9PiBtb2RhbC5vcGVuKCkpO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0U2VjdGlvbihcInRhcmdldC1tZXRhZGF0YVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoSW5wdXRGaWVsZC5pc1NlbGVjdChjYXRlZ29yeSkpIHtcbiAgICAgICAgICAgIGNhdGVnb3J5LmFkZE9wdGlvbihgdXBkYXRlXyR7bmFtZX1gLCBgVXBkYXRlIDwke25hbWV9PmApO1xuICAgICAgICAgICAgY2F0ZWdvcnkubW9kYWxzW2B1cGRhdGVfJHtuYW1lfWBdID0gKCkgPT4gbW9kYWwub3BlbigpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBjcmVhdGVTZXR0aW5nQ29udGFpbmVyKHBhcmVudENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsIHBsdWdpbjogTWV0YWRhdGFNZW51KTogdm9pZCB7XG4gICAgICAgIC8vbm8gbmVlZCBvZiBzZXR0aW5ncyBmb3Igc3RhbmRhcmQgaW5wdXQgZmllbGRcbiAgICB9XG5cbiAgICB2YWxpZGF0ZU9wdGlvbnMoKTogYm9vbGVhbiB7XG4gICAgICAgIC8vYWx3YXlzIHRydWUgc2luY2UgdGhlcmUgYXJlIG5vIG9wdGlvbnNcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBjcmVhdGVBbmRPcGVuRmllbGRNb2RhbChhcHA6IEFwcCwgZmlsZTogVEZpbGUsIHNlbGVjdGVkRmllbGROYW1lOiBzdHJpbmcsIGxpbmVOdW1iZXI/OiBudW1iZXIsIGluRnJvbnRtYXR0ZXI/OiBib29sZWFuLCB0b3A/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZpZWxkTW9kYWwgPSBuZXcgSW5wdXRNb2RhbChhcHAsIGZpbGUsIHRoaXMuZmllbGQsIFwiXCIsIGxpbmVOdW1iZXIsIGluRnJvbnRtYXR0ZXIsIHRvcCk7XG4gICAgICAgIGZpZWxkTW9kYWwudGl0bGVFbC5zZXRUZXh0KGBFbnRlciB2YWx1ZSBmb3IgJHtzZWxlY3RlZEZpZWxkTmFtZX1gKTtcbiAgICAgICAgZmllbGRNb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlRHZGaWVsZChcbiAgICAgICAgcGx1Z2luOiBNZXRhZGF0YU1lbnUsXG4gICAgICAgIGR2OiBhbnksXG4gICAgICAgIHA6IGFueSxcbiAgICAgICAgZmllbGRDb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgICAgICBhdHRycz86IHsgY2xzPzogc3RyaW5nLCBhdHRyPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfVxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBmaWVsZFZhbHVlID0gZHYuZWwoJ3NwYW4nLCBwW3RoaXMuZmllbGQubmFtZV0sIGF0dHJzKVxuICAgICAgICBjb25zdCBpbnB1dENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcbiAgICAgICAgaW5wdXQuc2V0QXR0cihcImNsYXNzXCIsIFwibWV0YWRhdGEtbWVudS1kdi1pbnB1dFwiKVxuICAgICAgICBpbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dClcbiAgICAgICAgaW5wdXQudmFsdWUgPSBwW3RoaXMuZmllbGQubmFtZV1cbiAgICAgICAgLyogZW5kIHNwYWNlciAqL1xuICAgICAgICBjb25zdCBzcGFjZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgICAgIHNwYWNlci5zZXRBdHRyKFwiY2xhc3NcIiwgXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLXNwYWNlclwiKVxuICAgICAgICAvKiBidXR0b24gdG8gZGlzcGxheSBpbnB1dCAqL1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIGJ1dHRvbi5zZXRUZXh0KFwiXHVEODNEXHVERDhEXCIpXG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyKCdjbGFzcycsIFwibWV0YWRhdGEtbWVudS1kdi1maWVsZC1idXR0b25cIilcbiAgICAgICAgaWYgKCFhdHRycz8ub3B0aW9ucz8uYWx3YXlzT24pIHtcbiAgICAgICAgICAgIGJ1dHRvbi5oaWRlKClcbiAgICAgICAgICAgIHNwYWNlci5zaG93KClcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLm9ubW91c2VvdmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zaG93KClcbiAgICAgICAgICAgICAgICBzcGFjZXIuaGlkZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5vbm1vdXNlb3V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5oaWRlKClcbiAgICAgICAgICAgICAgICBzcGFjZXIuc2hvdygpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZGF0ZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIHZhbGlkYXRlSWNvbi50ZXh0Q29udGVudCA9IFwiXHUyNzA1XCJcbiAgICAgICAgdmFsaWRhdGVJY29uLnNldEF0dHIoXCJjbGFzc1wiLCBcIm1ldGFkYXRhLW1lbnUtZHYtZmllbGQtYnV0dG9uXCIpXG4gICAgICAgIHZhbGlkYXRlSWNvbi5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgIElucHV0RmllbGQucmVwbGFjZVZhbHVlcyhwbHVnaW4uYXBwLCBwW1wiZmlsZVwiXVtcInBhdGhcIl0sIHRoaXMuZmllbGQubmFtZSwgaW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoaW5wdXRDb250YWluZXIpXG4gICAgICAgIH1cbiAgICAgICAgaW5wdXRDb250YWluZXI/LmFwcGVuZENoaWxkKHZhbGlkYXRlSWNvbilcbiAgICAgICAgY29uc3QgY2FuY2VsSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcbiAgICAgICAgY2FuY2VsSWNvbi5zZXRBdHRyKFwiY2xhc3NcIiwgXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLWJ1dHRvblwiKVxuICAgICAgICBjYW5jZWxJY29uLnRleHRDb250ZW50ID0gXCJcdTI3NENcIlxuICAgICAgICBjYW5jZWxJY29uLm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoaW5wdXRDb250YWluZXIpXG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pXG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChmaWVsZFZhbHVlKVxuICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoc3BhY2VyKVxuICAgICAgICB9XG4gICAgICAgIGlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbEljb24pXG4gICAgICAgIGlucHV0LmZvY3VzKClcblxuICAgICAgICBpbnB1dC5vbmtleWRvd24gPSAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgICAgICBJbnB1dEZpZWxkLnJlcGxhY2VWYWx1ZXMocGx1Z2luLmFwcCwgcFtcImZpbGVcIl1bXCJwYXRoXCJdLCB0aGlzLmZpZWxkLm5hbWUsIGlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5yZW1vdmVDaGlsZChpbnB1dENvbnRhaW5lcilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5yZW1vdmVDaGlsZChpbnB1dENvbnRhaW5lcilcbiAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pXG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZmllbGRWYWx1ZSlcbiAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChzcGFjZXIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyogYnV0dG9uIG9uIGNsaWNrIDogcmVtb3ZlIGJ1dHRvbiBhbmQgZmllbGQgYW5kIGRpc3BsYXkgaW5wdXQgZmllbGQqL1xuICAgICAgICBidXR0b24ub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5yZW1vdmVDaGlsZChmaWVsZFZhbHVlKVxuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoYnV0dG9uKVxuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoc3BhY2VyKVxuICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXRDb250YWluZXIpXG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpXG4gICAgICAgIH1cbiAgICAgICAgLyogaW5pdGlhbCBzdGF0ZSAqL1xuICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pXG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGZpZWxkVmFsdWUpXG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKHNwYWNlcilcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFRvZ2dsZUNvbXBvbmVudCwgVEZpbGUsIEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgaW5zZXJ0VmFsdWVzIH0gZnJvbSBcInNyYy9jb21tYW5kcy9pbnNlcnRWYWx1ZXNcIjtcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL2NvbW1hbmRzL3JlcGxhY2VWYWx1ZXNcIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb29sZWFuTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xuICAgIHByaXZhdGUgdmFsdWU6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBsaW5lTnVtYmVyOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBpbkZyb250bWF0dGVyOiBib29sZWFuO1xuICAgIHByaXZhdGUgdG9wOiBib29sZWFuO1xuICAgIHByaXZhdGUgZmllbGQ6IEZpZWxkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBmaWVsZDogRmllbGQsIHZhbHVlOiBib29sZWFuLCBsaW5lTnVtYmVyOiBudW1iZXIgPSAtMSwgaW5Gcm9udE1hdHRlcjogYm9vbGVhbiA9IGZhbHNlLCB0b3A6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyO1xuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250TWF0dGVyO1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkXG4gICAgfTtcblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgaW5wdXREaXYgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcIm1ldGFkYXRhLW1lbnUtdG9nZ2xlclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJ1aWxkVG9nZ2xlRWwoaW5wdXREaXYpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGJ1aWxkVG9nZ2xlRWwoaW5wdXREaXY6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRvZ2dsZUVsID0gbmV3IFRvZ2dsZUNvbXBvbmVudChpbnB1dERpdik7XG4gICAgICAgIHRvZ2dsZUVsLnNldFZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgICB0b2dnbGVFbC5vbkNoYW5nZSh2YWx1ZSA9PiB7IHRoaXMudmFsdWUgPSB2YWx1ZSB9KVxuICAgICAgICBjb25zdCBmb290ZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibWV0YWRhdGEtbWVudS12YWx1ZS1ncmlkLWZvb3RlclwiIH0pO1xuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChmb290ZXIpO1xuICAgICAgICBzYXZlQnV0dG9uLnNldEljb24oXCJjaGVja21hcmtcIik7XG4gICAgICAgIHNhdmVCdXR0b24ub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWUudG9TdHJpbmcoKVxuICAgICAgICAgICAgaWYgKHRoaXMubGluZU51bWJlciA9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJlcGxhY2VWYWx1ZXModGhpcy5hcHAsIHRoaXMuZmlsZSwgdGhpcy5maWVsZC5uYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGluc2VydFZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLmZpZWxkLm5hbWUsIHZhbHVlLCB0aGlzLmxpbmVOdW1iZXIsIHRoaXMuaW5Gcm9udG1hdHRlciwgdGhpcy50b3ApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn07IiwgImltcG9ydCB7IEZpZWxkVHlwZSB9IGZyb20gXCJzcmMvdHlwZXMvZmllbGRUeXBlc1wiO1xuaW1wb3J0IEZpZWxkIGZyb20gXCIuLi9GaWVsZFwiO1xuaW1wb3J0IHsgRmllbGRNYW5hZ2VyIH0gZnJvbSBcIi4uL0ZpZWxkTWFuYWdlclwiO1xuaW1wb3J0IEJvb2xlYW5Nb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9maWVsZHMvQm9vbGVhbk1vZGFsXCI7XG5pbXBvcnQgeyBBcHAsIE1lbnUsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyByZXBsYWNlVmFsdWVzIH0gZnJvbSBcInNyYy9jb21tYW5kcy9yZXBsYWNlVmFsdWVzXCI7XG5pbXBvcnQgRmllbGRTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9TZWxlY3RNb2RhbFwiO1xuaW1wb3J0IE1ldGFkYXRhTWVudSBmcm9tIFwibWFpblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb29sZWFuRmllbGQgZXh0ZW5kcyBGaWVsZE1hbmFnZXIge1xuXG4gICAgY29uc3RydWN0b3IoZmllbGQ6IEZpZWxkKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkLCBGaWVsZFR5cGUuQm9vbGVhbilcbiAgICB9XG5cbiAgICBhZGRNZW51T3B0aW9uKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBjYXRlZ29yeTogTWVudSB8IEZpZWxkU2VsZWN0TW9kYWwpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYlZhbHVlID0gQm9vbGVhbkZpZWxkLnN0cmluZ1RvQm9vbGVhbih2YWx1ZSk7XG4gICAgICAgIGlmIChCb29sZWFuRmllbGQuaXNNZW51KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYDwke25hbWV9PiAke2JWYWx1ZSA/IFwiXHUyNzA1IFx1MjVCNyBcdTI3NENcIiA6IFwiXHUyNzRDIFx1MjVCNyBcdTI3MDVcIn1gKTtcbiAgICAgICAgICAgICAgICBpdGVtLnNldEljb24oJ2NoZWNrbWFyaycpO1xuICAgICAgICAgICAgICAgIGl0ZW0ub25DbGljaygoKSA9PiByZXBsYWNlVmFsdWVzKGFwcCwgZmlsZSwgbmFtZSwgKCFiVmFsdWUpLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFNlY3Rpb24oXCJ0YXJnZXQtbWV0YWRhdGFcIik7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKEJvb2xlYW5GaWVsZC5pc1NlbGVjdChjYXRlZ29yeSkpIHtcbiAgICAgICAgICAgIGNhdGVnb3J5LmFkZE9wdGlvbihgdXBkYXRlXyR7bmFtZX1gLCBgPCR7bmFtZX0+ICR7YlZhbHVlID8gXCJcdTI3MDUgXHUyNUI3IFx1Mjc0Q1wiIDogXCJcdTI3NEMgXHUyNUI3IFx1MjcwNVwifWApO1xuICAgICAgICAgICAgY2F0ZWdvcnkubW9kYWxzW2B1cGRhdGVfJHtuYW1lfWBdID0gKCkgPT4gcmVwbGFjZVZhbHVlcyhhcHAsIGZpbGUsIG5hbWUsICghYlZhbHVlKS50b1N0cmluZygpKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGdldE9wdGlvbnNTdHIoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG5cbiAgICBjcmVhdGVTZXR0aW5nQ29udGFpbmVyKHBhcmVudENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsIHBsdWdpbjogTWV0YWRhdGFNZW51KTogdm9pZCB7XG4gICAgICAgIC8vbm8gbmVlZCBvZiBzZXR0aW5ncyBmb3IgYm9vbGVhbiBmaWVsZFxuICAgIH1cblxuICAgIGFzeW5jIHZhbGlkYXRlVmFsdWUodmFsdWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYlZhbHVlID0gQm9vbGVhbkZpZWxkLnN0cmluZ1RvQm9vbGVhbih2YWx1ZSlcbiAgICAgICAgICAgIHJldHVybiBpc0Jvb2xlYW4oYlZhbHVlKVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YWxpZGF0ZU9wdGlvbnMoKTogYm9vbGVhbiB7XG4gICAgICAgIC8vYWx3YXlzIHRydWUgc2luY2UgdGhlcmUgYXJlIG5vIG9wdGlvbnNcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBjcmVhdGVBbmRPcGVuRmllbGRNb2RhbChhcHA6IEFwcCwgZmlsZTogVEZpbGUsIHNlbGVjdGVkRmllbGROYW1lOiBzdHJpbmcsIGxpbmVOdW1iZXI/OiBudW1iZXIsIGluRnJvbnRtYXR0ZXI/OiBib29sZWFuLCB0b3A/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZpZWxkTW9kYWwgPSBuZXcgQm9vbGVhbk1vZGFsKGFwcCwgZmlsZSwgdGhpcy5maWVsZCwgZmFsc2UsIGxpbmVOdW1iZXIsIGluRnJvbnRtYXR0ZXIsIHRvcClcbiAgICAgICAgZmllbGRNb2RhbC50aXRsZUVsLnNldFRleHQoYFNldCB2YWx1ZSBmb3IgJHtzZWxlY3RlZEZpZWxkTmFtZX1gKTtcbiAgICAgICAgZmllbGRNb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlRHZGaWVsZChcbiAgICAgICAgcGx1Z2luOiBNZXRhZGF0YU1lbnUsXG4gICAgICAgIGR2OiBhbnksXG4gICAgICAgIHA6IGFueSxcbiAgICAgICAgZmllbGRDb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgICAgICBhdHRycz86IHsgY2xzPzogc3RyaW5nLCBhdHRyPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfVxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBjaGVja2JveDogSFRNTElucHV0RWxlbWVudCA9IGR2LmVsKFwiaW5wdXRcIiwgXCJcIiwgeyAuLi5hdHRycywgXCJ0eXBlXCI6IFwiY2hlY2tib3hcIiB9KVxuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gcFt0aGlzLmZpZWxkLm5hbWVdXG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrYm94KVxuICAgICAgICBjaGVja2JveC5vbmNoYW5nZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgQm9vbGVhbkZpZWxkLnJlcGxhY2VWYWx1ZXMocGx1Z2luLmFwcCwgcFtcImZpbGVcIl1bXCJwYXRoXCJdLCB0aGlzLmZpZWxkLm5hbWUsIGNoZWNrYm94LmNoZWNrZWQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFRleHRDb21wb25lbnQsIFRGaWxlLCBCdXR0b25Db21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGluc2VydFZhbHVlcyB9IGZyb20gXCJzcmMvY29tbWFuZHMvaW5zZXJ0VmFsdWVzXCI7XG5pbXBvcnQgeyByZXBsYWNlVmFsdWVzIH0gZnJvbSBcInNyYy9jb21tYW5kcy9yZXBsYWNlVmFsdWVzXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcInNyYy9maWVsZHMvRmllbGRcIjtcbmltcG9ydCBOdW1iZXJGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9maWVsZE1hbmFnZXJzL051bWJlckZpZWxkXCI7XG5pbXBvcnQgeyBGaWVsZE1hbmFnZXIgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTnVtYmVydE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXG4gICAgcHJpdmF0ZSBmaWxlOiBURmlsZTtcbiAgICBwcml2YXRlIHZhbHVlOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBsaW5lTnVtYmVyOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBpbkZyb250bWF0dGVyOiBib29sZWFuO1xuICAgIHByaXZhdGUgdG9wOiBib29sZWFuO1xuICAgIHByaXZhdGUgZmllbGQ6IEZpZWxkO1xuICAgIHByaXZhdGUgZmllbGRNYW5hZ2VyOiBOdW1iZXJGaWVsZDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgZmllbGQ6IEZpZWxkLCB2YWx1ZTogc3RyaW5nLCBsaW5lTnVtYmVyOiBudW1iZXIgPSAtMSwgaW5Gcm9udE1hdHRlcjogYm9vbGVhbiA9IGZhbHNlLCB0b3A6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMubGluZU51bWJlciA9IGxpbmVOdW1iZXI7XG4gICAgICAgIHRoaXMuaW5Gcm9udG1hdHRlciA9IGluRnJvbnRNYXR0ZXI7XG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xuICAgICAgICB0aGlzLmZpZWxkTWFuYWdlciA9IG5ldyBGaWVsZE1hbmFnZXJbdGhpcy5maWVsZC50eXBlXSh0aGlzLmZpZWxkKVxuICAgIH07XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGlucHV0RGl2ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIHRoaXMuYnVpbGRJbnB1dEVsKGlucHV0RGl2KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBkZWNyZW1lbnQoaW5wdXRFbDogVGV4dENvbXBvbmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IHN0ZXAgfSA9IHRoaXMuZmllbGQub3B0aW9ucztcbiAgICAgICAgY29uc3QgZlN0ZXAgPSBwYXJzZUZsb2F0KHN0ZXApO1xuICAgICAgICBpZiAoIWlzTmFOKGZTdGVwKSkge1xuICAgICAgICAgICAgaW5wdXRFbC5zZXRWYWx1ZSgocGFyc2VGbG9hdChpbnB1dEVsLmdldFZhbHVlKCkpIC0gZlN0ZXApLnRvU3RyaW5nKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5wdXRFbC5zZXRWYWx1ZSgocGFyc2VGbG9hdChpbnB1dEVsLmdldFZhbHVlKCkpIC0gMSkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGluY3JlbWVudChpbnB1dEVsOiBUZXh0Q29tcG9uZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgc3RlcCB9ID0gdGhpcy5maWVsZC5vcHRpb25zXG4gICAgICAgIGNvbnN0IGZTdGVwID0gcGFyc2VGbG9hdChzdGVwKVxuICAgICAgICBpZiAoIWlzTmFOKGZTdGVwKSkge1xuICAgICAgICAgICAgaW5wdXRFbC5zZXRWYWx1ZSgocGFyc2VGbG9hdChpbnB1dEVsLmdldFZhbHVlKCkpICsgZlN0ZXApLnRvU3RyaW5nKCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5wdXRFbC5zZXRWYWx1ZSgocGFyc2VGbG9hdChpbnB1dEVsLmdldFZhbHVlKCkpICsgMSkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHRvZ2dsZUJ1dHRvbnNTdGF0ZShtaW51c0J0bjogQnV0dG9uQ29tcG9uZW50LCBwbHVzQnRuOiBCdXR0b25Db21wb25lbnQsIGlucHV0RWw6IFRleHRDb21wb25lbnQpOiB2b2lkIHtcbiAgICAgICAgbWludXNCdG4uc2V0RGlzYWJsZWQoIXRoaXMuZmllbGRNYW5hZ2VyLmNhbkRlY3JlbWVudChpbnB1dEVsLmdldFZhbHVlKCkpKTtcbiAgICAgICAgcGx1c0J0bi5zZXREaXNhYmxlZCghdGhpcy5maWVsZE1hbmFnZXIuY2FuSW5jcmVtZW50KGlucHV0RWwuZ2V0VmFsdWUoKSkpO1xuICAgICAgICBpZiAodGhpcy5maWVsZE1hbmFnZXIuY2FuRGVjcmVtZW50KGlucHV0RWwuZ2V0VmFsdWUoKSkpIHtcbiAgICAgICAgICAgIG1pbnVzQnRuLnNldEN0YSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWludXNCdG4ucmVtb3ZlQ3RhKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZmllbGRNYW5hZ2VyLmNhbkluY3JlbWVudChpbnB1dEVsLmdldFZhbHVlKCkpKSB7XG4gICAgICAgICAgICBwbHVzQnRuLnNldEN0YSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGx1c0J0bi5yZW1vdmVDdGEoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRJbnB1dEVsKGlucHV0RGl2OiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IHN0ZXAgfSA9IHRoaXMuZmllbGQub3B0aW9uc1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBpbnB1dERpdi5jcmVhdGVFbChcImZvcm1cIik7XG4gICAgICAgIGZvcm0udHlwZSA9IFwic3VibWl0XCI7XG5cbiAgICAgICAgY29uc3QgZmllbGRDb250YWluZXIgPSBmb3JtLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm1ldGFkYXRhLW1lbnUtbW9kYWwtdmFsdWUtd2l0aC1idG5cIiB9KVxuXG4gICAgICAgIGNvbnN0IGlucHV0RWwgPSBuZXcgVGV4dENvbXBvbmVudChmaWVsZENvbnRhaW5lcik7XG4gICAgICAgIGlucHV0RWwuaW5wdXRFbC5mb2N1cygpO1xuICAgICAgICBpbnB1dEVsLnNldFZhbHVlKHRoaXMudmFsdWUpO1xuXG4gICAgICAgIGNvbnN0IG1pbnVzQnRuID0gbmV3IEJ1dHRvbkNvbXBvbmVudChmaWVsZENvbnRhaW5lcik7XG4gICAgICAgIG1pbnVzQnRuLnNldEJ1dHRvblRleHQoYC0gJHshIXN0ZXAgPyBzdGVwIDogMX1gKTtcblxuICAgICAgICBjb25zdCBwbHVzQnRuID0gbmV3IEJ1dHRvbkNvbXBvbmVudChmaWVsZENvbnRhaW5lcik7XG4gICAgICAgIHBsdXNCdG4uc2V0QnV0dG9uVGV4dChgKyAkeyEhc3RlcCA/IHN0ZXAgOiAxfWApO1xuICAgICAgICBwbHVzQnRuLnNldERpc2FibGVkKCF0aGlzLmZpZWxkTWFuYWdlci5jYW5JbmNyZW1lbnQoaW5wdXRFbC5nZXRWYWx1ZSgpKSk7XG5cbiAgICAgICAgY29uc3QgZXJyb3JGaWVsZCA9IGZvcm0uY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwibWV0YWRhdGEtbWVudS1tb2RhbC12YWx1ZS13aXRoLWJ0bi1lcnJvci1maWVsZFwiIH0pXG4gICAgICAgIGVycm9yRmllbGQuaGlkZSgpXG5cbiAgICAgICAgY29uc3QgZm9vdGVyID0gZm9ybS5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJtZXRhZGF0YS1tZW51LXZhbHVlLWdyaWQtZm9vdGVyXCIgfSlcblxuICAgICAgICBjb25zdCB2YWxpZGF0ZUJ0biA9IG5ldyBCdXR0b25Db21wb25lbnQoZm9vdGVyKTtcbiAgICAgICAgdmFsaWRhdGVCdG4uc2V0SWNvbihcImNoZWNrbWFya1wiKTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGZvb3Rlcik7XG4gICAgICAgIGNhbmNlbEJ0bi5zZXRJY29uKFwiY3Jvc3NcIik7XG5cblxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbnNTdGF0ZShtaW51c0J0biwgcGx1c0J0biwgaW5wdXRFbCk7XG5cbiAgICAgICAgLy9ldmVudCBoYW5kbGVyc1xuICAgICAgICBpbnB1dEVsLm9uQ2hhbmdlKCgpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWwuaW5wdXRFbC5yZW1vdmVDbGFzcyhcImlzLWludmFsaWRcIilcbiAgICAgICAgICAgIGVycm9yRmllbGQuaGlkZSgpO1xuICAgICAgICAgICAgZXJyb3JGaWVsZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25zU3RhdGUobWludXNCdG4sIHBsdXNCdG4sIGlucHV0RWwpXG4gICAgICAgIH0pXG5cbiAgICAgICAgcGx1c0J0bi5vbkNsaWNrKChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmluY3JlbWVudChpbnB1dEVsKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uc1N0YXRlKG1pbnVzQnRuLCBwbHVzQnRuLCBpbnB1dEVsKTtcbiAgICAgICAgfSlcblxuICAgICAgICBtaW51c0J0bi5vbkNsaWNrKChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLmRlY3JlbWVudChpbnB1dEVsKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uc1N0YXRlKG1pbnVzQnRuLCBwbHVzQnRuLCBpbnB1dEVsKTtcbiAgICAgICAgfSlcblxuICAgICAgICBjYW5jZWxCdG4ub25DbGljaygoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH0pXG5cbiAgICAgICAgZm9ybS5vbnN1Ym1pdCA9IGFzeW5jIChlOiBFdmVudCkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IGlucHV0VmFsdWUgPSBpbnB1dEVsLmdldFZhbHVlKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZmllbGRNYW5hZ2VyLnZhbGlkYXRlVmFsdWUoaW5wdXRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IG1pbiwgbWF4IH0gPSB0aGlzLmZpZWxkLm9wdGlvbnNcbiAgICAgICAgICAgICAgICBlcnJvckZpZWxkLnNob3coKTtcbiAgICAgICAgICAgICAgICBlcnJvckZpZWxkLnNldFRleHQoYHZhbHVlIG11c3QgYmUgbnVtZXJpYyR7bWluID8gXCIgYW5kID49IFwiICsgbWluIDogXCJcIn0gJHttYXggPyBcIiBhbmQgPD0gXCIgKyBtYXggOiBcIlwifWApXG4gICAgICAgICAgICAgICAgaW5wdXRFbC5pbnB1dEVsLnNldEF0dHIoXCJjbGFzc1wiLCBcImlzLWludmFsaWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVOdW1iZXIgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlVmFsdWVzKHRoaXMuYXBwLCB0aGlzLmZpbGUsIHRoaXMuZmllbGQubmFtZSwgaW5wdXRWYWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGluc2VydFZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLmZpZWxkLm5hbWUsIGlucHV0VmFsdWUsIHRoaXMubGluZU51bWJlciwgdGhpcy5pbkZyb250bWF0dGVyLCB0aGlzLnRvcCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH07XG59OyIsICJpbXBvcnQgeyBGaWVsZFR5cGUgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwiLi4vRmllbGRcIjtcbmltcG9ydCB7IEZpZWxkTWFuYWdlciB9IGZyb20gXCIuLi9GaWVsZE1hbmFnZXJcIjtcbmltcG9ydCBOdW1iZXJ0TW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvZmllbGRzL051bWJlck1vZGFsXCI7XG5pbXBvcnQgeyBBcHAsIE1lbnUsIFRGaWxlLCBUZXh0Q29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyByZXBsYWNlVmFsdWVzIH0gZnJvbSBcInNyYy9jb21tYW5kcy9yZXBsYWNlVmFsdWVzXCI7XG5pbXBvcnQgRmllbGRTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9TZWxlY3RNb2RhbFwiO1xuaW1wb3J0IEZpZWxkU2V0dGluZ3NNb2RhbCBmcm9tIFwic3JjL3NldHRpbmdzL0ZpZWxkU2V0dGluZ3NNb2RhbFwiO1xuaW1wb3J0IE1ldGFkYXRhTWVudSBmcm9tIFwibWFpblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOdW1iZXJGaWVsZCBleHRlbmRzIEZpZWxkTWFuYWdlciB7XG5cbiAgICBwcml2YXRlIG51bWJlclZhbGlkYXRvckZpZWxkOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIG51bWJlclN0ZXBWYWx1ZTogVGV4dENvbXBvbmVudDtcbiAgICBwcml2YXRlIG51bWJlck1pblZhbHVlOiBUZXh0Q29tcG9uZW50O1xuICAgIHByaXZhdGUgbnVtYmVyTWF4VmFsdWU6IFRleHRDb21wb25lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihmaWVsZDogRmllbGQpIHtcbiAgICAgICAgc3VwZXIoZmllbGQsIEZpZWxkVHlwZS5OdW1iZXIpXG4gICAgfVxuXG4gICAgZ2V0T3B0aW9uc1N0cigpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBvcHRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmZpZWxkLm9wdGlvbnMpLmZvckVhY2goKGspID0+IHsgaWYgKHRoaXMuZmllbGQub3B0aW9uc1trXSkgb3B0aW9ucy5wdXNoKGAke2t9OiAke3RoaXMuZmllbGQub3B0aW9uc1trXX1gKSB9KVxuICAgICAgICByZXR1cm4gb3B0aW9ucy5qb2luKFwiIHwgXCIpXG4gICAgfVxuXG4gICAgY2FuRGVjcmVtZW50KHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgeyBzdGVwLCBtaW4gfSA9IHRoaXMuZmllbGQub3B0aW9ucztcbiAgICAgICAgY29uc3QgZlN0ZXAgPSBwYXJzZUZsb2F0KHN0ZXApO1xuICAgICAgICBjb25zdCBmTWluID0gcGFyc2VGbG9hdChtaW4pO1xuICAgICAgICByZXR1cm4gIShcbiAgICAgICAgICAgIGlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSB8fFxuICAgICAgICAgICAgIWlzTmFOKGZNaW4pICYmXG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgIWlzTmFOKGZTdGVwKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQodmFsdWUpIC0gZlN0ZXAgPCBmTWluIHx8XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQodmFsdWUpIC0gMSA8IGZNaW5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICB9XG5cbiAgICBjYW5JbmNyZW1lbnQodmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB7IHN0ZXAsIG1heCB9ID0gdGhpcy5maWVsZC5vcHRpb25zO1xuICAgICAgICBjb25zdCBmU3RlcCA9IHBhcnNlRmxvYXQoc3RlcCk7XG4gICAgICAgIGNvbnN0IGZNYXggPSBwYXJzZUZsb2F0KG1heCk7XG4gICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpIHx8XG4gICAgICAgICAgICAhaXNOYU4oZk1heCkgJiZcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAhaXNOYU4oZlN0ZXApICYmIChcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdCh2YWx1ZSkgKyBmU3RlcCA+IGZNYXggfHxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VGbG9hdCh2YWx1ZSkgKyAxID4gZk1heFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuICAgIH1cblxuICAgIGFzeW5jIHZhbGlkYXRlVmFsdWUodmFsdWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCB7IG1pbiwgbWF4IH0gPSB0aGlzLmZpZWxkLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGZNaW4gPSBwYXJzZUZsb2F0KG1pbik7XG4gICAgICAgIGNvbnN0IGZNYXggPSBwYXJzZUZsb2F0KG1heCk7XG4gICAgICAgIGNvbnN0IGZWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgIWlzTmFOKGZWYWx1ZSkgJiYgKGlzTmFOKGZNaW4pIHx8IGZWYWx1ZSA+PSBmTWluKSAmJiAoaXNOYU4oZk1heCkgfHwgZlZhbHVlIDw9IGZNYXgpXG4gICAgICAgIClcbiAgICB9XG5cbiAgICBhZGRNZW51T3B0aW9uKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBjYXRlZ29yeTogTWVudSB8IEZpZWxkU2VsZWN0TW9kYWwpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTnVtYmVydE1vZGFsKGFwcCwgZmlsZSwgdGhpcy5maWVsZCwgdmFsdWUpO1xuICAgICAgICBtb2RhbC50aXRsZUVsLnNldFRleHQoYENoYW5nZSBWYWx1ZSBmb3IgPCR7bmFtZX0+YCk7XG4gICAgICAgIGlmIChOdW1iZXJGaWVsZC5pc01lbnUoY2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICBjYXRlZ29yeS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShgVXBkYXRlIDwke25hbWV9PmApO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0SWNvbigncGVuY2lsJyk7XG4gICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrKCgpID0+IG1vZGFsLm9wZW4oKSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRTZWN0aW9uKFwidGFyZ2V0LW1ldGFkYXRhXCIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnN0IHsgbWluLCBtYXgsIHN0ZXAgfSA9IHRoaXMuZmllbGQub3B0aW9uc1xuXG4gICAgICAgICAgICBjb25zdCBmTWluID0gcGFyc2VGbG9hdChtaW4pXG4gICAgICAgICAgICBjb25zdCBmTWF4ID0gcGFyc2VGbG9hdChtYXgpXG4gICAgICAgICAgICBjb25zdCBmU3RlcCA9IHBhcnNlRmxvYXQoc3RlcClcbiAgICAgICAgICAgIGNvbnN0IGZWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpXG4gICAgICAgICAgICBpZiAoZlN0ZXApIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oZk1pbikgfHwgKGZNaW4gJiYgZlZhbHVlIC0gZlN0ZXAgPiBmTWluKSlcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXRJY29uKCdwZW5jaWwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYDwke25hbWV9PiBcdTI3QTFcdUZFMEYgJHtmVmFsdWUgLSBmU3RlcH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ub25DbGljaygoKSA9PiByZXBsYWNlVmFsdWVzKGFwcCwgZmlsZSwgbmFtZSwgKGZWYWx1ZSAtIGZTdGVwKS50b1N0cmluZygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNldFNlY3Rpb24oXCJ0YXJnZXQtbWV0YWRhdGFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGZNYXgpIHx8IChmTWF4ICYmIGZWYWx1ZSArIGZTdGVwIDwgZk1heCkpXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0SWNvbigncGVuY2lsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKGA8JHtuYW1lfT4gXHUyN0ExXHVGRTBGICR7ZlZhbHVlICsgZlN0ZXB9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm9uQ2xpY2soKCkgPT4gcmVwbGFjZVZhbHVlcyhhcHAsIGZpbGUsIG5hbWUsIChmVmFsdWUgKyBmU3RlcCkudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXRTZWN0aW9uKFwidGFyZ2V0LW1ldGFkYXRhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKE51bWJlckZpZWxkLmlzU2VsZWN0KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkT3B0aW9uKGB1cGRhdGVfJHtuYW1lfWAsIGBVcGRhdGUgPCR7bmFtZX0+YCk7XG4gICAgICAgICAgICBjYXRlZ29yeS5tb2RhbHNbYHVwZGF0ZV8ke25hbWV9YF0gPSAoKSA9PiBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNyZWF0ZU51bWJlckNvbnRhaW5lcihwYXJlbnRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG51bWJlclN0ZXBWYWx1ZUNvbnRhaW5lciA9IHBhcmVudENvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgbnVtYmVyU3RlcFZhbHVlQ29udGFpbmVyLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IFwiU3RlcCAob3B0aW9uYWwpXCIsIGNsczogJ21ldGFkYXRhLW1lbnUtZmllbGQtb3B0aW9uJyB9KVxuICAgICAgICB0aGlzLm51bWJlclN0ZXBWYWx1ZSA9IG5ldyBUZXh0Q29tcG9uZW50KG51bWJlclN0ZXBWYWx1ZUNvbnRhaW5lcilcbiAgICAgICAgdGhpcy5udW1iZXJTdGVwVmFsdWUuc2V0VmFsdWUodGhpcy5maWVsZC5vcHRpb25zLnN0ZXAgfHwgXCJcIilcblxuICAgICAgICBjb25zdCBudW1iZXJNaW5WYWx1ZUNvbnRhaW5lciA9IHBhcmVudENvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgbnVtYmVyTWluVmFsdWVDb250YWluZXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJNaW4gdmFsdWUgKG9wdGlvbmFsKVwiLCBjbHM6ICdtZXRhZGF0YS1tZW51LWZpZWxkLW9wdGlvbicgfSlcbiAgICAgICAgdGhpcy5udW1iZXJNaW5WYWx1ZSA9IG5ldyBUZXh0Q29tcG9uZW50KG51bWJlck1pblZhbHVlQ29udGFpbmVyKVxuICAgICAgICB0aGlzLm51bWJlck1pblZhbHVlLnNldFZhbHVlKHRoaXMuZmllbGQub3B0aW9ucy5taW4gfHwgXCJcIilcblxuICAgICAgICBjb25zdCBudW1iZXJNYXhWYWx1ZUNvbnRhaW5lciA9IHBhcmVudENvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgbnVtYmVyTWF4VmFsdWVDb250YWluZXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJNYXggdmFsdWUgKG9wdGlvbmFsKVwiLCBjbHM6ICdtZXRhZGF0YS1tZW51LWZpZWxkLW9wdGlvbicgfSlcbiAgICAgICAgdGhpcy5udW1iZXJNYXhWYWx1ZSA9IG5ldyBUZXh0Q29tcG9uZW50KG51bWJlck1heFZhbHVlQ29udGFpbmVyKVxuICAgICAgICB0aGlzLm51bWJlck1heFZhbHVlLnNldFZhbHVlKHRoaXMuZmllbGQub3B0aW9ucy5tYXggfHwgXCJcIilcbiAgICAgICAgdGhpcy5udW1iZXJTdGVwVmFsdWUub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5maWVsZC5vcHRpb25zLnN0ZXAgPSB2YWx1ZTtcbiAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5yZW1vdmVWYWxpZGF0aW9uRXJyb3IodGhpcy5udW1iZXJTdGVwVmFsdWUpO1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLm51bWJlck1pblZhbHVlLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQub3B0aW9ucy5taW4gPSB2YWx1ZTtcbiAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5yZW1vdmVWYWxpZGF0aW9uRXJyb3IodGhpcy5udW1iZXJNaW5WYWx1ZSk7XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMubnVtYmVyTWF4VmFsdWUub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5maWVsZC5vcHRpb25zLm1heCA9IHZhbHVlO1xuICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnJlbW92ZVZhbGlkYXRpb25FcnJvcih0aGlzLm51bWJlck1heFZhbHVlKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjcmVhdGVTZXR0aW5nQ29udGFpbmVyKHBhcmVudENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQsIHBsdWdpbjogTWV0YWRhdGFNZW51KTogdm9pZCB7XG4gICAgICAgIHRoaXMubnVtYmVyVmFsaWRhdG9yRmllbGQgPSBwYXJlbnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm1ldGFkYXRhLW1lbnUtbnVtYmVyLW9wdGlvbnNcIiB9KVxuICAgICAgICB0aGlzLmNyZWF0ZU51bWJlckNvbnRhaW5lcih0aGlzLm51bWJlclZhbGlkYXRvckZpZWxkKVxuICAgICAgICB0aGlzLm51bWJlclZhbGlkYXRvckZpZWxkLmNyZWF0ZURpdih7IGNsczogJ21ldGFkYXRhLW1lbnUtc2VwYXJhdG9yJyB9KS5jcmVhdGVFbChcImhyXCIpO1xuICAgIH1cblxuICAgIHZhbGlkYXRlT3B0aW9ucygpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGVycm9yID0gZmFsc2VcbiAgICAgICAgaWYgKHRoaXMuZmllbGQub3B0aW9ucy5zdGVwICYmIGlzTmFOKHBhcnNlRmxvYXQodGhpcy5maWVsZC5vcHRpb25zLnN0ZXApKSkge1xuICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnNldFZhbGlkYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICB0aGlzLm51bWJlclN0ZXBWYWx1ZSwgdGhpcy5udW1iZXJTdGVwVmFsdWUuaW5wdXRFbCxcbiAgICAgICAgICAgICAgICBcIlZhbHVlcyBtdXN0IGJlIG51bWVyaWMuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZmllbGQub3B0aW9ucy5taW4gJiYgaXNOYU4ocGFyc2VGbG9hdCh0aGlzLmZpZWxkLm9wdGlvbnMubWluKSkpIHtcbiAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgdGhpcy5udW1iZXJNaW5WYWx1ZSwgdGhpcy5udW1iZXJNaW5WYWx1ZS5pbnB1dEVsLFxuICAgICAgICAgICAgICAgIFwiVmFsdWVzIG11c3QgYmUgbnVtZXJpYy5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5maWVsZC5vcHRpb25zLm1heCAmJiBpc05hTihwYXJzZUZsb2F0KHRoaXMuZmllbGQub3B0aW9ucy5tYXgpKSkge1xuICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnNldFZhbGlkYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICB0aGlzLm51bWJlck1heFZhbHVlLCB0aGlzLm51bWJlck1heFZhbHVlLmlucHV0RWwsXG4gICAgICAgICAgICAgICAgXCJWYWx1ZXMgbXVzdCBiZSBudW1lcmljLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhZXJyb3JcbiAgICB9XG5cbiAgICBjcmVhdGVBbmRPcGVuRmllbGRNb2RhbChhcHA6IEFwcCwgZmlsZTogVEZpbGUsIHNlbGVjdGVkRmllbGROYW1lOiBzdHJpbmcsIGxpbmVOdW1iZXI/OiBudW1iZXIsIGluRnJvbnRtYXR0ZXI/OiBib29sZWFuLCB0b3A/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZpZWxkTW9kYWwgPSBuZXcgTnVtYmVydE1vZGFsKGFwcCwgZmlsZSwgdGhpcy5maWVsZCwgXCJcIiwgbGluZU51bWJlciwgaW5Gcm9udG1hdHRlciwgdG9wKTtcbiAgICAgICAgZmllbGRNb2RhbC50aXRsZUVsLnNldFRleHQoYEVudGVyIHZhbHVlIGZvciAke3NlbGVjdGVkRmllbGROYW1lfWApO1xuICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRvZ2dsZUR2QnV0dG9ucyhkZWNyZW1lbnRCdG46IEhUTUxCdXR0b25FbGVtZW50LCBpbmNyZW1lbnRCdG46IEhUTUxCdXR0b25FbGVtZW50LCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkRlY3JlbWVudCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIGRlY3JlbWVudEJ0bi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlY3JlbWVudEJ0bi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jYW5JbmNyZW1lbnQodmFsdWUpKSB7XG4gICAgICAgICAgICBpbmNyZW1lbnRCdG4ucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmNyZW1lbnRCdG4uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlRHZGaWVsZChcbiAgICAgICAgcGx1Z2luOiBNZXRhZGF0YU1lbnUsXG4gICAgICAgIGR2OiBhbnksXG4gICAgICAgIHA6IGFueSxcbiAgICAgICAgZmllbGRDb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgICAgICBhdHRycz86IHsgY2xzPzogc3RyaW5nLCBhdHRyPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfVxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuXG4gICAgICAgIGNvbnN0IGZpZWxkVmFsdWUgPSBkdi5lbCgnc3BhbicsIHBbdGhpcy5maWVsZC5uYW1lXSwgYXR0cnMpXG4gICAgICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0LnNldEF0dHIoXCJjbGFzc1wiLCBcIm1ldGFkYXRhLW1lbnUtZHYtaW5wdXRcIik7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgaW5wdXQudmFsdWUgPSBwW3RoaXMuZmllbGQubmFtZV07XG4gICAgICAgIC8qIGVuZCBzcGFjZXIgKi9cbiAgICAgICAgY29uc3QgdHJpcGxlU3BhY2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdHJpcGxlU3BhY2VyLnNldEF0dHIoXCJjbGFzc1wiLCBcIm1ldGFkYXRhLW1lbnUtZHYtZmllbGQtdHJpcGxlLXNwYWNlclwiKTtcblxuICAgICAgICAvKiBidXR0b24gdG8gZGlzcGxheSBpbnB1dCAqL1xuICAgICAgICBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgZWRpdEJ1dHRvbi5zZXRUZXh0KFwiXHVEODNEXHVERDhEXCIpO1xuICAgICAgICBlZGl0QnV0dG9uLnNldEF0dHIoJ2NsYXNzJywgXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLWJ1dHRvblwiKTtcblxuXG4gICAgICAgIC8qIGJ1dHRvbiB0byBkaXNwbGF5IGlucHV0ICovXG4gICAgICAgIGNvbnN0IGRlY3JlbWVudEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGRlY3JlbWVudEJ1dHRvbi5zZXRUZXh0KFwiXHUyNUMwXHVGRTBGXCIpO1xuICAgICAgICBkZWNyZW1lbnRCdXR0b24uc2V0QXR0cignY2xhc3MnLCBcIm1ldGFkYXRhLW1lbnUtZHYtZmllbGQtYnV0dG9uXCIpO1xuXG5cbiAgICAgICAgLyogYnV0dG9uIHRvIGRpc3BsYXkgaW5wdXQgKi9cbiAgICAgICAgY29uc3QgaW5jcmVtZW50QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgaW5jcmVtZW50QnV0dG9uLnNldFRleHQoXCJcdTI1QjZcdUZFMEZcIik7XG4gICAgICAgIGluY3JlbWVudEJ1dHRvbi5zZXRBdHRyKCdjbGFzcycsIFwibWV0YWRhdGEtbWVudS1kdi1maWVsZC1idXR0b25cIik7XG5cbiAgICAgICAgaWYgKCFhdHRycz8ub3B0aW9ucz8uYWx3YXlzT24pIHtcbiAgICAgICAgICAgIGVkaXRCdXR0b24uaGlkZSgpO1xuICAgICAgICAgICAgZGVjcmVtZW50QnV0dG9uLmhpZGUoKTtcbiAgICAgICAgICAgIGluY3JlbWVudEJ1dHRvbi5oaWRlKCk7XG4gICAgICAgICAgICB0cmlwbGVTcGFjZXIuc2hvdygpO1xuXG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5vbm1vdXNlb3ZlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBlZGl0QnV0dG9uLnNob3coKTtcbiAgICAgICAgICAgICAgICBkZWNyZW1lbnRCdXR0b24uc2hvdygpO1xuICAgICAgICAgICAgICAgIGluY3JlbWVudEJ1dHRvbi5zaG93KCk7XG4gICAgICAgICAgICAgICAgdHJpcGxlU3BhY2VyLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLm9ubW91c2VvdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZWRpdEJ1dHRvbi5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVjcmVtZW50QnV0dG9uLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBpbmNyZW1lbnRCdXR0b24uaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRyaXBsZVNwYWNlci5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2YWxpZGF0ZUljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKVxuICAgICAgICB2YWxpZGF0ZUljb24udGV4dENvbnRlbnQgPSBcIlx1MjcwNVwiXG4gICAgICAgIHZhbGlkYXRlSWNvbi5zZXRBdHRyKFwiY2xhc3NcIiwgXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLWJ1dHRvblwiKVxuICAgICAgICB2YWxpZGF0ZUljb24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLnZhbGlkYXRlVmFsdWUoaW5wdXQudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBbXCJmaWxlXCJdW1wicGF0aFwiXSlcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09IFwibWRcIikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXBsYWNlVmFsdWVzKHBsdWdpbi5hcHAsIGZpbGUsIHRoaXMuZmllbGQubmFtZSwgaW5wdXQudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRHZCdXR0b25zKGRlY3JlbWVudEJ1dHRvbiwgaW5jcmVtZW50QnV0dG9uLCBpbnB1dC52YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoaW5wdXRDb250YWluZXIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXRDb250YWluZXI/LmFwcGVuZENoaWxkKHZhbGlkYXRlSWNvbilcbiAgICAgICAgY29uc3QgY2FuY2VsSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpXG4gICAgICAgIGNhbmNlbEljb24uc2V0QXR0cihcImNsYXNzXCIsIFwibWV0YWRhdGEtbWVudS1kdi1maWVsZC1idXR0b25cIilcbiAgICAgICAgY2FuY2VsSWNvbi50ZXh0Q29udGVudCA9IFwiXHUyNzRDXCJcbiAgICAgICAgY2FuY2VsSWNvbi5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKGlucHV0Q29udGFpbmVyKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlY3JlbWVudEJ1dHRvbik7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChmaWVsZFZhbHVlKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoaW5jcmVtZW50QnV0dG9uKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKHRyaXBsZVNwYWNlcik7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXRDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FuY2VsSWNvbik7XG4gICAgICAgIGlucHV0LmZvY3VzKCk7XG5cbiAgICAgICAgaW5wdXQub25rZXl1cCA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGVWYWx1ZShpbnB1dC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5hZGRDbGFzcygnaXMtaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlSWNvbi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5wdXQucmVtb3ZlQ2xhc3MoJ2lzLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUljb24ucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpbnB1dC5vbmtleWRvd24gPSBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy52YWxpZGF0ZVZhbHVlKGlucHV0LnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocFtcImZpbGVcIl1bXCJwYXRoXCJdKVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09IFwibWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVwbGFjZVZhbHVlcyhwbHVnaW4uYXBwLCBmaWxlLCB0aGlzLmZpZWxkLm5hbWUsIGlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRHZCdXR0b25zKGRlY3JlbWVudEJ1dHRvbiwgaW5jcmVtZW50QnV0dG9uLCBpbnB1dC52YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5yZW1vdmVDaGlsZChpbnB1dENvbnRhaW5lcilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoaW5wdXRDb250YWluZXIpO1xuICAgICAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlY3JlbWVudEJ1dHRvbik7XG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZmllbGRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbik7XG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoaW5jcmVtZW50QnV0dG9uKTtcbiAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmlwbGVTcGFjZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qIGVkaXRCdXR0b24gb24gY2xpY2sgOiByZW1vdmUgYnV0dG9uIGFuZCBmaWVsZCBhbmQgZGlzcGxheSBpbnB1dCBmaWVsZCovXG4gICAgICAgIGVkaXRCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKGZpZWxkVmFsdWUpO1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoZWRpdEJ1dHRvbik7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5yZW1vdmVDaGlsZChkZWNyZW1lbnRCdXR0b24pO1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoaW5jcmVtZW50QnV0dG9uKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRyaXBsZVNwYWNlcik7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dENvbnRhaW5lcik7XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpXG4gICAgICAgIH1cblxuICAgICAgICAvKiBkZWNyZW1lbnQgYnV0dG9uIG9uIGNsaWNrOiBkZWNyZW1lbnQgYnkgc3RlcCBvciBieSAxICovXG4gICAgICAgIGRlY3JlbWVudEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FuRGVjcmVtZW50KHBbdGhpcy5maWVsZC5uYW1lXSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHN0ZXAgfSA9IHRoaXMuZmllbGQub3B0aW9ucztcbiAgICAgICAgICAgICAgICBjb25zdCBmU3RlcCA9IHBhcnNlRmxvYXQoc3RlcClcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocFtcImZpbGVcIl1bXCJwYXRoXCJdKVxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT0gXCJtZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gKCEhZlN0ZXAgPyBwW3RoaXMuZmllbGQubmFtZV0gLSBmU3RlcCA6IHBbdGhpcy5maWVsZC5uYW1lXSAtIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlcGxhY2VWYWx1ZXMocGx1Z2luLmFwcCwgZmlsZSwgdGhpcy5maWVsZC5uYW1lLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRHZCdXR0b25zKGRlY3JlbWVudEJ1dHRvbiwgaW5jcmVtZW50QnV0dG9uLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogaW5jcmVtZW50IGJ1dHRvbiBvbiBjbGljazogaW5jcmVtZW50IGJ5IHN0ZXAgb3IgYnkgMSAqL1xuICAgICAgICBpbmNyZW1lbnRCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbkluY3JlbWVudChwW3RoaXMuZmllbGQubmFtZV0pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzdGVwIH0gPSB0aGlzLmZpZWxkLm9wdGlvbnM7XG4gICAgICAgICAgICAgICAgY29uc3QgZlN0ZXAgPSBwYXJzZUZsb2F0KHN0ZXApXG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBbXCJmaWxlXCJdW1wicGF0aFwiXSlcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09IFwibWRcIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9ICghIWZTdGVwID8gcFt0aGlzLmZpZWxkLm5hbWVdICsgZlN0ZXAgOiBwW3RoaXMuZmllbGQubmFtZV0gKyAxKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICByZXBsYWNlVmFsdWVzKHBsdWdpbi5hcHAsIGZpbGUsIHRoaXMuZmllbGQubmFtZSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUR2QnV0dG9ucyhkZWNyZW1lbnRCdXR0b24sIGluY3JlbWVudEJ1dHRvbiwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGluaXRpYWwgc3RhdGUgKi9cbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVjcmVtZW50QnV0dG9uKTtcbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZmllbGRWYWx1ZSk7XG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pO1xuICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChpbmNyZW1lbnRCdXR0b24pO1xuICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmlwbGVTcGFjZXIpO1xuICAgICAgICB0aGlzLnRvZ2dsZUR2QnV0dG9ucyhkZWNyZW1lbnRCdXR0b24sIGluY3JlbWVudEJ1dHRvbiwgcFt0aGlzLmZpZWxkLm5hbWVdKTtcbiAgICB9XG59IiwgImltcG9ydCB7IEZpZWxkVHlwZSB9IGZyb20gXCJzcmMvdHlwZXMvZmllbGRUeXBlc1wiO1xuaW1wb3J0IEZpZWxkIGZyb20gXCIuLi9GaWVsZFwiO1xuaW1wb3J0IHsgRmllbGRNYW5hZ2VyLCBTZXR0aW5nTG9jYXRpb24gfSBmcm9tIFwiLi4vRmllbGRNYW5hZ2VyXCI7XG5pbXBvcnQgeyBUZXh0Q29tcG9uZW50LCBCdXR0b25Db21wb25lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBGaWVsZFNldHRpbmdzTW9kYWwgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdzTW9kYWxcIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCBGaWVsZFNldHRpbmcgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdcIjtcbmltcG9ydCB7IEZpbGVTdWdnZXN0IH0gZnJvbSBcInNyYy9zdWdnZXN0ZXIvRmlsZVN1Z2dlc3RlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdExpc3RCYXNlZEZpZWxkIGV4dGVuZHMgRmllbGRNYW5hZ2VyIHtcblxuICAgIGFic3RyYWN0IHZhbHVlc1Byb21wdENvbXBvbmVudHM6IEFycmF5PFRleHRDb21wb25lbnQ+O1xuICAgIGFic3RyYWN0IHByZXNldFZhbHVlc0ZpZWxkczogSFRNTERpdkVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihmaWVsZDogRmllbGQsIHR5cGU6IEZpZWxkVHlwZSkge1xuICAgICAgICBzdXBlcihmaWVsZCwgdHlwZSlcbiAgICB9XG5cbiAgICAvL1NldHRpbmdzXG4gICAgcHJpdmF0ZSBzZXRWYWx1ZUxpc3RUZXh0KGhlYWRlcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgaGVhZGVyLnNldFRleHQoYFByZXNldCBvcHRpb25zOiAke09iamVjdC52YWx1ZXModGhpcy5maWVsZC5vcHRpb25zKS5qb2luKCcsICcpfWApO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGNyZWF0ZUxpc3ROb3RlQ29udGFpbmVyKHBhcmVudE5vZGU6IEhUTUxEaXZFbGVtZW50LCBwbHVnaW46IE1ldGFkYXRhTWVudSk6IHZvaWQge1xuICAgICAgICBjb25zdCBsaXN0Tm90ZUNvbnRhaW5lckxhYmVsID0gcGFyZW50Tm9kZS5jcmVhdGVEaXYoeyBjbHM6IFwibWV0YWRhdGEtbWVudS1zZXR0aW5nLWZpbGVDbGFzcy1zZWFyY2hcIiB9KTtcbiAgICAgICAgbGlzdE5vdGVDb250YWluZXJMYWJlbC5zZXRUZXh0KGBQYXRoIG9mIHRoZSBub3RlIGNvbnRhaW5pbmcgdGhlIHZhbHVlczpgKTtcblxuICAgICAgICBjb25zdCBpbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KGxpc3ROb3RlQ29udGFpbmVyTGFiZWwpO1xuXG4gICAgICAgIG5ldyBGaWxlU3VnZ2VzdChcbiAgICAgICAgICAgIHBsdWdpbi5hcHAsXG4gICAgICAgICAgICBpbnB1dC5pbnB1dEVsLFxuICAgICAgICAgICAgcGx1Z2luLFxuICAgICAgICAgICAgXCIvXCJcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBsaXN0Tm90ZVBhdGggPSB0aGlzLmZpZWxkLnZhbHVlc0xpc3ROb3RlUGF0aDtcbiAgICAgICAgaW5wdXQuc2V0VmFsdWUobGlzdE5vdGVQYXRoKTtcbiAgICAgICAgaW5wdXQuc2V0UGxhY2Vob2xkZXIoXCJQYXRoL29mL3RoZS9ub3RlLm1kXCIpO1xuICAgICAgICBpbnB1dC5vbkNoYW5nZSh2YWx1ZSA9PiB0aGlzLmZpZWxkLnZhbHVlc0xpc3ROb3RlUGF0aCA9IHZhbHVlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbW92ZVByZXNldFZhbHVlKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGxldCBuZXdWYWx1ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgZm9yIChsZXQgX2tleSBpbiB0aGlzLmZpZWxkLm9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChrZXkgIT09IF9rZXkpIHtcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZXNbX2tleV0gPSB0aGlzLmZpZWxkLm9wdGlvbnNbX2tleV07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZpZWxkLm9wdGlvbnMgPSBuZXdWYWx1ZXM7XG4gICAgfTtcblxuICAgIHByaXZhdGUgY3JlYXRlVmFsdWVDb250YWluZXIocGFyZW50Tm9kZTogSFRNTERpdkVsZW1lbnQsIGhlYWRlcjogSFRNTERpdkVsZW1lbnQsIGtleTogc3RyaW5nKTogVGV4dENvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmZpZWxkLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHByZXNldFZhbHVlID0gb3B0aW9uc1trZXldO1xuICAgICAgICBjb25zdCB2YWx1ZUNvbnRhaW5lciA9IHBhcmVudE5vZGUuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogJ21ldGFkYXRhLW1lbnUtcHJvbXB0LWNvbnRhaW5lcicsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBpbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KHZhbHVlQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy52YWx1ZXNQcm9tcHRDb21wb25lbnRzLnB1c2goaW5wdXQpXG4gICAgICAgIGlucHV0LnNldFZhbHVlKHByZXNldFZhbHVlKTtcbiAgICAgICAgaW5wdXQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgdGhpcy5maWVsZC5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVMaXN0VGV4dChoZWFkZXIpO1xuICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnJlbW92ZVZhbGlkYXRpb25FcnJvcihpbnB1dCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB2YWx1ZVJlbW92ZUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQodmFsdWVDb250YWluZXIpO1xuICAgICAgICB2YWx1ZVJlbW92ZUJ1dHRvbi5zZXRJY29uKFwidHJhc2hcIilcbiAgICAgICAgICAgIC5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQcmVzZXRWYWx1ZShrZXkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWVMaXN0VGV4dChoZWFkZXIpO1xuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodmFsdWVDb250YWluZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzUHJvbXB0Q29tcG9uZW50cy5yZW1vdmUoaW5wdXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGlmIChrZXkgIT0gT2JqZWN0LmtleXModGhpcy5maWVsZC5vcHRpb25zKVswXSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVVcGdyYWRlQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh2YWx1ZUNvbnRhaW5lcik7XG4gICAgICAgICAgICB2YWx1ZVVwZ3JhZGVCdXR0b24uc2V0QnV0dG9uVGV4dChcIlx1MjVCMlwiKTtcbiAgICAgICAgICAgIHZhbHVlVXBncmFkZUJ1dHRvbi5vbkNsaWNrKChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aGlzVmFsdWUgPSBvcHRpb25zW2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXRJbmRleCA9IHRoaXMudmFsdWVzUHJvbXB0Q29tcG9uZW50cy5pbmRleE9mKGlucHV0KVxuICAgICAgICAgICAgICAgIGNvbnN0IHVwcGVyQ29tcG9uZW50ID0gaW5wdXRJbmRleCAhPT0gLTEgPyB0aGlzLnZhbHVlc1Byb21wdENvbXBvbmVudHNbaW5wdXRJbmRleCAtIDFdIDogdGhpcy52YWx1ZXNQcm9tcHRDb21wb25lbnRzLmxhc3QoKTtcbiAgICAgICAgICAgICAgICBpZiAodXBwZXJDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBwZXJWYWx1ZSA9IHVwcGVyQ29tcG9uZW50LmlucHV0RWwudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwcGVyS2V5ID0gT2JqZWN0LmtleXMob3B0aW9ucykuZmlsdGVyKGsgPT4gb3B0aW9uc1trXSA9PSB1cHBlclZhbHVlKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwcGVyS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cHBlckNvbXBvbmVudC5zZXRWYWx1ZSh0aGlzVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1t1cHBlcktleV0gPSB0aGlzVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRWYWx1ZSh1cHBlclZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNba2V5XSA9IHVwcGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfTtcblxuICAgIGFzeW5jIHZhbGlkYXRlVmFsdWUodmFsdWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBpZiAodGhpcy5maWVsZC5vcHRpb25zICYmIE9iamVjdC52YWx1ZXModGhpcy5maWVsZC5vcHRpb25zKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLmZpZWxkLm9wdGlvbnMpLmluY2x1ZGVzKHZhbHVlLnRyaW0oKSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZpZWxkLnZhbHVlc0xpc3ROb3RlUGF0aCkge1xuICAgICAgICAgICAgY29uc3QgbGlzdE5vdGVWYWx1ZXMgPSBhd2FpdCBGaWVsZFNldHRpbmcuZ2V0VmFsdWVzTGlzdEZyb21Ob3RlKHRoaXMuZmllbGQudmFsdWVzTGlzdE5vdGVQYXRoLCBhcHApXG4gICAgICAgICAgICByZXR1cm4gbGlzdE5vdGVWYWx1ZXMuY29udGFpbnModmFsdWUudHJpbSgpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGdldE9wdGlvbnNTdHIoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuZmllbGQudmFsdWVzTGlzdE5vdGVQYXRoKSByZXR1cm4gdGhpcy5maWVsZC52YWx1ZXNMaXN0Tm90ZVBhdGhcbiAgICAgICAgZWxzZSBpZiAoT2JqZWN0LnZhbHVlcyh0aGlzLmZpZWxkLm9wdGlvbnMpLmxlbmd0aCkgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5maWVsZC5vcHRpb25zKS5qb2luKFwiLCBcIilcbiAgICAgICAgZWxzZSByZXR1cm4gXCJcIlxuICAgIH1cblxuICAgIHZhbGlkYXRlT3B0aW9ucygpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGVycm9yID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmFsdWVzUHJvbXB0Q29tcG9uZW50cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgIGlmICgvXlsjPi1dLy50ZXN0KGlucHV0LmlucHV0RWwudmFsdWUpICYmIGlucHV0LmlucHV0RWwucGFyZW50RWxlbWVudD8ubGFzdEVsZW1lbnRDaGlsZCkge1xuICAgICAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LCBpbnB1dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZCxcbiAgICAgICAgICAgICAgICAgICAgXCJWYWx1ZXMgY2Fubm90IGNhbm5vdCBzdGFydCB3aXRoICMsID4sIC1cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICgvWyxdL2d1LnRlc3QoaW5wdXQuaW5wdXRFbC52YWx1ZSkgJiYgaW5wdXQuaW5wdXRFbC5wYXJlbnRFbGVtZW50Py5sYXN0RWxlbWVudENoaWxkKSB7XG4gICAgICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnNldFZhbGlkYXRpb25FcnJvcihcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQsIGlucHV0LmlucHV0RWwucGFyZW50RWxlbWVudC5sYXN0RWxlbWVudENoaWxkLFxuICAgICAgICAgICAgICAgICAgICBcIlZhbHVlcyBjYW5ub3QgY29udGFpbiBhIGNvbW1hXCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoaW5wdXQuaW5wdXRFbC52YWx1ZSA9PSBcIlwiICYmIGlucHV0LmlucHV0RWwucGFyZW50RWxlbWVudD8ubGFzdEVsZW1lbnRDaGlsZCkge1xuICAgICAgICAgICAgICAgIEZpZWxkU2V0dGluZ3NNb2RhbC5zZXRWYWxpZGF0aW9uRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LCBpbnB1dC5pbnB1dEVsLnBhcmVudEVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZCxcbiAgICAgICAgICAgICAgICAgICAgXCJWYWx1ZXMgY2FuJ3QgYmUgbnVsbC5cIlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAhZXJyb3JcbiAgICB9XG5cbiAgICBjcmVhdGVBZGRCdXR0b24odmFsdWVzTGlzdDogSFRNTERpdkVsZW1lbnQsIHZhbHVlc0xpc3RCb2R5OiBIVE1MRGl2RWxlbWVudCwgdmFsdWVzTGlzdEhlYWRlcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdmFsdWVzTGlzdEZvb3RlciA9IHZhbHVlc0xpc3QuY3JlYXRlRGl2KCk7XG4gICAgICAgIGNvbnN0IGFkZFZhbHVlID0gdmFsdWVzTGlzdEZvb3Rlci5jcmVhdGVFbCgnYnV0dG9uJyk7XG4gICAgICAgIGFkZFZhbHVlLnR5cGUgPSAnYnV0dG9uJztcbiAgICAgICAgYWRkVmFsdWUudGV4dENvbnRlbnQgPSAnQWRkJztcbiAgICAgICAgYWRkVmFsdWUub25DbGlja0V2ZW50KGFzeW5jIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdDtcbiAgICAgICAgICAgIGNvbnN0IG5ld0tleSA9IGF3YWl0IHRoaXMuZmllbGQuaW5zZXJ0TmV3VmFsdWUoXCJcIilcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlVmFsdWVDb250YWluZXIodmFsdWVzTGlzdEJvZHksIHZhbHVlc0xpc3RIZWFkZXIsIG5ld0tleSlcbiAgICAgICAgfSk7XG4gICAgICAgIHZhbHVlc0xpc3QuY3JlYXRlRGl2KHsgY2xzOiAnbWV0YWRhdGEtbWVudS1zZXBhcmF0b3InIH0pLmNyZWF0ZUVsKFwiaHJcIik7XG4gICAgfVxuXG4gICAgY3JlYXRlU2V0dGluZ0NvbnRhaW5lcihwYXJlbnRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50LCBwbHVnaW46IE1ldGFkYXRhTWVudSwgbG9jYXRpb24/OiBTZXR0aW5nTG9jYXRpb24pOiB2b2lkIHtcbiAgICAgICAgaWYgKGxvY2F0aW9uID09PSBTZXR0aW5nTG9jYXRpb24uUGx1Z2luU2V0dGluZ3MpIHRoaXMuY3JlYXRlTGlzdE5vdGVDb250YWluZXIocGFyZW50Q29udGFpbmVyLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnByZXNldFZhbHVlc0ZpZWxkcyA9IHBhcmVudENvbnRhaW5lci5jcmVhdGVEaXYoKVxuICAgICAgICB0aGlzLnByZXNldFZhbHVlc0ZpZWxkcy5jcmVhdGVEaXYoeyBjbHM6ICdtZXRhZGF0YS1tZW51LXNlcGFyYXRvcicgfSkuY3JlYXRlRWwoXCJoclwiKTtcbiAgICAgICAgY29uc3QgdmFsdWVzTGlzdCA9IHRoaXMucHJlc2V0VmFsdWVzRmllbGRzLmNyZWF0ZURpdigpO1xuICAgICAgICBjb25zdCB2YWx1ZXNMaXN0SGVhZGVyID0gdmFsdWVzTGlzdC5jcmVhdGVEaXYoKTtcbiAgICAgICAgdmFsdWVzTGlzdEhlYWRlci5jcmVhdGVFbChcImgyXCIpO1xuICAgICAgICB2YWx1ZXNMaXN0SGVhZGVyLnNldFRleHQoYFByZXNldCBvcHRpb25zOiAke09iamVjdC52YWx1ZXModGhpcy5maWVsZC5vcHRpb25zKS5qb2luKCcsICcpfWApO1xuICAgICAgICBjb25zdCB2YWx1ZXNMaXN0Qm9keSA9IHZhbHVlc0xpc3QuY3JlYXRlRGl2KCk7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZmllbGQub3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgdGhpcy52YWx1ZXNQcm9tcHRDb21wb25lbnRzLnB1c2godGhpcy5jcmVhdGVWYWx1ZUNvbnRhaW5lcih2YWx1ZXNMaXN0Qm9keSwgdmFsdWVzTGlzdEhlYWRlciwga2V5KSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNyZWF0ZUFkZEJ1dHRvbih2YWx1ZXNMaXN0LCB2YWx1ZXNMaXN0Qm9keSwgdmFsdWVzTGlzdEhlYWRlcilcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVEdkZpZWxkKFxuICAgICAgICBwbHVnaW46IE1ldGFkYXRhTWVudSxcbiAgICAgICAgZHY6IGFueSxcbiAgICAgICAgcDogYW55LFxuICAgICAgICBmaWVsZENvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgICAgIGF0dHJzPzogeyBjbHM/OiBzdHJpbmcsIGF0dHI/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB9XG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZpZWxkVmFsdWUgPSBkdi5lbChcInNwYW5cIiwgcFt0aGlzLmZpZWxkLm5hbWVdKTtcbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZmllbGRWYWx1ZSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcInNyYy9maWVsZHMvRmllbGRcIjtcbmltcG9ydCB7IEZpZWxkTWFuYWdlciwgRmllbGRUeXBlVGFnQ2xhc3MgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcbmltcG9ydCBGaWVsZFNldHRpbmdzTW9kYWwgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdzTW9kYWxcIjtcbmltcG9ydCB7IEZpZWxkTWFuYWdlciBhcyBGIH0gZnJvbSBcInNyYy9maWVsZHMvRmllbGRNYW5hZ2VyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpZWxkU2V0dGluZyBleHRlbmRzIFNldHRpbmcge1xuICAgIHB1YmxpYyBmaWVsZDogRmllbGQ7XG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcbiAgICBwcml2YXRlIHBsdWdpbjogTWV0YWRhdGFNZW51O1xuICAgIHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgZmllbGROYW1lQ29udGFpbmVyOiBIVE1MU3BhbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0eXBlQ29udGFpbmVyOiBIVE1MU3BhbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBmaWVsZE9wdGlvbnNDb250YWluZXI6IEhUTUxTcGFuRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcHJvcGVydHk6IEZpZWxkLCBhcHA6IEFwcCwgcGx1Z2luOiBNZXRhZGF0YU1lbnUpIHtcbiAgICAgICAgc3VwZXIoY29udGFpbmVyRWwpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XG4gICAgICAgIHRoaXMuZmllbGQgPSBwcm9wZXJ0eTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnNldFRleHRDb250ZW50V2l0aG5hbWUoKTtcbiAgICAgICAgdGhpcy5hZGRFZGl0QnV0dG9uKCk7XG4gICAgICAgIHRoaXMuYWRkRGVsZXRlQnV0dG9uKCk7XG4gICAgfTtcblxuICAgIHB1YmxpYyBzZXRUZXh0Q29udGVudFdpdGhuYW1lKCk6IHZvaWQge1xuXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgRmllbGRNYW5hZ2VyW3RoaXMuZmllbGQudHlwZV0odGhpcy5maWVsZCkgYXMgRjtcbiAgICAgICAgdGhpcy5pbmZvRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICB0aGlzLmluZm9FbC5hZGRDbGFzcyhcIm1ldGFkYXRhLW1lbnUtc2V0dGluZy1pdGVtXCIpXG4gICAgICAgIHRoaXMuZmllbGROYW1lQ29udGFpbmVyID0gdGhpcy5pbmZvRWwuY3JlYXRlRWwoXCJkaXZcIiwgXCJtZXRhZGF0YS1tZW51LXNldHRpbmctaXRlbS1uYW1lXCIpXG4gICAgICAgIHRoaXMuZmllbGROYW1lQ29udGFpbmVyLnNldFRleHQodGhpcy5maWVsZC5uYW1lKVxuICAgICAgICB0aGlzLnR5cGVDb250YWluZXIgPSB0aGlzLmluZm9FbC5jcmVhdGVFbChcImRpdlwiKVxuICAgICAgICB0aGlzLnR5cGVDb250YWluZXIuc2V0QXR0cihcImNsYXNzXCIsIGBtZXRhZGF0YS1tZW51LXNldHRpbmctaXRlbS1pbmZvLXR5cGUgJHtGaWVsZFR5cGVUYWdDbGFzc1t0aGlzLmZpZWxkLnR5cGVdfWApXG4gICAgICAgIHRoaXMudHlwZUNvbnRhaW5lci5zZXRUZXh0KHRoaXMuZmllbGQudHlwZSlcbiAgICAgICAgdGhpcy5maWVsZE9wdGlvbnNDb250YWluZXIgPSB0aGlzLmluZm9FbC5jcmVhdGVFbChcImRpdlwiKVxuICAgICAgICB0aGlzLmZpZWxkT3B0aW9uc0NvbnRhaW5lci5zZXRUZXh0KGAke21hbmFnZXIuZ2V0T3B0aW9uc1N0cigpfWApXG4gICAgfTtcblxuICAgIHByaXZhdGUgYWRkRWRpdEJ1dHRvbigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hZGRCdXR0b24oKGIpID0+IHtcbiAgICAgICAgICAgIGIuc2V0SWNvbihcInBlbmNpbFwiKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKFwiRWRpdFwiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IEZpZWxkU2V0dGluZ3NNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHRoaXMuY29udGFpbmVyRWwsIHRoaXMsIHRoaXMuZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGFkZERlbGV0ZUJ1dHRvbigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hZGRCdXR0b24oKGIpID0+IHtcbiAgICAgICAgICAgIGIuc2V0SWNvbihcInRyYXNoXCIpXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJEZWxldGVcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFeGlzdGluZ1Byb3BlcnR5ID0gdGhpcy5wbHVnaW4uaW5pdGlhbFByb3BlcnRpZXMuZmlsdGVyKHAgPT4gcC5pZCA9PSB0aGlzLmZpZWxkLmlkKVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRFeGlzdGluZ1Byb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5pbml0aWFsUHJvcGVydGllcy5yZW1vdmUoY3VycmVudEV4aXN0aW5nUHJvcGVydHkpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdFbC5wYXJlbnRFbGVtZW50Py5yZW1vdmVDaGlsZCh0aGlzLnNldHRpbmdFbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRWYWx1ZXNMaXN0RnJvbU5vdGUobm90ZVBhdGg6IHN0cmluZywgYXBwOiBBcHApOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGxldCB2YWx1ZXM6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm90ZVBhdGgpO1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09IFwibWRcIikge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSlcbiAgICAgICAgICAgIHJlc3VsdC5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoL14oLiopJC8udGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaChsaW5lLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfTtcbiAgICB9O1xufTsiLCAiLy8gQ3JlZGl0cyBnbyB0byBMaWFtJ3MgUGVyaW9kaWMgTm90ZXMgUGx1Z2luOiBodHRwczovL2dpdGh1Yi5jb20vbGlhbWNhaW4vb2JzaWRpYW4tcGVyaW9kaWMtbm90ZXNcblxuaW1wb3J0IHsgQXBwLCBUQWJzdHJhY3RGaWxlLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgVGV4dElucHV0U3VnZ2VzdCB9IGZyb20gXCIuL3N1Z2dlc3RcIjtcbmltcG9ydCB7IGdldF90ZmlsZXNfZnJvbV9mb2xkZXIgfSBmcm9tIFwiLi4vdXRpbHMvZmlsZVV0aWxzXCI7XG5pbXBvcnQgVGVtcGxhdGVyUGx1Z2luIGZyb20gXCJtYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWxlU3VnZ2VzdCBleHRlbmRzIFRleHRJbnB1dFN1Z2dlc3Q8VEZpbGU+IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGFwcDogQXBwLFxuICAgICAgICBwdWJsaWMgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgcHJpdmF0ZSBwbHVnaW46IFRlbXBsYXRlclBsdWdpbixcbiAgICAgICAgcHVibGljIGZvbGRlcjogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgaW5wdXRFbCk7XG4gICAgfVxuXG4gICAgZ2V0U3VnZ2VzdGlvbnMoaW5wdXRfc3RyOiBzdHJpbmcpOiBURmlsZVtdIHtcbiAgICAgICAgY29uc3QgYWxsX2ZpbGVzID0gW11cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGFsbF9maWxlcy5wdXNoKC4uLmdldF90ZmlsZXNfZnJvbV9mb2xkZXIodGhpcy5hcHAsIHRoaXMuZm9sZGVyKSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcblxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVzOiBURmlsZVtdID0gW107XG4gICAgICAgIGNvbnN0IGxvd2VyX2lucHV0X3N0ciA9IGlucHV0X3N0ci50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGFsbF9maWxlcy5mb3JFYWNoKChmaWxlOiBUQWJzdHJhY3RGaWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmXG4gICAgICAgICAgICAgICAgZmlsZS5leHRlbnNpb24gPT09IFwibWRcIiAmJlxuICAgICAgICAgICAgICAgIGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyX2lucHV0X3N0cilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGZpbGVzLnB1c2goZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmaWxlcztcbiAgICB9XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgZWwuc2V0VGV4dChmaWxlLnBhdGgpO1xuICAgIH1cblxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gZmlsZS5wYXRoO1xuICAgICAgICB0aGlzLmlucHV0RWwudHJpZ2dlcihcImlucHV0XCIpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxufVxuIiwgIi8vIENyZWRpdHMgZ28gdG8gTGlhbSdzIFBlcmlvZGljIE5vdGVzIFBsdWdpbjogaHR0cHM6Ly9naXRodWIuY29tL2xpYW1jYWluL29ic2lkaWFuLXBlcmlvZGljLW5vdGVzXG5cbmltcG9ydCB7IEFwcCwgSVN1Z2dlc3RPd25lciwgU2NvcGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGNyZWF0ZVBvcHBlciwgSW5zdGFuY2UgYXMgUG9wcGVySW5zdGFuY2UgfSBmcm9tIFwiQHBvcHBlcmpzL2NvcmVcIjtcblxuY29uc3Qgd3JhcEFyb3VuZCA9ICh2YWx1ZTogbnVtYmVyLCBzaXplOiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiAoKHZhbHVlICUgc2l6ZSkgKyBzaXplKSAlIHNpemU7XG59O1xuXG5jbGFzcyBTdWdnZXN0PFQ+IHtcbiAgICBwcml2YXRlIG93bmVyOiBJU3VnZ2VzdE93bmVyPFQ+O1xuICAgIHByaXZhdGUgdmFsdWVzOiBUW107XG4gICAgcHJpdmF0ZSBzdWdnZXN0aW9uczogSFRNTERpdkVsZW1lbnRbXTtcbiAgICBwcml2YXRlIHNlbGVjdGVkSXRlbTogbnVtYmVyO1xuICAgIHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIG93bmVyOiBJU3VnZ2VzdE93bmVyPFQ+LFxuICAgICAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXG4gICAgICAgIHNjb3BlOiBTY29wZVxuICAgICkge1xuICAgICAgICB0aGlzLm93bmVyID0gb3duZXI7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcblxuICAgICAgICBjb250YWluZXJFbC5vbihcbiAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgIFwiLnN1Z2dlc3Rpb24taXRlbVwiLFxuICAgICAgICAgICAgdGhpcy5vblN1Z2dlc3Rpb25DbGljay5iaW5kKHRoaXMpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnRhaW5lckVsLm9uKFxuICAgICAgICAgICAgXCJtb3VzZW1vdmVcIixcbiAgICAgICAgICAgIFwiLnN1Z2dlc3Rpb24taXRlbVwiLFxuICAgICAgICAgICAgdGhpcy5vblN1Z2dlc3Rpb25Nb3VzZW92ZXIuYmluZCh0aGlzKVxuICAgICAgICApO1xuXG4gICAgICAgIHNjb3BlLnJlZ2lzdGVyKFtdLCBcIkFycm93VXBcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWV2ZW50LmlzQ29tcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEl0ZW0odGhpcy5zZWxlY3RlZEl0ZW0gLSAxLCB0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNjb3BlLnJlZ2lzdGVyKFtdLCBcIkFycm93RG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghZXZlbnQuaXNDb21wb3NpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkSXRlbSh0aGlzLnNlbGVjdGVkSXRlbSArIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2NvcGUucmVnaXN0ZXIoW10sIFwiRW50ZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWV2ZW50LmlzQ29tcG9zaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VTZWxlY3RlZEl0ZW0oZXZlbnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25TdWdnZXN0aW9uQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQsIGVsOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnN1Z2dlc3Rpb25zLmluZGV4T2YoZWwpO1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkSXRlbShpdGVtLCBmYWxzZSk7XG4gICAgICAgIHRoaXMudXNlU2VsZWN0ZWRJdGVtKGV2ZW50KTtcbiAgICB9XG5cbiAgICBvblN1Z2dlc3Rpb25Nb3VzZW92ZXIoX2V2ZW50OiBNb3VzZUV2ZW50LCBlbDogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuc3VnZ2VzdGlvbnMuaW5kZXhPZihlbCk7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtKGl0ZW0sIGZhbHNlKTtcbiAgICB9XG5cbiAgICBzZXRTdWdnZXN0aW9ucyh2YWx1ZXM6IFRbXSkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25FbHM6IEhUTUxEaXZFbGVtZW50W10gPSBbXTtcblxuICAgICAgICB2YWx1ZXMuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25FbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KFwic3VnZ2VzdGlvbi1pdGVtXCIpO1xuICAgICAgICAgICAgdGhpcy5vd25lci5yZW5kZXJTdWdnZXN0aW9uKHZhbHVlLCBzdWdnZXN0aW9uRWwpO1xuICAgICAgICAgICAgc3VnZ2VzdGlvbkVscy5wdXNoKHN1Z2dlc3Rpb25FbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbkVscztcbiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEl0ZW0oMCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHVzZVNlbGVjdGVkSXRlbShldmVudDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy52YWx1ZXNbdGhpcy5zZWxlY3RlZEl0ZW1dO1xuICAgICAgICBpZiAoY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLm93bmVyLnNlbGVjdFN1Z2dlc3Rpb24oY3VycmVudFZhbHVlLCBldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRTZWxlY3RlZEl0ZW0oc2VsZWN0ZWRJbmRleDogbnVtYmVyLCBzY3JvbGxJbnRvVmlldzogYm9vbGVhbikge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkSW5kZXggPSB3cmFwQXJvdW5kKFxuICAgICAgICAgICAgc2VsZWN0ZWRJbmRleCxcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHByZXZTZWxlY3RlZFN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW3RoaXMuc2VsZWN0ZWRJdGVtXTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTdWdnZXN0aW9uID0gdGhpcy5zdWdnZXN0aW9uc1tub3JtYWxpemVkSW5kZXhdO1xuXG4gICAgICAgIHByZXZTZWxlY3RlZFN1Z2dlc3Rpb24/LnJlbW92ZUNsYXNzKFwiaXMtc2VsZWN0ZWRcIik7XG4gICAgICAgIHNlbGVjdGVkU3VnZ2VzdGlvbj8uYWRkQ2xhc3MoXCJpcy1zZWxlY3RlZFwiKTtcblxuICAgICAgICB0aGlzLnNlbGVjdGVkSXRlbSA9IG5vcm1hbGl6ZWRJbmRleDtcblxuICAgICAgICBpZiAoc2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkU3VnZ2VzdGlvbi5zY3JvbGxJbnRvVmlldyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUZXh0SW5wdXRTdWdnZXN0PFQ+IGltcGxlbWVudHMgSVN1Z2dlc3RPd25lcjxUPiB7XG4gICAgcHJvdGVjdGVkIGFwcDogQXBwO1xuICAgIHByb3RlY3RlZCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50IHwgSFRNTFRleHRBcmVhRWxlbWVudDtcblxuICAgIHByaXZhdGUgcG9wcGVyOiBQb3BwZXJJbnN0YW5jZTtcbiAgICBwcml2YXRlIHNjb3BlOiBTY29wZTtcbiAgICBwcml2YXRlIHN1Z2dlc3RFbDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzdWdnZXN0OiBTdWdnZXN0PFQ+O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MVGV4dEFyZWFFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xuICAgICAgICB0aGlzLnNjb3BlID0gbmV3IFNjb3BlKCk7XG5cbiAgICAgICAgdGhpcy5zdWdnZXN0RWwgPSBjcmVhdGVEaXYoXCJzdWdnZXN0aW9uLWNvbnRhaW5lclwiKTtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IHRoaXMuc3VnZ2VzdEVsLmNyZWF0ZURpdihcInN1Z2dlc3Rpb25cIik7XG4gICAgICAgIHRoaXMuc3VnZ2VzdCA9IG5ldyBTdWdnZXN0KHRoaXMsIHN1Z2dlc3Rpb24sIHRoaXMuc2NvcGUpO1xuXG4gICAgICAgIHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sIFwiRXNjYXBlXCIsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLm9uSW5wdXRDaGFuZ2VkLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMub25JbnB1dENoYW5nZWQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnN1Z2dlc3RFbC5vbihcbiAgICAgICAgICAgIFwibW91c2Vkb3duXCIsXG4gICAgICAgICAgICBcIi5zdWdnZXN0aW9uLWNvbnRhaW5lclwiLFxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBvbklucHV0Q2hhbmdlZCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaW5wdXRTdHIgPSB0aGlzLmlucHV0RWwudmFsdWU7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb25zID0gdGhpcy5nZXRTdWdnZXN0aW9ucyhpbnB1dFN0cik7XG5cbiAgICAgICAgaWYgKCFzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3VnZ2VzdC5zZXRTdWdnZXN0aW9ucyhzdWdnZXN0aW9ucyk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgdGhpcy5vcGVuKCg8YW55PnRoaXMuYXBwKS5kb20uYXBwQ29udGFpbmVyRWwsIHRoaXMuaW5wdXRFbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvcGVuKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGlucHV0RWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICg8YW55PnRoaXMuYXBwKS5rZXltYXAucHVzaFNjb3BlKHRoaXMuc2NvcGUpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnN1Z2dlc3RFbCk7XG4gICAgICAgIHRoaXMucG9wcGVyID0gY3JlYXRlUG9wcGVyKGlucHV0RWwsIHRoaXMuc3VnZ2VzdEVsLCB7XG4gICAgICAgICAgICBwbGFjZW1lbnQ6IFwiYm90dG9tLXN0YXJ0XCIsXG4gICAgICAgICAgICBtb2RpZmllcnM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic2FtZVdpZHRoXCIsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZuOiAoeyBzdGF0ZSwgaW5zdGFuY2UgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogcG9zaXRpb25pbmcgbmVlZHMgdG8gYmUgY2FsY3VsYXRlZCB0d2ljZSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJzdCBwYXNzIC0gcG9zaXRpb25pbmcgaXQgYWNjb3JkaW5nIHRvIHRoZSB3aWR0aCBvZiB0aGUgcG9wcGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWNvbmQgcGFzcyAtIHBvc2l0aW9uIGl0IHdpdGggdGhlIHdpZHRoIGJvdW5kIHRvIHRoZSByZWZlcmVuY2UgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBlYXJseSBleGl0IHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFdpZHRoID0gYCR7c3RhdGUucmVjdHMucmVmZXJlbmNlLndpZHRofXB4YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zdHlsZXMucG9wcGVyLndpZHRoID09PSB0YXJnZXRXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnN0eWxlcy5wb3BwZXIud2lkdGggPSB0YXJnZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwaGFzZTogXCJiZWZvcmVXcml0ZVwiLFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlczogW1wiY29tcHV0ZVN0eWxlc1wiXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKTogdm9pZCB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICg8YW55PnRoaXMuYXBwKS5rZXltYXAucG9wU2NvcGUodGhpcy5zY29wZSk7XG5cbiAgICAgICAgdGhpcy5zdWdnZXN0LnNldFN1Z2dlc3Rpb25zKFtdKTtcbiAgICAgICAgaWYgKHRoaXMucG9wcGVyKSB0aGlzLnBvcHBlci5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuc3VnZ2VzdEVsLmRldGFjaCgpO1xuICAgIH1cblxuICAgIGFic3RyYWN0IGdldFN1Z2dlc3Rpb25zKGlucHV0U3RyOiBzdHJpbmcpOiBUW107XG4gICAgYWJzdHJhY3QgcmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBULCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkO1xuICAgIGFic3RyYWN0IHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogVCk6IHZvaWQ7XG59XG4iLCAiZXhwb3J0IHZhciB0b3AgPSAndG9wJztcbmV4cG9ydCB2YXIgYm90dG9tID0gJ2JvdHRvbSc7XG5leHBvcnQgdmFyIHJpZ2h0ID0gJ3JpZ2h0JztcbmV4cG9ydCB2YXIgbGVmdCA9ICdsZWZ0JztcbmV4cG9ydCB2YXIgYXV0byA9ICdhdXRvJztcbmV4cG9ydCB2YXIgYmFzZVBsYWNlbWVudHMgPSBbdG9wLCBib3R0b20sIHJpZ2h0LCBsZWZ0XTtcbmV4cG9ydCB2YXIgc3RhcnQgPSAnc3RhcnQnO1xuZXhwb3J0IHZhciBlbmQgPSAnZW5kJztcbmV4cG9ydCB2YXIgY2xpcHBpbmdQYXJlbnRzID0gJ2NsaXBwaW5nUGFyZW50cyc7XG5leHBvcnQgdmFyIHZpZXdwb3J0ID0gJ3ZpZXdwb3J0JztcbmV4cG9ydCB2YXIgcG9wcGVyID0gJ3BvcHBlcic7XG5leHBvcnQgdmFyIHJlZmVyZW5jZSA9ICdyZWZlcmVuY2UnO1xuZXhwb3J0IHZhciB2YXJpYXRpb25QbGFjZW1lbnRzID0gLyojX19QVVJFX18qL2Jhc2VQbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIGFjYy5jb25jYXQoW3BsYWNlbWVudCArIFwiLVwiICsgc3RhcnQsIHBsYWNlbWVudCArIFwiLVwiICsgZW5kXSk7XG59LCBbXSk7XG5leHBvcnQgdmFyIHBsYWNlbWVudHMgPSAvKiNfX1BVUkVfXyovW10uY29uY2F0KGJhc2VQbGFjZW1lbnRzLCBbYXV0b10pLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIGFjYy5jb25jYXQoW3BsYWNlbWVudCwgcGxhY2VtZW50ICsgXCItXCIgKyBzdGFydCwgcGxhY2VtZW50ICsgXCItXCIgKyBlbmRdKTtcbn0sIFtdKTsgLy8gbW9kaWZpZXJzIHRoYXQgbmVlZCB0byByZWFkIHRoZSBET01cblxuZXhwb3J0IHZhciBiZWZvcmVSZWFkID0gJ2JlZm9yZVJlYWQnO1xuZXhwb3J0IHZhciByZWFkID0gJ3JlYWQnO1xuZXhwb3J0IHZhciBhZnRlclJlYWQgPSAnYWZ0ZXJSZWFkJzsgLy8gcHVyZS1sb2dpYyBtb2RpZmllcnNcblxuZXhwb3J0IHZhciBiZWZvcmVNYWluID0gJ2JlZm9yZU1haW4nO1xuZXhwb3J0IHZhciBtYWluID0gJ21haW4nO1xuZXhwb3J0IHZhciBhZnRlck1haW4gPSAnYWZ0ZXJNYWluJzsgLy8gbW9kaWZpZXIgd2l0aCB0aGUgcHVycG9zZSB0byB3cml0ZSB0byB0aGUgRE9NIChvciB3cml0ZSBpbnRvIGEgZnJhbWV3b3JrIHN0YXRlKVxuXG5leHBvcnQgdmFyIGJlZm9yZVdyaXRlID0gJ2JlZm9yZVdyaXRlJztcbmV4cG9ydCB2YXIgd3JpdGUgPSAnd3JpdGUnO1xuZXhwb3J0IHZhciBhZnRlcldyaXRlID0gJ2FmdGVyV3JpdGUnO1xuZXhwb3J0IHZhciBtb2RpZmllclBoYXNlcyA9IFtiZWZvcmVSZWFkLCByZWFkLCBhZnRlclJlYWQsIGJlZm9yZU1haW4sIG1haW4sIGFmdGVyTWFpbiwgYmVmb3JlV3JpdGUsIHdyaXRlLCBhZnRlcldyaXRlXTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Tm9kZU5hbWUoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudCA/IChlbGVtZW50Lm5vZGVOYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpIDogbnVsbDtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93KG5vZGUpIHtcbiAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cblxuICBpZiAobm9kZS50b1N0cmluZygpICE9PSAnW29iamVjdCBXaW5kb3ddJykge1xuICAgIHZhciBvd25lckRvY3VtZW50ID0gbm9kZS5vd25lckRvY3VtZW50O1xuICAgIHJldHVybiBvd25lckRvY3VtZW50ID8gb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyB8fCB3aW5kb3cgOiB3aW5kb3c7XG4gIH1cblxuICByZXR1cm4gbm9kZTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcblxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuRWxlbWVudDtcbiAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBPd25FbGVtZW50IHx8IG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBpc0hUTUxFbGVtZW50KG5vZGUpIHtcbiAgdmFyIE93bkVsZW1lbnQgPSBnZXRXaW5kb3cobm9kZSkuSFRNTEVsZW1lbnQ7XG4gIHJldHVybiBub2RlIGluc3RhbmNlb2YgT3duRWxlbWVudCB8fCBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGlzU2hhZG93Um9vdChub2RlKSB7XG4gIC8vIElFIDExIGhhcyBubyBTaGFkb3dSb290XG4gIGlmICh0eXBlb2YgU2hhZG93Um9vdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgT3duRWxlbWVudCA9IGdldFdpbmRvdyhub2RlKS5TaGFkb3dSb290O1xuICByZXR1cm4gbm9kZSBpbnN0YW5jZW9mIE93bkVsZW1lbnQgfHwgbm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3Q7XG59XG5cbmV4cG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCwgaXNTaGFkb3dSb290IH07IiwgImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7IC8vIFRoaXMgbW9kaWZpZXIgdGFrZXMgdGhlIHN0eWxlcyBwcmVwYXJlZCBieSB0aGUgYGNvbXB1dGVTdHlsZXNgIG1vZGlmaWVyXG4vLyBhbmQgYXBwbGllcyB0aGVtIHRvIHRoZSBIVE1MRWxlbWVudHMgc3VjaCBhcyBwb3BwZXIgYW5kIGFycm93XG5cbmZ1bmN0aW9uIGFwcGx5U3R5bGVzKF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZTtcbiAgT2JqZWN0LmtleXMoc3RhdGUuZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB2YXIgc3R5bGUgPSBzdGF0ZS5zdHlsZXNbbmFtZV0gfHwge307XG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBzdGF0ZS5hdHRyaWJ1dGVzW25hbWVdIHx8IHt9O1xuICAgIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbbmFtZV07IC8vIGFycm93IGlzIG9wdGlvbmFsICsgdmlydHVhbCBlbGVtZW50c1xuXG4gICAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8ICFnZXROb2RlTmFtZShlbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gLy8gRmxvdyBkb2Vzbid0IHN1cHBvcnQgdG8gZXh0ZW5kIHRoaXMgcHJvcGVydHksIGJ1dCBpdCdzIHRoZSBtb3N0XG4gICAgLy8gZWZmZWN0aXZlIHdheSB0byBhcHBseSBzdHlsZXMgdG8gYW4gSFRNTEVsZW1lbnRcbiAgICAvLyAkRmxvd0ZpeE1lW2Nhbm5vdC13cml0ZV1cblxuXG4gICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBzdHlsZSk7XG4gICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgdmFyIHZhbHVlID0gYXR0cmlidXRlc1tuYW1lXTtcblxuICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGU7XG4gIHZhciBpbml0aWFsU3R5bGVzID0ge1xuICAgIHBvcHBlcjoge1xuICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBsZWZ0OiAnMCcsXG4gICAgICB0b3A6ICcwJyxcbiAgICAgIG1hcmdpbjogJzAnXG4gICAgfSxcbiAgICBhcnJvdzoge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZSdcbiAgICB9LFxuICAgIHJlZmVyZW5jZToge31cbiAgfTtcbiAgT2JqZWN0LmFzc2lnbihzdGF0ZS5lbGVtZW50cy5wb3BwZXIuc3R5bGUsIGluaXRpYWxTdHlsZXMucG9wcGVyKTtcbiAgc3RhdGUuc3R5bGVzID0gaW5pdGlhbFN0eWxlcztcblxuICBpZiAoc3RhdGUuZWxlbWVudHMuYXJyb3cpIHtcbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLmVsZW1lbnRzLmFycm93LnN0eWxlLCBpbml0aWFsU3R5bGVzLmFycm93KTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgT2JqZWN0LmtleXMoc3RhdGUuZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gc3RhdGUuZWxlbWVudHNbbmFtZV07XG4gICAgICB2YXIgYXR0cmlidXRlcyA9IHN0YXRlLmF0dHJpYnV0ZXNbbmFtZV0gfHwge307XG4gICAgICB2YXIgc3R5bGVQcm9wZXJ0aWVzID0gT2JqZWN0LmtleXMoc3RhdGUuc3R5bGVzLmhhc093blByb3BlcnR5KG5hbWUpID8gc3RhdGUuc3R5bGVzW25hbWVdIDogaW5pdGlhbFN0eWxlc1tuYW1lXSk7IC8vIFNldCBhbGwgdmFsdWVzIHRvIGFuIGVtcHR5IHN0cmluZyB0byB1bnNldCB0aGVtXG5cbiAgICAgIHZhciBzdHlsZSA9IHN0eWxlUHJvcGVydGllcy5yZWR1Y2UoZnVuY3Rpb24gKHN0eWxlLCBwcm9wZXJ0eSkge1xuICAgICAgICBzdHlsZVtwcm9wZXJ0eV0gPSAnJztcbiAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgfSwge30pOyAvLyBhcnJvdyBpcyBvcHRpb25hbCArIHZpcnR1YWwgZWxlbWVudHNcblxuICAgICAgaWYgKCFpc0hUTUxFbGVtZW50KGVsZW1lbnQpIHx8ICFnZXROb2RlTmFtZShlbGVtZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5hc3NpZ24oZWxlbWVudC5zdHlsZSwgc3R5bGUpO1xuICAgICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlKSB7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2FwcGx5U3R5bGVzJyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICd3cml0ZScsXG4gIGZuOiBhcHBseVN0eWxlcyxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIHJlcXVpcmVzOiBbJ2NvbXB1dGVTdHlsZXMnXVxufTsiLCAiaW1wb3J0IHsgYXV0byB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzBdO1xufSIsICJleHBvcnQgdmFyIG1heCA9IE1hdGgubWF4O1xuZXhwb3J0IHZhciBtaW4gPSBNYXRoLm1pbjtcbmV4cG9ydCB2YXIgcm91bmQgPSBNYXRoLnJvdW5kOyIsICJpbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IHsgcm91bmQgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KGVsZW1lbnQsIGluY2x1ZGVTY2FsZSkge1xuICBpZiAoaW5jbHVkZVNjYWxlID09PSB2b2lkIDApIHtcbiAgICBpbmNsdWRlU2NhbGUgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIHNjYWxlWCA9IDE7XG4gIHZhciBzY2FsZVkgPSAxO1xuXG4gIGlmIChpc0hUTUxFbGVtZW50KGVsZW1lbnQpICYmIGluY2x1ZGVTY2FsZSkge1xuICAgIHZhciBvZmZzZXRIZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB2YXIgb2Zmc2V0V2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoOyAvLyBEbyBub3QgYXR0ZW1wdCB0byBkaXZpZGUgYnkgMCwgb3RoZXJ3aXNlIHdlIGdldCBgSW5maW5pdHlgIGFzIHNjYWxlXG4gICAgLy8gRmFsbGJhY2sgdG8gMSBpbiBjYXNlIGJvdGggdmFsdWVzIGFyZSBgMGBcblxuICAgIGlmIChvZmZzZXRXaWR0aCA+IDApIHtcbiAgICAgIHNjYWxlWCA9IHJvdW5kKHJlY3Qud2lkdGgpIC8gb2Zmc2V0V2lkdGggfHwgMTtcbiAgICB9XG5cbiAgICBpZiAob2Zmc2V0SGVpZ2h0ID4gMCkge1xuICAgICAgc2NhbGVZID0gcm91bmQocmVjdC5oZWlnaHQpIC8gb2Zmc2V0SGVpZ2h0IHx8IDE7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogcmVjdC53aWR0aCAvIHNjYWxlWCxcbiAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0IC8gc2NhbGVZLFxuICAgIHRvcDogcmVjdC50b3AgLyBzY2FsZVksXG4gICAgcmlnaHQ6IHJlY3QucmlnaHQgLyBzY2FsZVgsXG4gICAgYm90dG9tOiByZWN0LmJvdHRvbSAvIHNjYWxlWSxcbiAgICBsZWZ0OiByZWN0LmxlZnQgLyBzY2FsZVgsXG4gICAgeDogcmVjdC5sZWZ0IC8gc2NhbGVYLFxuICAgIHk6IHJlY3QudG9wIC8gc2NhbGVZXG4gIH07XG59IiwgImltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7IC8vIFJldHVybnMgdGhlIGxheW91dCByZWN0IG9mIGFuIGVsZW1lbnQgcmVsYXRpdmUgdG8gaXRzIG9mZnNldFBhcmVudC4gTGF5b3V0XG4vLyBtZWFucyBpdCBkb2Vzbid0IHRha2UgaW50byBhY2NvdW50IHRyYW5zZm9ybXMuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldExheW91dFJlY3QoZWxlbWVudCkge1xuICB2YXIgY2xpZW50UmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50KTsgLy8gVXNlIHRoZSBjbGllbnRSZWN0IHNpemVzIGlmIGl0J3Mgbm90IGJlZW4gdHJhbnNmb3JtZWQuXG4gIC8vIEZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3BwZXJqcy9wb3BwZXItY29yZS9pc3N1ZXMvMTIyM1xuXG4gIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gIHZhciBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcblxuICBpZiAoTWF0aC5hYnMoY2xpZW50UmVjdC53aWR0aCAtIHdpZHRoKSA8PSAxKSB7XG4gICAgd2lkdGggPSBjbGllbnRSZWN0LndpZHRoO1xuICB9XG5cbiAgaWYgKE1hdGguYWJzKGNsaWVudFJlY3QuaGVpZ2h0IC0gaGVpZ2h0KSA8PSAxKSB7XG4gICAgaGVpZ2h0ID0gY2xpZW50UmVjdC5oZWlnaHQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHg6IGVsZW1lbnQub2Zmc2V0TGVmdCxcbiAgICB5OiBlbGVtZW50Lm9mZnNldFRvcCxcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHRcbiAgfTtcbn0iLCAiaW1wb3J0IHsgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29udGFpbnMocGFyZW50LCBjaGlsZCkge1xuICB2YXIgcm9vdE5vZGUgPSBjaGlsZC5nZXRSb290Tm9kZSAmJiBjaGlsZC5nZXRSb290Tm9kZSgpOyAvLyBGaXJzdCwgYXR0ZW1wdCB3aXRoIGZhc3RlciBuYXRpdmUgbWV0aG9kXG5cbiAgaWYgKHBhcmVudC5jb250YWlucyhjaGlsZCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSAvLyB0aGVuIGZhbGxiYWNrIHRvIGN1c3RvbSBpbXBsZW1lbnRhdGlvbiB3aXRoIFNoYWRvdyBET00gc3VwcG9ydFxuICBlbHNlIGlmIChyb290Tm9kZSAmJiBpc1NoYWRvd1Jvb3Qocm9vdE5vZGUpKSB7XG4gICAgICB2YXIgbmV4dCA9IGNoaWxkO1xuXG4gICAgICBkbyB7XG4gICAgICAgIGlmIChuZXh0ICYmIHBhcmVudC5pc1NhbWVOb2RlKG5leHQpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddOiBuZWVkIGEgYmV0dGVyIHdheSB0byBoYW5kbGUgdGhpcy4uLlxuXG5cbiAgICAgICAgbmV4dCA9IG5leHQucGFyZW50Tm9kZSB8fCBuZXh0Lmhvc3Q7XG4gICAgICB9IHdoaWxlIChuZXh0KTtcbiAgICB9IC8vIEdpdmUgdXAsIHRoZSByZXN1bHQgaXMgZmFsc2VcblxuXG4gIHJldHVybiBmYWxzZTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkge1xuICByZXR1cm4gZ2V0V2luZG93KGVsZW1lbnQpLmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG59IiwgImltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUYWJsZUVsZW1lbnQoZWxlbWVudCkge1xuICByZXR1cm4gWyd0YWJsZScsICd0ZCcsICd0aCddLmluZGV4T2YoZ2V0Tm9kZU5hbWUoZWxlbWVudCkpID49IDA7XG59IiwgImltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldERvY3VtZW50RWxlbWVudChlbGVtZW50KSB7XG4gIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl06IGFzc3VtZSBib2R5IGlzIGFsd2F5cyBhdmFpbGFibGVcbiAgcmV0dXJuICgoaXNFbGVtZW50KGVsZW1lbnQpID8gZWxlbWVudC5vd25lckRvY3VtZW50IDogLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gIGVsZW1lbnQuZG9jdW1lbnQpIHx8IHdpbmRvdy5kb2N1bWVudCkuZG9jdW1lbnRFbGVtZW50O1xufSIsICJpbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBpc1NoYWRvd1Jvb3QgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRQYXJlbnROb2RlKGVsZW1lbnQpIHtcbiAgaWYgKGdldE5vZGVOYW1lKGVsZW1lbnQpID09PSAnaHRtbCcpIHtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIHJldHVybiAoLy8gdGhpcyBpcyBhIHF1aWNrZXIgKGJ1dCBsZXNzIHR5cGUgc2FmZSkgd2F5IHRvIHNhdmUgcXVpdGUgc29tZSBieXRlcyBmcm9tIHRoZSBidW5kbGVcbiAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dXG4gICAgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgZWxlbWVudC5hc3NpZ25lZFNsb3QgfHwgLy8gc3RlcCBpbnRvIHRoZSBzaGFkb3cgRE9NIG9mIHRoZSBwYXJlbnQgb2YgYSBzbG90dGVkIG5vZGVcbiAgICBlbGVtZW50LnBhcmVudE5vZGUgfHwgKCAvLyBET00gRWxlbWVudCBkZXRlY3RlZFxuICAgIGlzU2hhZG93Um9vdChlbGVtZW50KSA/IGVsZW1lbnQuaG9zdCA6IG51bGwpIHx8IC8vIFNoYWRvd1Jvb3QgZGV0ZWN0ZWRcbiAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXTogSFRNTEVsZW1lbnQgaXMgYSBOb2RlXG4gICAgZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpIC8vIGZhbGxiYWNrXG5cbiAgKTtcbn0iLCAiaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi9nZXRXaW5kb3cuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZ2V0Q29tcHV0ZWRTdHlsZS5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCwgaXNTaGFkb3dSb290IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGlzVGFibGVFbGVtZW50IGZyb20gXCIuL2lzVGFibGVFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5cbmZ1bmN0aW9uIGdldFRydWVPZmZzZXRQYXJlbnQoZWxlbWVudCkge1xuICBpZiAoIWlzSFRNTEVsZW1lbnQoZWxlbWVudCkgfHwgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BvcHBlcmpzL3BvcHBlci1jb3JlL2lzc3Vlcy84MzdcbiAgZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbiA9PT0gJ2ZpeGVkJykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0UGFyZW50O1xufSAvLyBgLm9mZnNldFBhcmVudGAgcmVwb3J0cyBgbnVsbGAgZm9yIGZpeGVkIGVsZW1lbnRzLCB3aGlsZSBhYnNvbHV0ZSBlbGVtZW50c1xuLy8gcmV0dXJuIHRoZSBjb250YWluaW5nIGJsb2NrXG5cblxuZnVuY3Rpb24gZ2V0Q29udGFpbmluZ0Jsb2NrKGVsZW1lbnQpIHtcbiAgdmFyIGlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdmaXJlZm94JykgIT09IC0xO1xuICB2YXIgaXNJRSA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignVHJpZGVudCcpICE9PSAtMTtcblxuICBpZiAoaXNJRSAmJiBpc0hUTUxFbGVtZW50KGVsZW1lbnQpKSB7XG4gICAgLy8gSW4gSUUgOSwgMTAgYW5kIDExIGZpeGVkIGVsZW1lbnRzIGNvbnRhaW5pbmcgYmxvY2sgaXMgYWx3YXlzIGVzdGFibGlzaGVkIGJ5IHRoZSB2aWV3cG9ydFxuICAgIHZhciBlbGVtZW50Q3NzID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuICAgIGlmIChlbGVtZW50Q3NzLnBvc2l0aW9uID09PSAnZml4ZWQnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICB2YXIgY3VycmVudE5vZGUgPSBnZXRQYXJlbnROb2RlKGVsZW1lbnQpO1xuXG4gIGlmIChpc1NoYWRvd1Jvb3QoY3VycmVudE5vZGUpKSB7XG4gICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZS5ob3N0O1xuICB9XG5cbiAgd2hpbGUgKGlzSFRNTEVsZW1lbnQoY3VycmVudE5vZGUpICYmIFsnaHRtbCcsICdib2R5J10uaW5kZXhPZihnZXROb2RlTmFtZShjdXJyZW50Tm9kZSkpIDwgMCkge1xuICAgIHZhciBjc3MgPSBnZXRDb21wdXRlZFN0eWxlKGN1cnJlbnROb2RlKTsgLy8gVGhpcyBpcyBub24tZXhoYXVzdGl2ZSBidXQgY292ZXJzIHRoZSBtb3N0IGNvbW1vbiBDU1MgcHJvcGVydGllcyB0aGF0XG4gICAgLy8gY3JlYXRlIGEgY29udGFpbmluZyBibG9jay5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQ29udGFpbmluZ19ibG9jayNpZGVudGlmeWluZ190aGVfY29udGFpbmluZ19ibG9ja1xuXG4gICAgaWYgKGNzcy50cmFuc2Zvcm0gIT09ICdub25lJyB8fCBjc3MucGVyc3BlY3RpdmUgIT09ICdub25lJyB8fCBjc3MuY29udGFpbiA9PT0gJ3BhaW50JyB8fCBbJ3RyYW5zZm9ybScsICdwZXJzcGVjdGl2ZSddLmluZGV4T2YoY3NzLndpbGxDaGFuZ2UpICE9PSAtMSB8fCBpc0ZpcmVmb3ggJiYgY3NzLndpbGxDaGFuZ2UgPT09ICdmaWx0ZXInIHx8IGlzRmlyZWZveCAmJiBjc3MuZmlsdGVyICYmIGNzcy5maWx0ZXIgIT09ICdub25lJykge1xuICAgICAgcmV0dXJuIGN1cnJlbnROb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59IC8vIEdldHMgdGhlIGNsb3Nlc3QgYW5jZXN0b3IgcG9zaXRpb25lZCBlbGVtZW50LiBIYW5kbGVzIHNvbWUgZWRnZSBjYXNlcyxcbi8vIHN1Y2ggYXMgdGFibGUgYW5jZXN0b3JzIGFuZCBjcm9zcyBicm93c2VyIGJ1Z3MuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpIHtcbiAgdmFyIHdpbmRvdyA9IGdldFdpbmRvdyhlbGVtZW50KTtcbiAgdmFyIG9mZnNldFBhcmVudCA9IGdldFRydWVPZmZzZXRQYXJlbnQoZWxlbWVudCk7XG5cbiAgd2hpbGUgKG9mZnNldFBhcmVudCAmJiBpc1RhYmxlRWxlbWVudChvZmZzZXRQYXJlbnQpICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpIHtcbiAgICBvZmZzZXRQYXJlbnQgPSBnZXRUcnVlT2Zmc2V0UGFyZW50KG9mZnNldFBhcmVudCk7XG4gIH1cblxuICBpZiAob2Zmc2V0UGFyZW50ICYmIChnZXROb2RlTmFtZShvZmZzZXRQYXJlbnQpID09PSAnaHRtbCcgfHwgZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSA9PT0gJ2JvZHknICYmIGdldENvbXB1dGVkU3R5bGUob2Zmc2V0UGFyZW50KS5wb3NpdGlvbiA9PT0gJ3N0YXRpYycpKSB7XG4gICAgcmV0dXJuIHdpbmRvdztcbiAgfVxuXG4gIHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZ2V0Q29udGFpbmluZ0Jsb2NrKGVsZW1lbnQpIHx8IHdpbmRvdztcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gWyd0b3AnLCAnYm90dG9tJ10uaW5kZXhPZihwbGFjZW1lbnQpID49IDAgPyAneCcgOiAneSc7XG59IiwgImltcG9ydCB7IG1heCBhcyBtYXRoTWF4LCBtaW4gYXMgbWF0aE1pbiB9IGZyb20gXCIuL21hdGguanNcIjtcbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW4obWluLCB2YWx1ZSwgbWF4KSB7XG4gIHJldHVybiBtYXRoTWF4KG1pbiwgbWF0aE1pbih2YWx1ZSwgbWF4KSk7XG59XG5leHBvcnQgZnVuY3Rpb24gd2l0aGluTWF4Q2xhbXAobWluLCB2YWx1ZSwgbWF4KSB7XG4gIHZhciB2ID0gd2l0aGluKG1pbiwgdmFsdWUsIG1heCk7XG4gIHJldHVybiB2ID4gbWF4ID8gbWF4IDogdjtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RnJlc2hTaWRlT2JqZWN0KCkge1xuICByZXR1cm4ge1xuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMFxuICB9O1xufSIsICJpbXBvcnQgZ2V0RnJlc2hTaWRlT2JqZWN0IGZyb20gXCIuL2dldEZyZXNoU2lkZU9iamVjdC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWVyZ2VQYWRkaW5nT2JqZWN0KHBhZGRpbmdPYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGdldEZyZXNoU2lkZU9iamVjdCgpLCBwYWRkaW5nT2JqZWN0KTtcbn0iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZXhwYW5kVG9IYXNoTWFwKHZhbHVlLCBrZXlzKSB7XG4gIHJldHVybiBrZXlzLnJlZHVjZShmdW5jdGlvbiAoaGFzaE1hcCwga2V5KSB7XG4gICAgaGFzaE1hcFtrZXldID0gdmFsdWU7XG4gICAgcmV0dXJuIGhhc2hNYXA7XG4gIH0sIHt9KTtcbn0iLCAiaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRMYXlvdXRSZWN0IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0TGF5b3V0UmVjdC5qc1wiO1xuaW1wb3J0IGNvbnRhaW5zIGZyb20gXCIuLi9kb20tdXRpbHMvY29udGFpbnMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRPZmZzZXRQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldE1haW5BeGlzRnJvbVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgd2l0aGluIH0gZnJvbSBcIi4uL3V0aWxzL3dpdGhpbi5qc1wiO1xuaW1wb3J0IG1lcmdlUGFkZGluZ09iamVjdCBmcm9tIFwiLi4vdXRpbHMvbWVyZ2VQYWRkaW5nT2JqZWN0LmpzXCI7XG5pbXBvcnQgZXhwYW5kVG9IYXNoTWFwIGZyb20gXCIuLi91dGlscy9leHBhbmRUb0hhc2hNYXAuanNcIjtcbmltcG9ydCB7IGxlZnQsIHJpZ2h0LCBiYXNlUGxhY2VtZW50cywgdG9wLCBib3R0b20gfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi4vZG9tLXV0aWxzL2luc3RhbmNlT2YuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgdG9QYWRkaW5nT2JqZWN0ID0gZnVuY3Rpb24gdG9QYWRkaW5nT2JqZWN0KHBhZGRpbmcsIHN0YXRlKSB7XG4gIHBhZGRpbmcgPSB0eXBlb2YgcGFkZGluZyA9PT0gJ2Z1bmN0aW9uJyA/IHBhZGRpbmcoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUucmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KSkgOiBwYWRkaW5nO1xuICByZXR1cm4gbWVyZ2VQYWRkaW5nT2JqZWN0KHR5cGVvZiBwYWRkaW5nICE9PSAnbnVtYmVyJyA/IHBhZGRpbmcgOiBleHBhbmRUb0hhc2hNYXAocGFkZGluZywgYmFzZVBsYWNlbWVudHMpKTtcbn07XG5cbmZ1bmN0aW9uIGFycm93KF9yZWYpIHtcbiAgdmFyIF9zdGF0ZSRtb2RpZmllcnNEYXRhJDtcblxuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XG4gIHZhciBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdztcbiAgdmFyIHBvcHBlck9mZnNldHMgPSBzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHM7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgYXhpcyA9IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudChiYXNlUGxhY2VtZW50KTtcbiAgdmFyIGlzVmVydGljYWwgPSBbbGVmdCwgcmlnaHRdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMDtcbiAgdmFyIGxlbiA9IGlzVmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgaWYgKCFhcnJvd0VsZW1lbnQgfHwgIXBvcHBlck9mZnNldHMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgcGFkZGluZ09iamVjdCA9IHRvUGFkZGluZ09iamVjdChvcHRpb25zLnBhZGRpbmcsIHN0YXRlKTtcbiAgdmFyIGFycm93UmVjdCA9IGdldExheW91dFJlY3QoYXJyb3dFbGVtZW50KTtcbiAgdmFyIG1pblByb3AgPSBheGlzID09PSAneScgPyB0b3AgOiBsZWZ0O1xuICB2YXIgbWF4UHJvcCA9IGF4aXMgPT09ICd5JyA/IGJvdHRvbSA6IHJpZ2h0O1xuICB2YXIgZW5kRGlmZiA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtsZW5dICsgc3RhdGUucmVjdHMucmVmZXJlbmNlW2F4aXNdIC0gcG9wcGVyT2Zmc2V0c1theGlzXSAtIHN0YXRlLnJlY3RzLnBvcHBlcltsZW5dO1xuICB2YXIgc3RhcnREaWZmID0gcG9wcGVyT2Zmc2V0c1theGlzXSAtIHN0YXRlLnJlY3RzLnJlZmVyZW5jZVtheGlzXTtcbiAgdmFyIGFycm93T2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50KGFycm93RWxlbWVudCk7XG4gIHZhciBjbGllbnRTaXplID0gYXJyb3dPZmZzZXRQYXJlbnQgPyBheGlzID09PSAneScgPyBhcnJvd09mZnNldFBhcmVudC5jbGllbnRIZWlnaHQgfHwgMCA6IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudFdpZHRoIHx8IDAgOiAwO1xuICB2YXIgY2VudGVyVG9SZWZlcmVuY2UgPSBlbmREaWZmIC8gMiAtIHN0YXJ0RGlmZiAvIDI7IC8vIE1ha2Ugc3VyZSB0aGUgYXJyb3cgZG9lc24ndCBvdmVyZmxvdyB0aGUgcG9wcGVyIGlmIHRoZSBjZW50ZXIgcG9pbnQgaXNcbiAgLy8gb3V0c2lkZSBvZiB0aGUgcG9wcGVyIGJvdW5kc1xuXG4gIHZhciBtaW4gPSBwYWRkaW5nT2JqZWN0W21pblByb3BdO1xuICB2YXIgbWF4ID0gY2xpZW50U2l6ZSAtIGFycm93UmVjdFtsZW5dIC0gcGFkZGluZ09iamVjdFttYXhQcm9wXTtcbiAgdmFyIGNlbnRlciA9IGNsaWVudFNpemUgLyAyIC0gYXJyb3dSZWN0W2xlbl0gLyAyICsgY2VudGVyVG9SZWZlcmVuY2U7XG4gIHZhciBvZmZzZXQgPSB3aXRoaW4obWluLCBjZW50ZXIsIG1heCk7IC8vIFByZXZlbnRzIGJyZWFraW5nIHN5bnRheCBoaWdobGlnaHRpbmcuLi5cblxuICB2YXIgYXhpc1Byb3AgPSBheGlzO1xuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0gKF9zdGF0ZSRtb2RpZmllcnNEYXRhJCA9IHt9LCBfc3RhdGUkbW9kaWZpZXJzRGF0YSRbYXhpc1Byb3BdID0gb2Zmc2V0LCBfc3RhdGUkbW9kaWZpZXJzRGF0YSQuY2VudGVyT2Zmc2V0ID0gb2Zmc2V0IC0gY2VudGVyLCBfc3RhdGUkbW9kaWZpZXJzRGF0YSQpO1xufVxuXG5mdW5jdGlvbiBlZmZlY3QoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjIub3B0aW9ucztcbiAgdmFyIF9vcHRpb25zJGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQsXG4gICAgICBhcnJvd0VsZW1lbnQgPSBfb3B0aW9ucyRlbGVtZW50ID09PSB2b2lkIDAgPyAnW2RhdGEtcG9wcGVyLWFycm93XScgOiBfb3B0aW9ucyRlbGVtZW50O1xuXG4gIGlmIChhcnJvd0VsZW1lbnQgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfSAvLyBDU1Mgc2VsZWN0b3JcblxuXG4gIGlmICh0eXBlb2YgYXJyb3dFbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgIGFycm93RWxlbWVudCA9IHN0YXRlLmVsZW1lbnRzLnBvcHBlci5xdWVyeVNlbGVjdG9yKGFycm93RWxlbWVudCk7XG5cbiAgICBpZiAoIWFycm93RWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBpZiAoIWlzSFRNTEVsZW1lbnQoYXJyb3dFbGVtZW50KSkge1xuICAgICAgY29uc29sZS5lcnJvcihbJ1BvcHBlcjogXCJhcnJvd1wiIGVsZW1lbnQgbXVzdCBiZSBhbiBIVE1MRWxlbWVudCAobm90IGFuIFNWR0VsZW1lbnQpLicsICdUbyB1c2UgYW4gU1ZHIGFycm93LCB3cmFwIGl0IGluIGFuIEhUTUxFbGVtZW50IHRoYXQgd2lsbCBiZSB1c2VkIGFzJywgJ3RoZSBhcnJvdy4nXS5qb2luKCcgJykpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29udGFpbnMoc3RhdGUuZWxlbWVudHMucG9wcGVyLCBhcnJvd0VsZW1lbnQpKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgY29uc29sZS5lcnJvcihbJ1BvcHBlcjogXCJhcnJvd1wiIG1vZGlmaWVyXFwncyBgZWxlbWVudGAgbXVzdCBiZSBhIGNoaWxkIG9mIHRoZSBwb3BwZXInLCAnZWxlbWVudC4nXS5qb2luKCcgJykpO1xuICAgIH1cblxuICAgIHJldHVybjtcbiAgfVxuXG4gIHN0YXRlLmVsZW1lbnRzLmFycm93ID0gYXJyb3dFbGVtZW50O1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnYXJyb3cnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogYXJyb3csXG4gIGVmZmVjdDogZWZmZWN0LFxuICByZXF1aXJlczogWydwb3BwZXJPZmZzZXRzJ10sXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsncHJldmVudE92ZXJmbG93J11cbn07IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFZhcmlhdGlvbihwbGFjZW1lbnQpIHtcbiAgcmV0dXJuIHBsYWNlbWVudC5zcGxpdCgnLScpWzFdO1xufSIsICJpbXBvcnQgeyB0b3AsIGxlZnQsIHJpZ2h0LCBib3R0b20sIGVuZCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGdldE9mZnNldFBhcmVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvdyBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldFZhcmlhdGlvbiBmcm9tIFwiLi4vdXRpbHMvZ2V0VmFyaWF0aW9uLmpzXCI7XG5pbXBvcnQgeyByb3VuZCB9IGZyb20gXCIuLi91dGlscy9tYXRoLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxudmFyIHVuc2V0U2lkZXMgPSB7XG4gIHRvcDogJ2F1dG8nLFxuICByaWdodDogJ2F1dG8nLFxuICBib3R0b206ICdhdXRvJyxcbiAgbGVmdDogJ2F1dG8nXG59OyAvLyBSb3VuZCB0aGUgb2Zmc2V0cyB0byB0aGUgbmVhcmVzdCBzdWl0YWJsZSBzdWJwaXhlbCBiYXNlZCBvbiB0aGUgRFBSLlxuLy8gWm9vbWluZyBjYW4gY2hhbmdlIHRoZSBEUFIsIGJ1dCBpdCBzZWVtcyB0byByZXBvcnQgYSB2YWx1ZSB0aGF0IHdpbGxcbi8vIGNsZWFubHkgZGl2aWRlIHRoZSB2YWx1ZXMgaW50byB0aGUgYXBwcm9wcmlhdGUgc3VicGl4ZWxzLlxuXG5mdW5jdGlvbiByb3VuZE9mZnNldHNCeURQUihfcmVmKSB7XG4gIHZhciB4ID0gX3JlZi54LFxuICAgICAgeSA9IF9yZWYueTtcbiAgdmFyIHdpbiA9IHdpbmRvdztcbiAgdmFyIGRwciA9IHdpbi5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gIHJldHVybiB7XG4gICAgeDogcm91bmQoeCAqIGRwcikgLyBkcHIgfHwgMCxcbiAgICB5OiByb3VuZCh5ICogZHByKSAvIGRwciB8fCAwXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXBUb1N0eWxlcyhfcmVmMikge1xuICB2YXIgX09iamVjdCRhc3NpZ24yO1xuXG4gIHZhciBwb3BwZXIgPSBfcmVmMi5wb3BwZXIsXG4gICAgICBwb3BwZXJSZWN0ID0gX3JlZjIucG9wcGVyUmVjdCxcbiAgICAgIHBsYWNlbWVudCA9IF9yZWYyLnBsYWNlbWVudCxcbiAgICAgIHZhcmlhdGlvbiA9IF9yZWYyLnZhcmlhdGlvbixcbiAgICAgIG9mZnNldHMgPSBfcmVmMi5vZmZzZXRzLFxuICAgICAgcG9zaXRpb24gPSBfcmVmMi5wb3NpdGlvbixcbiAgICAgIGdwdUFjY2VsZXJhdGlvbiA9IF9yZWYyLmdwdUFjY2VsZXJhdGlvbixcbiAgICAgIGFkYXB0aXZlID0gX3JlZjIuYWRhcHRpdmUsXG4gICAgICByb3VuZE9mZnNldHMgPSBfcmVmMi5yb3VuZE9mZnNldHMsXG4gICAgICBpc0ZpeGVkID0gX3JlZjIuaXNGaXhlZDtcbiAgdmFyIF9vZmZzZXRzJHggPSBvZmZzZXRzLngsXG4gICAgICB4ID0gX29mZnNldHMkeCA9PT0gdm9pZCAwID8gMCA6IF9vZmZzZXRzJHgsXG4gICAgICBfb2Zmc2V0cyR5ID0gb2Zmc2V0cy55LFxuICAgICAgeSA9IF9vZmZzZXRzJHkgPT09IHZvaWQgMCA/IDAgOiBfb2Zmc2V0cyR5O1xuXG4gIHZhciBfcmVmMyA9IHR5cGVvZiByb3VuZE9mZnNldHMgPT09ICdmdW5jdGlvbicgPyByb3VuZE9mZnNldHMoe1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9KSA6IHtcbiAgICB4OiB4LFxuICAgIHk6IHlcbiAgfTtcblxuICB4ID0gX3JlZjMueDtcbiAgeSA9IF9yZWYzLnk7XG4gIHZhciBoYXNYID0gb2Zmc2V0cy5oYXNPd25Qcm9wZXJ0eSgneCcpO1xuICB2YXIgaGFzWSA9IG9mZnNldHMuaGFzT3duUHJvcGVydHkoJ3knKTtcbiAgdmFyIHNpZGVYID0gbGVmdDtcbiAgdmFyIHNpZGVZID0gdG9wO1xuICB2YXIgd2luID0gd2luZG93O1xuXG4gIGlmIChhZGFwdGl2ZSkge1xuICAgIHZhciBvZmZzZXRQYXJlbnQgPSBnZXRPZmZzZXRQYXJlbnQocG9wcGVyKTtcbiAgICB2YXIgaGVpZ2h0UHJvcCA9ICdjbGllbnRIZWlnaHQnO1xuICAgIHZhciB3aWR0aFByb3AgPSAnY2xpZW50V2lkdGgnO1xuXG4gICAgaWYgKG9mZnNldFBhcmVudCA9PT0gZ2V0V2luZG93KHBvcHBlcikpIHtcbiAgICAgIG9mZnNldFBhcmVudCA9IGdldERvY3VtZW50RWxlbWVudChwb3BwZXIpO1xuXG4gICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShvZmZzZXRQYXJlbnQpLnBvc2l0aW9uICE9PSAnc3RhdGljJyAmJiBwb3NpdGlvbiA9PT0gJ2Fic29sdXRlJykge1xuICAgICAgICBoZWlnaHRQcm9wID0gJ3Njcm9sbEhlaWdodCc7XG4gICAgICAgIHdpZHRoUHJvcCA9ICdzY3JvbGxXaWR0aCc7XG4gICAgICB9XG4gICAgfSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYXN0XTogZm9yY2UgdHlwZSByZWZpbmVtZW50LCB3ZSBjb21wYXJlIG9mZnNldFBhcmVudCB3aXRoIHdpbmRvdyBhYm92ZSwgYnV0IEZsb3cgZG9lc24ndCBkZXRlY3QgaXRcblxuXG4gICAgb2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50O1xuXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gdG9wIHx8IChwbGFjZW1lbnQgPT09IGxlZnQgfHwgcGxhY2VtZW50ID09PSByaWdodCkgJiYgdmFyaWF0aW9uID09PSBlbmQpIHtcbiAgICAgIHNpZGVZID0gYm90dG9tO1xuICAgICAgdmFyIG9mZnNldFkgPSBpc0ZpeGVkICYmIG9mZnNldFBhcmVudCA9PT0gd2luICYmIHdpbi52aXN1YWxWaWV3cG9ydCA/IHdpbi52aXN1YWxWaWV3cG9ydC5oZWlnaHQgOiAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgIG9mZnNldFBhcmVudFtoZWlnaHRQcm9wXTtcbiAgICAgIHkgLT0gb2Zmc2V0WSAtIHBvcHBlclJlY3QuaGVpZ2h0O1xuICAgICAgeSAqPSBncHVBY2NlbGVyYXRpb24gPyAxIDogLTE7XG4gICAgfVxuXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gbGVmdCB8fCAocGxhY2VtZW50ID09PSB0b3AgfHwgcGxhY2VtZW50ID09PSBib3R0b20pICYmIHZhcmlhdGlvbiA9PT0gZW5kKSB7XG4gICAgICBzaWRlWCA9IHJpZ2h0O1xuICAgICAgdmFyIG9mZnNldFggPSBpc0ZpeGVkICYmIG9mZnNldFBhcmVudCA9PT0gd2luICYmIHdpbi52aXN1YWxWaWV3cG9ydCA/IHdpbi52aXN1YWxWaWV3cG9ydC53aWR0aCA6IC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXVxuICAgICAgb2Zmc2V0UGFyZW50W3dpZHRoUHJvcF07XG4gICAgICB4IC09IG9mZnNldFggLSBwb3BwZXJSZWN0LndpZHRoO1xuICAgICAgeCAqPSBncHVBY2NlbGVyYXRpb24gPyAxIDogLTE7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNvbW1vblN0eWxlcyA9IE9iamVjdC5hc3NpZ24oe1xuICAgIHBvc2l0aW9uOiBwb3NpdGlvblxuICB9LCBhZGFwdGl2ZSAmJiB1bnNldFNpZGVzKTtcblxuICB2YXIgX3JlZjQgPSByb3VuZE9mZnNldHMgPT09IHRydWUgPyByb3VuZE9mZnNldHNCeURQUih7XG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH0pIDoge1xuICAgIHg6IHgsXG4gICAgeTogeVxuICB9O1xuXG4gIHggPSBfcmVmNC54O1xuICB5ID0gX3JlZjQueTtcblxuICBpZiAoZ3B1QWNjZWxlcmF0aW9uKSB7XG4gICAgdmFyIF9PYmplY3QkYXNzaWduO1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywgKF9PYmplY3QkYXNzaWduID0ge30sIF9PYmplY3QkYXNzaWduW3NpZGVZXSA9IGhhc1kgPyAnMCcgOiAnJywgX09iamVjdCRhc3NpZ25bc2lkZVhdID0gaGFzWCA/ICcwJyA6ICcnLCBfT2JqZWN0JGFzc2lnbi50cmFuc2Zvcm0gPSAod2luLmRldmljZVBpeGVsUmF0aW8gfHwgMSkgPD0gMSA/IFwidHJhbnNsYXRlKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgpXCIgOiBcInRyYW5zbGF0ZTNkKFwiICsgeCArIFwicHgsIFwiICsgeSArIFwicHgsIDApXCIsIF9PYmplY3QkYXNzaWduKSk7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uU3R5bGVzLCAoX09iamVjdCRhc3NpZ24yID0ge30sIF9PYmplY3QkYXNzaWduMltzaWRlWV0gPSBoYXNZID8geSArIFwicHhcIiA6ICcnLCBfT2JqZWN0JGFzc2lnbjJbc2lkZVhdID0gaGFzWCA/IHggKyBcInB4XCIgOiAnJywgX09iamVjdCRhc3NpZ24yLnRyYW5zZm9ybSA9ICcnLCBfT2JqZWN0JGFzc2lnbjIpKTtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZVN0eWxlcyhfcmVmNSkge1xuICB2YXIgc3RhdGUgPSBfcmVmNS5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmNS5vcHRpb25zO1xuICB2YXIgX29wdGlvbnMkZ3B1QWNjZWxlcmF0ID0gb3B0aW9ucy5ncHVBY2NlbGVyYXRpb24sXG4gICAgICBncHVBY2NlbGVyYXRpb24gPSBfb3B0aW9ucyRncHVBY2NlbGVyYXQgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRncHVBY2NlbGVyYXQsXG4gICAgICBfb3B0aW9ucyRhZGFwdGl2ZSA9IG9wdGlvbnMuYWRhcHRpdmUsXG4gICAgICBhZGFwdGl2ZSA9IF9vcHRpb25zJGFkYXB0aXZlID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkYWRhcHRpdmUsXG4gICAgICBfb3B0aW9ucyRyb3VuZE9mZnNldHMgPSBvcHRpb25zLnJvdW5kT2Zmc2V0cyxcbiAgICAgIHJvdW5kT2Zmc2V0cyA9IF9vcHRpb25zJHJvdW5kT2Zmc2V0cyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHJvdW5kT2Zmc2V0cztcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgdmFyIHRyYW5zaXRpb25Qcm9wZXJ0eSA9IGdldENvbXB1dGVkU3R5bGUoc3RhdGUuZWxlbWVudHMucG9wcGVyKS50cmFuc2l0aW9uUHJvcGVydHkgfHwgJyc7XG5cbiAgICBpZiAoYWRhcHRpdmUgJiYgWyd0cmFuc2Zvcm0nLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0J10uc29tZShmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICAgIHJldHVybiB0cmFuc2l0aW9uUHJvcGVydHkuaW5kZXhPZihwcm9wZXJ0eSkgPj0gMDtcbiAgICB9KSkge1xuICAgICAgY29uc29sZS53YXJuKFsnUG9wcGVyOiBEZXRlY3RlZCBDU1MgdHJhbnNpdGlvbnMgb24gYXQgbGVhc3Qgb25lIG9mIHRoZSBmb2xsb3dpbmcnLCAnQ1NTIHByb3BlcnRpZXM6IFwidHJhbnNmb3JtXCIsIFwidG9wXCIsIFwicmlnaHRcIiwgXCJib3R0b21cIiwgXCJsZWZ0XCIuJywgJ1xcblxcbicsICdEaXNhYmxlIHRoZSBcImNvbXB1dGVTdHlsZXNcIiBtb2RpZmllclxcJ3MgYGFkYXB0aXZlYCBvcHRpb24gdG8gYWxsb3cnLCAnZm9yIHNtb290aCB0cmFuc2l0aW9ucywgb3IgcmVtb3ZlIHRoZXNlIHByb3BlcnRpZXMgZnJvbSB0aGUgQ1NTJywgJ3RyYW5zaXRpb24gZGVjbGFyYXRpb24gb24gdGhlIHBvcHBlciBlbGVtZW50IGlmIG9ubHkgdHJhbnNpdGlvbmluZycsICdvcGFjaXR5IG9yIGJhY2tncm91bmQtY29sb3IgZm9yIGV4YW1wbGUuJywgJ1xcblxcbicsICdXZSByZWNvbW1lbmQgdXNpbmcgdGhlIHBvcHBlciBlbGVtZW50IGFzIGEgd3JhcHBlciBhcm91bmQgYW4gaW5uZXInLCAnZWxlbWVudCB0aGF0IGNhbiBoYXZlIGFueSBDU1MgcHJvcGVydHkgdHJhbnNpdGlvbmVkIGZvciBhbmltYXRpb25zLiddLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNvbW1vblN0eWxlcyA9IHtcbiAgICBwbGFjZW1lbnQ6IGdldEJhc2VQbGFjZW1lbnQoc3RhdGUucGxhY2VtZW50KSxcbiAgICB2YXJpYXRpb246IGdldFZhcmlhdGlvbihzdGF0ZS5wbGFjZW1lbnQpLFxuICAgIHBvcHBlcjogc3RhdGUuZWxlbWVudHMucG9wcGVyLFxuICAgIHBvcHBlclJlY3Q6IHN0YXRlLnJlY3RzLnBvcHBlcixcbiAgICBncHVBY2NlbGVyYXRpb246IGdwdUFjY2VsZXJhdGlvbixcbiAgICBpc0ZpeGVkOiBzdGF0ZS5vcHRpb25zLnN0cmF0ZWd5ID09PSAnZml4ZWQnXG4gIH07XG5cbiAgaWYgKHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyAhPSBudWxsKSB7XG4gICAgc3RhdGUuc3R5bGVzLnBvcHBlciA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlLnN0eWxlcy5wb3BwZXIsIG1hcFRvU3R5bGVzKE9iamVjdC5hc3NpZ24oe30sIGNvbW1vblN0eWxlcywge1xuICAgICAgb2Zmc2V0czogc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLFxuICAgICAgcG9zaXRpb246IHN0YXRlLm9wdGlvbnMuc3RyYXRlZ3ksXG4gICAgICBhZGFwdGl2ZTogYWRhcHRpdmUsXG4gICAgICByb3VuZE9mZnNldHM6IHJvdW5kT2Zmc2V0c1xuICAgIH0pKSk7XG4gIH1cblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YS5hcnJvdyAhPSBudWxsKSB7XG4gICAgc3RhdGUuc3R5bGVzLmFycm93ID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuc3R5bGVzLmFycm93LCBtYXBUb1N0eWxlcyhPYmplY3QuYXNzaWduKHt9LCBjb21tb25TdHlsZXMsIHtcbiAgICAgIG9mZnNldHM6IHN0YXRlLm1vZGlmaWVyc0RhdGEuYXJyb3csXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgIGFkYXB0aXZlOiBmYWxzZSxcbiAgICAgIHJvdW5kT2Zmc2V0czogcm91bmRPZmZzZXRzXG4gICAgfSkpKTtcbiAgfVxuXG4gIHN0YXRlLmF0dHJpYnV0ZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIsIHtcbiAgICAnZGF0YS1wb3BwZXItcGxhY2VtZW50Jzogc3RhdGUucGxhY2VtZW50XG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnY29tcHV0ZVN0eWxlcycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnYmVmb3JlV3JpdGUnLFxuICBmbjogY29tcHV0ZVN0eWxlcyxcbiAgZGF0YToge31cbn07IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRXaW5kb3cuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG52YXIgcGFzc2l2ZSA9IHtcbiAgcGFzc2l2ZTogdHJ1ZVxufTtcblxuZnVuY3Rpb24gZWZmZWN0KF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIGluc3RhbmNlID0gX3JlZi5pbnN0YW5jZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnM7XG4gIHZhciBfb3B0aW9ucyRzY3JvbGwgPSBvcHRpb25zLnNjcm9sbCxcbiAgICAgIHNjcm9sbCA9IF9vcHRpb25zJHNjcm9sbCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHNjcm9sbCxcbiAgICAgIF9vcHRpb25zJHJlc2l6ZSA9IG9wdGlvbnMucmVzaXplLFxuICAgICAgcmVzaXplID0gX29wdGlvbnMkcmVzaXplID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkcmVzaXplO1xuICB2YXIgd2luZG93ID0gZ2V0V2luZG93KHN0YXRlLmVsZW1lbnRzLnBvcHBlcik7XG4gIHZhciBzY3JvbGxQYXJlbnRzID0gW10uY29uY2F0KHN0YXRlLnNjcm9sbFBhcmVudHMucmVmZXJlbmNlLCBzdGF0ZS5zY3JvbGxQYXJlbnRzLnBvcHBlcik7XG5cbiAgaWYgKHNjcm9sbCkge1xuICAgIHNjcm9sbFBhcmVudHMuZm9yRWFjaChmdW5jdGlvbiAoc2Nyb2xsUGFyZW50KSB7XG4gICAgICBzY3JvbGxQYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChyZXNpemUpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNjcm9sbCkge1xuICAgICAgc2Nyb2xsUGFyZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChzY3JvbGxQYXJlbnQpIHtcbiAgICAgICAgc2Nyb2xsUGFyZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGluc3RhbmNlLnVwZGF0ZSwgcGFzc2l2ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVzaXplKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaW5zdGFuY2UudXBkYXRlLCBwYXNzaXZlKTtcbiAgICB9XG4gIH07XG59IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdldmVudExpc3RlbmVycycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnd3JpdGUnLFxuICBmbjogZnVuY3Rpb24gZm4oKSB7fSxcbiAgZWZmZWN0OiBlZmZlY3QsXG4gIGRhdGE6IHt9XG59OyIsICJ2YXIgaGFzaCA9IHtcbiAgbGVmdDogJ3JpZ2h0JyxcbiAgcmlnaHQ6ICdsZWZ0JyxcbiAgYm90dG9tOiAndG9wJyxcbiAgdG9wOiAnYm90dG9tJ1xufTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldE9wcG9zaXRlUGxhY2VtZW50KHBsYWNlbWVudCkge1xuICByZXR1cm4gcGxhY2VtZW50LnJlcGxhY2UoL2xlZnR8cmlnaHR8Ym90dG9tfHRvcC9nLCBmdW5jdGlvbiAobWF0Y2hlZCkge1xuICAgIHJldHVybiBoYXNoW21hdGNoZWRdO1xuICB9KTtcbn0iLCAidmFyIGhhc2ggPSB7XG4gIHN0YXJ0OiAnZW5kJyxcbiAgZW5kOiAnc3RhcnQnXG59O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQocGxhY2VtZW50KSB7XG4gIHJldHVybiBwbGFjZW1lbnQucmVwbGFjZSgvc3RhcnR8ZW5kL2csIGZ1bmN0aW9uIChtYXRjaGVkKSB7XG4gICAgcmV0dXJuIGhhc2hbbWF0Y2hlZF07XG4gIH0pO1xufSIsICJpbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0V2luZG93U2Nyb2xsKG5vZGUpIHtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhub2RlKTtcbiAgdmFyIHNjcm9sbExlZnQgPSB3aW4ucGFnZVhPZmZzZXQ7XG4gIHZhciBzY3JvbGxUb3AgPSB3aW4ucGFnZVlPZmZzZXQ7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsTGVmdDogc2Nyb2xsTGVmdCxcbiAgICBzY3JvbGxUb3A6IHNjcm9sbFRvcFxuICB9O1xufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRXaW5kb3dTY3JvbGxCYXJYKGVsZW1lbnQpIHtcbiAgLy8gSWYgPGh0bWw+IGhhcyBhIENTUyB3aWR0aCBncmVhdGVyIHRoYW4gdGhlIHZpZXdwb3J0LCB0aGVuIHRoaXMgd2lsbCBiZVxuICAvLyBpbmNvcnJlY3QgZm9yIFJUTC5cbiAgLy8gUG9wcGVyIDEgaXMgYnJva2VuIGluIHRoaXMgY2FzZSBhbmQgbmV2ZXIgaGFkIGEgYnVnIHJlcG9ydCBzbyBsZXQncyBhc3N1bWVcbiAgLy8gaXQncyBub3QgYW4gaXNzdWUuIEkgZG9uJ3QgdGhpbmsgYW55b25lIGV2ZXIgc3BlY2lmaWVzIHdpZHRoIG9uIDxodG1sPlxuICAvLyBhbnl3YXkuXG4gIC8vIEJyb3dzZXJzIHdoZXJlIHRoZSBsZWZ0IHNjcm9sbGJhciBkb2Vzbid0IGNhdXNlIGFuIGlzc3VlIHJlcG9ydCBgMGAgZm9yXG4gIC8vIHRoaXMgKGUuZy4gRWRnZSAyMDE5LCBJRTExLCBTYWZhcmkpXG4gIHJldHVybiBnZXRCb3VuZGluZ0NsaWVudFJlY3QoZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpKS5sZWZ0ICsgZ2V0V2luZG93U2Nyb2xsKGVsZW1lbnQpLnNjcm9sbExlZnQ7XG59IiwgImltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRFbGVtZW50IGZyb20gXCIuL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Vmlld3BvcnRSZWN0KGVsZW1lbnQpIHtcbiAgdmFyIHdpbiA9IGdldFdpbmRvdyhlbGVtZW50KTtcbiAgdmFyIGh0bWwgPSBnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCk7XG4gIHZhciB2aXN1YWxWaWV3cG9ydCA9IHdpbi52aXN1YWxWaWV3cG9ydDtcbiAgdmFyIHdpZHRoID0gaHRtbC5jbGllbnRXaWR0aDtcbiAgdmFyIGhlaWdodCA9IGh0bWwuY2xpZW50SGVpZ2h0O1xuICB2YXIgeCA9IDA7XG4gIHZhciB5ID0gMDsgLy8gTkI6IFRoaXMgaXNuJ3Qgc3VwcG9ydGVkIG9uIGlPUyA8PSAxMi4gSWYgdGhlIGtleWJvYXJkIGlzIG9wZW4sIHRoZSBwb3BwZXJcbiAgLy8gY2FuIGJlIG9ic2N1cmVkIHVuZGVybmVhdGggaXQuXG4gIC8vIEFsc28sIGBodG1sLmNsaWVudEhlaWdodGAgYWRkcyB0aGUgYm90dG9tIGJhciBoZWlnaHQgaW4gU2FmYXJpIGlPUywgZXZlblxuICAvLyBpZiBpdCBpc24ndCBvcGVuLCBzbyBpZiB0aGlzIGlzbid0IGF2YWlsYWJsZSwgdGhlIHBvcHBlciB3aWxsIGJlIGRldGVjdGVkXG4gIC8vIHRvIG92ZXJmbG93IHRoZSBib3R0b20gb2YgdGhlIHNjcmVlbiB0b28gZWFybHkuXG5cbiAgaWYgKHZpc3VhbFZpZXdwb3J0KSB7XG4gICAgd2lkdGggPSB2aXN1YWxWaWV3cG9ydC53aWR0aDtcbiAgICBoZWlnaHQgPSB2aXN1YWxWaWV3cG9ydC5oZWlnaHQ7IC8vIFVzZXMgTGF5b3V0IFZpZXdwb3J0IChsaWtlIENocm9tZTsgU2FmYXJpIGRvZXMgbm90IGN1cnJlbnRseSlcbiAgICAvLyBJbiBDaHJvbWUsIGl0IHJldHVybnMgYSB2YWx1ZSB2ZXJ5IGNsb3NlIHRvIDAgKCsvLSkgYnV0IGNvbnRhaW5zIHJvdW5kaW5nXG4gICAgLy8gZXJyb3JzIGR1ZSB0byBmbG9hdGluZyBwb2ludCBudW1iZXJzLCBzbyB3ZSBuZWVkIHRvIGNoZWNrIHByZWNpc2lvbi5cbiAgICAvLyBTYWZhcmkgcmV0dXJucyBhIG51bWJlciA8PSAwLCB1c3VhbGx5IDwgLTEgd2hlbiBwaW5jaC16b29tZWRcbiAgICAvLyBGZWF0dXJlIGRldGVjdGlvbiBmYWlscyBpbiBtb2JpbGUgZW11bGF0aW9uIG1vZGUgaW4gQ2hyb21lLlxuICAgIC8vIE1hdGguYWJzKHdpbi5pbm5lcldpZHRoIC8gdmlzdWFsVmlld3BvcnQuc2NhbGUgLSB2aXN1YWxWaWV3cG9ydC53aWR0aCkgPFxuICAgIC8vIDAuMDAxXG4gICAgLy8gRmFsbGJhY2sgaGVyZTogXCJOb3QgU2FmYXJpXCIgdXNlckFnZW50XG5cbiAgICBpZiAoIS9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgIHggPSB2aXN1YWxWaWV3cG9ydC5vZmZzZXRMZWZ0O1xuICAgICAgeSA9IHZpc3VhbFZpZXdwb3J0Lm9mZnNldFRvcDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdpZHRoOiB3aWR0aCxcbiAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICB4OiB4ICsgZ2V0V2luZG93U2Nyb2xsQmFyWChlbGVtZW50KSxcbiAgICB5OiB5XG4gIH07XG59IiwgImltcG9ydCBnZXREb2N1bWVudEVsZW1lbnQgZnJvbSBcIi4vZ2V0RG9jdW1lbnRFbGVtZW50LmpzXCI7XG5pbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tIFwiLi9nZXRDb21wdXRlZFN0eWxlLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsQmFyWCBmcm9tIFwiLi9nZXRXaW5kb3dTY3JvbGxCYXJYLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93U2Nyb2xsIGZyb20gXCIuL2dldFdpbmRvd1Njcm9sbC5qc1wiO1xuaW1wb3J0IHsgbWF4IH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjsgLy8gR2V0cyB0aGUgZW50aXJlIHNpemUgb2YgdGhlIHNjcm9sbGFibGUgZG9jdW1lbnQgYXJlYSwgZXZlbiBleHRlbmRpbmcgb3V0c2lkZVxuLy8gb2YgdGhlIGA8aHRtbD5gIGFuZCBgPGJvZHk+YCByZWN0IGJvdW5kcyBpZiBob3Jpem9udGFsbHkgc2Nyb2xsYWJsZVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXREb2N1bWVudFJlY3QoZWxlbWVudCkge1xuICB2YXIgX2VsZW1lbnQkb3duZXJEb2N1bWVuO1xuXG4gIHZhciBodG1sID0gZ2V0RG9jdW1lbnRFbGVtZW50KGVsZW1lbnQpO1xuICB2YXIgd2luU2Nyb2xsID0gZ2V0V2luZG93U2Nyb2xsKGVsZW1lbnQpO1xuICB2YXIgYm9keSA9IChfZWxlbWVudCRvd25lckRvY3VtZW4gPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQpID09IG51bGwgPyB2b2lkIDAgOiBfZWxlbWVudCRvd25lckRvY3VtZW4uYm9keTtcbiAgdmFyIHdpZHRoID0gbWF4KGh0bWwuc2Nyb2xsV2lkdGgsIGh0bWwuY2xpZW50V2lkdGgsIGJvZHkgPyBib2R5LnNjcm9sbFdpZHRoIDogMCwgYm9keSA/IGJvZHkuY2xpZW50V2lkdGggOiAwKTtcbiAgdmFyIGhlaWdodCA9IG1heChodG1sLnNjcm9sbEhlaWdodCwgaHRtbC5jbGllbnRIZWlnaHQsIGJvZHkgPyBib2R5LnNjcm9sbEhlaWdodCA6IDAsIGJvZHkgPyBib2R5LmNsaWVudEhlaWdodCA6IDApO1xuICB2YXIgeCA9IC13aW5TY3JvbGwuc2Nyb2xsTGVmdCArIGdldFdpbmRvd1Njcm9sbEJhclgoZWxlbWVudCk7XG4gIHZhciB5ID0gLXdpblNjcm9sbC5zY3JvbGxUb3A7XG5cbiAgaWYgKGdldENvbXB1dGVkU3R5bGUoYm9keSB8fCBodG1sKS5kaXJlY3Rpb24gPT09ICdydGwnKSB7XG4gICAgeCArPSBtYXgoaHRtbC5jbGllbnRXaWR0aCwgYm9keSA/IGJvZHkuY2xpZW50V2lkdGggOiAwKSAtIHdpZHRoO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgeDogeCxcbiAgICB5OiB5XG4gIH07XG59IiwgImltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2Nyb2xsUGFyZW50KGVsZW1lbnQpIHtcbiAgLy8gRmlyZWZveCB3YW50cyB1cyB0byBjaGVjayBgLXhgIGFuZCBgLXlgIHZhcmlhdGlvbnMgYXMgd2VsbFxuICB2YXIgX2dldENvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgb3ZlcmZsb3cgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5vdmVyZmxvdyxcbiAgICAgIG92ZXJmbG93WCA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93WCxcbiAgICAgIG92ZXJmbG93WSA9IF9nZXRDb21wdXRlZFN0eWxlLm92ZXJmbG93WTtcblxuICByZXR1cm4gL2F1dG98c2Nyb2xsfG92ZXJsYXl8aGlkZGVuLy50ZXN0KG92ZXJmbG93ICsgb3ZlcmZsb3dZICsgb3ZlcmZsb3dYKTtcbn0iLCAiaW1wb3J0IGdldFBhcmVudE5vZGUgZnJvbSBcIi4vZ2V0UGFyZW50Tm9kZS5qc1wiO1xuaW1wb3J0IGlzU2Nyb2xsUGFyZW50IGZyb20gXCIuL2lzU2Nyb2xsUGFyZW50LmpzXCI7XG5pbXBvcnQgZ2V0Tm9kZU5hbWUgZnJvbSBcIi4vZ2V0Tm9kZU5hbWUuanNcIjtcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9pbnN0YW5jZU9mLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRTY3JvbGxQYXJlbnQobm9kZSkge1xuICBpZiAoWydodG1sJywgJ2JvZHknLCAnI2RvY3VtZW50J10uaW5kZXhPZihnZXROb2RlTmFtZShub2RlKSkgPj0gMCkge1xuICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl06IGFzc3VtZSBib2R5IGlzIGFsd2F5cyBhdmFpbGFibGVcbiAgICByZXR1cm4gbm9kZS5vd25lckRvY3VtZW50LmJvZHk7XG4gIH1cblxuICBpZiAoaXNIVE1MRWxlbWVudChub2RlKSAmJiBpc1Njcm9sbFBhcmVudChub2RlKSkge1xuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgcmV0dXJuIGdldFNjcm9sbFBhcmVudChnZXRQYXJlbnROb2RlKG5vZGUpKTtcbn0iLCAiaW1wb3J0IGdldFNjcm9sbFBhcmVudCBmcm9tIFwiLi9nZXRTY3JvbGxQYXJlbnQuanNcIjtcbmltcG9ydCBnZXRQYXJlbnROb2RlIGZyb20gXCIuL2dldFBhcmVudE5vZGUuanNcIjtcbmltcG9ydCBnZXRXaW5kb3cgZnJvbSBcIi4vZ2V0V2luZG93LmpzXCI7XG5pbXBvcnQgaXNTY3JvbGxQYXJlbnQgZnJvbSBcIi4vaXNTY3JvbGxQYXJlbnQuanNcIjtcbi8qXG5naXZlbiBhIERPTSBlbGVtZW50LCByZXR1cm4gdGhlIGxpc3Qgb2YgYWxsIHNjcm9sbCBwYXJlbnRzLCB1cCB0aGUgbGlzdCBvZiBhbmNlc29yc1xudW50aWwgd2UgZ2V0IHRvIHRoZSB0b3Agd2luZG93IG9iamVjdC4gVGhpcyBsaXN0IGlzIHdoYXQgd2UgYXR0YWNoIHNjcm9sbCBsaXN0ZW5lcnNcbnRvLCBiZWNhdXNlIGlmIGFueSBvZiB0aGVzZSBwYXJlbnQgZWxlbWVudHMgc2Nyb2xsLCB3ZSdsbCBuZWVkIHRvIHJlLWNhbGN1bGF0ZSB0aGVcbnJlZmVyZW5jZSBlbGVtZW50J3MgcG9zaXRpb24uXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsaXN0U2Nyb2xsUGFyZW50cyhlbGVtZW50LCBsaXN0KSB7XG4gIHZhciBfZWxlbWVudCRvd25lckRvY3VtZW47XG5cbiAgaWYgKGxpc3QgPT09IHZvaWQgMCkge1xuICAgIGxpc3QgPSBbXTtcbiAgfVxuXG4gIHZhciBzY3JvbGxQYXJlbnQgPSBnZXRTY3JvbGxQYXJlbnQoZWxlbWVudCk7XG4gIHZhciBpc0JvZHkgPSBzY3JvbGxQYXJlbnQgPT09ICgoX2VsZW1lbnQkb3duZXJEb2N1bWVuID0gZWxlbWVudC5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2VsZW1lbnQkb3duZXJEb2N1bWVuLmJvZHkpO1xuICB2YXIgd2luID0gZ2V0V2luZG93KHNjcm9sbFBhcmVudCk7XG4gIHZhciB0YXJnZXQgPSBpc0JvZHkgPyBbd2luXS5jb25jYXQod2luLnZpc3VhbFZpZXdwb3J0IHx8IFtdLCBpc1Njcm9sbFBhcmVudChzY3JvbGxQYXJlbnQpID8gc2Nyb2xsUGFyZW50IDogW10pIDogc2Nyb2xsUGFyZW50O1xuICB2YXIgdXBkYXRlZExpc3QgPSBsaXN0LmNvbmNhdCh0YXJnZXQpO1xuICByZXR1cm4gaXNCb2R5ID8gdXBkYXRlZExpc3QgOiAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXTogaXNCb2R5IHRlbGxzIHVzIHRhcmdldCB3aWxsIGJlIGFuIEhUTUxFbGVtZW50IGhlcmVcbiAgdXBkYXRlZExpc3QuY29uY2F0KGxpc3RTY3JvbGxQYXJlbnRzKGdldFBhcmVudE5vZGUodGFyZ2V0KSkpO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZWN0VG9DbGllbnRSZWN0KHJlY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHJlY3QsIHtcbiAgICBsZWZ0OiByZWN0LngsXG4gICAgdG9wOiByZWN0LnksXG4gICAgcmlnaHQ6IHJlY3QueCArIHJlY3Qud2lkdGgsXG4gICAgYm90dG9tOiByZWN0LnkgKyByZWN0LmhlaWdodFxuICB9KTtcbn0iLCAiaW1wb3J0IHsgdmlld3BvcnQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRWaWV3cG9ydFJlY3QgZnJvbSBcIi4vZ2V0Vmlld3BvcnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0RG9jdW1lbnRSZWN0IGZyb20gXCIuL2dldERvY3VtZW50UmVjdC5qc1wiO1xuaW1wb3J0IGxpc3RTY3JvbGxQYXJlbnRzIGZyb20gXCIuL2xpc3RTY3JvbGxQYXJlbnRzLmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBnZXRDb21wdXRlZFN0eWxlIGZyb20gXCIuL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCB7IGlzRWxlbWVudCwgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgZnJvbSBcIi4vZ2V0Qm91bmRpbmdDbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0UGFyZW50Tm9kZSBmcm9tIFwiLi9nZXRQYXJlbnROb2RlLmpzXCI7XG5pbXBvcnQgY29udGFpbnMgZnJvbSBcIi4vY29udGFpbnMuanNcIjtcbmltcG9ydCBnZXROb2RlTmFtZSBmcm9tIFwiLi9nZXROb2RlTmFtZS5qc1wiO1xuaW1wb3J0IHJlY3RUb0NsaWVudFJlY3QgZnJvbSBcIi4uL3V0aWxzL3JlY3RUb0NsaWVudFJlY3QuanNcIjtcbmltcG9ydCB7IG1heCwgbWluIH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcblxuZnVuY3Rpb24gZ2V0SW5uZXJCb3VuZGluZ0NsaWVudFJlY3QoZWxlbWVudCkge1xuICB2YXIgcmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50KTtcbiAgcmVjdC50b3AgPSByZWN0LnRvcCArIGVsZW1lbnQuY2xpZW50VG9wO1xuICByZWN0LmxlZnQgPSByZWN0LmxlZnQgKyBlbGVtZW50LmNsaWVudExlZnQ7XG4gIHJlY3QuYm90dG9tID0gcmVjdC50b3AgKyBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgcmVjdC5yaWdodCA9IHJlY3QubGVmdCArIGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gIHJlY3Qud2lkdGggPSBlbGVtZW50LmNsaWVudFdpZHRoO1xuICByZWN0LmhlaWdodCA9IGVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICByZWN0LnggPSByZWN0LmxlZnQ7XG4gIHJlY3QueSA9IHJlY3QudG9wO1xuICByZXR1cm4gcmVjdDtcbn1cblxuZnVuY3Rpb24gZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgY2xpcHBpbmdQYXJlbnQpIHtcbiAgcmV0dXJuIGNsaXBwaW5nUGFyZW50ID09PSB2aWV3cG9ydCA/IHJlY3RUb0NsaWVudFJlY3QoZ2V0Vmlld3BvcnRSZWN0KGVsZW1lbnQpKSA6IGlzRWxlbWVudChjbGlwcGluZ1BhcmVudCkgPyBnZXRJbm5lckJvdW5kaW5nQ2xpZW50UmVjdChjbGlwcGluZ1BhcmVudCkgOiByZWN0VG9DbGllbnRSZWN0KGdldERvY3VtZW50UmVjdChnZXREb2N1bWVudEVsZW1lbnQoZWxlbWVudCkpKTtcbn0gLy8gQSBcImNsaXBwaW5nIHBhcmVudFwiIGlzIGFuIG92ZXJmbG93YWJsZSBjb250YWluZXIgd2l0aCB0aGUgY2hhcmFjdGVyaXN0aWMgb2Zcbi8vIGNsaXBwaW5nIChvciBoaWRpbmcpIG92ZXJmbG93aW5nIGVsZW1lbnRzIHdpdGggYSBwb3NpdGlvbiBkaWZmZXJlbnQgZnJvbVxuLy8gYGluaXRpYWxgXG5cblxuZnVuY3Rpb24gZ2V0Q2xpcHBpbmdQYXJlbnRzKGVsZW1lbnQpIHtcbiAgdmFyIGNsaXBwaW5nUGFyZW50cyA9IGxpc3RTY3JvbGxQYXJlbnRzKGdldFBhcmVudE5vZGUoZWxlbWVudCkpO1xuICB2YXIgY2FuRXNjYXBlQ2xpcHBpbmcgPSBbJ2Fic29sdXRlJywgJ2ZpeGVkJ10uaW5kZXhPZihnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLnBvc2l0aW9uKSA+PSAwO1xuICB2YXIgY2xpcHBlckVsZW1lbnQgPSBjYW5Fc2NhcGVDbGlwcGluZyAmJiBpc0hUTUxFbGVtZW50KGVsZW1lbnQpID8gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpIDogZWxlbWVudDtcblxuICBpZiAoIWlzRWxlbWVudChjbGlwcGVyRWxlbWVudCkpIHtcbiAgICByZXR1cm4gW107XG4gIH0gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtcmV0dXJuXTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzE0MTRcblxuXG4gIHJldHVybiBjbGlwcGluZ1BhcmVudHMuZmlsdGVyKGZ1bmN0aW9uIChjbGlwcGluZ1BhcmVudCkge1xuICAgIHJldHVybiBpc0VsZW1lbnQoY2xpcHBpbmdQYXJlbnQpICYmIGNvbnRhaW5zKGNsaXBwaW5nUGFyZW50LCBjbGlwcGVyRWxlbWVudCkgJiYgZ2V0Tm9kZU5hbWUoY2xpcHBpbmdQYXJlbnQpICE9PSAnYm9keSc7XG4gIH0pO1xufSAvLyBHZXRzIHRoZSBtYXhpbXVtIGFyZWEgdGhhdCB0aGUgZWxlbWVudCBpcyB2aXNpYmxlIGluIGR1ZSB0byBhbnkgbnVtYmVyIG9mXG4vLyBjbGlwcGluZyBwYXJlbnRzXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q2xpcHBpbmdSZWN0KGVsZW1lbnQsIGJvdW5kYXJ5LCByb290Qm91bmRhcnkpIHtcbiAgdmFyIG1haW5DbGlwcGluZ1BhcmVudHMgPSBib3VuZGFyeSA9PT0gJ2NsaXBwaW5nUGFyZW50cycgPyBnZXRDbGlwcGluZ1BhcmVudHMoZWxlbWVudCkgOiBbXS5jb25jYXQoYm91bmRhcnkpO1xuICB2YXIgY2xpcHBpbmdQYXJlbnRzID0gW10uY29uY2F0KG1haW5DbGlwcGluZ1BhcmVudHMsIFtyb290Qm91bmRhcnldKTtcbiAgdmFyIGZpcnN0Q2xpcHBpbmdQYXJlbnQgPSBjbGlwcGluZ1BhcmVudHNbMF07XG4gIHZhciBjbGlwcGluZ1JlY3QgPSBjbGlwcGluZ1BhcmVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2NSZWN0LCBjbGlwcGluZ1BhcmVudCkge1xuICAgIHZhciByZWN0ID0gZ2V0Q2xpZW50UmVjdEZyb21NaXhlZFR5cGUoZWxlbWVudCwgY2xpcHBpbmdQYXJlbnQpO1xuICAgIGFjY1JlY3QudG9wID0gbWF4KHJlY3QudG9wLCBhY2NSZWN0LnRvcCk7XG4gICAgYWNjUmVjdC5yaWdodCA9IG1pbihyZWN0LnJpZ2h0LCBhY2NSZWN0LnJpZ2h0KTtcbiAgICBhY2NSZWN0LmJvdHRvbSA9IG1pbihyZWN0LmJvdHRvbSwgYWNjUmVjdC5ib3R0b20pO1xuICAgIGFjY1JlY3QubGVmdCA9IG1heChyZWN0LmxlZnQsIGFjY1JlY3QubGVmdCk7XG4gICAgcmV0dXJuIGFjY1JlY3Q7XG4gIH0sIGdldENsaWVudFJlY3RGcm9tTWl4ZWRUeXBlKGVsZW1lbnQsIGZpcnN0Q2xpcHBpbmdQYXJlbnQpKTtcbiAgY2xpcHBpbmdSZWN0LndpZHRoID0gY2xpcHBpbmdSZWN0LnJpZ2h0IC0gY2xpcHBpbmdSZWN0LmxlZnQ7XG4gIGNsaXBwaW5nUmVjdC5oZWlnaHQgPSBjbGlwcGluZ1JlY3QuYm90dG9tIC0gY2xpcHBpbmdSZWN0LnRvcDtcbiAgY2xpcHBpbmdSZWN0LnggPSBjbGlwcGluZ1JlY3QubGVmdDtcbiAgY2xpcHBpbmdSZWN0LnkgPSBjbGlwcGluZ1JlY3QudG9wO1xuICByZXR1cm4gY2xpcHBpbmdSZWN0O1xufSIsICJpbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IGdldE1haW5BeGlzRnJvbVBsYWNlbWVudCBmcm9tIFwiLi9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCwgc3RhcnQsIGVuZCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29tcHV0ZU9mZnNldHMoX3JlZikge1xuICB2YXIgcmVmZXJlbmNlID0gX3JlZi5yZWZlcmVuY2UsXG4gICAgICBlbGVtZW50ID0gX3JlZi5lbGVtZW50LFxuICAgICAgcGxhY2VtZW50ID0gX3JlZi5wbGFjZW1lbnQ7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gcGxhY2VtZW50ID8gZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpIDogbnVsbDtcbiAgdmFyIHZhcmlhdGlvbiA9IHBsYWNlbWVudCA/IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpIDogbnVsbDtcbiAgdmFyIGNvbW1vblggPSByZWZlcmVuY2UueCArIHJlZmVyZW5jZS53aWR0aCAvIDIgLSBlbGVtZW50LndpZHRoIC8gMjtcbiAgdmFyIGNvbW1vblkgPSByZWZlcmVuY2UueSArIHJlZmVyZW5jZS5oZWlnaHQgLyAyIC0gZWxlbWVudC5oZWlnaHQgLyAyO1xuICB2YXIgb2Zmc2V0cztcblxuICBzd2l0Y2ggKGJhc2VQbGFjZW1lbnQpIHtcbiAgICBjYXNlIHRvcDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IGNvbW1vblgsXG4gICAgICAgIHk6IHJlZmVyZW5jZS55IC0gZWxlbWVudC5oZWlnaHRcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgYm90dG9tOlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogY29tbW9uWCxcbiAgICAgICAgeTogcmVmZXJlbmNlLnkgKyByZWZlcmVuY2UuaGVpZ2h0XG4gICAgICB9O1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIHJpZ2h0OlxuICAgICAgb2Zmc2V0cyA9IHtcbiAgICAgICAgeDogcmVmZXJlbmNlLnggKyByZWZlcmVuY2Uud2lkdGgsXG4gICAgICAgIHk6IGNvbW1vbllcbiAgICAgIH07XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgbGVmdDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54IC0gZWxlbWVudC53aWR0aCxcbiAgICAgICAgeTogY29tbW9uWVxuICAgICAgfTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIG9mZnNldHMgPSB7XG4gICAgICAgIHg6IHJlZmVyZW5jZS54LFxuICAgICAgICB5OiByZWZlcmVuY2UueVxuICAgICAgfTtcbiAgfVxuXG4gIHZhciBtYWluQXhpcyA9IGJhc2VQbGFjZW1lbnQgPyBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQoYmFzZVBsYWNlbWVudCkgOiBudWxsO1xuXG4gIGlmIChtYWluQXhpcyAhPSBudWxsKSB7XG4gICAgdmFyIGxlbiA9IG1haW5BeGlzID09PSAneScgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgICBzd2l0Y2ggKHZhcmlhdGlvbikge1xuICAgICAgY2FzZSBzdGFydDpcbiAgICAgICAgb2Zmc2V0c1ttYWluQXhpc10gPSBvZmZzZXRzW21haW5BeGlzXSAtIChyZWZlcmVuY2VbbGVuXSAvIDIgLSBlbGVtZW50W2xlbl0gLyAyKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgZW5kOlxuICAgICAgICBvZmZzZXRzW21haW5BeGlzXSA9IG9mZnNldHNbbWFpbkF4aXNdICsgKHJlZmVyZW5jZVtsZW5dIC8gMiAtIGVsZW1lbnRbbGVuXSAvIDIpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2Zmc2V0cztcbn0iLCAiaW1wb3J0IGdldENsaXBwaW5nUmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldENsaXBwaW5nUmVjdC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldERvY3VtZW50RWxlbWVudC5qc1wiO1xuaW1wb3J0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBmcm9tIFwiLi4vZG9tLXV0aWxzL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGNvbXB1dGVPZmZzZXRzIGZyb20gXCIuL2NvbXB1dGVPZmZzZXRzLmpzXCI7XG5pbXBvcnQgcmVjdFRvQ2xpZW50UmVjdCBmcm9tIFwiLi9yZWN0VG9DbGllbnRSZWN0LmpzXCI7XG5pbXBvcnQgeyBjbGlwcGluZ1BhcmVudHMsIHJlZmVyZW5jZSwgcG9wcGVyLCBib3R0b20sIHRvcCwgcmlnaHQsIGJhc2VQbGFjZW1lbnRzLCB2aWV3cG9ydCB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IHsgaXNFbGVtZW50IH0gZnJvbSBcIi4uL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgbWVyZ2VQYWRkaW5nT2JqZWN0IGZyb20gXCIuL21lcmdlUGFkZGluZ09iamVjdC5qc1wiO1xuaW1wb3J0IGV4cGFuZFRvSGFzaE1hcCBmcm9tIFwiLi9leHBhbmRUb0hhc2hNYXAuanNcIjsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIF9vcHRpb25zJHBsYWNlbWVudCA9IF9vcHRpb25zLnBsYWNlbWVudCxcbiAgICAgIHBsYWNlbWVudCA9IF9vcHRpb25zJHBsYWNlbWVudCA9PT0gdm9pZCAwID8gc3RhdGUucGxhY2VtZW50IDogX29wdGlvbnMkcGxhY2VtZW50LFxuICAgICAgX29wdGlvbnMkYm91bmRhcnkgPSBfb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIGJvdW5kYXJ5ID0gX29wdGlvbnMkYm91bmRhcnkgPT09IHZvaWQgMCA/IGNsaXBwaW5nUGFyZW50cyA6IF9vcHRpb25zJGJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkcm9vdEJvdW5kYXJ5ID0gX29wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gX29wdGlvbnMkcm9vdEJvdW5kYXJ5ID09PSB2b2lkIDAgPyB2aWV3cG9ydCA6IF9vcHRpb25zJHJvb3RCb3VuZGFyeSxcbiAgICAgIF9vcHRpb25zJGVsZW1lbnRDb250ZSA9IF9vcHRpb25zLmVsZW1lbnRDb250ZXh0LFxuICAgICAgZWxlbWVudENvbnRleHQgPSBfb3B0aW9ucyRlbGVtZW50Q29udGUgPT09IHZvaWQgMCA/IHBvcHBlciA6IF9vcHRpb25zJGVsZW1lbnRDb250ZSxcbiAgICAgIF9vcHRpb25zJGFsdEJvdW5kYXJ5ID0gX29wdGlvbnMuYWx0Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeSA9IF9vcHRpb25zJGFsdEJvdW5kYXJ5ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9vcHRpb25zJGFsdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkcGFkZGluZyA9IF9vcHRpb25zLnBhZGRpbmcsXG4gICAgICBwYWRkaW5nID0gX29wdGlvbnMkcGFkZGluZyA9PT0gdm9pZCAwID8gMCA6IF9vcHRpb25zJHBhZGRpbmc7XG4gIHZhciBwYWRkaW5nT2JqZWN0ID0gbWVyZ2VQYWRkaW5nT2JqZWN0KHR5cGVvZiBwYWRkaW5nICE9PSAnbnVtYmVyJyA/IHBhZGRpbmcgOiBleHBhbmRUb0hhc2hNYXAocGFkZGluZywgYmFzZVBsYWNlbWVudHMpKTtcbiAgdmFyIGFsdENvbnRleHQgPSBlbGVtZW50Q29udGV4dCA9PT0gcG9wcGVyID8gcmVmZXJlbmNlIDogcG9wcGVyO1xuICB2YXIgcG9wcGVyUmVjdCA9IHN0YXRlLnJlY3RzLnBvcHBlcjtcbiAgdmFyIGVsZW1lbnQgPSBzdGF0ZS5lbGVtZW50c1thbHRCb3VuZGFyeSA/IGFsdENvbnRleHQgOiBlbGVtZW50Q29udGV4dF07XG4gIHZhciBjbGlwcGluZ0NsaWVudFJlY3QgPSBnZXRDbGlwcGluZ1JlY3QoaXNFbGVtZW50KGVsZW1lbnQpID8gZWxlbWVudCA6IGVsZW1lbnQuY29udGV4dEVsZW1lbnQgfHwgZ2V0RG9jdW1lbnRFbGVtZW50KHN0YXRlLmVsZW1lbnRzLnBvcHBlciksIGJvdW5kYXJ5LCByb290Qm91bmRhcnkpO1xuICB2YXIgcmVmZXJlbmNlQ2xpZW50UmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChzdGF0ZS5lbGVtZW50cy5yZWZlcmVuY2UpO1xuICB2YXIgcG9wcGVyT2Zmc2V0cyA9IGNvbXB1dGVPZmZzZXRzKHtcbiAgICByZWZlcmVuY2U6IHJlZmVyZW5jZUNsaWVudFJlY3QsXG4gICAgZWxlbWVudDogcG9wcGVyUmVjdCxcbiAgICBzdHJhdGVneTogJ2Fic29sdXRlJyxcbiAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudFxuICB9KTtcbiAgdmFyIHBvcHBlckNsaWVudFJlY3QgPSByZWN0VG9DbGllbnRSZWN0KE9iamVjdC5hc3NpZ24oe30sIHBvcHBlclJlY3QsIHBvcHBlck9mZnNldHMpKTtcbiAgdmFyIGVsZW1lbnRDbGllbnRSZWN0ID0gZWxlbWVudENvbnRleHQgPT09IHBvcHBlciA/IHBvcHBlckNsaWVudFJlY3QgOiByZWZlcmVuY2VDbGllbnRSZWN0OyAvLyBwb3NpdGl2ZSA9IG92ZXJmbG93aW5nIHRoZSBjbGlwcGluZyByZWN0XG4gIC8vIDAgb3IgbmVnYXRpdmUgPSB3aXRoaW4gdGhlIGNsaXBwaW5nIHJlY3RcblxuICB2YXIgb3ZlcmZsb3dPZmZzZXRzID0ge1xuICAgIHRvcDogY2xpcHBpbmdDbGllbnRSZWN0LnRvcCAtIGVsZW1lbnRDbGllbnRSZWN0LnRvcCArIHBhZGRpbmdPYmplY3QudG9wLFxuICAgIGJvdHRvbTogZWxlbWVudENsaWVudFJlY3QuYm90dG9tIC0gY2xpcHBpbmdDbGllbnRSZWN0LmJvdHRvbSArIHBhZGRpbmdPYmplY3QuYm90dG9tLFxuICAgIGxlZnQ6IGNsaXBwaW5nQ2xpZW50UmVjdC5sZWZ0IC0gZWxlbWVudENsaWVudFJlY3QubGVmdCArIHBhZGRpbmdPYmplY3QubGVmdCxcbiAgICByaWdodDogZWxlbWVudENsaWVudFJlY3QucmlnaHQgLSBjbGlwcGluZ0NsaWVudFJlY3QucmlnaHQgKyBwYWRkaW5nT2JqZWN0LnJpZ2h0XG4gIH07XG4gIHZhciBvZmZzZXREYXRhID0gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXQ7IC8vIE9mZnNldHMgY2FuIGJlIGFwcGxpZWQgb25seSB0byB0aGUgcG9wcGVyIGVsZW1lbnRcblxuICBpZiAoZWxlbWVudENvbnRleHQgPT09IHBvcHBlciAmJiBvZmZzZXREYXRhKSB7XG4gICAgdmFyIG9mZnNldCA9IG9mZnNldERhdGFbcGxhY2VtZW50XTtcbiAgICBPYmplY3Qua2V5cyhvdmVyZmxvd09mZnNldHMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIG11bHRpcGx5ID0gW3JpZ2h0LCBib3R0b21dLmluZGV4T2Yoa2V5KSA+PSAwID8gMSA6IC0xO1xuICAgICAgdmFyIGF4aXMgPSBbdG9wLCBib3R0b21dLmluZGV4T2Yoa2V5KSA+PSAwID8gJ3knIDogJ3gnO1xuICAgICAgb3ZlcmZsb3dPZmZzZXRzW2tleV0gKz0gb2Zmc2V0W2F4aXNdICogbXVsdGlwbHk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb3ZlcmZsb3dPZmZzZXRzO1xufSIsICJpbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuL2dldFZhcmlhdGlvbi5qc1wiO1xuaW1wb3J0IHsgdmFyaWF0aW9uUGxhY2VtZW50cywgYmFzZVBsYWNlbWVudHMsIHBsYWNlbWVudHMgYXMgYWxsUGxhY2VtZW50cyB9IGZyb20gXCIuLi9lbnVtcy5qc1wiO1xuaW1wb3J0IGRldGVjdE92ZXJmbG93IGZyb20gXCIuL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb21wdXRlQXV0b1BsYWNlbWVudChzdGF0ZSwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgdmFyIF9vcHRpb25zID0gb3B0aW9ucyxcbiAgICAgIHBsYWNlbWVudCA9IF9vcHRpb25zLnBsYWNlbWVudCxcbiAgICAgIGJvdW5kYXJ5ID0gX29wdGlvbnMuYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnkgPSBfb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nID0gX29wdGlvbnMucGFkZGluZyxcbiAgICAgIGZsaXBWYXJpYXRpb25zID0gX29wdGlvbnMuZmxpcFZhcmlhdGlvbnMsXG4gICAgICBfb3B0aW9ucyRhbGxvd2VkQXV0b1AgPSBfb3B0aW9ucy5hbGxvd2VkQXV0b1BsYWNlbWVudHMsXG4gICAgICBhbGxvd2VkQXV0b1BsYWNlbWVudHMgPSBfb3B0aW9ucyRhbGxvd2VkQXV0b1AgPT09IHZvaWQgMCA/IGFsbFBsYWNlbWVudHMgOiBfb3B0aW9ucyRhbGxvd2VkQXV0b1A7XG4gIHZhciB2YXJpYXRpb24gPSBnZXRWYXJpYXRpb24ocGxhY2VtZW50KTtcbiAgdmFyIHBsYWNlbWVudHMgPSB2YXJpYXRpb24gPyBmbGlwVmFyaWF0aW9ucyA/IHZhcmlhdGlvblBsYWNlbWVudHMgOiB2YXJpYXRpb25QbGFjZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAocGxhY2VtZW50KSB7XG4gICAgcmV0dXJuIGdldFZhcmlhdGlvbihwbGFjZW1lbnQpID09PSB2YXJpYXRpb247XG4gIH0pIDogYmFzZVBsYWNlbWVudHM7XG4gIHZhciBhbGxvd2VkUGxhY2VtZW50cyA9IHBsYWNlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChwbGFjZW1lbnQpIHtcbiAgICByZXR1cm4gYWxsb3dlZEF1dG9QbGFjZW1lbnRzLmluZGV4T2YocGxhY2VtZW50KSA+PSAwO1xuICB9KTtcblxuICBpZiAoYWxsb3dlZFBsYWNlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgYWxsb3dlZFBsYWNlbWVudHMgPSBwbGFjZW1lbnRzO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgY29uc29sZS5lcnJvcihbJ1BvcHBlcjogVGhlIGBhbGxvd2VkQXV0b1BsYWNlbWVudHNgIG9wdGlvbiBkaWQgbm90IGFsbG93IGFueScsICdwbGFjZW1lbnRzLiBFbnN1cmUgdGhlIGBwbGFjZW1lbnRgIG9wdGlvbiBtYXRjaGVzIHRoZSB2YXJpYXRpb24nLCAnb2YgdGhlIGFsbG93ZWQgcGxhY2VtZW50cy4nLCAnRm9yIGV4YW1wbGUsIFwiYXV0b1wiIGNhbm5vdCBiZSB1c2VkIHRvIGFsbG93IFwiYm90dG9tLXN0YXJ0XCIuJywgJ1VzZSBcImF1dG8tc3RhcnRcIiBpbnN0ZWFkLiddLmpvaW4oJyAnKSk7XG4gICAgfVxuICB9IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdOiBGbG93IHNlZW1zIHRvIGhhdmUgcHJvYmxlbXMgd2l0aCB0d28gYXJyYXkgdW5pb25zLi4uXG5cblxuICB2YXIgb3ZlcmZsb3dzID0gYWxsb3dlZFBsYWNlbWVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBsYWNlbWVudCkge1xuICAgIGFjY1twbGFjZW1lbnRdID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nXG4gICAgfSlbZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpXTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG4gIHJldHVybiBPYmplY3Qua2V5cyhvdmVyZmxvd3MpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gb3ZlcmZsb3dzW2FdIC0gb3ZlcmZsb3dzW2JdO1xuICB9KTtcbn0iLCAiaW1wb3J0IGdldE9wcG9zaXRlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRPcHBvc2l0ZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4uL3V0aWxzL2dldEJhc2VQbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCBjb21wdXRlQXV0b1BsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvY29tcHV0ZUF1dG9QbGFjZW1lbnQuanNcIjtcbmltcG9ydCB7IGJvdHRvbSwgdG9wLCBzdGFydCwgcmlnaHQsIGxlZnQsIGF1dG8gfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRWYXJpYXRpb24gZnJvbSBcIi4uL3V0aWxzL2dldFZhcmlhdGlvbi5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmZ1bmN0aW9uIGdldEV4cGFuZGVkRmFsbGJhY2tQbGFjZW1lbnRzKHBsYWNlbWVudCkge1xuICBpZiAoZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpID09PSBhdXRvKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgdmFyIG9wcG9zaXRlUGxhY2VtZW50ID0gZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocGxhY2VtZW50KTtcbiAgcmV0dXJuIFtnZXRPcHBvc2l0ZVZhcmlhdGlvblBsYWNlbWVudChwbGFjZW1lbnQpLCBvcHBvc2l0ZVBsYWNlbWVudCwgZ2V0T3Bwb3NpdGVWYXJpYXRpb25QbGFjZW1lbnQob3Bwb3NpdGVQbGFjZW1lbnQpXTtcbn1cblxuZnVuY3Rpb24gZmxpcChfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcblxuICBpZiAoc3RhdGUubW9kaWZpZXJzRGF0YVtuYW1lXS5fc2tpcCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyRtYWluQXhpcyA9IG9wdGlvbnMubWFpbkF4aXMsXG4gICAgICBjaGVja01haW5BeGlzID0gX29wdGlvbnMkbWFpbkF4aXMgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRtYWluQXhpcyxcbiAgICAgIF9vcHRpb25zJGFsdEF4aXMgPSBvcHRpb25zLmFsdEF4aXMsXG4gICAgICBjaGVja0FsdEF4aXMgPSBfb3B0aW9ucyRhbHRBeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkYWx0QXhpcyxcbiAgICAgIHNwZWNpZmllZEZhbGxiYWNrUGxhY2VtZW50cyA9IG9wdGlvbnMuZmFsbGJhY2tQbGFjZW1lbnRzLFxuICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyxcbiAgICAgIGJvdW5kYXJ5ID0gb3B0aW9ucy5ib3VuZGFyeSxcbiAgICAgIHJvb3RCb3VuZGFyeSA9IG9wdGlvbnMucm9vdEJvdW5kYXJ5LFxuICAgICAgYWx0Qm91bmRhcnkgPSBvcHRpb25zLmFsdEJvdW5kYXJ5LFxuICAgICAgX29wdGlvbnMkZmxpcFZhcmlhdGlvID0gb3B0aW9ucy5mbGlwVmFyaWF0aW9ucyxcbiAgICAgIGZsaXBWYXJpYXRpb25zID0gX29wdGlvbnMkZmxpcFZhcmlhdGlvID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkZmxpcFZhcmlhdGlvLFxuICAgICAgYWxsb3dlZEF1dG9QbGFjZW1lbnRzID0gb3B0aW9ucy5hbGxvd2VkQXV0b1BsYWNlbWVudHM7XG4gIHZhciBwcmVmZXJyZWRQbGFjZW1lbnQgPSBzdGF0ZS5vcHRpb25zLnBsYWNlbWVudDtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHByZWZlcnJlZFBsYWNlbWVudCk7XG4gIHZhciBpc0Jhc2VQbGFjZW1lbnQgPSBiYXNlUGxhY2VtZW50ID09PSBwcmVmZXJyZWRQbGFjZW1lbnQ7XG4gIHZhciBmYWxsYmFja1BsYWNlbWVudHMgPSBzcGVjaWZpZWRGYWxsYmFja1BsYWNlbWVudHMgfHwgKGlzQmFzZVBsYWNlbWVudCB8fCAhZmxpcFZhcmlhdGlvbnMgPyBbZ2V0T3Bwb3NpdGVQbGFjZW1lbnQocHJlZmVycmVkUGxhY2VtZW50KV0gOiBnZXRFeHBhbmRlZEZhbGxiYWNrUGxhY2VtZW50cyhwcmVmZXJyZWRQbGFjZW1lbnQpKTtcbiAgdmFyIHBsYWNlbWVudHMgPSBbcHJlZmVycmVkUGxhY2VtZW50XS5jb25jYXQoZmFsbGJhY2tQbGFjZW1lbnRzKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcGxhY2VtZW50KSB7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoZ2V0QmFzZVBsYWNlbWVudChwbGFjZW1lbnQpID09PSBhdXRvID8gY29tcHV0ZUF1dG9QbGFjZW1lbnQoc3RhdGUsIHtcbiAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgYm91bmRhcnk6IGJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgICBwYWRkaW5nOiBwYWRkaW5nLFxuICAgICAgZmxpcFZhcmlhdGlvbnM6IGZsaXBWYXJpYXRpb25zLFxuICAgICAgYWxsb3dlZEF1dG9QbGFjZW1lbnRzOiBhbGxvd2VkQXV0b1BsYWNlbWVudHNcbiAgICB9KSA6IHBsYWNlbWVudCk7XG4gIH0sIFtdKTtcbiAgdmFyIHJlZmVyZW5jZVJlY3QgPSBzdGF0ZS5yZWN0cy5yZWZlcmVuY2U7XG4gIHZhciBwb3BwZXJSZWN0ID0gc3RhdGUucmVjdHMucG9wcGVyO1xuICB2YXIgY2hlY2tzTWFwID0gbmV3IE1hcCgpO1xuICB2YXIgbWFrZUZhbGxiYWNrQ2hlY2tzID0gdHJ1ZTtcbiAgdmFyIGZpcnN0Rml0dGluZ1BsYWNlbWVudCA9IHBsYWNlbWVudHNbMF07XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGFjZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBsYWNlbWVudCA9IHBsYWNlbWVudHNbaV07XG5cbiAgICB2YXIgX2Jhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCk7XG5cbiAgICB2YXIgaXNTdGFydFZhcmlhdGlvbiA9IGdldFZhcmlhdGlvbihwbGFjZW1lbnQpID09PSBzdGFydDtcbiAgICB2YXIgaXNWZXJ0aWNhbCA9IFt0b3AsIGJvdHRvbV0uaW5kZXhPZihfYmFzZVBsYWNlbWVudCkgPj0gMDtcbiAgICB2YXIgbGVuID0gaXNWZXJ0aWNhbCA/ICd3aWR0aCcgOiAnaGVpZ2h0JztcbiAgICB2YXIgb3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsXG4gICAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgICByb290Qm91bmRhcnk6IHJvb3RCb3VuZGFyeSxcbiAgICAgIGFsdEJvdW5kYXJ5OiBhbHRCb3VuZGFyeSxcbiAgICAgIHBhZGRpbmc6IHBhZGRpbmdcbiAgICB9KTtcbiAgICB2YXIgbWFpblZhcmlhdGlvblNpZGUgPSBpc1ZlcnRpY2FsID8gaXNTdGFydFZhcmlhdGlvbiA/IHJpZ2h0IDogbGVmdCA6IGlzU3RhcnRWYXJpYXRpb24gPyBib3R0b20gOiB0b3A7XG5cbiAgICBpZiAocmVmZXJlbmNlUmVjdFtsZW5dID4gcG9wcGVyUmVjdFtsZW5dKSB7XG4gICAgICBtYWluVmFyaWF0aW9uU2lkZSA9IGdldE9wcG9zaXRlUGxhY2VtZW50KG1haW5WYXJpYXRpb25TaWRlKTtcbiAgICB9XG5cbiAgICB2YXIgYWx0VmFyaWF0aW9uU2lkZSA9IGdldE9wcG9zaXRlUGxhY2VtZW50KG1haW5WYXJpYXRpb25TaWRlKTtcbiAgICB2YXIgY2hlY2tzID0gW107XG5cbiAgICBpZiAoY2hlY2tNYWluQXhpcykge1xuICAgICAgY2hlY2tzLnB1c2gob3ZlcmZsb3dbX2Jhc2VQbGFjZW1lbnRdIDw9IDApO1xuICAgIH1cblxuICAgIGlmIChjaGVja0FsdEF4aXMpIHtcbiAgICAgIGNoZWNrcy5wdXNoKG92ZXJmbG93W21haW5WYXJpYXRpb25TaWRlXSA8PSAwLCBvdmVyZmxvd1thbHRWYXJpYXRpb25TaWRlXSA8PSAwKTtcbiAgICB9XG5cbiAgICBpZiAoY2hlY2tzLmV2ZXJ5KGZ1bmN0aW9uIChjaGVjaykge1xuICAgICAgcmV0dXJuIGNoZWNrO1xuICAgIH0pKSB7XG4gICAgICBmaXJzdEZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnQ7XG4gICAgICBtYWtlRmFsbGJhY2tDaGVja3MgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNoZWNrc01hcC5zZXQocGxhY2VtZW50LCBjaGVja3MpO1xuICB9XG5cbiAgaWYgKG1ha2VGYWxsYmFja0NoZWNrcykge1xuICAgIC8vIGAyYCBtYXkgYmUgZGVzaXJlZCBpbiBzb21lIGNhc2VzIFx1MjAxMyByZXNlYXJjaCBsYXRlclxuICAgIHZhciBudW1iZXJPZkNoZWNrcyA9IGZsaXBWYXJpYXRpb25zID8gMyA6IDE7XG5cbiAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChfaSkge1xuICAgICAgdmFyIGZpdHRpbmdQbGFjZW1lbnQgPSBwbGFjZW1lbnRzLmZpbmQoZnVuY3Rpb24gKHBsYWNlbWVudCkge1xuICAgICAgICB2YXIgY2hlY2tzID0gY2hlY2tzTWFwLmdldChwbGFjZW1lbnQpO1xuXG4gICAgICAgIGlmIChjaGVja3MpIHtcbiAgICAgICAgICByZXR1cm4gY2hlY2tzLnNsaWNlKDAsIF9pKS5ldmVyeShmdW5jdGlvbiAoY2hlY2spIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVjaztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChmaXR0aW5nUGxhY2VtZW50KSB7XG4gICAgICAgIGZpcnN0Rml0dGluZ1BsYWNlbWVudCA9IGZpdHRpbmdQbGFjZW1lbnQ7XG4gICAgICAgIHJldHVybiBcImJyZWFrXCI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvciAodmFyIF9pID0gbnVtYmVyT2ZDaGVja3M7IF9pID4gMDsgX2ktLSkge1xuICAgICAgdmFyIF9yZXQgPSBfbG9vcChfaSk7XG5cbiAgICAgIGlmIChfcmV0ID09PSBcImJyZWFrXCIpIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0ZS5wbGFjZW1lbnQgIT09IGZpcnN0Rml0dGluZ1BsYWNlbWVudCkge1xuICAgIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0uX3NraXAgPSB0cnVlO1xuICAgIHN0YXRlLnBsYWNlbWVudCA9IGZpcnN0Rml0dGluZ1BsYWNlbWVudDtcbiAgICBzdGF0ZS5yZXNldCA9IHRydWU7XG4gIH1cbn0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogJ2ZsaXAnLFxuICBlbmFibGVkOiB0cnVlLFxuICBwaGFzZTogJ21haW4nLFxuICBmbjogZmxpcCxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydvZmZzZXQnXSxcbiAgZGF0YToge1xuICAgIF9za2lwOiBmYWxzZVxuICB9XG59OyIsICJpbXBvcnQgeyB0b3AsIGJvdHRvbSwgbGVmdCwgcmlnaHQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBkZXRlY3RPdmVyZmxvdyBmcm9tIFwiLi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcblxuZnVuY3Rpb24gZ2V0U2lkZU9mZnNldHMob3ZlcmZsb3csIHJlY3QsIHByZXZlbnRlZE9mZnNldHMpIHtcbiAgaWYgKHByZXZlbnRlZE9mZnNldHMgPT09IHZvaWQgMCkge1xuICAgIHByZXZlbnRlZE9mZnNldHMgPSB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMFxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHRvcDogb3ZlcmZsb3cudG9wIC0gcmVjdC5oZWlnaHQgLSBwcmV2ZW50ZWRPZmZzZXRzLnksXG4gICAgcmlnaHQ6IG92ZXJmbG93LnJpZ2h0IC0gcmVjdC53aWR0aCArIHByZXZlbnRlZE9mZnNldHMueCxcbiAgICBib3R0b206IG92ZXJmbG93LmJvdHRvbSAtIHJlY3QuaGVpZ2h0ICsgcHJldmVudGVkT2Zmc2V0cy55LFxuICAgIGxlZnQ6IG92ZXJmbG93LmxlZnQgLSByZWN0LndpZHRoIC0gcHJldmVudGVkT2Zmc2V0cy54XG4gIH07XG59XG5cbmZ1bmN0aW9uIGlzQW55U2lkZUZ1bGx5Q2xpcHBlZChvdmVyZmxvdykge1xuICByZXR1cm4gW3RvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdF0uc29tZShmdW5jdGlvbiAoc2lkZSkge1xuICAgIHJldHVybiBvdmVyZmxvd1tzaWRlXSA+PSAwO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaGlkZShfcmVmKSB7XG4gIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciBwcmV2ZW50ZWRPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wcmV2ZW50T3ZlcmZsb3c7XG4gIHZhciByZWZlcmVuY2VPdmVyZmxvdyA9IGRldGVjdE92ZXJmbG93KHN0YXRlLCB7XG4gICAgZWxlbWVudENvbnRleHQ6ICdyZWZlcmVuY2UnXG4gIH0pO1xuICB2YXIgcG9wcGVyQWx0T3ZlcmZsb3cgPSBkZXRlY3RPdmVyZmxvdyhzdGF0ZSwge1xuICAgIGFsdEJvdW5kYXJ5OiB0cnVlXG4gIH0pO1xuICB2YXIgcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzID0gZ2V0U2lkZU9mZnNldHMocmVmZXJlbmNlT3ZlcmZsb3csIHJlZmVyZW5jZVJlY3QpO1xuICB2YXIgcG9wcGVyRXNjYXBlT2Zmc2V0cyA9IGdldFNpZGVPZmZzZXRzKHBvcHBlckFsdE92ZXJmbG93LCBwb3BwZXJSZWN0LCBwcmV2ZW50ZWRPZmZzZXRzKTtcbiAgdmFyIGlzUmVmZXJlbmNlSGlkZGVuID0gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0cyk7XG4gIHZhciBoYXNQb3BwZXJFc2NhcGVkID0gaXNBbnlTaWRlRnVsbHlDbGlwcGVkKHBvcHBlckVzY2FwZU9mZnNldHMpO1xuICBzdGF0ZS5tb2RpZmllcnNEYXRhW25hbWVdID0ge1xuICAgIHJlZmVyZW5jZUNsaXBwaW5nT2Zmc2V0czogcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzLFxuICAgIHBvcHBlckVzY2FwZU9mZnNldHM6IHBvcHBlckVzY2FwZU9mZnNldHMsXG4gICAgaXNSZWZlcmVuY2VIaWRkZW46IGlzUmVmZXJlbmNlSGlkZGVuLFxuICAgIGhhc1BvcHBlckVzY2FwZWQ6IGhhc1BvcHBlckVzY2FwZWRcbiAgfTtcbiAgc3RhdGUuYXR0cmlidXRlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5hdHRyaWJ1dGVzLnBvcHBlciwge1xuICAgICdkYXRhLXBvcHBlci1yZWZlcmVuY2UtaGlkZGVuJzogaXNSZWZlcmVuY2VIaWRkZW4sXG4gICAgJ2RhdGEtcG9wcGVyLWVzY2FwZWQnOiBoYXNQb3BwZXJFc2NhcGVkXG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnaGlkZScsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAnbWFpbicsXG4gIHJlcXVpcmVzSWZFeGlzdHM6IFsncHJldmVudE92ZXJmbG93J10sXG4gIGZuOiBoaWRlXG59OyIsICJpbXBvcnQgZ2V0QmFzZVBsYWNlbWVudCBmcm9tIFwiLi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IHsgdG9wLCBsZWZ0LCByaWdodCwgcGxhY2VtZW50cyB9IGZyb20gXCIuLi9lbnVtcy5qc1wiOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZUFuZFNraWRkaW5nVG9YWShwbGFjZW1lbnQsIHJlY3RzLCBvZmZzZXQpIHtcbiAgdmFyIGJhc2VQbGFjZW1lbnQgPSBnZXRCYXNlUGxhY2VtZW50KHBsYWNlbWVudCk7XG4gIHZhciBpbnZlcnREaXN0YW5jZSA9IFtsZWZ0LCB0b3BdLmluZGV4T2YoYmFzZVBsYWNlbWVudCkgPj0gMCA/IC0xIDogMTtcblxuICB2YXIgX3JlZiA9IHR5cGVvZiBvZmZzZXQgPT09ICdmdW5jdGlvbicgPyBvZmZzZXQoT2JqZWN0LmFzc2lnbih7fSwgcmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHBsYWNlbWVudFxuICB9KSkgOiBvZmZzZXQsXG4gICAgICBza2lkZGluZyA9IF9yZWZbMF0sXG4gICAgICBkaXN0YW5jZSA9IF9yZWZbMV07XG5cbiAgc2tpZGRpbmcgPSBza2lkZGluZyB8fCAwO1xuICBkaXN0YW5jZSA9IChkaXN0YW5jZSB8fCAwKSAqIGludmVydERpc3RhbmNlO1xuICByZXR1cm4gW2xlZnQsIHJpZ2h0XS5pbmRleE9mKGJhc2VQbGFjZW1lbnQpID49IDAgPyB7XG4gICAgeDogZGlzdGFuY2UsXG4gICAgeTogc2tpZGRpbmdcbiAgfSA6IHtcbiAgICB4OiBza2lkZGluZyxcbiAgICB5OiBkaXN0YW5jZVxuICB9O1xufVxuXG5mdW5jdGlvbiBvZmZzZXQoX3JlZjIpIHtcbiAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGUsXG4gICAgICBvcHRpb25zID0gX3JlZjIub3B0aW9ucyxcbiAgICAgIG5hbWUgPSBfcmVmMi5uYW1lO1xuICB2YXIgX29wdGlvbnMkb2Zmc2V0ID0gb3B0aW9ucy5vZmZzZXQsXG4gICAgICBvZmZzZXQgPSBfb3B0aW9ucyRvZmZzZXQgPT09IHZvaWQgMCA/IFswLCAwXSA6IF9vcHRpb25zJG9mZnNldDtcbiAgdmFyIGRhdGEgPSBwbGFjZW1lbnRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwbGFjZW1lbnQpIHtcbiAgICBhY2NbcGxhY2VtZW50XSA9IGRpc3RhbmNlQW5kU2tpZGRpbmdUb1hZKHBsYWNlbWVudCwgc3RhdGUucmVjdHMsIG9mZnNldCk7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xuICB2YXIgX2RhdGEkc3RhdGUkcGxhY2VtZW50ID0gZGF0YVtzdGF0ZS5wbGFjZW1lbnRdLFxuICAgICAgeCA9IF9kYXRhJHN0YXRlJHBsYWNlbWVudC54LFxuICAgICAgeSA9IF9kYXRhJHN0YXRlJHBsYWNlbWVudC55O1xuXG4gIGlmIChzdGF0ZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMgIT0gbnVsbCkge1xuICAgIHN0YXRlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cy54ICs9IHg7XG4gICAgc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzLnkgKz0geTtcbiAgfVxuXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBkYXRhO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnb2Zmc2V0JyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgcmVxdWlyZXM6IFsncG9wcGVyT2Zmc2V0cyddLFxuICBmbjogb2Zmc2V0XG59OyIsICJpbXBvcnQgY29tcHV0ZU9mZnNldHMgZnJvbSBcIi4uL3V0aWxzL2NvbXB1dGVPZmZzZXRzLmpzXCI7XG5cbmZ1bmN0aW9uIHBvcHBlck9mZnNldHMoX3JlZikge1xuICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLFxuICAgICAgbmFtZSA9IF9yZWYubmFtZTtcbiAgLy8gT2Zmc2V0cyBhcmUgdGhlIGFjdHVhbCBwb3NpdGlvbiB0aGUgcG9wcGVyIG5lZWRzIHRvIGhhdmUgdG8gYmVcbiAgLy8gcHJvcGVybHkgcG9zaXRpb25lZCBuZWFyIGl0cyByZWZlcmVuY2UgZWxlbWVudFxuICAvLyBUaGlzIGlzIHRoZSBtb3N0IGJhc2ljIHBsYWNlbWVudCwgYW5kIHdpbGwgYmUgYWRqdXN0ZWQgYnlcbiAgLy8gdGhlIG1vZGlmaWVycyBpbiB0aGUgbmV4dCBzdGVwXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBjb21wdXRlT2Zmc2V0cyh7XG4gICAgcmVmZXJlbmNlOiBzdGF0ZS5yZWN0cy5yZWZlcmVuY2UsXG4gICAgZWxlbWVudDogc3RhdGUucmVjdHMucG9wcGVyLFxuICAgIHN0cmF0ZWd5OiAnYWJzb2x1dGUnLFxuICAgIHBsYWNlbWVudDogc3RhdGUucGxhY2VtZW50XG4gIH0pO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAncG9wcGVyT2Zmc2V0cycsXG4gIGVuYWJsZWQ6IHRydWUsXG4gIHBoYXNlOiAncmVhZCcsXG4gIGZuOiBwb3BwZXJPZmZzZXRzLFxuICBkYXRhOiB7fVxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0QWx0QXhpcyhheGlzKSB7XG4gIHJldHVybiBheGlzID09PSAneCcgPyAneScgOiAneCc7XG59IiwgImltcG9ydCB7IHRvcCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgc3RhcnQgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbmltcG9ydCBnZXRCYXNlUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRCYXNlUGxhY2VtZW50LmpzXCI7XG5pbXBvcnQgZ2V0TWFpbkF4aXNGcm9tUGxhY2VtZW50IGZyb20gXCIuLi91dGlscy9nZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQuanNcIjtcbmltcG9ydCBnZXRBbHRBeGlzIGZyb20gXCIuLi91dGlscy9nZXRBbHRBeGlzLmpzXCI7XG5pbXBvcnQgeyB3aXRoaW4sIHdpdGhpbk1heENsYW1wIH0gZnJvbSBcIi4uL3V0aWxzL3dpdGhpbi5qc1wiO1xuaW1wb3J0IGdldExheW91dFJlY3QgZnJvbSBcIi4uL2RvbS11dGlscy9nZXRMYXlvdXRSZWN0LmpzXCI7XG5pbXBvcnQgZ2V0T2Zmc2V0UGFyZW50IGZyb20gXCIuLi9kb20tdXRpbHMvZ2V0T2Zmc2V0UGFyZW50LmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4uL3V0aWxzL2RldGVjdE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgZ2V0VmFyaWF0aW9uIGZyb20gXCIuLi91dGlscy9nZXRWYXJpYXRpb24uanNcIjtcbmltcG9ydCBnZXRGcmVzaFNpZGVPYmplY3QgZnJvbSBcIi4uL3V0aWxzL2dldEZyZXNoU2lkZU9iamVjdC5qc1wiO1xuaW1wb3J0IHsgbWluIGFzIG1hdGhNaW4sIG1heCBhcyBtYXRoTWF4IH0gZnJvbSBcIi4uL3V0aWxzL21hdGguanNcIjtcblxuZnVuY3Rpb24gcHJldmVudE92ZXJmbG93KF9yZWYpIHtcbiAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSxcbiAgICAgIG9wdGlvbnMgPSBfcmVmLm9wdGlvbnMsXG4gICAgICBuYW1lID0gX3JlZi5uYW1lO1xuICB2YXIgX29wdGlvbnMkbWFpbkF4aXMgPSBvcHRpb25zLm1haW5BeGlzLFxuICAgICAgY2hlY2tNYWluQXhpcyA9IF9vcHRpb25zJG1haW5BeGlzID09PSB2b2lkIDAgPyB0cnVlIDogX29wdGlvbnMkbWFpbkF4aXMsXG4gICAgICBfb3B0aW9ucyRhbHRBeGlzID0gb3B0aW9ucy5hbHRBeGlzLFxuICAgICAgY2hlY2tBbHRBeGlzID0gX29wdGlvbnMkYWx0QXhpcyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfb3B0aW9ucyRhbHRBeGlzLFxuICAgICAgYm91bmRhcnkgPSBvcHRpb25zLmJvdW5kYXJ5LFxuICAgICAgcm9vdEJvdW5kYXJ5ID0gb3B0aW9ucy5yb290Qm91bmRhcnksXG4gICAgICBhbHRCb3VuZGFyeSA9IG9wdGlvbnMuYWx0Qm91bmRhcnksXG4gICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nLFxuICAgICAgX29wdGlvbnMkdGV0aGVyID0gb3B0aW9ucy50ZXRoZXIsXG4gICAgICB0ZXRoZXIgPSBfb3B0aW9ucyR0ZXRoZXIgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyR0ZXRoZXIsXG4gICAgICBfb3B0aW9ucyR0ZXRoZXJPZmZzZXQgPSBvcHRpb25zLnRldGhlck9mZnNldCxcbiAgICAgIHRldGhlck9mZnNldCA9IF9vcHRpb25zJHRldGhlck9mZnNldCA9PT0gdm9pZCAwID8gMCA6IF9vcHRpb25zJHRldGhlck9mZnNldDtcbiAgdmFyIG92ZXJmbG93ID0gZGV0ZWN0T3ZlcmZsb3coc3RhdGUsIHtcbiAgICBib3VuZGFyeTogYm91bmRhcnksXG4gICAgcm9vdEJvdW5kYXJ5OiByb290Qm91bmRhcnksXG4gICAgcGFkZGluZzogcGFkZGluZyxcbiAgICBhbHRCb3VuZGFyeTogYWx0Qm91bmRhcnlcbiAgfSk7XG4gIHZhciBiYXNlUGxhY2VtZW50ID0gZ2V0QmFzZVBsYWNlbWVudChzdGF0ZS5wbGFjZW1lbnQpO1xuICB2YXIgdmFyaWF0aW9uID0gZ2V0VmFyaWF0aW9uKHN0YXRlLnBsYWNlbWVudCk7XG4gIHZhciBpc0Jhc2VQbGFjZW1lbnQgPSAhdmFyaWF0aW9uO1xuICB2YXIgbWFpbkF4aXMgPSBnZXRNYWluQXhpc0Zyb21QbGFjZW1lbnQoYmFzZVBsYWNlbWVudCk7XG4gIHZhciBhbHRBeGlzID0gZ2V0QWx0QXhpcyhtYWluQXhpcyk7XG4gIHZhciBwb3BwZXJPZmZzZXRzID0gc3RhdGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzO1xuICB2YXIgcmVmZXJlbmNlUmVjdCA9IHN0YXRlLnJlY3RzLnJlZmVyZW5jZTtcbiAgdmFyIHBvcHBlclJlY3QgPSBzdGF0ZS5yZWN0cy5wb3BwZXI7XG4gIHZhciB0ZXRoZXJPZmZzZXRWYWx1ZSA9IHR5cGVvZiB0ZXRoZXJPZmZzZXQgPT09ICdmdW5jdGlvbicgPyB0ZXRoZXJPZmZzZXQoT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUucmVjdHMsIHtcbiAgICBwbGFjZW1lbnQ6IHN0YXRlLnBsYWNlbWVudFxuICB9KSkgOiB0ZXRoZXJPZmZzZXQ7XG4gIHZhciBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUgPSB0eXBlb2YgdGV0aGVyT2Zmc2V0VmFsdWUgPT09ICdudW1iZXInID8ge1xuICAgIG1haW5BeGlzOiB0ZXRoZXJPZmZzZXRWYWx1ZSxcbiAgICBhbHRBeGlzOiB0ZXRoZXJPZmZzZXRWYWx1ZVxuICB9IDogT2JqZWN0LmFzc2lnbih7XG4gICAgbWFpbkF4aXM6IDAsXG4gICAgYWx0QXhpczogMFxuICB9LCB0ZXRoZXJPZmZzZXRWYWx1ZSk7XG4gIHZhciBvZmZzZXRNb2RpZmllclN0YXRlID0gc3RhdGUubW9kaWZpZXJzRGF0YS5vZmZzZXQgPyBzdGF0ZS5tb2RpZmllcnNEYXRhLm9mZnNldFtzdGF0ZS5wbGFjZW1lbnRdIDogbnVsbDtcbiAgdmFyIGRhdGEgPSB7XG4gICAgeDogMCxcbiAgICB5OiAwXG4gIH07XG5cbiAgaWYgKCFwb3BwZXJPZmZzZXRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGNoZWNrTWFpbkF4aXMpIHtcbiAgICB2YXIgX29mZnNldE1vZGlmaWVyU3RhdGUkO1xuXG4gICAgdmFyIG1haW5TaWRlID0gbWFpbkF4aXMgPT09ICd5JyA/IHRvcCA6IGxlZnQ7XG4gICAgdmFyIGFsdFNpZGUgPSBtYWluQXhpcyA9PT0gJ3knID8gYm90dG9tIDogcmlnaHQ7XG4gICAgdmFyIGxlbiA9IG1haW5BeGlzID09PSAneScgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG4gICAgdmFyIG9mZnNldCA9IHBvcHBlck9mZnNldHNbbWFpbkF4aXNdO1xuICAgIHZhciBtaW4gPSBvZmZzZXQgKyBvdmVyZmxvd1ttYWluU2lkZV07XG4gICAgdmFyIG1heCA9IG9mZnNldCAtIG92ZXJmbG93W2FsdFNpZGVdO1xuICAgIHZhciBhZGRpdGl2ZSA9IHRldGhlciA/IC1wb3BwZXJSZWN0W2xlbl0gLyAyIDogMDtcbiAgICB2YXIgbWluTGVuID0gdmFyaWF0aW9uID09PSBzdGFydCA/IHJlZmVyZW5jZVJlY3RbbGVuXSA6IHBvcHBlclJlY3RbbGVuXTtcbiAgICB2YXIgbWF4TGVuID0gdmFyaWF0aW9uID09PSBzdGFydCA/IC1wb3BwZXJSZWN0W2xlbl0gOiAtcmVmZXJlbmNlUmVjdFtsZW5dOyAvLyBXZSBuZWVkIHRvIGluY2x1ZGUgdGhlIGFycm93IGluIHRoZSBjYWxjdWxhdGlvbiBzbyB0aGUgYXJyb3cgZG9lc24ndCBnb1xuICAgIC8vIG91dHNpZGUgdGhlIHJlZmVyZW5jZSBib3VuZHNcblxuICAgIHZhciBhcnJvd0VsZW1lbnQgPSBzdGF0ZS5lbGVtZW50cy5hcnJvdztcbiAgICB2YXIgYXJyb3dSZWN0ID0gdGV0aGVyICYmIGFycm93RWxlbWVudCA/IGdldExheW91dFJlY3QoYXJyb3dFbGVtZW50KSA6IHtcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwXG4gICAgfTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nT2JqZWN0ID0gc3RhdGUubW9kaWZpZXJzRGF0YVsnYXJyb3cjcGVyc2lzdGVudCddID8gc3RhdGUubW9kaWZpZXJzRGF0YVsnYXJyb3cjcGVyc2lzdGVudCddLnBhZGRpbmcgOiBnZXRGcmVzaFNpZGVPYmplY3QoKTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nTWluID0gYXJyb3dQYWRkaW5nT2JqZWN0W21haW5TaWRlXTtcbiAgICB2YXIgYXJyb3dQYWRkaW5nTWF4ID0gYXJyb3dQYWRkaW5nT2JqZWN0W2FsdFNpZGVdOyAvLyBJZiB0aGUgcmVmZXJlbmNlIGxlbmd0aCBpcyBzbWFsbGVyIHRoYW4gdGhlIGFycm93IGxlbmd0aCwgd2UgZG9uJ3Qgd2FudFxuICAgIC8vIHRvIGluY2x1ZGUgaXRzIGZ1bGwgc2l6ZSBpbiB0aGUgY2FsY3VsYXRpb24uIElmIHRoZSByZWZlcmVuY2UgaXMgc21hbGxcbiAgICAvLyBhbmQgbmVhciB0aGUgZWRnZSBvZiBhIGJvdW5kYXJ5LCB0aGUgcG9wcGVyIGNhbiBvdmVyZmxvdyBldmVuIGlmIHRoZVxuICAgIC8vIHJlZmVyZW5jZSBpcyBub3Qgb3ZlcmZsb3dpbmcgYXMgd2VsbCAoZS5nLiB2aXJ0dWFsIGVsZW1lbnRzIHdpdGggbm9cbiAgICAvLyB3aWR0aCBvciBoZWlnaHQpXG5cbiAgICB2YXIgYXJyb3dMZW4gPSB3aXRoaW4oMCwgcmVmZXJlbmNlUmVjdFtsZW5dLCBhcnJvd1JlY3RbbGVuXSk7XG4gICAgdmFyIG1pbk9mZnNldCA9IGlzQmFzZVBsYWNlbWVudCA/IHJlZmVyZW5jZVJlY3RbbGVuXSAvIDIgLSBhZGRpdGl2ZSAtIGFycm93TGVuIC0gYXJyb3dQYWRkaW5nTWluIC0gbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzIDogbWluTGVuIC0gYXJyb3dMZW4gLSBhcnJvd1BhZGRpbmdNaW4gLSBub3JtYWxpemVkVGV0aGVyT2Zmc2V0VmFsdWUubWFpbkF4aXM7XG4gICAgdmFyIG1heE9mZnNldCA9IGlzQmFzZVBsYWNlbWVudCA/IC1yZWZlcmVuY2VSZWN0W2xlbl0gLyAyICsgYWRkaXRpdmUgKyBhcnJvd0xlbiArIGFycm93UGFkZGluZ01heCArIG5vcm1hbGl6ZWRUZXRoZXJPZmZzZXRWYWx1ZS5tYWluQXhpcyA6IG1heExlbiArIGFycm93TGVuICsgYXJyb3dQYWRkaW5nTWF4ICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLm1haW5BeGlzO1xuICAgIHZhciBhcnJvd09mZnNldFBhcmVudCA9IHN0YXRlLmVsZW1lbnRzLmFycm93ICYmIGdldE9mZnNldFBhcmVudChzdGF0ZS5lbGVtZW50cy5hcnJvdyk7XG4gICAgdmFyIGNsaWVudE9mZnNldCA9IGFycm93T2Zmc2V0UGFyZW50ID8gbWFpbkF4aXMgPT09ICd5JyA/IGFycm93T2Zmc2V0UGFyZW50LmNsaWVudFRvcCB8fCAwIDogYXJyb3dPZmZzZXRQYXJlbnQuY2xpZW50TGVmdCB8fCAwIDogMDtcbiAgICB2YXIgb2Zmc2V0TW9kaWZpZXJWYWx1ZSA9IChfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQgPSBvZmZzZXRNb2RpZmllclN0YXRlID09IG51bGwgPyB2b2lkIDAgOiBvZmZzZXRNb2RpZmllclN0YXRlW21haW5BeGlzXSkgIT0gbnVsbCA/IF9vZmZzZXRNb2RpZmllclN0YXRlJCA6IDA7XG4gICAgdmFyIHRldGhlck1pbiA9IG9mZnNldCArIG1pbk9mZnNldCAtIG9mZnNldE1vZGlmaWVyVmFsdWUgLSBjbGllbnRPZmZzZXQ7XG4gICAgdmFyIHRldGhlck1heCA9IG9mZnNldCArIG1heE9mZnNldCAtIG9mZnNldE1vZGlmaWVyVmFsdWU7XG4gICAgdmFyIHByZXZlbnRlZE9mZnNldCA9IHdpdGhpbih0ZXRoZXIgPyBtYXRoTWluKG1pbiwgdGV0aGVyTWluKSA6IG1pbiwgb2Zmc2V0LCB0ZXRoZXIgPyBtYXRoTWF4KG1heCwgdGV0aGVyTWF4KSA6IG1heCk7XG4gICAgcG9wcGVyT2Zmc2V0c1ttYWluQXhpc10gPSBwcmV2ZW50ZWRPZmZzZXQ7XG4gICAgZGF0YVttYWluQXhpc10gPSBwcmV2ZW50ZWRPZmZzZXQgLSBvZmZzZXQ7XG4gIH1cblxuICBpZiAoY2hlY2tBbHRBeGlzKSB7XG4gICAgdmFyIF9vZmZzZXRNb2RpZmllclN0YXRlJDI7XG5cbiAgICB2YXIgX21haW5TaWRlID0gbWFpbkF4aXMgPT09ICd4JyA/IHRvcCA6IGxlZnQ7XG5cbiAgICB2YXIgX2FsdFNpZGUgPSBtYWluQXhpcyA9PT0gJ3gnID8gYm90dG9tIDogcmlnaHQ7XG5cbiAgICB2YXIgX29mZnNldCA9IHBvcHBlck9mZnNldHNbYWx0QXhpc107XG5cbiAgICB2YXIgX2xlbiA9IGFsdEF4aXMgPT09ICd5JyA/ICdoZWlnaHQnIDogJ3dpZHRoJztcblxuICAgIHZhciBfbWluID0gX29mZnNldCArIG92ZXJmbG93W19tYWluU2lkZV07XG5cbiAgICB2YXIgX21heCA9IF9vZmZzZXQgLSBvdmVyZmxvd1tfYWx0U2lkZV07XG5cbiAgICB2YXIgaXNPcmlnaW5TaWRlID0gW3RvcCwgbGVmdF0uaW5kZXhPZihiYXNlUGxhY2VtZW50KSAhPT0gLTE7XG5cbiAgICB2YXIgX29mZnNldE1vZGlmaWVyVmFsdWUgPSAoX29mZnNldE1vZGlmaWVyU3RhdGUkMiA9IG9mZnNldE1vZGlmaWVyU3RhdGUgPT0gbnVsbCA/IHZvaWQgMCA6IG9mZnNldE1vZGlmaWVyU3RhdGVbYWx0QXhpc10pICE9IG51bGwgPyBfb2Zmc2V0TW9kaWZpZXJTdGF0ZSQyIDogMDtcblxuICAgIHZhciBfdGV0aGVyTWluID0gaXNPcmlnaW5TaWRlID8gX21pbiA6IF9vZmZzZXQgLSByZWZlcmVuY2VSZWN0W19sZW5dIC0gcG9wcGVyUmVjdFtfbGVuXSAtIF9vZmZzZXRNb2RpZmllclZhbHVlICsgbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLmFsdEF4aXM7XG5cbiAgICB2YXIgX3RldGhlck1heCA9IGlzT3JpZ2luU2lkZSA/IF9vZmZzZXQgKyByZWZlcmVuY2VSZWN0W19sZW5dICsgcG9wcGVyUmVjdFtfbGVuXSAtIF9vZmZzZXRNb2RpZmllclZhbHVlIC0gbm9ybWFsaXplZFRldGhlck9mZnNldFZhbHVlLmFsdEF4aXMgOiBfbWF4O1xuXG4gICAgdmFyIF9wcmV2ZW50ZWRPZmZzZXQgPSB0ZXRoZXIgJiYgaXNPcmlnaW5TaWRlID8gd2l0aGluTWF4Q2xhbXAoX3RldGhlck1pbiwgX29mZnNldCwgX3RldGhlck1heCkgOiB3aXRoaW4odGV0aGVyID8gX3RldGhlck1pbiA6IF9taW4sIF9vZmZzZXQsIHRldGhlciA/IF90ZXRoZXJNYXggOiBfbWF4KTtcblxuICAgIHBvcHBlck9mZnNldHNbYWx0QXhpc10gPSBfcHJldmVudGVkT2Zmc2V0O1xuICAgIGRhdGFbYWx0QXhpc10gPSBfcHJldmVudGVkT2Zmc2V0IC0gX29mZnNldDtcbiAgfVxuXG4gIHN0YXRlLm1vZGlmaWVyc0RhdGFbbmFtZV0gPSBkYXRhO1xufSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAncHJldmVudE92ZXJmbG93JyxcbiAgZW5hYmxlZDogdHJ1ZSxcbiAgcGhhc2U6ICdtYWluJyxcbiAgZm46IHByZXZlbnRPdmVyZmxvdyxcbiAgcmVxdWlyZXNJZkV4aXN0czogWydvZmZzZXQnXVxufTsiLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0SFRNTEVsZW1lbnRTY3JvbGwoZWxlbWVudCkge1xuICByZXR1cm4ge1xuICAgIHNjcm9sbExlZnQ6IGVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICBzY3JvbGxUb3A6IGVsZW1lbnQuc2Nyb2xsVG9wXG4gIH07XG59IiwgImltcG9ydCBnZXRXaW5kb3dTY3JvbGwgZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsLmpzXCI7XG5pbXBvcnQgZ2V0V2luZG93IGZyb20gXCIuL2dldFdpbmRvdy5qc1wiO1xuaW1wb3J0IHsgaXNIVE1MRWxlbWVudCB9IGZyb20gXCIuL2luc3RhbmNlT2YuanNcIjtcbmltcG9ydCBnZXRIVE1MRWxlbWVudFNjcm9sbCBmcm9tIFwiLi9nZXRIVE1MRWxlbWVudFNjcm9sbC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Tm9kZVNjcm9sbChub2RlKSB7XG4gIGlmIChub2RlID09PSBnZXRXaW5kb3cobm9kZSkgfHwgIWlzSFRNTEVsZW1lbnQobm9kZSkpIHtcbiAgICByZXR1cm4gZ2V0V2luZG93U2Nyb2xsKG5vZGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBnZXRIVE1MRWxlbWVudFNjcm9sbChub2RlKTtcbiAgfVxufSIsICJpbXBvcnQgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGZyb20gXCIuL2dldEJvdW5kaW5nQ2xpZW50UmVjdC5qc1wiO1xuaW1wb3J0IGdldE5vZGVTY3JvbGwgZnJvbSBcIi4vZ2V0Tm9kZVNjcm9sbC5qc1wiO1xuaW1wb3J0IGdldE5vZGVOYW1lIGZyb20gXCIuL2dldE5vZGVOYW1lLmpzXCI7XG5pbXBvcnQgeyBpc0hUTUxFbGVtZW50IH0gZnJvbSBcIi4vaW5zdGFuY2VPZi5qc1wiO1xuaW1wb3J0IGdldFdpbmRvd1Njcm9sbEJhclggZnJvbSBcIi4vZ2V0V2luZG93U2Nyb2xsQmFyWC5qc1wiO1xuaW1wb3J0IGdldERvY3VtZW50RWxlbWVudCBmcm9tIFwiLi9nZXREb2N1bWVudEVsZW1lbnQuanNcIjtcbmltcG9ydCBpc1Njcm9sbFBhcmVudCBmcm9tIFwiLi9pc1Njcm9sbFBhcmVudC5qc1wiO1xuaW1wb3J0IHsgcm91bmQgfSBmcm9tIFwiLi4vdXRpbHMvbWF0aC5qc1wiO1xuXG5mdW5jdGlvbiBpc0VsZW1lbnRTY2FsZWQoZWxlbWVudCkge1xuICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHZhciBzY2FsZVggPSByb3VuZChyZWN0LndpZHRoKSAvIGVsZW1lbnQub2Zmc2V0V2lkdGggfHwgMTtcbiAgdmFyIHNjYWxlWSA9IHJvdW5kKHJlY3QuaGVpZ2h0KSAvIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8IDE7XG4gIHJldHVybiBzY2FsZVggIT09IDEgfHwgc2NhbGVZICE9PSAxO1xufSAvLyBSZXR1cm5zIHRoZSBjb21wb3NpdGUgcmVjdCBvZiBhbiBlbGVtZW50IHJlbGF0aXZlIHRvIGl0cyBvZmZzZXRQYXJlbnQuXG4vLyBDb21wb3NpdGUgbWVhbnMgaXQgdGFrZXMgaW50byBhY2NvdW50IHRyYW5zZm9ybXMgYXMgd2VsbCBhcyBsYXlvdXQuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q29tcG9zaXRlUmVjdChlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCwgb2Zmc2V0UGFyZW50LCBpc0ZpeGVkKSB7XG4gIGlmIChpc0ZpeGVkID09PSB2b2lkIDApIHtcbiAgICBpc0ZpeGVkID0gZmFsc2U7XG4gIH1cblxuICB2YXIgaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgPSBpc0hUTUxFbGVtZW50KG9mZnNldFBhcmVudCk7XG4gIHZhciBvZmZzZXRQYXJlbnRJc1NjYWxlZCA9IGlzSFRNTEVsZW1lbnQob2Zmc2V0UGFyZW50KSAmJiBpc0VsZW1lbnRTY2FsZWQob2Zmc2V0UGFyZW50KTtcbiAgdmFyIGRvY3VtZW50RWxlbWVudCA9IGdldERvY3VtZW50RWxlbWVudChvZmZzZXRQYXJlbnQpO1xuICB2YXIgcmVjdCA9IGdldEJvdW5kaW5nQ2xpZW50UmVjdChlbGVtZW50T3JWaXJ0dWFsRWxlbWVudCwgb2Zmc2V0UGFyZW50SXNTY2FsZWQpO1xuICB2YXIgc2Nyb2xsID0ge1xuICAgIHNjcm9sbExlZnQ6IDAsXG4gICAgc2Nyb2xsVG9wOiAwXG4gIH07XG4gIHZhciBvZmZzZXRzID0ge1xuICAgIHg6IDAsXG4gICAgeTogMFxuICB9O1xuXG4gIGlmIChpc09mZnNldFBhcmVudEFuRWxlbWVudCB8fCAhaXNPZmZzZXRQYXJlbnRBbkVsZW1lbnQgJiYgIWlzRml4ZWQpIHtcbiAgICBpZiAoZ2V0Tm9kZU5hbWUob2Zmc2V0UGFyZW50KSAhPT0gJ2JvZHknIHx8IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3BwZXJqcy9wb3BwZXItY29yZS9pc3N1ZXMvMTA3OFxuICAgIGlzU2Nyb2xsUGFyZW50KGRvY3VtZW50RWxlbWVudCkpIHtcbiAgICAgIHNjcm9sbCA9IGdldE5vZGVTY3JvbGwob2Zmc2V0UGFyZW50KTtcbiAgICB9XG5cbiAgICBpZiAoaXNIVE1MRWxlbWVudChvZmZzZXRQYXJlbnQpKSB7XG4gICAgICBvZmZzZXRzID0gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KG9mZnNldFBhcmVudCwgdHJ1ZSk7XG4gICAgICBvZmZzZXRzLnggKz0gb2Zmc2V0UGFyZW50LmNsaWVudExlZnQ7XG4gICAgICBvZmZzZXRzLnkgKz0gb2Zmc2V0UGFyZW50LmNsaWVudFRvcDtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgb2Zmc2V0cy54ID0gZ2V0V2luZG93U2Nyb2xsQmFyWChkb2N1bWVudEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgeDogcmVjdC5sZWZ0ICsgc2Nyb2xsLnNjcm9sbExlZnQgLSBvZmZzZXRzLngsXG4gICAgeTogcmVjdC50b3AgKyBzY3JvbGwuc2Nyb2xsVG9wIC0gb2Zmc2V0cy55LFxuICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgIGhlaWdodDogcmVjdC5oZWlnaHRcbiAgfTtcbn0iLCAiaW1wb3J0IHsgbW9kaWZpZXJQaGFzZXMgfSBmcm9tIFwiLi4vZW51bXMuanNcIjsgLy8gc291cmNlOiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80OTg3NTI1NVxuXG5mdW5jdGlvbiBvcmRlcihtb2RpZmllcnMpIHtcbiAgdmFyIG1hcCA9IG5ldyBNYXAoKTtcbiAgdmFyIHZpc2l0ZWQgPSBuZXcgU2V0KCk7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgbWFwLnNldChtb2RpZmllci5uYW1lLCBtb2RpZmllcik7XG4gIH0pOyAvLyBPbiB2aXNpdGluZyBvYmplY3QsIGNoZWNrIGZvciBpdHMgZGVwZW5kZW5jaWVzIGFuZCB2aXNpdCB0aGVtIHJlY3Vyc2l2ZWx5XG5cbiAgZnVuY3Rpb24gc29ydChtb2RpZmllcikge1xuICAgIHZpc2l0ZWQuYWRkKG1vZGlmaWVyLm5hbWUpO1xuICAgIHZhciByZXF1aXJlcyA9IFtdLmNvbmNhdChtb2RpZmllci5yZXF1aXJlcyB8fCBbXSwgbW9kaWZpZXIucmVxdWlyZXNJZkV4aXN0cyB8fCBbXSk7XG4gICAgcmVxdWlyZXMuZm9yRWFjaChmdW5jdGlvbiAoZGVwKSB7XG4gICAgICBpZiAoIXZpc2l0ZWQuaGFzKGRlcCkpIHtcbiAgICAgICAgdmFyIGRlcE1vZGlmaWVyID0gbWFwLmdldChkZXApO1xuXG4gICAgICAgIGlmIChkZXBNb2RpZmllcikge1xuICAgICAgICAgIHNvcnQoZGVwTW9kaWZpZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmVzdWx0LnB1c2gobW9kaWZpZXIpO1xuICB9XG5cbiAgbW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgaWYgKCF2aXNpdGVkLmhhcyhtb2RpZmllci5uYW1lKSkge1xuICAgICAgLy8gY2hlY2sgZm9yIHZpc2l0ZWQgb2JqZWN0XG4gICAgICBzb3J0KG1vZGlmaWVyKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvcmRlck1vZGlmaWVycyhtb2RpZmllcnMpIHtcbiAgLy8gb3JkZXIgYmFzZWQgb24gZGVwZW5kZW5jaWVzXG4gIHZhciBvcmRlcmVkTW9kaWZpZXJzID0gb3JkZXIobW9kaWZpZXJzKTsgLy8gb3JkZXIgYmFzZWQgb24gcGhhc2VcblxuICByZXR1cm4gbW9kaWZpZXJQaGFzZXMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHBoYXNlKSB7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQob3JkZXJlZE1vZGlmaWVycy5maWx0ZXIoZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgICByZXR1cm4gbW9kaWZpZXIucGhhc2UgPT09IHBoYXNlO1xuICAgIH0pKTtcbiAgfSwgW10pO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWJvdW5jZShmbikge1xuICB2YXIgcGVuZGluZztcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXBlbmRpbmcpIHtcbiAgICAgIHBlbmRpbmcgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBwZW5kaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgIHJlc29sdmUoZm4oKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBlbmRpbmc7XG4gIH07XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGZvcm1hdChzdHIpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIFtdLmNvbmNhdChhcmdzKS5yZWR1Y2UoZnVuY3Rpb24gKHAsIGMpIHtcbiAgICByZXR1cm4gcC5yZXBsYWNlKC8lcy8sIGMpO1xuICB9LCBzdHIpO1xufSIsICJpbXBvcnQgZm9ybWF0IGZyb20gXCIuL2Zvcm1hdC5qc1wiO1xuaW1wb3J0IHsgbW9kaWZpZXJQaGFzZXMgfSBmcm9tIFwiLi4vZW51bXMuanNcIjtcbnZhciBJTlZBTElEX01PRElGSUVSX0VSUk9SID0gJ1BvcHBlcjogbW9kaWZpZXIgXCIlc1wiIHByb3ZpZGVkIGFuIGludmFsaWQgJXMgcHJvcGVydHksIGV4cGVjdGVkICVzIGJ1dCBnb3QgJXMnO1xudmFyIE1JU1NJTkdfREVQRU5ERU5DWV9FUlJPUiA9ICdQb3BwZXI6IG1vZGlmaWVyIFwiJXNcIiByZXF1aXJlcyBcIiVzXCIsIGJ1dCBcIiVzXCIgbW9kaWZpZXIgaXMgbm90IGF2YWlsYWJsZSc7XG52YXIgVkFMSURfUFJPUEVSVElFUyA9IFsnbmFtZScsICdlbmFibGVkJywgJ3BoYXNlJywgJ2ZuJywgJ2VmZmVjdCcsICdyZXF1aXJlcycsICdvcHRpb25zJ107XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB2YWxpZGF0ZU1vZGlmaWVycyhtb2RpZmllcnMpIHtcbiAgbW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgW10uY29uY2F0KE9iamVjdC5rZXlzKG1vZGlmaWVyKSwgVkFMSURfUFJPUEVSVElFUykgLy8gSUUxMS1jb21wYXRpYmxlIHJlcGxhY2VtZW50IGZvciBgbmV3IFNldChpdGVyYWJsZSlgXG4gICAgLmZpbHRlcihmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBzZWxmKSB7XG4gICAgICByZXR1cm4gc2VsZi5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXg7XG4gICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgICBpZiAodHlwZW9mIG1vZGlmaWVyLm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGZvcm1hdChJTlZBTElEX01PRElGSUVSX0VSUk9SLCBTdHJpbmcobW9kaWZpZXIubmFtZSksICdcIm5hbWVcIicsICdcInN0cmluZ1wiJywgXCJcXFwiXCIgKyBTdHJpbmcobW9kaWZpZXIubmFtZSkgKyBcIlxcXCJcIikpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2VuYWJsZWQnOlxuICAgICAgICAgIGlmICh0eXBlb2YgbW9kaWZpZXIuZW5hYmxlZCAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGZvcm1hdChJTlZBTElEX01PRElGSUVSX0VSUk9SLCBtb2RpZmllci5uYW1lLCAnXCJlbmFibGVkXCInLCAnXCJib29sZWFuXCInLCBcIlxcXCJcIiArIFN0cmluZyhtb2RpZmllci5lbmFibGVkKSArIFwiXFxcIlwiKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAncGhhc2UnOlxuICAgICAgICAgIGlmIChtb2RpZmllclBoYXNlcy5pbmRleE9mKG1vZGlmaWVyLnBoYXNlKSA8IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZm9ybWF0KElOVkFMSURfTU9ESUZJRVJfRVJST1IsIG1vZGlmaWVyLm5hbWUsICdcInBoYXNlXCInLCBcImVpdGhlciBcIiArIG1vZGlmaWVyUGhhc2VzLmpvaW4oJywgJyksIFwiXFxcIlwiICsgU3RyaW5nKG1vZGlmaWVyLnBoYXNlKSArIFwiXFxcIlwiKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnZm4nOlxuICAgICAgICAgIGlmICh0eXBlb2YgbW9kaWZpZXIuZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZm9ybWF0KElOVkFMSURfTU9ESUZJRVJfRVJST1IsIG1vZGlmaWVyLm5hbWUsICdcImZuXCInLCAnXCJmdW5jdGlvblwiJywgXCJcXFwiXCIgKyBTdHJpbmcobW9kaWZpZXIuZm4pICsgXCJcXFwiXCIpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdlZmZlY3QnOlxuICAgICAgICAgIGlmIChtb2RpZmllci5lZmZlY3QgIT0gbnVsbCAmJiB0eXBlb2YgbW9kaWZpZXIuZWZmZWN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGZvcm1hdChJTlZBTElEX01PRElGSUVSX0VSUk9SLCBtb2RpZmllci5uYW1lLCAnXCJlZmZlY3RcIicsICdcImZ1bmN0aW9uXCInLCBcIlxcXCJcIiArIFN0cmluZyhtb2RpZmllci5mbikgKyBcIlxcXCJcIikpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3JlcXVpcmVzJzpcbiAgICAgICAgICBpZiAobW9kaWZpZXIucmVxdWlyZXMgIT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShtb2RpZmllci5yZXF1aXJlcykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZm9ybWF0KElOVkFMSURfTU9ESUZJRVJfRVJST1IsIG1vZGlmaWVyLm5hbWUsICdcInJlcXVpcmVzXCInLCAnXCJhcnJheVwiJywgXCJcXFwiXCIgKyBTdHJpbmcobW9kaWZpZXIucmVxdWlyZXMpICsgXCJcXFwiXCIpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdyZXF1aXJlc0lmRXhpc3RzJzpcbiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobW9kaWZpZXIucmVxdWlyZXNJZkV4aXN0cykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZm9ybWF0KElOVkFMSURfTU9ESUZJRVJfRVJST1IsIG1vZGlmaWVyLm5hbWUsICdcInJlcXVpcmVzSWZFeGlzdHNcIicsICdcImFycmF5XCInLCBcIlxcXCJcIiArIFN0cmluZyhtb2RpZmllci5yZXF1aXJlc0lmRXhpc3RzKSArIFwiXFxcIlwiKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnb3B0aW9ucyc6XG4gICAgICAgIGNhc2UgJ2RhdGEnOlxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlBvcHBlckpTOiBhbiBpbnZhbGlkIHByb3BlcnR5IGhhcyBiZWVuIHByb3ZpZGVkIHRvIHRoZSBcXFwiXCIgKyBtb2RpZmllci5uYW1lICsgXCJcXFwiIG1vZGlmaWVyLCB2YWxpZCBwcm9wZXJ0aWVzIGFyZSBcIiArIFZBTElEX1BST1BFUlRJRVMubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcXFwiXCIgKyBzICsgXCJcXFwiXCI7XG4gICAgICAgICAgfSkuam9pbignLCAnKSArIFwiOyBidXQgXFxcIlwiICsga2V5ICsgXCJcXFwiIHdhcyBwcm92aWRlZC5cIik7XG4gICAgICB9XG5cbiAgICAgIG1vZGlmaWVyLnJlcXVpcmVzICYmIG1vZGlmaWVyLnJlcXVpcmVzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVpcmVtZW50KSB7XG4gICAgICAgIGlmIChtb2RpZmllcnMuZmluZChmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgcmV0dXJuIG1vZC5uYW1lID09PSByZXF1aXJlbWVudDtcbiAgICAgICAgfSkgPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZm9ybWF0KE1JU1NJTkdfREVQRU5ERU5DWV9FUlJPUiwgU3RyaW5nKG1vZGlmaWVyLm5hbWUpLCByZXF1aXJlbWVudCwgcmVxdWlyZW1lbnQpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1bmlxdWVCeShhcnIsIGZuKSB7XG4gIHZhciBpZGVudGlmaWVycyA9IG5ldyBTZXQoKTtcbiAgcmV0dXJuIGFyci5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgaWRlbnRpZmllciA9IGZuKGl0ZW0pO1xuXG4gICAgaWYgKCFpZGVudGlmaWVycy5oYXMoaWRlbnRpZmllcikpIHtcbiAgICAgIGlkZW50aWZpZXJzLmFkZChpZGVudGlmaWVyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG59IiwgImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lcmdlQnlOYW1lKG1vZGlmaWVycykge1xuICB2YXIgbWVyZ2VkID0gbW9kaWZpZXJzLnJlZHVjZShmdW5jdGlvbiAobWVyZ2VkLCBjdXJyZW50KSB7XG4gICAgdmFyIGV4aXN0aW5nID0gbWVyZ2VkW2N1cnJlbnQubmFtZV07XG4gICAgbWVyZ2VkW2N1cnJlbnQubmFtZV0gPSBleGlzdGluZyA/IE9iamVjdC5hc3NpZ24oe30sIGV4aXN0aW5nLCBjdXJyZW50LCB7XG4gICAgICBvcHRpb25zOiBPYmplY3QuYXNzaWduKHt9LCBleGlzdGluZy5vcHRpb25zLCBjdXJyZW50Lm9wdGlvbnMpLFxuICAgICAgZGF0YTogT2JqZWN0LmFzc2lnbih7fSwgZXhpc3RpbmcuZGF0YSwgY3VycmVudC5kYXRhKVxuICAgIH0pIDogY3VycmVudDtcbiAgICByZXR1cm4gbWVyZ2VkO1xuICB9LCB7fSk7IC8vIElFMTEgZG9lcyBub3Qgc3VwcG9ydCBPYmplY3QudmFsdWVzXG5cbiAgcmV0dXJuIE9iamVjdC5rZXlzKG1lcmdlZCkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gbWVyZ2VkW2tleV07XG4gIH0pO1xufSIsICJpbXBvcnQgZ2V0Q29tcG9zaXRlUmVjdCBmcm9tIFwiLi9kb20tdXRpbHMvZ2V0Q29tcG9zaXRlUmVjdC5qc1wiO1xuaW1wb3J0IGdldExheW91dFJlY3QgZnJvbSBcIi4vZG9tLXV0aWxzL2dldExheW91dFJlY3QuanNcIjtcbmltcG9ydCBsaXN0U2Nyb2xsUGFyZW50cyBmcm9tIFwiLi9kb20tdXRpbHMvbGlzdFNjcm9sbFBhcmVudHMuanNcIjtcbmltcG9ydCBnZXRPZmZzZXRQYXJlbnQgZnJvbSBcIi4vZG9tLXV0aWxzL2dldE9mZnNldFBhcmVudC5qc1wiO1xuaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSBcIi4vZG9tLXV0aWxzL2dldENvbXB1dGVkU3R5bGUuanNcIjtcbmltcG9ydCBvcmRlck1vZGlmaWVycyBmcm9tIFwiLi91dGlscy9vcmRlck1vZGlmaWVycy5qc1wiO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gXCIuL3V0aWxzL2RlYm91bmNlLmpzXCI7XG5pbXBvcnQgdmFsaWRhdGVNb2RpZmllcnMgZnJvbSBcIi4vdXRpbHMvdmFsaWRhdGVNb2RpZmllcnMuanNcIjtcbmltcG9ydCB1bmlxdWVCeSBmcm9tIFwiLi91dGlscy91bmlxdWVCeS5qc1wiO1xuaW1wb3J0IGdldEJhc2VQbGFjZW1lbnQgZnJvbSBcIi4vdXRpbHMvZ2V0QmFzZVBsYWNlbWVudC5qc1wiO1xuaW1wb3J0IG1lcmdlQnlOYW1lIGZyb20gXCIuL3V0aWxzL21lcmdlQnlOYW1lLmpzXCI7XG5pbXBvcnQgZGV0ZWN0T3ZlcmZsb3cgZnJvbSBcIi4vdXRpbHMvZGV0ZWN0T3ZlcmZsb3cuanNcIjtcbmltcG9ydCB7IGlzRWxlbWVudCB9IGZyb20gXCIuL2RvbS11dGlscy9pbnN0YW5jZU9mLmpzXCI7XG5pbXBvcnQgeyBhdXRvIH0gZnJvbSBcIi4vZW51bXMuanNcIjtcbnZhciBJTlZBTElEX0VMRU1FTlRfRVJST1IgPSAnUG9wcGVyOiBJbnZhbGlkIHJlZmVyZW5jZSBvciBwb3BwZXIgYXJndW1lbnQgcHJvdmlkZWQuIFRoZXkgbXVzdCBiZSBlaXRoZXIgYSBET00gZWxlbWVudCBvciB2aXJ0dWFsIGVsZW1lbnQuJztcbnZhciBJTkZJTklURV9MT09QX0VSUk9SID0gJ1BvcHBlcjogQW4gaW5maW5pdGUgbG9vcCBpbiB0aGUgbW9kaWZpZXJzIGN5Y2xlIGhhcyBiZWVuIGRldGVjdGVkISBUaGUgY3ljbGUgaGFzIGJlZW4gaW50ZXJydXB0ZWQgdG8gcHJldmVudCBhIGJyb3dzZXIgY3Jhc2guJztcbnZhciBERUZBVUxUX09QVElPTlMgPSB7XG4gIHBsYWNlbWVudDogJ2JvdHRvbScsXG4gIG1vZGlmaWVyczogW10sXG4gIHN0cmF0ZWd5OiAnYWJzb2x1dGUnXG59O1xuXG5mdW5jdGlvbiBhcmVWYWxpZEVsZW1lbnRzKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuICFhcmdzLnNvbWUoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gIShlbGVtZW50ICYmIHR5cGVvZiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCA9PT0gJ2Z1bmN0aW9uJyk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9wcGVyR2VuZXJhdG9yKGdlbmVyYXRvck9wdGlvbnMpIHtcbiAgaWYgKGdlbmVyYXRvck9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIGdlbmVyYXRvck9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfZ2VuZXJhdG9yT3B0aW9ucyA9IGdlbmVyYXRvck9wdGlvbnMsXG4gICAgICBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYgPSBfZ2VuZXJhdG9yT3B0aW9ucy5kZWZhdWx0TW9kaWZpZXJzLFxuICAgICAgZGVmYXVsdE1vZGlmaWVycyA9IF9nZW5lcmF0b3JPcHRpb25zJGRlZiA9PT0gdm9pZCAwID8gW10gOiBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYsXG4gICAgICBfZ2VuZXJhdG9yT3B0aW9ucyRkZWYyID0gX2dlbmVyYXRvck9wdGlvbnMuZGVmYXVsdE9wdGlvbnMsXG4gICAgICBkZWZhdWx0T3B0aW9ucyA9IF9nZW5lcmF0b3JPcHRpb25zJGRlZjIgPT09IHZvaWQgMCA/IERFRkFVTFRfT1BUSU9OUyA6IF9nZW5lcmF0b3JPcHRpb25zJGRlZjI7XG4gIHJldHVybiBmdW5jdGlvbiBjcmVhdGVQb3BwZXIocmVmZXJlbmNlLCBwb3BwZXIsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgICBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XG4gICAgfVxuXG4gICAgdmFyIHN0YXRlID0ge1xuICAgICAgcGxhY2VtZW50OiAnYm90dG9tJyxcbiAgICAgIG9yZGVyZWRNb2RpZmllcnM6IFtdLFxuICAgICAgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TLCBkZWZhdWx0T3B0aW9ucyksXG4gICAgICBtb2RpZmllcnNEYXRhOiB7fSxcbiAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIHJlZmVyZW5jZTogcmVmZXJlbmNlLFxuICAgICAgICBwb3BwZXI6IHBvcHBlclxuICAgICAgfSxcbiAgICAgIGF0dHJpYnV0ZXM6IHt9LFxuICAgICAgc3R5bGVzOiB7fVxuICAgIH07XG4gICAgdmFyIGVmZmVjdENsZWFudXBGbnMgPSBbXTtcbiAgICB2YXIgaXNEZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB2YXIgaW5zdGFuY2UgPSB7XG4gICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICBzZXRPcHRpb25zOiBmdW5jdGlvbiBzZXRPcHRpb25zKHNldE9wdGlvbnNBY3Rpb24pIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0eXBlb2Ygc2V0T3B0aW9uc0FjdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHNldE9wdGlvbnNBY3Rpb24oc3RhdGUub3B0aW9ucykgOiBzZXRPcHRpb25zQWN0aW9uO1xuICAgICAgICBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIHN0YXRlLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgc3RhdGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICAgIHN0YXRlLnNjcm9sbFBhcmVudHMgPSB7XG4gICAgICAgICAgcmVmZXJlbmNlOiBpc0VsZW1lbnQocmVmZXJlbmNlKSA/IGxpc3RTY3JvbGxQYXJlbnRzKHJlZmVyZW5jZSkgOiByZWZlcmVuY2UuY29udGV4dEVsZW1lbnQgPyBsaXN0U2Nyb2xsUGFyZW50cyhyZWZlcmVuY2UuY29udGV4dEVsZW1lbnQpIDogW10sXG4gICAgICAgICAgcG9wcGVyOiBsaXN0U2Nyb2xsUGFyZW50cyhwb3BwZXIpXG4gICAgICAgIH07IC8vIE9yZGVycyB0aGUgbW9kaWZpZXJzIGJhc2VkIG9uIHRoZWlyIGRlcGVuZGVuY2llcyBhbmQgYHBoYXNlYFxuICAgICAgICAvLyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgdmFyIG9yZGVyZWRNb2RpZmllcnMgPSBvcmRlck1vZGlmaWVycyhtZXJnZUJ5TmFtZShbXS5jb25jYXQoZGVmYXVsdE1vZGlmaWVycywgc3RhdGUub3B0aW9ucy5tb2RpZmllcnMpKSk7IC8vIFN0cmlwIG91dCBkaXNhYmxlZCBtb2RpZmllcnNcblxuICAgICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzID0gb3JkZXJlZE1vZGlmaWVycy5maWx0ZXIoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICByZXR1cm4gbS5lbmFibGVkO1xuICAgICAgICB9KTsgLy8gVmFsaWRhdGUgdGhlIHByb3ZpZGVkIG1vZGlmaWVycyBzbyB0aGF0IHRoZSBjb25zdW1lciB3aWxsIGdldCB3YXJuZWRcbiAgICAgICAgLy8gaWYgb25lIG9mIHRoZSBtb2RpZmllcnMgaXMgaW52YWxpZCBmb3IgYW55IHJlYXNvblxuXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgICB2YXIgbW9kaWZpZXJzID0gdW5pcXVlQnkoW10uY29uY2F0KG9yZGVyZWRNb2RpZmllcnMsIHN0YXRlLm9wdGlvbnMubW9kaWZpZXJzKSwgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gX3JlZi5uYW1lO1xuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFsaWRhdGVNb2RpZmllcnMobW9kaWZpZXJzKTtcblxuICAgICAgICAgIGlmIChnZXRCYXNlUGxhY2VtZW50KHN0YXRlLm9wdGlvbnMucGxhY2VtZW50KSA9PT0gYXV0bykge1xuICAgICAgICAgICAgdmFyIGZsaXBNb2RpZmllciA9IHN0YXRlLm9yZGVyZWRNb2RpZmllcnMuZmluZChmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgICAgICAgICAgdmFyIG5hbWUgPSBfcmVmMi5uYW1lO1xuICAgICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gJ2ZsaXAnO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghZmxpcE1vZGlmaWVyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoWydQb3BwZXI6IFwiYXV0b1wiIHBsYWNlbWVudHMgcmVxdWlyZSB0aGUgXCJmbGlwXCIgbW9kaWZpZXIgYmUnLCAncHJlc2VudCBhbmQgZW5hYmxlZCB0byB3b3JrLiddLmpvaW4oJyAnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIF9nZXRDb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShwb3BwZXIpLFxuICAgICAgICAgICAgICBtYXJnaW5Ub3AgPSBfZ2V0Q29tcHV0ZWRTdHlsZS5tYXJnaW5Ub3AsXG4gICAgICAgICAgICAgIG1hcmdpblJpZ2h0ID0gX2dldENvbXB1dGVkU3R5bGUubWFyZ2luUmlnaHQsXG4gICAgICAgICAgICAgIG1hcmdpbkJvdHRvbSA9IF9nZXRDb21wdXRlZFN0eWxlLm1hcmdpbkJvdHRvbSxcbiAgICAgICAgICAgICAgbWFyZ2luTGVmdCA9IF9nZXRDb21wdXRlZFN0eWxlLm1hcmdpbkxlZnQ7IC8vIFdlIG5vIGxvbmdlciB0YWtlIGludG8gYWNjb3VudCBgbWFyZ2luc2Agb24gdGhlIHBvcHBlciwgYW5kIGl0IGNhblxuICAgICAgICAgIC8vIGNhdXNlIGJ1Z3Mgd2l0aCBwb3NpdGlvbmluZywgc28gd2UnbGwgd2FybiB0aGUgY29uc3VtZXJcblxuXG4gICAgICAgICAgaWYgKFttYXJnaW5Ub3AsIG1hcmdpblJpZ2h0LCBtYXJnaW5Cb3R0b20sIG1hcmdpbkxlZnRdLnNvbWUoZnVuY3Rpb24gKG1hcmdpbikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobWFyZ2luKTtcbiAgICAgICAgICB9KSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFsnUG9wcGVyOiBDU1MgXCJtYXJnaW5cIiBzdHlsZXMgY2Fubm90IGJlIHVzZWQgdG8gYXBwbHkgcGFkZGluZycsICdiZXR3ZWVuIHRoZSBwb3BwZXIgYW5kIGl0cyByZWZlcmVuY2UgZWxlbWVudCBvciBib3VuZGFyeS4nLCAnVG8gcmVwbGljYXRlIG1hcmdpbiwgdXNlIHRoZSBgb2Zmc2V0YCBtb2RpZmllciwgYXMgd2VsbCBhcycsICd0aGUgYHBhZGRpbmdgIG9wdGlvbiBpbiB0aGUgYHByZXZlbnRPdmVyZmxvd2AgYW5kIGBmbGlwYCcsICdtb2RpZmllcnMuJ10uam9pbignICcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBydW5Nb2RpZmllckVmZmVjdHMoKTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIC8vIFN5bmMgdXBkYXRlIFx1MjAxMyBpdCB3aWxsIGFsd2F5cyBiZSBleGVjdXRlZCwgZXZlbiBpZiBub3QgbmVjZXNzYXJ5LiBUaGlzXG4gICAgICAvLyBpcyB1c2VmdWwgZm9yIGxvdyBmcmVxdWVuY3kgdXBkYXRlcyB3aGVyZSBzeW5jIGJlaGF2aW9yIHNpbXBsaWZpZXMgdGhlXG4gICAgICAvLyBsb2dpYy5cbiAgICAgIC8vIEZvciBoaWdoIGZyZXF1ZW5jeSB1cGRhdGVzIChlLmcuIGByZXNpemVgIGFuZCBgc2Nyb2xsYCBldmVudHMpLCBhbHdheXNcbiAgICAgIC8vIHByZWZlciB0aGUgYXN5bmMgUG9wcGVyI3VwZGF0ZSBtZXRob2RcbiAgICAgIGZvcmNlVXBkYXRlOiBmdW5jdGlvbiBmb3JjZVVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKGlzRGVzdHJveWVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9zdGF0ZSRlbGVtZW50cyA9IHN0YXRlLmVsZW1lbnRzLFxuICAgICAgICAgICAgcmVmZXJlbmNlID0gX3N0YXRlJGVsZW1lbnRzLnJlZmVyZW5jZSxcbiAgICAgICAgICAgIHBvcHBlciA9IF9zdGF0ZSRlbGVtZW50cy5wb3BwZXI7IC8vIERvbid0IHByb2NlZWQgaWYgYHJlZmVyZW5jZWAgb3IgYHBvcHBlcmAgYXJlIG5vdCB2YWxpZCBlbGVtZW50c1xuICAgICAgICAvLyBhbnltb3JlXG5cbiAgICAgICAgaWYgKCFhcmVWYWxpZEVsZW1lbnRzKHJlZmVyZW5jZSwgcG9wcGVyKSkge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoSU5WQUxJRF9FTEVNRU5UX0VSUk9SKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gU3RvcmUgdGhlIHJlZmVyZW5jZSBhbmQgcG9wcGVyIHJlY3RzIHRvIGJlIHJlYWQgYnkgbW9kaWZpZXJzXG5cblxuICAgICAgICBzdGF0ZS5yZWN0cyA9IHtcbiAgICAgICAgICByZWZlcmVuY2U6IGdldENvbXBvc2l0ZVJlY3QocmVmZXJlbmNlLCBnZXRPZmZzZXRQYXJlbnQocG9wcGVyKSwgc3RhdGUub3B0aW9ucy5zdHJhdGVneSA9PT0gJ2ZpeGVkJyksXG4gICAgICAgICAgcG9wcGVyOiBnZXRMYXlvdXRSZWN0KHBvcHBlcilcbiAgICAgICAgfTsgLy8gTW9kaWZpZXJzIGhhdmUgdGhlIGFiaWxpdHkgdG8gcmVzZXQgdGhlIGN1cnJlbnQgdXBkYXRlIGN5Y2xlLiBUaGVcbiAgICAgICAgLy8gbW9zdCBjb21tb24gdXNlIGNhc2UgZm9yIHRoaXMgaXMgdGhlIGBmbGlwYCBtb2RpZmllciBjaGFuZ2luZyB0aGVcbiAgICAgICAgLy8gcGxhY2VtZW50LCB3aGljaCB0aGVuIG5lZWRzIHRvIHJlLXJ1biBhbGwgdGhlIG1vZGlmaWVycywgYmVjYXVzZSB0aGVcbiAgICAgICAgLy8gbG9naWMgd2FzIHByZXZpb3VzbHkgcmFuIGZvciB0aGUgcHJldmlvdXMgcGxhY2VtZW50IGFuZCBpcyB0aGVyZWZvcmVcbiAgICAgICAgLy8gc3RhbGUvaW5jb3JyZWN0XG5cbiAgICAgICAgc3RhdGUucmVzZXQgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUucGxhY2VtZW50ID0gc3RhdGUub3B0aW9ucy5wbGFjZW1lbnQ7IC8vIE9uIGVhY2ggdXBkYXRlIGN5Y2xlLCB0aGUgYG1vZGlmaWVyc0RhdGFgIHByb3BlcnR5IGZvciBlYWNoIG1vZGlmaWVyXG4gICAgICAgIC8vIGlzIGZpbGxlZCB3aXRoIHRoZSBpbml0aWFsIGRhdGEgc3BlY2lmaWVkIGJ5IHRoZSBtb2RpZmllci4gVGhpcyBtZWFuc1xuICAgICAgICAvLyBpdCBkb2Vzbid0IHBlcnNpc3QgYW5kIGlzIGZyZXNoIG9uIGVhY2ggdXBkYXRlLlxuICAgICAgICAvLyBUbyBlbnN1cmUgcGVyc2lzdGVudCBkYXRhLCB1c2UgYCR7bmFtZX0jcGVyc2lzdGVudGBcblxuICAgICAgICBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmZvckVhY2goZnVuY3Rpb24gKG1vZGlmaWVyKSB7XG4gICAgICAgICAgcmV0dXJuIHN0YXRlLm1vZGlmaWVyc0RhdGFbbW9kaWZpZXIubmFtZV0gPSBPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllci5kYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfX2RlYnVnX2xvb3BzX18gPSAwO1xuXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBzdGF0ZS5vcmRlcmVkTW9kaWZpZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICAgICAgICAgIF9fZGVidWdfbG9vcHNfXyArPSAxO1xuXG4gICAgICAgICAgICBpZiAoX19kZWJ1Z19sb29wc19fID4gMTAwKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoSU5GSU5JVEVfTE9PUF9FUlJPUik7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzdGF0ZS5yZXNldCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgc3RhdGUucmVzZXQgPSBmYWxzZTtcbiAgICAgICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgX3N0YXRlJG9yZGVyZWRNb2RpZmllID0gc3RhdGUub3JkZXJlZE1vZGlmaWVyc1tpbmRleF0sXG4gICAgICAgICAgICAgIGZuID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLmZuLFxuICAgICAgICAgICAgICBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLm9wdGlvbnMsXG4gICAgICAgICAgICAgIF9vcHRpb25zID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllMiA9PT0gdm9pZCAwID8ge30gOiBfc3RhdGUkb3JkZXJlZE1vZGlmaWUyLFxuICAgICAgICAgICAgICBuYW1lID0gX3N0YXRlJG9yZGVyZWRNb2RpZmllLm5hbWU7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IGZuKHtcbiAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlLFxuICAgICAgICAgICAgICBvcHRpb25zOiBfb3B0aW9ucyxcbiAgICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlXG4gICAgICAgICAgICB9KSB8fCBzdGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyBBc3luYyBhbmQgb3B0aW1pc3RpY2FsbHkgb3B0aW1pemVkIHVwZGF0ZSBcdTIwMTMgaXQgd2lsbCBub3QgYmUgZXhlY3V0ZWQgaWZcbiAgICAgIC8vIG5vdCBuZWNlc3NhcnkgKGRlYm91bmNlZCB0byBydW4gYXQgbW9zdCBvbmNlLXBlci10aWNrKVxuICAgICAgdXBkYXRlOiBkZWJvdW5jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgIGluc3RhbmNlLmZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgcmVzb2x2ZShzdGF0ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSksXG4gICAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCk7XG4gICAgICAgIGlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKCFhcmVWYWxpZEVsZW1lbnRzKHJlZmVyZW5jZSwgcG9wcGVyKSkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICBjb25zb2xlLmVycm9yKElOVkFMSURfRUxFTUVOVF9FUlJPUik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5zZXRPcHRpb25zKG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICBpZiAoIWlzRGVzdHJveWVkICYmIG9wdGlvbnMub25GaXJzdFVwZGF0ZSkge1xuICAgICAgICBvcHRpb25zLm9uRmlyc3RVcGRhdGUoc3RhdGUpO1xuICAgICAgfVxuICAgIH0pOyAvLyBNb2RpZmllcnMgaGF2ZSB0aGUgYWJpbGl0eSB0byBleGVjdXRlIGFyYml0cmFyeSBjb2RlIGJlZm9yZSB0aGUgZmlyc3RcbiAgICAvLyB1cGRhdGUgY3ljbGUgcnVucy4gVGhleSB3aWxsIGJlIGV4ZWN1dGVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSB1cGRhdGVcbiAgICAvLyBjeWNsZS4gVGhpcyBpcyB1c2VmdWwgd2hlbiBhIG1vZGlmaWVyIGFkZHMgc29tZSBwZXJzaXN0ZW50IGRhdGEgdGhhdFxuICAgIC8vIG90aGVyIG1vZGlmaWVycyBuZWVkIHRvIHVzZSwgYnV0IHRoZSBtb2RpZmllciBpcyBydW4gYWZ0ZXIgdGhlIGRlcGVuZGVudFxuICAgIC8vIG9uZS5cblxuICAgIGZ1bmN0aW9uIHJ1bk1vZGlmaWVyRWZmZWN0cygpIHtcbiAgICAgIHN0YXRlLm9yZGVyZWRNb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBfcmVmMy5uYW1lLFxuICAgICAgICAgICAgX3JlZjMkb3B0aW9ucyA9IF9yZWYzLm9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zID0gX3JlZjMkb3B0aW9ucyA9PT0gdm9pZCAwID8ge30gOiBfcmVmMyRvcHRpb25zLFxuICAgICAgICAgICAgZWZmZWN0ID0gX3JlZjMuZWZmZWN0O1xuXG4gICAgICAgIGlmICh0eXBlb2YgZWZmZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdmFyIGNsZWFudXBGbiA9IGVmZmVjdCh7XG4gICAgICAgICAgICBzdGF0ZTogc3RhdGUsXG4gICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgaW5zdGFuY2U6IGluc3RhbmNlLFxuICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdmFyIG5vb3BGbiA9IGZ1bmN0aW9uIG5vb3BGbigpIHt9O1xuXG4gICAgICAgICAgZWZmZWN0Q2xlYW51cEZucy5wdXNoKGNsZWFudXBGbiB8fCBub29wRm4pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbnVwTW9kaWZpZXJFZmZlY3RzKCkge1xuICAgICAgZWZmZWN0Q2xlYW51cEZucy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgIH0pO1xuICAgICAgZWZmZWN0Q2xlYW51cEZucyA9IFtdO1xuICAgIH1cblxuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcbn1cbmV4cG9ydCB2YXIgY3JlYXRlUG9wcGVyID0gLyojX19QVVJFX18qL3BvcHBlckdlbmVyYXRvcigpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLXVudXNlZC1tb2R1bGVzXG5cbmV4cG9ydCB7IGRldGVjdE92ZXJmbG93IH07IiwgImltcG9ydCB7IHBvcHBlckdlbmVyYXRvciwgZGV0ZWN0T3ZlcmZsb3cgfSBmcm9tIFwiLi9jcmVhdGVQb3BwZXIuanNcIjtcbmltcG9ydCBldmVudExpc3RlbmVycyBmcm9tIFwiLi9tb2RpZmllcnMvZXZlbnRMaXN0ZW5lcnMuanNcIjtcbmltcG9ydCBwb3BwZXJPZmZzZXRzIGZyb20gXCIuL21vZGlmaWVycy9wb3BwZXJPZmZzZXRzLmpzXCI7XG5pbXBvcnQgY29tcHV0ZVN0eWxlcyBmcm9tIFwiLi9tb2RpZmllcnMvY29tcHV0ZVN0eWxlcy5qc1wiO1xuaW1wb3J0IGFwcGx5U3R5bGVzIGZyb20gXCIuL21vZGlmaWVycy9hcHBseVN0eWxlcy5qc1wiO1xuaW1wb3J0IG9mZnNldCBmcm9tIFwiLi9tb2RpZmllcnMvb2Zmc2V0LmpzXCI7XG5pbXBvcnQgZmxpcCBmcm9tIFwiLi9tb2RpZmllcnMvZmxpcC5qc1wiO1xuaW1wb3J0IHByZXZlbnRPdmVyZmxvdyBmcm9tIFwiLi9tb2RpZmllcnMvcHJldmVudE92ZXJmbG93LmpzXCI7XG5pbXBvcnQgYXJyb3cgZnJvbSBcIi4vbW9kaWZpZXJzL2Fycm93LmpzXCI7XG5pbXBvcnQgaGlkZSBmcm9tIFwiLi9tb2RpZmllcnMvaGlkZS5qc1wiO1xudmFyIGRlZmF1bHRNb2RpZmllcnMgPSBbZXZlbnRMaXN0ZW5lcnMsIHBvcHBlck9mZnNldHMsIGNvbXB1dGVTdHlsZXMsIGFwcGx5U3R5bGVzLCBvZmZzZXQsIGZsaXAsIHByZXZlbnRPdmVyZmxvdywgYXJyb3csIGhpZGVdO1xudmFyIGNyZWF0ZVBvcHBlciA9IC8qI19fUFVSRV9fKi9wb3BwZXJHZW5lcmF0b3Ioe1xuICBkZWZhdWx0TW9kaWZpZXJzOiBkZWZhdWx0TW9kaWZpZXJzXG59KTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBjcmVhdGVQb3BwZXIsIHBvcHBlckdlbmVyYXRvciwgZGVmYXVsdE1vZGlmaWVycywgZGV0ZWN0T3ZlcmZsb3cgfTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby11bnVzZWQtbW9kdWxlc1xuXG5leHBvcnQgeyBjcmVhdGVQb3BwZXIgYXMgY3JlYXRlUG9wcGVyTGl0ZSB9IGZyb20gXCIuL3BvcHBlci1saXRlLmpzXCI7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tdW51c2VkLW1vZHVsZXNcblxuZXhwb3J0ICogZnJvbSBcIi4vbW9kaWZpZXJzL2luZGV4LmpzXCI7IiwgImltcG9ydCB7XG4gICAgQXBwLFxuICAgIG5vcm1hbGl6ZVBhdGgsXG4gICAgVEFic3RyYWN0RmlsZSxcbiAgICBURmlsZSxcbiAgICBURm9sZGVyLFxuICAgIFZhdWx0LFxufSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVfdGZpbGUoYXBwOiBBcHAsIGZpbGVfc3RyOiBzdHJpbmcpOiBURmlsZSB7XG4gICAgZmlsZV9zdHIgPSBub3JtYWxpemVQYXRoKGZpbGVfc3RyKTtcblxuICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVfc3RyKTtcbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlIFwiJHtmaWxlX3N0cn1cIiBkb2Vzbid0IGV4aXN0YCk7XG4gICAgfVxuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2ZpbGVfc3RyfSBpcyBhIGZvbGRlciwgbm90IGEgZmlsZWApO1xuICAgIH1cblxuICAgIHJldHVybiBmaWxlO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlX3Rmb2xkZXIoYXBwOiBBcHAsIGZvbGRlcl9zdHI6IHN0cmluZyk6IFRGb2xkZXIge1xuICAgIGZvbGRlcl9zdHIgPSBub3JtYWxpemVQYXRoKGZvbGRlcl9zdHIpO1xuXG4gICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJfc3RyKTtcbiAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZvbGRlciBcIiR7Zm9sZGVyX3N0cn1cIiBkb2Vzbid0IGV4aXN0YCk7XG4gICAgfVxuICAgIGlmICghKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtmb2xkZXJfc3RyfSBpcyBhIGZpbGUsIG5vdCBhIGZvbGRlcmApO1xuICAgIH1cblxuICAgIHJldHVybiBmb2xkZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRfdGZpbGVzX2Zyb21fZm9sZGVyKFxuICAgIGFwcDogQXBwLFxuICAgIGZvbGRlcl9zdHI6IHN0cmluZ1xuKTogQXJyYXk8VEZpbGU+IHtcbiAgICBjb25zdCBmb2xkZXIgPSByZXNvbHZlX3Rmb2xkZXIoYXBwLCBmb2xkZXJfc3RyKTtcblxuICAgIGNvbnN0IGZpbGVzOiBBcnJheTxURmlsZT4gPSBbXTtcbiAgICBWYXVsdC5yZWN1cnNlQ2hpbGRyZW4oZm9sZGVyLCAoZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBmaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmaWxlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZmlsZXM7XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIERyb3Bkb3duQ29tcG9uZW50LCBURmlsZSwgQnV0dG9uQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcInNyYy9maWVsZHMvRmllbGRcIjtcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL2NvbW1hbmRzL3JlcGxhY2VWYWx1ZXNcIjtcbmltcG9ydCBGaWVsZFNldHRpbmcgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdcIjtcbmltcG9ydCB7IGluc2VydFZhbHVlcyB9IGZyb20gXCJzcmMvY29tbWFuZHMvaW5zZXJ0VmFsdWVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHZhbHVlU2VsZWN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xuICAgIHByaXZhdGUgdmFsdWU6IHN0cmluZztcbiAgICBwcml2YXRlIGZpZWxkOiBGaWVsZDtcbiAgICBwcml2YXRlIG5ld1ZhbHVlOiBzdHJpbmcgfCBudWxsO1xuICAgIHByaXZhdGUgbGluZU51bWJlcjogbnVtYmVyO1xuICAgIHByaXZhdGUgaW5Gcm9udG1hdHRlcjogYm9vbGVhbjtcbiAgICBwcml2YXRlIHRvcDogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgdmFsdWU6IHN0cmluZywgZmllbGQ6IEZpZWxkLCBsaW5lTnVtYmVyOiBudW1iZXIgPSAtMSwgaW5Gcm9udE1hdHRlcjogYm9vbGVhbiA9IGZhbHNlLCB0b3A6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMubmV3VmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyO1xuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250TWF0dGVyO1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICB9O1xuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFkZENsYXNzKFwibWV0YWRhdGEtbWVudVwiKTtcbiAgICAgICAgY29uc3QgaW5wdXREaXYgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibWV0YWRhdGEtbWVudS1tb2RhbC12YWx1ZVwiIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLmJ1aWxkSW5wdXRFbChpbnB1dERpdik7XG4gICAgfTtcblxuICAgIHByaXZhdGUgYXN5bmMgYnVpbGRJbnB1dEVsKGlucHV0RGl2OiBIVE1MRGl2RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzZWxlY3RFbCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChpbnB1dERpdik7XG4gICAgICAgIHNlbGVjdEVsLnNlbGVjdEVsLmFkZENsYXNzKFwibWV0YWRhdGEtbWVudS1zZWxlY3RcIik7XG5cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZmllbGQub3B0aW9ucztcbiAgICAgICAgc2VsZWN0RWwuYWRkT3B0aW9uKFwiXCIsIFwiLS1FbXB0eS0tXCIpO1xuICAgICAgICBjb25zdCBsaXN0Tm90ZVZhbHVlcyA9IGF3YWl0IEZpZWxkU2V0dGluZy5nZXRWYWx1ZXNMaXN0RnJvbU5vdGUodGhpcy5maWVsZC52YWx1ZXNMaXN0Tm90ZVBhdGgsIHRoaXMuYXBwKVxuICAgICAgICBsaXN0Tm90ZVZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHNlbGVjdEVsLmFkZE9wdGlvbih2YWx1ZSwgdmFsdWUpKTtcbiAgICAgICAgaWYgKGxpc3ROb3RlVmFsdWVzLmluY2x1ZGVzKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICBzZWxlY3RFbC5zZXRWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGxpc3ROb3RlVmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgICAgIHNlbGVjdEVsLmFkZE9wdGlvbihvcHRpb25zW2tleV0sIG9wdGlvbnNba2V5XSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKG9wdGlvbnMpLmluY2x1ZGVzKHRoaXMudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0RWwuc2V0VmFsdWUodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHNlbGVjdEVsLm9uQ2hhbmdlKHZhbHVlID0+IHRoaXMubmV3VmFsdWUgPSB2YWx1ZSAhPSBcIi0tRW1wdHktLVwiID8gdmFsdWUgOiBcIlwiKTtcbiAgICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChpbnB1dERpdik7XG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5zZXRUb29sdGlwKFwiU2F2ZVwiKVxuICAgICAgICAgICAgLnNldEljb24oXCJjaGVja21hcmtcIilcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5saW5lTnVtYmVyID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm5ld1ZhbHVlIHx8IHRoaXMubmV3VmFsdWUgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLmZpZWxkLm5hbWUsIHRoaXMubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluc2VydFZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLmZpZWxkLm5hbWUsIHNlbGVjdEVsLmdldFZhbHVlKCksIHRoaXMubGluZU51bWJlciwgdGhpcy5pbkZyb250bWF0dGVyLCB0aGlzLnRvcCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xufTsiLCAiaW1wb3J0IHsgRmllbGRUeXBlIH0gZnJvbSBcInNyYy90eXBlcy9maWVsZFR5cGVzXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcIi4uL0ZpZWxkXCI7XG5pbXBvcnQgQWJzdHJhY3RMaXN0QmFzZWRGaWVsZCBmcm9tIFwiLi9BYnN0cmFjdExpc3RCYXNlZEZpZWxkXCI7XG5pbXBvcnQgeyBBcHAsIE1lbnUsIFRGaWxlLCBUZXh0Q29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgRmllbGRTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9TZWxlY3RNb2RhbFwiO1xuaW1wb3J0IE1ldGFkYXRhTWVudSBmcm9tIFwibWFpblwiO1xuaW1wb3J0IFNlbGVjdE1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL2ZpZWxkcy9TZWxlY3RNb2RhbFwiO1xuaW1wb3J0IEZpZWxkU2V0dGluZyBmcm9tIFwic3JjL3NldHRpbmdzL0ZpZWxkU2V0dGluZ1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3RGaWVsZCBleHRlbmRzIEFic3RyYWN0TGlzdEJhc2VkRmllbGQge1xuXG4gICAgdmFsdWVzUHJvbXB0Q29tcG9uZW50czogQXJyYXk8VGV4dENvbXBvbmVudD4gPSBbXTtcbiAgICBwcmVzZXRWYWx1ZXNGaWVsZHM6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoZmllbGQ6IEZpZWxkKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkLCBGaWVsZFR5cGUuU2VsZWN0KVxuICAgIH1cblxuICAgIGFkZE1lbnVPcHRpb24obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhcHA6IEFwcCwgZmlsZTogVEZpbGUsIGNhdGVnb3J5OiBNZW51IHwgRmllbGRTZWxlY3RNb2RhbCk6IHZvaWQge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBTZWxlY3RNb2RhbChhcHAsIGZpbGUsIHZhbHVlLCB0aGlzLmZpZWxkKTtcbiAgICAgICAgbW9kYWwudGl0bGVFbC5zZXRUZXh0KFwiU2VsZWN0IHZhbHVlXCIpO1xuICAgICAgICBpZiAoU2VsZWN0RmllbGQuaXNNZW51KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYFVwZGF0ZSAke25hbWV9YCk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRJY29uKCdyaWdodC10cmlhbmdsZScpO1xuICAgICAgICAgICAgICAgIGl0ZW0ub25DbGljaygoKSA9PiBtb2RhbC5vcGVuKCkpO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0U2VjdGlvbihcInRhcmdldC1tZXRhZGF0YVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKFNlbGVjdEZpZWxkLmlzU2VsZWN0KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkT3B0aW9uKGB1cGRhdGVfJHtuYW1lfWAsIGBVcGRhdGUgPCR7bmFtZX0+YCk7XG4gICAgICAgICAgICBjYXRlZ29yeS5tb2RhbHNbYHVwZGF0ZV8ke25hbWV9YF0gPSAoKSA9PiBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNyZWF0ZUFuZE9wZW5GaWVsZE1vZGFsKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgc2VsZWN0ZWRGaWVsZE5hbWU6IHN0cmluZywgbGluZU51bWJlcj86IG51bWJlciwgaW5Gcm9udG1hdHRlcj86IGJvb2xlYW4sIHRvcD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZmllbGRNb2RhbCA9IG5ldyBTZWxlY3RNb2RhbChhcHAsIGZpbGUsIFwiXCIsIHRoaXMuZmllbGQsIGxpbmVOdW1iZXIsIGluRnJvbnRtYXR0ZXIsIHRvcCk7XG4gICAgICAgIGZpZWxkTW9kYWwudGl0bGVFbC5zZXRUZXh0KGBTZWxlY3Qgb3B0aW9uIGZvciAke3NlbGVjdGVkRmllbGROYW1lfWApO1xuICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKTtcbiAgICB9XG5cblxuICAgIGFzeW5jIGNyZWF0ZUR2RmllbGQoXG4gICAgICAgIHBsdWdpbjogTWV0YWRhdGFNZW51LFxuICAgICAgICBkdjogYW55LFxuICAgICAgICBwOiBhbnksXG4gICAgICAgIGZpZWxkQ29udGFpbmVyOiBIVE1MRWxlbWVudCxcbiAgICAgICAgYXR0cnM/OiB7IGNscz86IHN0cmluZywgYXR0cj86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IH1cbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgdmFsdWVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpOztcbiAgICAgICAgY29uc3QgdmFsdWVMYWJlbCA9IGR2LmVsKFwic3BhblwiLCBwW3RoaXMuZmllbGQubmFtZV0gfHwgXCJcIik7XG4gICAgICAgIHZhbHVlQ29udGFpbmVyLmFwcGVuZENoaWxkKHZhbHVlTGFiZWwpO1xuICAgICAgICBjb25zdCBkcm9wRG93bkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGRyb3BEb3duQnV0dG9uLnNldFRleHQoXCJcdUQ4M0RcdUREM0RcIik7XG4gICAgICAgIGRyb3BEb3duQnV0dG9uLmFkZENsYXNzKFwibWV0YWRhdGEtbWVudS1kdi1maWVsZC1idXR0b25cIik7XG4gICAgICAgIHZhbHVlQ29udGFpbmVyLmFwcGVuZENoaWxkKGRyb3BEb3duQnV0dG9uKTtcblxuXG4gICAgICAgIGNvbnN0IHNlbGVjdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gICAgICAgIHNlbGVjdC5zZXRBdHRyKFwiY2xhc3NcIiwgXCJtZXRhZGF0YS1tZW51LWR2LXNlbGVjdFwiKTtcbiAgICAgICAgc2VsZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGVjdCk7XG4gICAgICAgIGNvbnN0IGRpc21pc3NCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBkaXNtaXNzQnRuLnNldFRleHQoXCJcdTI3NENcIik7XG4gICAgICAgIGRpc21pc3NCdG4uYWRkQ2xhc3MoXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLWJ1dHRvblwiKTtcbiAgICAgICAgc2VsZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGRpc21pc3NCdG4pO1xuICAgICAgICBjb25zdCBudWxsT3B0aW9uID0gbmV3IE9wdGlvbihcIi0tc2VsZWN0LS1cIiwgdW5kZWZpbmVkKTtcbiAgICAgICAgc2VsZWN0LmFkZChudWxsT3B0aW9uKTtcbiAgICAgICAgY29uc3QgbGlzdE5vdGVWYWx1ZXMgPSBhd2FpdCBGaWVsZFNldHRpbmcuZ2V0VmFsdWVzTGlzdEZyb21Ob3RlKHRoaXMuZmllbGQudmFsdWVzTGlzdE5vdGVQYXRoLCBwbHVnaW4uYXBwKVxuICAgICAgICBpZiAobGlzdE5vdGVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsaXN0Tm90ZVZhbHVlcy5mb3JFYWNoKG8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IG5ldyBPcHRpb24obywgbyk7XG4gICAgICAgICAgICAgICAgaWYgKHBbdGhpcy5maWVsZC5uYW1lXSA9PT0gbyB8fFxuICAgICAgICAgICAgICAgICAgICBwW3RoaXMuZmllbGQubmFtZV0gJiZcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocFt0aGlzLmZpZWxkLm5hbWVdKS5pbmNsdWRlcyhcInBhdGhcIikgJiZcbiAgICAgICAgICAgICAgICAgICAgYFtbJHtwW3RoaXMuZmllbGQubmFtZV0ucGF0aC5yZXBsYWNlKFwiLm1kXCIsIFwiXCIpfV1dYCA9PT0gb1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWxlY3QuYWRkKG9wdGlvbik7XG4gICAgICAgICAgICAgICAgc2VsZWN0Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gc2VsZWN0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKHNlbGVjdENvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQodmFsdWVDb250YWluZXIpXG4gICAgICAgICAgICAgICAgICAgIFNlbGVjdEZpZWxkLnJlcGxhY2VWYWx1ZXMocGx1Z2luLmFwcCwgcFtcImZpbGVcIl1bXCJwYXRoXCJdLCB0aGlzLmZpZWxkLm5hbWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZmllbGQub3B0aW9ucykuZm9yRWFjaChvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBuZXcgT3B0aW9uKHRoaXMuZmllbGQub3B0aW9uc1tvXSwgbyk7XG4gICAgICAgICAgICAgICAgaWYgKHBbdGhpcy5maWVsZC5uYW1lXSA9PT0gdGhpcy5maWVsZC5vcHRpb25zW29dIHx8XG4gICAgICAgICAgICAgICAgICAgIHBbdGhpcy5maWVsZC5uYW1lXSAmJlxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwW3RoaXMuZmllbGQubmFtZV0pLmluY2x1ZGVzKFwicGF0aFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICBgW1ske3BbdGhpcy5maWVsZC5uYW1lXS5wYXRoLnJlcGxhY2UoXCIubWRcIiwgXCJcIil9XV1gID09PSB0aGlzLmZpZWxkLm9wdGlvbnNbb11cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VsZWN0LmFkZChvcHRpb24pO1xuICAgICAgICAgICAgICAgIHNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdC52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMuZmllbGQub3B0aW9uc1tzZWxlY3QudmFsdWVdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoc2VsZWN0Q29udGFpbmVyKVxuICAgICAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZCh2YWx1ZUNvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAgICAgU2VsZWN0RmllbGQucmVwbGFjZVZhbHVlcyhwbHVnaW4uYXBwLCBwW1wiZmlsZVwiXVtcInBhdGhcIl0sIHRoaXMuZmllbGQubmFtZSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBkcm9wRG93bkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQodmFsdWVDb250YWluZXIpO1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZWN0Q29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpc21pc3NCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKHNlbGVjdENvbnRhaW5lcik7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZCh2YWx1ZUNvbnRhaW5lcilcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGluaXRpYWwgc3RhdGUgKi9cbiAgICAgICAgaWYgKCFhdHRycz8ub3B0aW9ucz8uYWx3YXlzT24pIHtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKHZhbHVlQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGVjdENvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEZpZWxkVHlwZSB9IGZyb20gXCJzcmMvdHlwZXMvZmllbGRUeXBlc1wiO1xuaW1wb3J0IEZpZWxkIGZyb20gXCIuLi9GaWVsZFwiO1xuaW1wb3J0IEFic3RyYWN0TGlzdEJhc2VkRmllbGQgZnJvbSBcIi4vQWJzdHJhY3RMaXN0QmFzZWRGaWVsZFwiO1xuaW1wb3J0IHsgQXBwLCBNZW51LCBURmlsZSwgVGV4dENvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEZpZWxkU2VsZWN0TW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvU2VsZWN0TW9kYWxcIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCBTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9maWVsZHMvU2VsZWN0TW9kYWxcIjtcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL2NvbW1hbmRzL3JlcGxhY2VWYWx1ZXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3ljbGVGaWVsZCBleHRlbmRzIEFic3RyYWN0TGlzdEJhc2VkRmllbGQge1xuXG4gICAgdmFsdWVzUHJvbXB0Q29tcG9uZW50czogQXJyYXk8VGV4dENvbXBvbmVudD4gPSBbXTtcbiAgICBwcmVzZXRWYWx1ZXNGaWVsZHM6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoZmllbGQ6IEZpZWxkKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkLCBGaWVsZFR5cGUuQ3ljbGUpXG4gICAgfVxuXG4gICAgYWRkTWVudU9wdGlvbihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGFwcDogQXBwLCBmaWxlOiBURmlsZSwgY2F0ZWdvcnk6IE1lbnUgfCBGaWVsZFNlbGVjdE1vZGFsKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmZpZWxkLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcbiAgICAgICAgY29uc3Qga2V5Rm9yVmFsdWUgPSBrZXlzLmZpbmQoa2V5ID0+IG9wdGlvbnNba2V5XSA9PT0gdmFsdWUpO1xuICAgICAgICBsZXQgbmV4dE9wdGlvbjogc3RyaW5nO1xuICAgICAgICBpZiAoa2V5Rm9yVmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRLZXkgPSBrZXlzWyhrZXlzLmluZGV4T2Yoa2V5Rm9yVmFsdWUpICsgMSkgJSBrZXlzLmxlbmd0aF07XG4gICAgICAgICAgICBuZXh0T3B0aW9uID0gb3B0aW9uc1tuZXh0S2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHRPcHRpb24gPSBvcHRpb25zW09iamVjdC5rZXlzKG9wdGlvbnMpWzBdXTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEN5Y2xlRmllbGQuaXNNZW51KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYCR7bmFtZX0gOiAke3ZhbHVlfSBcdTI1QjcgJHtuZXh0T3B0aW9ufWApO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0SWNvbignc3dpdGNoJyk7XG4gICAgICAgICAgICAgICAgaXRlbS5vbkNsaWNrKCgpID0+IHJlcGxhY2VWYWx1ZXMoYXBwLCBmaWxlLCBuYW1lLCBuZXh0T3B0aW9uKSk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRTZWN0aW9uKFwidGFyZ2V0LW1ldGFkYXRhXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoQ3ljbGVGaWVsZC5pc1NlbGVjdChjYXRlZ29yeSkpIHtcbiAgICAgICAgICAgIGNhdGVnb3J5LmFkZE9wdGlvbihgJHtuYW1lfV8ke3ZhbHVlfV8ke25leHRPcHRpb259YCwgYCR7bmFtZX0gOiAke3ZhbHVlfSBcdTI1QjcgJHtuZXh0T3B0aW9ufWApO1xuICAgICAgICAgICAgY2F0ZWdvcnkubW9kYWxzW2Ake25hbWV9XyR7dmFsdWV9XyR7bmV4dE9wdGlvbn1gXSA9ICgpID0+XG4gICAgICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyhhcHAsIGZpbGUsIG5hbWUsIG5leHRPcHRpb24pO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBjcmVhdGVBbmRPcGVuRmllbGRNb2RhbChhcHA6IEFwcCwgZmlsZTogVEZpbGUsIHNlbGVjdGVkRmllbGROYW1lOiBzdHJpbmcsIGxpbmVOdW1iZXI/OiBudW1iZXIsIGluRnJvbnRtYXR0ZXI/OiBib29sZWFuLCB0b3A/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZpZWxkTW9kYWwgPSBuZXcgU2VsZWN0TW9kYWwoYXBwLCBmaWxlLCBcIlwiLCB0aGlzLmZpZWxkLCBsaW5lTnVtYmVyLCBpbkZyb250bWF0dGVyLCB0b3ApO1xuICAgICAgICBmaWVsZE1vZGFsLnRpdGxlRWwuc2V0VGV4dChgU2VsZWN0IG9wdGlvbiBmb3IgJHtzZWxlY3RlZEZpZWxkTmFtZX1gKTtcbiAgICAgICAgZmllbGRNb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlRHZGaWVsZChcbiAgICAgICAgcGx1Z2luOiBNZXRhZGF0YU1lbnUsXG4gICAgICAgIGR2OiBhbnksXG4gICAgICAgIHA6IGFueSxcbiAgICAgICAgZmllbGRDb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgICAgICBhdHRycz86IHsgY2xzPzogc3RyaW5nLCBhdHRyPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfVxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5maWVsZC5vcHRpb25zO1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGtleUZvclZhbHVlID0ga2V5cy5maW5kKGtleSA9PiBvcHRpb25zW2tleV0gPT09IHBbdGhpcy5maWVsZC5uYW1lXSk7XG4gICAgICAgIGxldCBuZXh0T3B0aW9uOiBzdHJpbmc7XG4gICAgICAgIGlmIChrZXlGb3JWYWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgbmV4dEtleSA9IGtleXNbKGtleXMuaW5kZXhPZihrZXlGb3JWYWx1ZSkgKyAxKSAlIGtleXMubGVuZ3RoXTtcbiAgICAgICAgICAgIG5leHRPcHRpb24gPSBvcHRpb25zW25leHRLZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dE9wdGlvbiA9IG9wdGlvbnNbT2JqZWN0LmtleXMob3B0aW9ucylbMF1dO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZpZWxkVmFsdWUgPSBkdi5lbCgnc3BhbicsIHBbdGhpcy5maWVsZC5uYW1lXSwgYXR0cnMpO1xuICAgICAgICAvKiBlbmQgc3BhY2VyICovXG4gICAgICAgIGNvbnN0IHNwYWNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNwYWNlci5zZXRBdHRyKFwiY2xhc3NcIiwgXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLXNwYWNlclwiKTtcbiAgICAgICAgLyogYnV0dG9uIHRvIGRpc3BsYXkgaW5wdXQgKi9cbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgYnV0dG9uLnNldFRleHQoXCJcdTI1QjZcdUZFMEZcIik7XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyKCdjbGFzcycsIFwibWV0YWRhdGEtbWVudS1kdi1maWVsZC1idXR0b25cIik7XG4gICAgICAgIGlmICghYXR0cnM/Lm9wdGlvbnM/LmFsd2F5c09uKSB7XG4gICAgICAgICAgICBidXR0b24uaGlkZSgpO1xuICAgICAgICAgICAgc3BhY2VyLnNob3coKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLm9ubW91c2VvdmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zaG93KCk7XG4gICAgICAgICAgICAgICAgc3BhY2VyLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLm9ubW91c2VvdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBzcGFjZXIuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogYnV0dG9uIG9uIGNsaWNrIDogZ28gdG8gbmV4dCB2ZXJzaW9uKi9cbiAgICAgICAgYnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgQ3ljbGVGaWVsZC5yZXBsYWNlVmFsdWVzKHBsdWdpbi5hcHAsIHBbXCJmaWxlXCJdW1wicGF0aFwiXSwgdGhpcy5maWVsZC5uYW1lLCBuZXh0T3B0aW9uKTtcbiAgICAgICAgICAgIGlmICghYXR0cnM/Lm9wdGlvbnM/LmFsd2F5c09uKSB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBzcGFjZXIuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZmllbGRWYWx1ZSk7XG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKHNwYWNlcik7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBUb2dnbGVDb21wb25lbnQsIFRGaWxlLCBCdXR0b25Db21wb25lbnQsIEV4dHJhQnV0dG9uQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgRmllbGQgZnJvbSBcInNyYy9maWVsZHMvRmllbGRcIjtcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL2NvbW1hbmRzL3JlcGxhY2VWYWx1ZXNcIjtcbmltcG9ydCBGaWVsZFNldHRpbmcgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdcIjtcbmltcG9ydCB7IGluc2VydFZhbHVlcyB9IGZyb20gXCJzcmMvY29tbWFuZHMvaW5zZXJ0VmFsdWVzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE11bHRpU2VsZWN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xuICAgIHByaXZhdGUgZmllbGQ6IEZpZWxkO1xuICAgIHByaXZhdGUgb3B0aW9uczogQXJyYXk8c3RyaW5nPjtcbiAgICBwcml2YXRlIGxpbmVOdW1iZXI6IG51bWJlcjtcbiAgICBwcml2YXRlIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSB0b3A6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZTogVEZpbGUsIGZpZWxkOiBGaWVsZCwgaW5pdGlhbE9wdGlvbnM6IHN0cmluZywgbGluZU51bWJlcjogbnVtYmVyID0gLTEsIGluRnJvbnRNYXR0ZXI6IGJvb2xlYW4gPSBmYWxzZSwgdG9wOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgaWYgKGluaXRpYWxPcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAoaW5pdGlhbE9wdGlvbnMudG9TdHJpbmcoKS5zdGFydHNXaXRoKFwiW1tcIikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBpbml0aWFsT3B0aW9ucy5zcGxpdChcIixcIikubWFwKGl0ZW0gPT4gaXRlbS50cmltKCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBpbml0aWFsT3B0aW9ucy50b1N0cmluZygpLnJlcGxhY2UoL15cXFsoLiopXFxdJC8sIFwiJDFcIikuc3BsaXQoXCIsXCIpLm1hcChpdGVtID0+IGl0ZW0udHJpbSgpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBbXTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZU51bWJlcjtcbiAgICAgICAgdGhpcy5pbkZyb250bWF0dGVyID0gaW5Gcm9udE1hdHRlcjtcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgfTtcblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcyhcIm1ldGFkYXRhLW1lbnVcIik7XG5cbiAgICAgICAgY29uc3QgdmFsdWVHcmlkID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogXCJtZXRhZGF0YS1tZW51LXZhbHVlLWdyaWRcIlxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbGlzdE5vdGVWYWx1ZXMgPSBhd2FpdCBGaWVsZFNldHRpbmcuZ2V0VmFsdWVzTGlzdEZyb21Ob3RlKHRoaXMuZmllbGQudmFsdWVzTGlzdE5vdGVQYXRoLCB0aGlzLmFwcClcbiAgICAgICAgYXdhaXQgdGhpcy5wb3B1bGF0ZVZhbHVlc0dyaWQodmFsdWVHcmlkLCBsaXN0Tm90ZVZhbHVlcyk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgYXN5bmMgcG9wdWxhdGVWYWx1ZXNHcmlkKHZhbHVlR3JpZDogSFRNTERpdkVsZW1lbnQsIGxpc3ROb3RlVmFsdWVzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAobGlzdE5vdGVWYWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmZpZWxkLm9wdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZXRWYWx1ZSA9IHRoaXMuZmllbGQub3B0aW9uc1trZXldO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRWYWx1ZVRvZ2dsZXIodmFsdWVHcmlkLCBwcmVzZXRWYWx1ZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBsaXN0Tm90ZVZhbHVlcy5mb3JFYWNoKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRWYWx1ZVRvZ2dsZXIodmFsdWVHcmlkLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBmb290ZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibWV0YWRhdGEtbWVudS12YWx1ZS1ncmlkLWZvb3RlclwiIH0pO1xuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChmb290ZXIpO1xuICAgICAgICBzYXZlQnV0dG9uLnNldEljb24oXCJjaGVja21hcmtcIik7XG4gICAgICAgIHNhdmVCdXR0b24ub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5saW5lTnVtYmVyID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLmZpZWxkLm5hbWUsIHRoaXMub3B0aW9ucy5qb2luKFwiLFwiKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlcmVkVmFsdWVzID0gIXRoaXMuaW5Gcm9udG1hdHRlciA/IHRoaXMub3B0aW9ucy5qb2luKFwiLFwiKSA6IHRoaXMub3B0aW9ucy5sZW5ndGggPiAxID8gYFske3RoaXMub3B0aW9ucy5qb2luKFwiLCBcIil9XWAgOiB0aGlzLm9wdGlvbnNbMF1cbiAgICAgICAgICAgICAgICBpbnNlcnRWYWx1ZXModGhpcy5hcHAsIHRoaXMuZmlsZSwgdGhpcy5maWVsZC5uYW1lLCByZW5kZXJlZFZhbHVlcywgdGhpcy5saW5lTnVtYmVyLCB0aGlzLmluRnJvbnRtYXR0ZXIsIHRoaXMudG9wKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBuZXcgRXh0cmFCdXR0b25Db21wb25lbnQoZm9vdGVyKTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLnNldEljb24oXCJjcm9zc1wiKTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uQ2xpY2soKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBidWlsZFZhbHVlVG9nZ2xlcih2YWx1ZUdyaWQ6IEhUTUxEaXZFbGVtZW50LCBwcmVzZXRPcHRpb246IHN0cmluZykge1xuICAgICAgICBjb25zdCB2YWx1ZVNlbGVjdG9yQ29udGFpbmVyID0gdmFsdWVHcmlkLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwibWV0YWRhdGEtbWVudS12YWx1ZS1zZWxlY3Rvci1jb250YWluZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdmFsdWVUb2dnbGVyQ29udGFpbmVyID0gdmFsdWVTZWxlY3RvckNvbnRhaW5lci5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgY2xzOiBcIm1ldGFkYXRhLW1lbnUtdmFsdWUtc2VsZWN0b3ItdG9nZ2xlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB2YWx1ZVRvZ2dsZXIgPSBuZXcgVG9nZ2xlQ29tcG9uZW50KHZhbHVlVG9nZ2xlckNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMub3B0aW9ucy5mb3JFYWNoKG9wdGlvbnMgPT4ge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT0gcHJlc2V0T3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVUb2dnbGVyLnNldFZhbHVlKHRydWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFsdWVUb2dnbGVyLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAhdGhpcy5vcHRpb25zLmluY2x1ZGVzKHByZXNldE9wdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucHVzaChwcmVzZXRPcHRpb24pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMucmVtb3ZlKHByZXNldE9wdGlvbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdmFsdWVMYWJlbCA9IHZhbHVlU2VsZWN0b3JDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm1ldGFkYXRhLW1lbnUtdmFsdWUtc2VsZWN0b3ItbGFiZWxcIiB9KTtcbiAgICAgICAgdmFsdWVMYWJlbC5zZXRUZXh0KHByZXNldE9wdGlvbik7XG4gICAgfTtcbn07IiwgImltcG9ydCB7IEZpZWxkVHlwZSB9IGZyb20gXCJzcmMvdHlwZXMvZmllbGRUeXBlc1wiO1xuaW1wb3J0IEZpZWxkIGZyb20gXCIuLi9GaWVsZFwiO1xuaW1wb3J0IEFic3RyYWN0TGlzdEJhc2VkRmllbGQgZnJvbSBcIi4vQWJzdHJhY3RMaXN0QmFzZWRGaWVsZFwiO1xuaW1wb3J0IHsgQXBwLCBNZW51LCBURmlsZSwgVGV4dENvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEZpZWxkU2VsZWN0TW9kYWwgZnJvbSBcInNyYy9vcHRpb25Nb2RhbHMvU2VsZWN0TW9kYWxcIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCBNdWx0aVNlbGVjdE1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL2ZpZWxkcy9NdWx0aVNlbGVjdE1vZGFsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE11bHRpRmllbGQgZXh0ZW5kcyBBYnN0cmFjdExpc3RCYXNlZEZpZWxkIHtcblxuICAgIHZhbHVlc1Byb21wdENvbXBvbmVudHM6IEFycmF5PFRleHRDb21wb25lbnQ+ID0gW107XG4gICAgcHJlc2V0VmFsdWVzRmllbGRzOiBIVE1MRGl2RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGZpZWxkOiBGaWVsZCkge1xuICAgICAgICBzdXBlcihmaWVsZCwgRmllbGRUeXBlLk11bHRpKVxuICAgIH1cblxuICAgIGFkZE1lbnVPcHRpb24obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhcHA6IEFwcCwgZmlsZTogVEZpbGUsIGNhdGVnb3J5OiBNZW51IHwgRmllbGRTZWxlY3RNb2RhbCk6IHZvaWQge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNdWx0aVNlbGVjdE1vZGFsKGFwcCwgZmlsZSwgdGhpcy5maWVsZCwgdmFsdWUpO1xuICAgICAgICBtb2RhbC50aXRsZUVsLnNldFRleHQoXCJTZWxlY3QgdmFsdWVzXCIpO1xuICAgICAgICBpZiAoTXVsdGlGaWVsZC5pc01lbnUoY2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICBjYXRlZ29yeS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShgVXBkYXRlIDwke25hbWV9PmApO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0SWNvbignYnVsbGV0LWxpc3QnKTtcbiAgICAgICAgICAgICAgICBpdGVtLm9uQ2xpY2soKCkgPT4gbW9kYWwub3BlbigpKTtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFNlY3Rpb24oXCJ0YXJnZXQtbWV0YWRhdGFcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChNdWx0aUZpZWxkLmlzU2VsZWN0KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkT3B0aW9uKGB1cGRhdGVfJHtuYW1lfWAsIGBVcGRhdGUgPCR7bmFtZX0+YCk7XG4gICAgICAgICAgICBjYXRlZ29yeS5tb2RhbHNbYHVwZGF0ZV8ke25hbWV9YF0gPSAoKSA9PiBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNyZWF0ZUFuZE9wZW5GaWVsZE1vZGFsKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgc2VsZWN0ZWRGaWVsZE5hbWU6IHN0cmluZywgbGluZU51bWJlcj86IG51bWJlciwgaW5Gcm9udG1hdHRlcj86IGJvb2xlYW4sIHRvcD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZmllbGRNb2RhbCA9IG5ldyBNdWx0aVNlbGVjdE1vZGFsKGFwcCwgZmlsZSwgdGhpcy5maWVsZCwgXCJcIiwgbGluZU51bWJlciwgaW5Gcm9udG1hdHRlciwgdG9wKTtcbiAgICAgICAgZmllbGRNb2RhbC50aXRsZUVsLnNldFRleHQoYFNlbGVjdCBvcHRpb25zIGZvciAke3NlbGVjdGVkRmllbGROYW1lfWApO1xuICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVEdkZpZWxkKFxuICAgICAgICBwbHVnaW46IE1ldGFkYXRhTWVudSxcbiAgICAgICAgZHY6IGFueSxcbiAgICAgICAgcDogYW55LFxuICAgICAgICBmaWVsZENvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgICAgIGF0dHJzPzogeyBjbHM/OiBzdHJpbmcsIGF0dHI/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB9XG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8qIFxuICAgICAgICB0aGlzIGNvbnRyb2wgZGlzcGxheXMgYnkgZGVmYXVsdCB0aGUgbGlzdCBvZiB2YWx1ZVxuICAgICAgICB3aGVuIG1vdXNlb3Zlcjogd2UgZGlzcGxheSBhIFwiK1wiIGJ1dHRvbiBhdCB0aGUgYmVnZ2luaW5nIG9mIHRoZSBmaWVsZCB0byBhZGQgYSBuZXcgdmFsdWUgYW5kIGEgXCJ4XCIgYnV0dG9uIGFmdGVyIHRoZSB2YWx1ZSBob3ZlcmVkIHRvIHJlbW92ZSBpdCBmcm9tIGxpc3RcbiAgICAgICAgd2hlbiB0aGUgXCJ4XCIgYnV0dG9uIGlzIGNsaWNrZWQsIHdlIHJlbW92ZSB0aGUgbGlzdCBmcm9tIHZhbHVlXG4gICAgICAgIHdoZW4gdGhlIFwiK1wiIGJ1dHRvbiBpcyBjbGlja2VkLCB3ZSBkaXNwbGF5IGEgc2VsZWN0IGRyb3Bkb3duIGZpbHRlcmVkIHdpdGggcmVtYWluaW5nIG9wdGlvbnMuIHdoZW4gb25lIG9wdGlvbiBpcyBzZWxlY3RlZCB3ZSBhZGQgaXQgdG8gdGhlIGxpc3QgYW5kIHJlbW92ZSB0aGUgY29udHJvbFxuICAgICAgICAqL1xuICAgICAgICBsZXQgdmFsdWVIb3ZlcmVkID0gZmFsc2U7XG4gICAgICAgIGxldCBjdXJyZW50VmFsdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBpZiAocFt0aGlzLmZpZWxkLm5hbWVdKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMocFt0aGlzLmZpZWxkLm5hbWVdKS5pbmNsdWRlcyhcInBhdGhcIikpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWVzID0gW2BbWyR7cFt0aGlzLmZpZWxkLm5hbWVdLnBhdGgucmVwbGFjZShcIi5tZFwiLCBcIlwiKX1dXWBdXG4gICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocFt0aGlzLmZpZWxkLm5hbWVdKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZXMucHVzaCguLi5wW3RoaXMuZmllbGQubmFtZV0ubGFzdCgpLnNwbGl0KFwiLFwiKS5tYXAoKHY6IHN0cmluZykgPT4gdi50cmltKCkpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlcyA9IHBbdGhpcy5maWVsZC5uYW1lXS5zcGxpdChcIixcIikubWFwKCh2OiBzdHJpbmcpID0+IHYudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIHNlbGVjdCBjb250YWluZXIgKi9cbiAgICAgICAgY29uc3Qgc2VsZWN0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICAgICAgc2VsZWN0LnNldEF0dHIoXCJjbGFzc1wiLCBcIm1ldGFkYXRhLW1lbnUtZHYtc2VsZWN0XCIpO1xuICAgICAgICBzZWxlY3RDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZWN0KVxuICAgICAgICBjb25zdCBudWxsT3B0aW9uID0gbmV3IE9wdGlvbihcIi0tc2VsZWN0LS1cIiwgdW5kZWZpbmVkKTtcbiAgICAgICAgc2VsZWN0LmFkZChudWxsT3B0aW9uKTtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5maWVsZC5vcHRpb25zKVxuICAgICAgICAgICAgLmZpbHRlcihvID0+ICFjdXJyZW50VmFsdWVzLmNvbnRhaW5zKHRoaXMuZmllbGQub3B0aW9uc1tvXSkpXG4gICAgICAgICAgICAuZm9yRWFjaChvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSBuZXcgT3B0aW9uKHRoaXMuZmllbGQub3B0aW9uc1tvXSwgbyk7XG4gICAgICAgICAgICAgICAgaWYgKHBbdGhpcy5maWVsZC5uYW1lXSA9PT0gdGhpcy5maWVsZC5vcHRpb25zW29dKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGVjdC5hZGQob3B0aW9uKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIHNlbGVjdC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlcyA9IFsuLi5jdXJyZW50VmFsdWVzLCB0aGlzLmZpZWxkLm9wdGlvbnNbc2VsZWN0LnZhbHVlXV0uam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgTXVsdGlGaWVsZC5yZXBsYWNlVmFsdWVzKHBsdWdpbi5hcHAsIHBbXCJmaWxlXCJdW1wicGF0aFwiXSwgdGhpcy5maWVsZC5uYW1lLCBuZXdWYWx1ZXMpXG4gICAgICAgICAgICBzaW5nbGVTcGFjZXIuaGlkZSgpO1xuICAgICAgICAgICAgZG91YmxlU3BhY2VyLnNob3coKTtcbiAgICAgICAgICAgIGFkZEJ0bi5oaWRlKCk7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZCh2YWx1ZXNDb250YWluZXIpO1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoc2luZ2xlU3BhY2VyKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGRvdWJsZVNwYWNlcik7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5yZW1vdmVDaGlsZChzZWxlY3RDb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZWN0Lm9ua2V5ZG93biA9IChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQodmFsdWVzQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChzaW5nbGVTcGFjZXIpO1xuICAgICAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGRvdWJsZVNwYWNlcik7XG4gICAgICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoc2VsZWN0Q29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbG9zZVNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGNsb3NlU2VsZWN0LnNldFRleHQoXCJcXHUyNzRDXCIpO1xuICAgICAgICBjbG9zZVNlbGVjdC5hZGRDbGFzcyhcIm1ldGFkYXRhLW1lbnUtZHYtZmllbGQtYnV0dG9uXCIpO1xuICAgICAgICBjbG9zZVNlbGVjdC5hZGRDbGFzcyhcIm11bHRpXCIpO1xuICAgICAgICBjbG9zZVNlbGVjdC5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQodmFsdWVzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKHNpbmdsZVNwYWNlcik7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChkb3VibGVTcGFjZXIpO1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQoc2VsZWN0Q29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgc2VsZWN0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNsb3NlU2VsZWN0KTtcblxuICAgICAgICAvKiBjdXJyZW50IHZhbHVlcyBjb250YWluZXIgKi9cbiAgICAgICAgY29uc3QgdmFsdWVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdmFsdWVzQ29udGFpbmVyLmFkZENsYXNzKFwibWV0YWRhdGEtbWVudS1kdi1tdWx0aS12YWx1ZXMtY29udGFpbmVyXCIpO1xuXG4gICAgICAgIC8qIGN1cnJlbnQgdmFsdWVzICovXG4gICAgICAgIGN1cnJlbnRWYWx1ZXMuZm9yRWFjaCh2ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHZhbHVlQ29udGFpbmVyLmFkZENsYXNzKFwibWV0YWRhdGEtbWVudS1kdi1tdWx0aS12YWx1ZXMtY29udGFpbmVyXCIpO1xuXG5cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlUmVtb3ZlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIHZhbHVlUmVtb3ZlQnRuLnNldFRleHQoXCJcdTI3NENcIik7XG4gICAgICAgICAgICB2YWx1ZVJlbW92ZUJ0bi5hZGRDbGFzcyhcIm1ldGFkYXRhLW1lbnUtZHYtZmllbGQtYnV0dG9uXCIpO1xuICAgICAgICAgICAgdmFsdWVSZW1vdmVCdG4uYWRkQ2xhc3MoXCJtdWx0aVwiKTtcbiAgICAgICAgICAgIHZhbHVlUmVtb3ZlQnRuLmhpZGUoKTtcbiAgICAgICAgICAgIHZhbHVlUmVtb3ZlQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVmFsdWVzID0gY3VycmVudFZhbHVlcy5maWx0ZXIoY1YgPT4gY1YgIT09IHYpLmpvaW4oXCIsIFwiKVxuICAgICAgICAgICAgICAgIE11bHRpRmllbGQucmVwbGFjZVZhbHVlcyhwbHVnaW4uYXBwLCBwW1wiZmlsZVwiXVtcInBhdGhcIl0sIHRoaXMuZmllbGQubmFtZSwgcmVtYWluaW5nVmFsdWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlQ29udGFpbmVyLmFwcGVuZENoaWxkKHZhbHVlUmVtb3ZlQnRuKTtcblxuICAgICAgICAgICAgY29uc3QgdmFsdWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB2YWx1ZUxhYmVsLnNldFRleHQodik7XG4gICAgICAgICAgICB2YWx1ZUxhYmVsLmFkZENsYXNzKFwibWV0YWRhdGEtbWVudS1kdi1tdWx0aS12YWx1ZS1sYWJlbFwiKTtcbiAgICAgICAgICAgIHZhbHVlQ29udGFpbmVyLmFwcGVuZENoaWxkKHZhbHVlTGFiZWwpO1xuXG4gICAgICAgICAgICB2YWx1ZUNvbnRhaW5lci5vbm1vdXNlb3ZlciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB2YWx1ZUhvdmVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRvdWJsZVNwYWNlci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgc2luZ2xlU3BhY2VyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB2YWx1ZVJlbW92ZUJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgdmFsdWVMYWJlbC5hZGRDbGFzcyhcImhvdmVyZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZUNvbnRhaW5lci5vbm1vdXNlb3V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhbHVlSG92ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhbHVlUmVtb3ZlQnRuLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBzaW5nbGVTcGFjZXIuc2hvdygpO1xuICAgICAgICAgICAgICAgIGRvdWJsZVNwYWNlci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdmFsdWVMYWJlbC5yZW1vdmVDbGFzcyhcImhvdmVyZWRcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhbHVlc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh2YWx1ZUNvbnRhaW5lcik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgLyogYnV0dG9uIHRvIGRpc3BsYXkgaW5wdXQgKi9cbiAgICAgICAgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgYWRkQnRuLnNldFRleHQoXCJcdTI3OTVcIik7XG4gICAgICAgIGFkZEJ0bi5zZXRBdHRyKCdjbGFzcycsIFwibWV0YWRhdGEtbWVudS1kdi1maWVsZC1idXR0b25cIik7XG5cbiAgICAgICAgdmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKGFkZEJ0bik7XG4gICAgICAgIGFkZEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIucmVtb3ZlQ2hpbGQodmFsdWVzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLnJlbW92ZUNoaWxkKHNpbmdsZVNwYWNlcik7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5yZW1vdmVDaGlsZChkb3VibGVTcGFjZXIpO1xuICAgICAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZWN0Q29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGVuZCBzcGFjZXIgKi9cbiAgICAgICAgY29uc3Qgc2luZ2xlU3BhY2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgc2luZ2xlU3BhY2VyLnNldEF0dHIoXCJjbGFzc1wiLCBcIm1ldGFkYXRhLW1lbnUtZHYtZmllbGQtc3BhY2VyXCIpXG4gICAgICAgIGNvbnN0IGRvdWJsZVNwYWNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGRvdWJsZVNwYWNlci5zZXRBdHRyKFwiY2xhc3NcIiwgXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLWRvdWJsZS1zcGFjZXJcIilcblxuICAgICAgICBpZiAoIWF0dHJzPy5vcHRpb25zPy5hbHdheXNPbikge1xuICAgICAgICAgICAgYWRkQnRuLmhpZGUoKTtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLm9ubW91c2VvdmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFkZEJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgZG91YmxlU3BhY2VyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlSG92ZXJlZCkgc2luZ2xlU3BhY2VyLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLm9ubW91c2VvdXQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkQnRuLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBzaW5nbGVTcGFjZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGRvdWJsZVNwYWNlci5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBpbml0aWFsIHN0YXRlICovXG4gICAgICAgIGlmICghYXR0cnM/Lm9wdGlvbnM/LmFsd2F5c09uKSB7XG4gICAgICAgICAgICBzaW5nbGVTcGFjZXIuaGlkZSgpO1xuICAgICAgICAgICAgZG91YmxlU3BhY2VyLnNob3coKTtcbiAgICAgICAgICAgIGFkZEJ0bi5oaWRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaW5nbGVTcGFjZXIuc2hvdygpO1xuICAgICAgICAgICAgZG91YmxlU3BhY2VyLmhpZGUoKTtcbiAgICAgICAgICAgIGFkZEJ0bi5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQodmFsdWVzQ29udGFpbmVyKTtcbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoc2luZ2xlU3BhY2VyKTtcbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZG91YmxlU3BhY2VyKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgRmllbGRUeXBlIH0gZnJvbSBcInNyYy90eXBlcy9maWVsZFR5cGVzXCI7XG5pbXBvcnQgeyBGaWVsZE1hbmFnZXIsIFNldHRpbmdMb2NhdGlvbiB9IGZyb20gXCIuLi9GaWVsZE1hbmFnZXJcIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwiLi4vRmllbGRcIjtcbmltcG9ydCB7IEFwcCwgVEZpbGUsIE1lbnUsIFRleHRBcmVhQ29tcG9uZW50LCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBGaWVsZFNlbGVjdE1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL1NlbGVjdE1vZGFsXCI7XG5pbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCI7XG5pbXBvcnQgU2luZ2xlRmlsZU1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL2ZpZWxkcy9TaW5nbGVGaWxlTW9kYWxcIjtcbmltcG9ydCBGaWVsZFNldHRpbmdzTW9kYWwgZnJvbSBcInNyYy9zZXR0aW5ncy9GaWVsZFNldHRpbmdzTW9kYWxcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZUZpZWxkIGV4dGVuZHMgRmllbGRNYW5hZ2VyIHtcblxuICAgIHByaXZhdGUgZmlsZVZhbGlkYXRvckZpZWxkOiBIVE1MRGl2RWxlbWVudFxuICAgIHByaXZhdGUgZHZRdWVyeVN0cmluZzogVGV4dEFyZWFDb21wb25lbnRcblxuICAgIGNvbnN0cnVjdG9yKGZpZWxkOiBGaWVsZCkge1xuICAgICAgICBzdXBlcihmaWVsZCwgRmllbGRUeXBlLkZpbGUpXG4gICAgfVxuXG4gICAgc3RhdGljIGJ1aWxkTWFya0Rvd25MaW5rKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgcGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZGVzdEZpbGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChwYXRoLCBmaWxlLnBhdGgpXG4gICAgICAgIGlmIChkZXN0RmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFwcC5maWxlTWFuYWdlci5nZW5lcmF0ZU1hcmtkb3duTGluayhcbiAgICAgICAgICAgICAgICBkZXN0RmlsZSxcbiAgICAgICAgICAgICAgICBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGRlc3RGaWxlLmJhc2VuYW1lXG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG5cbiAgICBnZXRGaWxlcyA9ICgpOiBURmlsZVtdID0+IHtcbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IGdldFJlc3VsdHMgPSAoYXBpOiBEYXRhdmlld1BsdWdpbltcImFwaVwiXSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBGdW5jdGlvbihcImR2XCIsIGByZXR1cm4gJHt0aGlzLmZpZWxkLm9wdGlvbnMuZHZRdWVyeVN0cmluZ31gKSkoYXBpKVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBXcm9uZyBxdWVyeSBmb3IgZmllbGQgPCR7dGhpcy5maWVsZC5uYW1lfT5cXG5jaGVjayB5b3VyIHNldHRpbmdzYCwgMzAwMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZGF0YXZpZXcgPSBhcHAucGx1Z2lucy5wbHVnaW5zW1wiZGF0YXZpZXdcIl1cbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgIGlmICh0aGlzLmZpZWxkLm9wdGlvbnMuZHZRdWVyeVN0cmluZyAmJiBkYXRhdmlldz8uc2V0dGluZ3MuZW5hYmxlRGF0YXZpZXdKcyAmJiBkYXRhdmlldz8uc2V0dGluZ3MuZW5hYmxlSW5saW5lRGF0YXZpZXdKcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlc1BhdGggPSBnZXRSZXN1bHRzKGRhdGF2aWV3LmFwaSkudmFsdWVzLm1hcCgodjogYW55KSA9PiB2LmZpbGUucGF0aClcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZiA9PiBmaWxlc1BhdGguaW5jbHVkZXMoZi5wYXRoKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZE1lbnVPcHRpb24obmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhcHA6IEFwcCwgZmlsZTogVEZpbGUsIGNhdGVnb3J5OiBNZW51IHwgRmllbGRTZWxlY3RNb2RhbCk6IHZvaWQge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBTaW5nbGVGaWxlTW9kYWwoYXBwLCBmaWxlLCB0aGlzLmZpZWxkKVxuICAgICAgICBtb2RhbC50aXRsZUVsLnNldFRleHQoXCJTZWxlY3QgdmFsdWVcIik7XG4gICAgICAgIGlmIChGaWxlRmllbGQuaXNNZW51KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoYFVwZGF0ZSAke25hbWV9YCk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRJY29uKCdzZWFyY2gnKTtcbiAgICAgICAgICAgICAgICBpdGVtLm9uQ2xpY2soKCkgPT4gbW9kYWwub3BlbigpKTtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFNlY3Rpb24oXCJ0YXJnZXQtbWV0YWRhdGFcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChGaWxlRmllbGQuaXNTZWxlY3QoY2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICBjYXRlZ29yeS5hZGRPcHRpb24oYHVwZGF0ZV8ke25hbWV9YCwgYFVwZGF0ZSA8JHtuYW1lfT5gKTtcbiAgICAgICAgICAgIGNhdGVnb3J5Lm1vZGFsc1tgdXBkYXRlXyR7bmFtZX1gXSA9ICgpID0+IG1vZGFsLm9wZW4oKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjcmVhdGVBbmRPcGVuRmllbGRNb2RhbChhcHA6IEFwcCwgZmlsZTogVEZpbGUsIHNlbGVjdGVkRmllbGROYW1lOiBzdHJpbmcsIGxpbmVOdW1iZXI/OiBudW1iZXIsIGluRnJvbnRtYXR0ZXI/OiBib29sZWFuLCB0b3A/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGZpZWxkTW9kYWwgPSBuZXcgU2luZ2xlRmlsZU1vZGFsKGFwcCwgZmlsZSwgdGhpcy5maWVsZCwgbGluZU51bWJlciwgaW5Gcm9udG1hdHRlciwgdG9wKTtcbiAgICAgICAgZmllbGRNb2RhbC50aXRsZUVsLnNldFRleHQoYEVudGVyIHZhbHVlIGZvciAke3NlbGVjdGVkRmllbGROYW1lfWApO1xuICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVEdkZpZWxkKFxuICAgICAgICBwbHVnaW46IE1ldGFkYXRhTWVudSxcbiAgICAgICAgZHY6IGFueSxcbiAgICAgICAgcDogYW55LFxuICAgICAgICBmaWVsZENvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgICAgIGF0dHJzPzogeyBjbHM/OiBzdHJpbmcsIGF0dHI/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB9XG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZpZWxkVmFsdWUgPSBkdi5lbCgnc3BhbicsIHBbdGhpcy5maWVsZC5uYW1lXSwgYXR0cnMpO1xuICAgICAgICBjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIHNlYXJjaEJ0bi5zZXRUZXh0KFwiXHVEODNEXHVERDBFXCIpXG4gICAgICAgIHNlYXJjaEJ0bi5hZGRDbGFzcyhcIm1ldGFkYXRhLW1lbnUtZHYtZmllbGQtYnV0dG9uXCIpXG4gICAgICAgIC8qIGVuZCBzcGFjZXIgKi9cbiAgICAgICAgY29uc3Qgc3BhY2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICAgICAgICBzcGFjZXIuc2V0QXR0cihcImNsYXNzXCIsIFwibWV0YWRhdGEtbWVudS1kdi1maWVsZC1zcGFjZXJcIilcblxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwW1wiZmlsZVwiXVtcInBhdGhcIl0pXG4gICAgICAgIGxldCBmaWVsZE1vZGFsOiBTaW5nbGVGaWxlTW9kYWw7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT0gXCJtZFwiKSB7XG4gICAgICAgICAgICBmaWVsZE1vZGFsID0gbmV3IFNpbmdsZUZpbGVNb2RhbChhcHAsIGZpbGUsIHRoaXMuZmllbGQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcInBhdGggZG9lc24ndCBjb3JyZXNwb25kIHRvIGEgcHJvcGVyIGZpbGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgc2VhcmNoQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhdHRycz8ub3B0aW9ucz8uYWx3YXlzT24pIHtcbiAgICAgICAgICAgIHNlYXJjaEJ0bi5oaWRlKClcbiAgICAgICAgICAgIHNwYWNlci5zaG93KClcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyLm9ubW91c2VvdmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNlYXJjaEJ0bi5zaG93KClcbiAgICAgICAgICAgICAgICBzcGFjZXIuaGlkZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5vbm1vdXNlb3V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNlYXJjaEJ0bi5oaWRlKClcbiAgICAgICAgICAgICAgICBzcGFjZXIuc2hvdygpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBpbml0aWFsIHN0YXRlICovXG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGZpZWxkVmFsdWUpO1xuICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChzZWFyY2hCdG4pO1xuICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChzcGFjZXIpO1xuICAgIH1cblxuICAgIGNyZWF0ZUZpbGVDb250YWluZXIocGFyZW50Q29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBkdlF1ZXJ5U3RyaW5nQ29udGFpbmVyID0gcGFyZW50Q29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICBkdlF1ZXJ5U3RyaW5nQ29udGFpbmVyLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IFwiRGF0YXZpZXcgUXVlcnkgKG9wdGlvbmFsKVwiLCBjbHM6ICdtZXRhZGF0YS1tZW51LWZpZWxkLW9wdGlvbicgfSk7XG4gICAgICAgIHRoaXMuZHZRdWVyeVN0cmluZyA9IG5ldyBUZXh0QXJlYUNvbXBvbmVudChkdlF1ZXJ5U3RyaW5nQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5kdlF1ZXJ5U3RyaW5nLmlucHV0RWwuY29scyA9IDYwO1xuICAgICAgICB0aGlzLmR2UXVlcnlTdHJpbmcuaW5wdXRFbC5yb3dzID0gNjtcbiAgICAgICAgdGhpcy5kdlF1ZXJ5U3RyaW5nLnNldFZhbHVlKHRoaXMuZmllbGQub3B0aW9ucy5kdlF1ZXJ5U3RyaW5nIHx8IFwiXCIpO1xuXG4gICAgICAgIHRoaXMuZHZRdWVyeVN0cmluZy5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZpZWxkLm9wdGlvbnMuZHZRdWVyeVN0cmluZyA9IHZhbHVlO1xuICAgICAgICAgICAgRmllbGRTZXR0aW5nc01vZGFsLnJlbW92ZVZhbGlkYXRpb25FcnJvcih0aGlzLmR2UXVlcnlTdHJpbmcpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNyZWF0ZVNldHRpbmdDb250YWluZXIocGFyZW50Q29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCwgcGx1Z2luOiBNZXRhZGF0YU1lbnUsIGxvY2F0aW9uPzogU2V0dGluZ0xvY2F0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmlsZVZhbGlkYXRvckZpZWxkID0gcGFyZW50Q29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogXCJtZXRhZGF0YS1tZW51LW51bWJlci1vcHRpb25zXCIgfSlcbiAgICAgICAgdGhpcy5jcmVhdGVGaWxlQ29udGFpbmVyKHRoaXMuZmlsZVZhbGlkYXRvckZpZWxkKVxuICAgICAgICB0aGlzLmZpbGVWYWxpZGF0b3JGaWVsZC5jcmVhdGVEaXYoeyBjbHM6ICdtZXRhZGF0YS1tZW51LXNlcGFyYXRvcicgfSkuY3JlYXRlRWwoXCJoclwiKTtcbiAgICB9XG5cbiAgICBnZXRPcHRpb25zU3RyKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkLm9wdGlvbnMuZHZRdWVyeVN0cmluZyB8fCBcIlwiO1xuICAgIH1cblxuICAgIHZhbGlkYXRlT3B0aW9ucygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgYXN5bmMgdmFsaWRhdGVWYWx1ZSh2YWx1ZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IGJhc2VuYW1lID0gdmFsdWUudHJpbSgpLnJlcGxhY2UoL15cXFtcXFsvZywgXCJcIikucmVwbGFjZSgvXFxdXFxdJC9nLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRGaWxlcygpLm1hcChmID0+IGYuYmFzZW5hbWUpLmZpbmQoaXRlbSA9PiBpdGVtID09PSBiYXNlbmFtZSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBURmlsZSwgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IEZpZWxkIGZyb20gXCJzcmMvZmllbGRzL0ZpZWxkXCI7XG5pbXBvcnQgeyByZXBsYWNlVmFsdWVzIH0gZnJvbSBcInNyYy9jb21tYW5kcy9yZXBsYWNlVmFsdWVzXCI7XG5pbXBvcnQgeyBpbnNlcnRWYWx1ZXMgfSBmcm9tIFwic3JjL2NvbW1hbmRzL2luc2VydFZhbHVlc1wiO1xuaW1wb3J0IHsgRmllbGRNYW5hZ2VyIH0gZnJvbSBcInNyYy90eXBlcy9maWVsZFR5cGVzXCI7XG5pbXBvcnQgRmlsZUZpZWxkIGZyb20gXCJzcmMvZmllbGRzL2ZpZWxkTWFuYWdlcnMvRmlsZUZpZWxkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVGdXp6eVN1Z2dlc3RlciBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPFRGaWxlPiB7XG5cbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xuICAgIHByaXZhdGUgZmllbGQ6IEZpZWxkO1xuICAgIHByaXZhdGUgbGluZU51bWJlcjogbnVtYmVyO1xuICAgIHByaXZhdGUgaW5Gcm9udG1hdHRlcjogYm9vbGVhbjtcbiAgICBwcml2YXRlIHRvcDogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgZmllbGQ6IEZpZWxkLCBsaW5lTnVtYmVyOiBudW1iZXIgPSAtMSwgaW5Gcm9udE1hdHRlcjogYm9vbGVhbiA9IGZhbHNlLCB0b3A6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkO1xuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyO1xuICAgICAgICB0aGlzLmluRnJvbnRtYXR0ZXIgPSBpbkZyb250TWF0dGVyO1xuICAgICAgICB0aGlzLnRvcCA9IHRvcDtcbiAgICB9XG5cbiAgICBnZXRJdGVtcygpOiBURmlsZVtdIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVNYW5hZ2VyID0gbmV3IEZpZWxkTWFuYWdlclt0aGlzLmZpZWxkLnR5cGVdKHRoaXMuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIGZpbGVNYW5hZ2VyLmdldEZpbGVzKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0aHJvdyAoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogVEZpbGUpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gaXRlbS5iYXNlbmFtZTtcbiAgICB9XG5cbiAgICBvbkNob29zZUl0ZW0oaXRlbTogVEZpbGUpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMubGluZU51bWJlciA9PSAtMSkge1xuICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyhcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGUsXG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIEZpbGVGaWVsZC5idWlsZE1hcmtEb3duTGluayh0aGlzLmFwcCwgdGhpcy5maWxlLCBpdGVtLmJhc2VuYW1lKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluc2VydFZhbHVlcyhcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGUsXG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZC5uYW1lLFxuICAgICAgICAgICAgICAgIEZpbGVGaWVsZC5idWlsZE1hcmtEb3duTGluayh0aGlzLmFwcCwgdGhpcy5maWxlLCBpdGVtLmJhc2VuYW1lKSxcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgdGhpcy5pbkZyb250bWF0dGVyLFxuICAgICAgICAgICAgICAgIHRoaXMudG9wXG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuICAgIH1cblxufSIsICJpbXBvcnQgeyBGaWVsZFR5cGUgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcbmltcG9ydCB7IEZpZWxkTWFuYWdlciwgU2V0dGluZ0xvY2F0aW9uIH0gZnJvbSBcIi4uL0ZpZWxkTWFuYWdlclwiO1xuaW1wb3J0IEZpZWxkIGZyb20gXCIuLi9GaWVsZFwiO1xuaW1wb3J0IHsgQXBwLCBURmlsZSwgTWVudSwgVGV4dENvbXBvbmVudCwgVG9nZ2xlQ29tcG9uZW50LCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9TZWxlY3RNb2RhbFwiO1xuaW1wb3J0IE1ldGFkYXRhTWVudSBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgbW9tZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgRGF0ZU1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL2ZpZWxkcy9EYXRlTW9kYWxcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZUZpZWxkIGV4dGVuZHMgRmllbGRNYW5hZ2VyIHtcblxuICAgIHByaXZhdGUgZGF0ZVZhbGlkYXRvckZpZWxkOiBIVE1MRGl2RWxlbWVudFxuICAgIHB1YmxpYyBkZWZhdWx0RGF0ZUZvcm1hdDogc3RyaW5nID0gXCJZWVlZLU1NLUREXCJcblxuICAgIGNvbnN0cnVjdG9yKGZpZWxkOiBGaWVsZCkge1xuICAgICAgICBzdXBlcihmaWVsZCwgRmllbGRUeXBlLkRhdGUpXG4gICAgfVxuXG4gICAgYWRkTWVudU9wdGlvbihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGFwcDogQXBwLCBmaWxlOiBURmlsZSwgY2F0ZWdvcnk6IE1lbnUgfCBTZWxlY3RNb2RhbCk6IHZvaWQge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBEYXRlTW9kYWwoYXBwLCBmaWxlLCB0aGlzLmZpZWxkLCB2YWx1ZSk7XG4gICAgICAgIG1vZGFsLnRpdGxlRWwuc2V0VGV4dChgQ2hhbmdlIGRhdGUgZm9yIDwke25hbWV9PmApO1xuICAgICAgICBpZiAoRGF0ZUZpZWxkLmlzTWVudShjYXRlZ29yeSkpIHtcbiAgICAgICAgICAgIGNhdGVnb3J5LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKGBVcGRhdGUgPCR7bmFtZX0+YCk7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRJY29uKCdjYWxlbmRhci1nbHlwaCcpO1xuICAgICAgICAgICAgICAgIGl0ZW0ub25DbGljaygoKSA9PiBtb2RhbC5vcGVuKCkpO1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0U2VjdGlvbihcInRhcmdldC1tZXRhZGF0YVwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoRGF0ZUZpZWxkLmlzU2VsZWN0KGNhdGVnb3J5KSkge1xuICAgICAgICAgICAgY2F0ZWdvcnkuYWRkT3B0aW9uKGB1cGRhdGVfJHtuYW1lfWAsIGBVcGRhdGUgPCR7bmFtZX0+YCk7XG4gICAgICAgICAgICBjYXRlZ29yeS5tb2RhbHNbYHVwZGF0ZV8ke25hbWV9YF0gPSAoKSA9PiBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY3JlYXRlQW5kT3BlbkZpZWxkTW9kYWwoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBzZWxlY3RlZEZpZWxkTmFtZTogc3RyaW5nLCBsaW5lTnVtYmVyPzogbnVtYmVyLCBpbkZyb250bWF0dGVyPzogYm9vbGVhbiwgdG9wPzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBjb25zdCBmaWVsZE1vZGFsID0gbmV3IERhdGVNb2RhbChhcHAsIGZpbGUsIHRoaXMuZmllbGQsIFwiXCIsIGxpbmVOdW1iZXIsIGluRnJvbnRtYXR0ZXIsIHRvcCk7XG4gICAgICAgIGZpZWxkTW9kYWwudGl0bGVFbC5zZXRUZXh0KGBFbnRlciBkYXRlIGZvciAke3NlbGVjdGVkRmllbGROYW1lfWApO1xuICAgICAgICBmaWVsZE1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBjcmVhdGVEYXRlQ29udGFpbmVyKHBhcmVudENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmZpZWxkLm9wdGlvbnMuZGF0ZUZvcm1hdCkgdGhpcy5maWVsZC5vcHRpb25zLmRhdGVGb3JtYXQgPSB0aGlzLmRlZmF1bHREYXRlRm9ybWF0XG4gICAgICAgIGlmICghdGhpcy5maWVsZC5vcHRpb25zLmRlZmF1bHRJbnNlcnRBc0xpbmspIHRoaXMuZmllbGQub3B0aW9ucy5kZWZhdWx0SW5zZXJ0QXNMaW5rID0gXCJmYWxzZVwiXG4gICAgICAgIGNvbnN0IGRhdGVGb3JtYXRDb250YWluZXIgPSBwYXJlbnRDb250YWluZXIuY3JlYXRlRGl2KCk7XG4gICAgICAgIGRhdGVGb3JtYXRDb250YWluZXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJEYXRlIGZvcm1hdFwiLCBjbHM6ICdtZXRhZGF0YS1tZW51LWZpZWxkLW9wdGlvbicgfSlcbiAgICAgICAgY29uc3QgZGF0ZUZvcm1hdElucHV0ID0gbmV3IFRleHRDb21wb25lbnQoZGF0ZUZvcm1hdENvbnRhaW5lcilcbiAgICAgICAgZGF0ZUZvcm1hdElucHV0LnNldFZhbHVlKHRoaXMuZmllbGQub3B0aW9ucy5kYXRlRm9ybWF0KVxuICAgICAgICBjb25zdCBkYXRlRXhhbXBsZSA9IGRhdGVGb3JtYXRDb250YWluZXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJcIiwgY2xzOiAnbWV0YWRhdGEtbWVudS1maWVsZC1vcHRpb24nIH0pXG4gICAgICAgIGRhdGVFeGFtcGxlLnNldFRleHQoYGV4YW1wbGU6ICR7bW9tZW50KCkuZm9ybWF0KGRhdGVGb3JtYXRJbnB1dC5nZXRWYWx1ZSgpKX1gKVxuICAgICAgICBkYXRlRm9ybWF0SW5wdXQub25DaGFuZ2UoKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQub3B0aW9ucy5kYXRlRm9ybWF0ID0gdmFsdWVcbiAgICAgICAgICAgIGRhdGVFeGFtcGxlLnNldFRleHQoYGV4YW1wbGU6ICR7bW9tZW50KCkuZm9ybWF0KHZhbHVlKX1gKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZGF0ZUxpbmtQYXRoQ29udGFpbmVyID0gcGFyZW50Q29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICBkYXRlTGlua1BhdGhDb250YWluZXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJMaW5rIHBhdGggKG9wdGlvbmFsKVwiLCBjbHM6ICdtZXRhZGF0YS1tZW51LWZpZWxkLW9wdGlvbicgfSlcbiAgICAgICAgY29uc3QgZGF0ZUxpbmtQYXRoSW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChkYXRlTGlua1BhdGhDb250YWluZXIpXG4gICAgICAgIGRhdGVMaW5rUGF0aElucHV0LnNldFZhbHVlKHRoaXMuZmllbGQub3B0aW9ucy5saW5rUGF0aClcbiAgICAgICAgZGF0ZUxpbmtQYXRoSW5wdXQub25DaGFuZ2UoKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQub3B0aW9ucy5saW5rUGF0aCA9IHZhbHVlLmVuZHNXaXRoKFwiL1wiKSA/IHZhbHVlIDogdmFsdWUgKyBcIi9cIjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdEluc2VydEFzTGlua0NvbnRhaW5lciA9IHBhcmVudENvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgZGVmYXVsdEluc2VydEFzTGlua0NvbnRhaW5lci5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBcIkluc2VydCBhcyBsaW5rIGJ5IGRlZmF1bHRcIiwgY2xzOiAnbWV0YWRhdGEtbWVudS1maWVsZC1vcHRpb24nIH0pO1xuICAgICAgICBjb25zdCBkZWZhdWx0SW5zZXJ0QXNMaW5rID0gbmV3IFRvZ2dsZUNvbXBvbmVudChkZWZhdWx0SW5zZXJ0QXNMaW5rQ29udGFpbmVyKTtcbiAgICAgICAgZGVmYXVsdEluc2VydEFzTGluay5zZXRWYWx1ZShEYXRlRmllbGQuc3RyaW5nVG9Cb29sZWFuKHRoaXMuZmllbGQub3B0aW9ucy5kZWZhdWx0SW5zZXJ0QXNMaW5rKSlcbiAgICAgICAgZGVmYXVsdEluc2VydEFzTGluay5vbkNoYW5nZSgodmFsdWU6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmllbGQub3B0aW9ucy5kZWZhdWx0SW5zZXJ0QXNMaW5rID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlU2V0dGluZ0NvbnRhaW5lcihwYXJlbnRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50LCBwbHVnaW46IE1ldGFkYXRhTWVudSwgbG9jYXRpb24/OiBTZXR0aW5nTG9jYXRpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kYXRlVmFsaWRhdG9yRmllbGQgPSBwYXJlbnRDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcIm1ldGFkYXRhLW1lbnUtbnVtYmVyLW9wdGlvbnNcIiB9KTtcbiAgICAgICAgdGhpcy5jcmVhdGVEYXRlQ29udGFpbmVyKHRoaXMuZGF0ZVZhbGlkYXRvckZpZWxkKTtcbiAgICAgICAgdGhpcy5kYXRlVmFsaWRhdG9yRmllbGQuY3JlYXRlRGl2KHsgY2xzOiAnbWV0YWRhdGEtbWVudS1zZXBhcmF0b3InIH0pLmNyZWF0ZUVsKFwiaHJcIik7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlRHZGaWVsZChcbiAgICAgICAgcGx1Z2luOiBNZXRhZGF0YU1lbnUsXG4gICAgICAgIGR2OiBhbnksXG4gICAgICAgIHA6IGFueSxcbiAgICAgICAgZmllbGRDb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgICAgICBhdHRycz86IHsgY2xzPzogc3RyaW5nIHwgdW5kZWZpbmVkOyBhdHRyPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IHVuZGVmaW5lZDsgb3B0aW9ucz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfCB1bmRlZmluZWQ7IH1cbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IGR2LmVsKCdzcGFuJywgcFt0aGlzLmZpZWxkLm5hbWVdLCBhdHRycyk7XG4gICAgICAgIGNvbnN0IGRhdGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIGRhdGVCdG4uc2V0VGV4dChcIlx1RDgzRFx1RENDNlwiKVxuICAgICAgICBkYXRlQnRuLmFkZENsYXNzKFwibWV0YWRhdGEtbWVudS1kdi1maWVsZC1idXR0b25cIilcbiAgICAgICAgLyogZW5kIHNwYWNlciAqL1xuICAgICAgICBjb25zdCBzcGFjZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gICAgICAgIHNwYWNlci5zZXRBdHRyKFwiY2xhc3NcIiwgXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLXNwYWNlclwiKVxuXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBbXCJmaWxlXCJdW1wicGF0aFwiXSlcbiAgICAgICAgbGV0IGZpZWxkTW9kYWw6IERhdGVNb2RhbDtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PSBcIm1kXCIpIHtcbiAgICAgICAgICAgIGlmIChwW3RoaXMuZmllbGQubmFtZV0gJiYgcFt0aGlzLmZpZWxkLm5hbWVdLmhhc093blByb3BlcnR5KFwicGF0aFwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwW3RoaXMuZmllbGQubmFtZV0pXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVGaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZGF0ZUZpbGUuZXh0ZW5zaW9uID09IFwibWRcIikge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZE1vZGFsID0gbmV3IERhdGVNb2RhbChhcHAsIGZpbGUsIHRoaXMuZmllbGQsIGRhdGVGaWxlLm5hbWUpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRNb2RhbCA9IG5ldyBEYXRlTW9kYWwoYXBwLCBmaWxlLCB0aGlzLmZpZWxkLCBwW3RoaXMuZmllbGQubmFtZV0ucGF0aC5zcGxpdChcIi9cIikubGFzdCgpLnJlcGxhY2UoXCIubWRcIiwgXCJcIikpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChwW3RoaXMuZmllbGQubmFtZV0pIHtcbiAgICAgICAgICAgICAgICBmaWVsZE1vZGFsID0gbmV3IERhdGVNb2RhbChhcHAsIGZpbGUsIHRoaXMuZmllbGQsIHBbdGhpcy5maWVsZC5uYW1lXSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmllbGRNb2RhbCA9IG5ldyBEYXRlTW9kYWwoYXBwLCBmaWxlLCB0aGlzLmZpZWxkLCBcIlwiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJwYXRoIGRvZXNuJ3QgY29ycmVzcG9uZCB0byBhIHByb3BlciBmaWxlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGZpZWxkTW9kYWwub25DbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGZpZWxkTW9kYWwuY29udGVudEVsLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgZGF0ZUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgZmllbGRNb2RhbC5vcGVuKClcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYXR0cnM/Lm9wdGlvbnM/LmFsd2F5c09uKSB7XG4gICAgICAgICAgICBkYXRlQnRuLmhpZGUoKVxuICAgICAgICAgICAgc3BhY2VyLnNob3coKVxuICAgICAgICAgICAgZmllbGRDb250YWluZXIub25tb3VzZW92ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZGF0ZUJ0bi5zaG93KClcbiAgICAgICAgICAgICAgICBzcGFjZXIuaGlkZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lci5vbm1vdXNlb3V0ID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRhdGVCdG4uaGlkZSgpXG4gICAgICAgICAgICAgICAgc3BhY2VyLnNob3coKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogaW5pdGlhbCBzdGF0ZSAqL1xuICAgICAgICBmaWVsZENvbnRhaW5lci5hcHBlbmRDaGlsZChmaWVsZFZhbHVlKTtcbiAgICAgICAgZmllbGRDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF0ZUJ0bik7XG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKHNwYWNlcik7XG4gICAgfVxuXG4gICAgZ2V0T3B0aW9uc1N0cigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5vcHRpb25zLmRhdGVGb3JtYXQ7XG4gICAgfVxuXG4gICAgdmFsaWRhdGVPcHRpb25zKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBhc3luYyB2YWxpZGF0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgcmV0dXJuIG1vbWVudCh2YWx1ZS5yZXBsYWNlKC9eXFxbXFxbL2csIFwiXCIpLnJlcGxhY2UoL1xcXVxcXSQvZywgXCJcIikuc3BsaXQoXCJ8XCIpLmZpcnN0KCk/LnNwbGl0KFwiL1wiKS5sYXN0KCksIHRoaXMuZmllbGQub3B0aW9ucy5kYXRlRm9ybWF0KS5pc1ZhbGlkKClcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFRleHRDb21wb25lbnQsIFRGaWxlLCBUb2dnbGVDb21wb25lbnQsIEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgaW5zZXJ0VmFsdWVzIH0gZnJvbSBcInNyYy9jb21tYW5kcy9pbnNlcnRWYWx1ZXNcIjtcbmltcG9ydCB7IHJlcGxhY2VWYWx1ZXMgfSBmcm9tIFwic3JjL2NvbW1hbmRzL3JlcGxhY2VWYWx1ZXNcIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZFwiO1xuaW1wb3J0IHsgRmllbGRNYW5hZ2VyIH0gZnJvbSBcInNyYy9maWVsZHMvRmllbGRNYW5hZ2VyXCI7XG5pbXBvcnQgeyBtb21lbnQgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBmbGF0cGlja3IgZnJvbSBcImZsYXRwaWNrclwiO1xuaW1wb3J0IE1ldGFkYXRhTWVudSBmcm9tIFwibWFpblwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xuICAgIHByaXZhdGUgdmFsdWU6IHN0cmluZztcbiAgICBwcml2YXRlIGxpbmVOdW1iZXI6IG51bWJlcjtcbiAgICBwcml2YXRlIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSB0b3A6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBpbnNlcnRBc0xpbms6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBmaWVsZDogRmllbGQ7XG4gICAgcHJpdmF0ZSBpbnB1dEVsOiBUZXh0Q29tcG9uZW50O1xuICAgIHByaXZhdGUgZXJyb3JGaWVsZDogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBmb3JtYXQ6IHN0cmluZztcbiAgICBwcml2YXRlIHBsdWdpbjogTWV0YWRhdGFNZW51O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGU6IFRGaWxlLCBmaWVsZDogRmllbGQsIHZhbHVlOiBzdHJpbmcsIGxpbmVOdW1iZXI6IG51bWJlciA9IC0xLCBpbkZyb250TWF0dGVyOiBib29sZWFuID0gZmFsc2UsIHRvcDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eXFxbXFxbL2csIFwiXCIpLnJlcGxhY2UoL1xcXVxcXSQvZywgXCJcIik7XG4gICAgICAgIHRoaXMubGluZU51bWJlciA9IGxpbmVOdW1iZXI7XG4gICAgICAgIHRoaXMuaW5Gcm9udG1hdHRlciA9IGluRnJvbnRNYXR0ZXI7XG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xuICAgICAgICB0aGlzLmluc2VydEFzTGluayA9IEZpZWxkTWFuYWdlci5zdHJpbmdUb0Jvb2xlYW4odGhpcy5maWVsZC5vcHRpb25zLmRlZmF1bHRJbnNlcnRBc0xpbmspIHx8IGZhbHNlO1xuICAgICAgICB0aGlzLmZvcm1hdCA9IHRoaXMuZmllbGQub3B0aW9ucy5kYXRlRm9ybWF0IHx8IHRoaXMuZmllbGQub3B0aW9ucy5kZWZhdWx0RGF0ZUZvcm1hdDtcbiAgICAgICAgaWYgKHRoaXMuYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKFwibWV0YWRhdGEtbWVudVwiKSkge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZGF0YS1tZW51XCJdXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCBmaWVsZENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtZXRhZGF0YS1tZW51LW1vZGFsLXZhbHVlXCIgfSk7XG4gICAgICAgIHRoaXMuYnVpbGRGb3JtKGZpZWxkQ29udGFpbmVyKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBidWlsZEZvcm0ocGFyZW50Q29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkge1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSBwYXJlbnRDb250YWluZXIuY3JlYXRlRWwoXCJmb3JtXCIpO1xuICAgICAgICBmb3JtLnR5cGUgPSBcInN1Ym1pdFwiO1xuICAgICAgICB0aGlzLmJ1aWxkSW5wdXRFbChmb3JtKTtcbiAgICAgICAgdGhpcy5lcnJvckZpZWxkID0gZm9ybS5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJtZXRhZGF0YS1tZW51LW1vZGFsLXZhbHVlLWVycm9yLWZpZWxkXCIgfSk7XG4gICAgICAgIHRoaXMuZXJyb3JGaWVsZC5oaWRlKCk7XG4gICAgICAgIHRoaXMuYnVpbGRJbnNlcnRBc0xpbmtUb2dnbGVyKGZvcm0pO1xuICAgICAgICBjb25zdCBzYXZlQnRuQ29udGFpbmVyID0gZm9ybS5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJtZXRhZGF0YS1tZW51LXZhbHVlLWdyaWQtZm9vdGVyXCIgfSk7XG4gICAgICAgIGNvbnN0IHNhdmVCdG4gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHNhdmVCdG5Db250YWluZXIpXG4gICAgICAgIHNhdmVCdG4uc2V0SWNvbihcImNoZWNrbWFya1wiKVxuXG4gICAgICAgIGZvcm0ub25zdWJtaXQgPSBhc3luYyAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGxldCBuZXdWYWx1ZTogbW9tZW50Lk1vbWVudDtcbiAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuXG4gICAgICAgICAgICAvL3RyeSBuYXR1cmFsIGxhbmd1YWdlIGRhdGVcbiAgICAgICAgICAgIGlmIChhcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ25sZGF0ZXMtb2JzaWRpYW4nKSkge1xuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5sZGF0ZXMgPSBhcHAucGx1Z2lucy5wbHVnaW5zWydubGRhdGVzLW9ic2lkaWFuJ107XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gbmxkYXRlcy5wYXJzZURhdGUodGhpcy52YWx1ZSkubW9tZW50O1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gbW9tZW50KHRoaXMudmFsdWUsIHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gbW9tZW50KHRoaXMudmFsdWUsIHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rUGF0aCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHRoaXMuZmllbGQub3B0aW9ucy5saW5rUGF0aCArIG5ld1ZhbHVlLmZvcm1hdCh0aGlzLmZvcm1hdCksIHRoaXMuZmlsZS5wYXRoKVxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFZhbHVlID0gdGhpcy5pbnNlcnRBc0xpbmsgPyBgW1ske3RoaXMuZmllbGQub3B0aW9ucy5saW5rUGF0aCB8fCBcIlwifSR7bmV3VmFsdWUuZm9ybWF0KHRoaXMuZm9ybWF0KX0ke2xpbmtQYXRoID8gXCJ8XCIgKyBsaW5rUGF0aC5iYXNlbmFtZSA6IFwiXCJ9XV1gIDogbmV3VmFsdWUuZm9ybWF0KHRoaXMuZm9ybWF0KVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmxpbmVOdW1iZXIgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVZhbHVlcyh0aGlzLmFwcCwgdGhpcy5maWxlLCB0aGlzLmZpZWxkLm5hbWUsIGZvcm1hdHRlZFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnNlcnRWYWx1ZXModGhpcy5hcHAsIHRoaXMuZmlsZSwgdGhpcy5maWVsZC5uYW1lLCBmb3JtYXR0ZWRWYWx1ZSwgdGhpcy5saW5lTnVtYmVyLCB0aGlzLmluRnJvbnRtYXR0ZXIsIHRoaXMudG9wKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lcnJvckZpZWxkLnNob3coKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVycm9yRmllbGQuc2V0VGV4dChgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGRhdGVgKVxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbC5pbnB1dEVsLmFkZENsYXNzKFwiaXMtaW52YWxpZFwiKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRJbnNlcnRBc0xpbmtUb2dnbGVyKGZvcm06IEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgICBjb25zdCB0b2dnbGVyQ29udGFpbmVyID0gZm9ybS5jcmVhdGVEaXYoeyBjbHM6IFwibWV0YWRhdGEtbWVudS10b2dnbGVyLXdpdGgtbGFiZWxcIiB9KVxuICAgICAgICBjb25zdCB0b2dnbGVyQ29udGFpbmVyTGFiZWwgPSB0b2dnbGVyQ29udGFpbmVyLmNyZWF0ZURpdih7XG4gICAgICAgICAgICBjbHM6IFwibWV0YWRhdGEtbWVudS10b2dnbGVyLWxhYmVsXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHRvZ2dsZXJDb250YWluZXJMYWJlbC5zZXRUZXh0KFwiSW5zZXJ0IGFzIGxpbmtcIik7XG4gICAgICAgIGNvbnN0IHRvZ2dsZUVsID0gbmV3IFRvZ2dsZUNvbXBvbmVudCh0b2dnbGVyQ29udGFpbmVyKTtcbiAgICAgICAgdG9nZ2xlRWwuc2V0VmFsdWUoRmllbGRNYW5hZ2VyLnN0cmluZ1RvQm9vbGVhbih0aGlzLmZpZWxkLm9wdGlvbnMuZGVmYXVsdEluc2VydEFzTGluayB8fCBcImZhbHNlXCIpKVxuICAgICAgICB0b2dnbGVFbC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0QXNMaW5rID0gdmFsdWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZElucHV0RWwoZm9ybTogSFRNTEZvcm1FbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZm9ybS5jcmVhdGVEaXYoeyBjbHM6IFwibWV0YWRhdGEtbWVudS1kYXRlaW5wdXQtd2l0aC1waWNrZXJcIiB9KVxuICAgICAgICB0aGlzLmlucHV0RWwgPSBuZXcgVGV4dENvbXBvbmVudChpbnB1dENvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuaW5wdXRFbC5pbnB1dEVsLmZvY3VzKCk7XG4gICAgICAgIHRoaXMuaW5wdXRFbC5zZXRWYWx1ZSh0aGlzLnZhbHVlLnJlcGxhY2UoL15cXFtcXFsvZywgXCJcIikucmVwbGFjZSgvXFxdXFxdJC9nLCBcIlwiKS5zcGxpdChcInxcIikuZmlyc3QoKT8uc3BsaXQoXCIvXCIpLmxhc3QoKSB8fCBcIlwiKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsLmlucHV0RWwuYWRkQ2xhc3MoXCJtZXRhZGF0YS1tZW51LXByb21wdC1pbnB1dFwiKTtcbiAgICAgICAgdGhpcy5pbnB1dEVsLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbC5pbnB1dEVsLnJlbW92ZUNsYXNzKFwiaXMtaW52YWxpZFwiKVxuICAgICAgICAgICAgdGhpcy5lcnJvckZpZWxkLmhpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JGaWVsZC5zZXRUZXh0KFwiXCIpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjYWxlbmRhckRpc3BsYXlCdG4gPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJtZXRhZGF0YS1tZW51LWNhbGVuZGFyLWRpc3BsYXktYnRuXCIgfSlcbiAgICAgICAgY2FsZW5kYXJEaXNwbGF5QnRuLnNldFRleHQoXCJcdUQ4M0RcdURDQzZcIilcblxuICAgICAgICBjb25zdCBkYXRlUGlja2VyQ29udGFpbmVyID0gZm9ybS5jcmVhdGVEaXYoeyBjbHM6IFwibWV0YWRhdGEtbWVudS1waWNrZXItY29udGFpbmVyXCIgfSk7XG4gICAgICAgIGNvbnN0IGRhdGVQaWNrZXIgPSBmbGF0cGlja3IoZGF0ZVBpY2tlckNvbnRhaW5lciwge1xuICAgICAgICAgICAgbG9jYWxlOiB7XG4gICAgICAgICAgICAgICAgZmlyc3REYXlPZldlZWs6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpcnN0RGF5T2ZXZWVrXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBkYXRlUGlja2VyLmNvbmZpZy5vbkNoYW5nZS5wdXNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3RGF0ZSA9IG1vbWVudCh2YWx1ZS50b1N0cmluZygpKS5mb3JtYXQodGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsLnNldFZhbHVlKG5ld0RhdGUpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld0RhdGU7XG5cbiAgICAgICAgfSlcblxuICAgICAgICBjYWxlbmRhckRpc3BsYXlCdG4ub25jbGljayA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBkYXRlUGlja2VyLnNldERhdGUoZGF0ZVBpY2tlci5wYXJzZURhdGUodGhpcy5pbnB1dEVsLmdldFZhbHVlKCkpIHx8IG5ldyBEYXRlKCkpXG4gICAgICAgICAgICBkYXRlUGlja2VyLm9wZW4oKVxuICAgICAgICB9XG5cbiAgICB9O1xufTsiLCAiZXhwb3J0IHZhciBIT09LUyA9IFtcbiAgICBcIm9uQ2hhbmdlXCIsXG4gICAgXCJvbkNsb3NlXCIsXG4gICAgXCJvbkRheUNyZWF0ZVwiLFxuICAgIFwib25EZXN0cm95XCIsXG4gICAgXCJvbktleURvd25cIixcbiAgICBcIm9uTW9udGhDaGFuZ2VcIixcbiAgICBcIm9uT3BlblwiLFxuICAgIFwib25QYXJzZUNvbmZpZ1wiLFxuICAgIFwib25SZWFkeVwiLFxuICAgIFwib25WYWx1ZVVwZGF0ZVwiLFxuICAgIFwib25ZZWFyQ2hhbmdlXCIsXG4gICAgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIixcbl07XG5leHBvcnQgdmFyIGRlZmF1bHRzID0ge1xuICAgIF9kaXNhYmxlOiBbXSxcbiAgICBhbGxvd0lucHV0OiBmYWxzZSxcbiAgICBhbGxvd0ludmFsaWRQcmVsb2FkOiBmYWxzZSxcbiAgICBhbHRGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgYWx0SW5wdXQ6IGZhbHNlLFxuICAgIGFsdElucHV0Q2xhc3M6IFwiZm9ybS1jb250cm9sIGlucHV0XCIsXG4gICAgYW5pbWF0ZTogdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSA9PT0gLTEsXG4gICAgYXJpYURhdGVGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgYXV0b0ZpbGxEZWZhdWx0VGltZTogdHJ1ZSxcbiAgICBjbGlja09wZW5zOiB0cnVlLFxuICAgIGNsb3NlT25TZWxlY3Q6IHRydWUsXG4gICAgY29uanVuY3Rpb246IFwiLCBcIixcbiAgICBkYXRlRm9ybWF0OiBcIlktbS1kXCIsXG4gICAgZGVmYXVsdEhvdXI6IDEyLFxuICAgIGRlZmF1bHRNaW51dGU6IDAsXG4gICAgZGVmYXVsdFNlY29uZHM6IDAsXG4gICAgZGlzYWJsZTogW10sXG4gICAgZGlzYWJsZU1vYmlsZTogZmFsc2UsXG4gICAgZW5hYmxlU2Vjb25kczogZmFsc2UsXG4gICAgZW5hYmxlVGltZTogZmFsc2UsXG4gICAgZXJyb3JIYW5kbGVyOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlLndhcm4oZXJyKTtcbiAgICB9LFxuICAgIGdldFdlZWs6IGZ1bmN0aW9uIChnaXZlbkRhdGUpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtICgoZGF0ZS5nZXREYXkoKSArIDYpICUgNykpO1xuICAgICAgICB2YXIgd2VlazEgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDQpO1xuICAgICAgICByZXR1cm4gKDEgK1xuICAgICAgICAgICAgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwIC1cbiAgICAgICAgICAgICAgICAzICtcbiAgICAgICAgICAgICAgICAoKHdlZWsxLmdldERheSgpICsgNikgJSA3KSkgL1xuICAgICAgICAgICAgICAgIDcpKTtcbiAgICB9LFxuICAgIGhvdXJJbmNyZW1lbnQ6IDEsXG4gICAgaWdub3JlZEZvY3VzRWxlbWVudHM6IFtdLFxuICAgIGlubGluZTogZmFsc2UsXG4gICAgbG9jYWxlOiBcImRlZmF1bHRcIixcbiAgICBtaW51dGVJbmNyZW1lbnQ6IDUsXG4gICAgbW9kZTogXCJzaW5nbGVcIixcbiAgICBtb250aFNlbGVjdG9yVHlwZTogXCJkcm9wZG93blwiLFxuICAgIG5leHRBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTEzLjIwNyA4LjQ3MmwtNy44NTQgNy44NTQtMC43MDctMC43MDcgNy4xNDYtNy4xNDYtNy4xNDYtNy4xNDggMC43MDctMC43MDcgNy44NTQgNy44NTR6JyAvPjwvc3ZnPlwiLFxuICAgIG5vQ2FsZW5kYXI6IGZhbHNlLFxuICAgIG5vdzogbmV3IERhdGUoKSxcbiAgICBvbkNoYW5nZTogW10sXG4gICAgb25DbG9zZTogW10sXG4gICAgb25EYXlDcmVhdGU6IFtdLFxuICAgIG9uRGVzdHJveTogW10sXG4gICAgb25LZXlEb3duOiBbXSxcbiAgICBvbk1vbnRoQ2hhbmdlOiBbXSxcbiAgICBvbk9wZW46IFtdLFxuICAgIG9uUGFyc2VDb25maWc6IFtdLFxuICAgIG9uUmVhZHk6IFtdLFxuICAgIG9uVmFsdWVVcGRhdGU6IFtdLFxuICAgIG9uWWVhckNoYW5nZTogW10sXG4gICAgb25QcmVDYWxlbmRhclBvc2l0aW9uOiBbXSxcbiAgICBwbHVnaW5zOiBbXSxcbiAgICBwb3NpdGlvbjogXCJhdXRvXCIsXG4gICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsXG4gICAgcHJldkFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNNS4yMDcgOC40NzFsNy4xNDYgNy4xNDctMC43MDcgMC43MDctNy44NTMtNy44NTQgNy44NTQtNy44NTMgMC43MDcgMC43MDctNy4xNDcgNy4xNDZ6JyAvPjwvc3ZnPlwiLFxuICAgIHNob3J0aGFuZEN1cnJlbnRNb250aDogZmFsc2UsXG4gICAgc2hvd01vbnRoczogMSxcbiAgICBzdGF0aWM6IGZhbHNlLFxuICAgIHRpbWVfMjRocjogZmFsc2UsXG4gICAgd2Vla051bWJlcnM6IGZhbHNlLFxuICAgIHdyYXA6IGZhbHNlLFxufTtcbiIsICJleHBvcnQgdmFyIGVuZ2xpc2ggPSB7XG4gICAgd2Vla2RheXM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXG4gICAgICAgICAgICBcIlN1bmRheVwiLFxuICAgICAgICAgICAgXCJNb25kYXlcIixcbiAgICAgICAgICAgIFwiVHVlc2RheVwiLFxuICAgICAgICAgICAgXCJXZWRuZXNkYXlcIixcbiAgICAgICAgICAgIFwiVGh1cnNkYXlcIixcbiAgICAgICAgICAgIFwiRnJpZGF5XCIsXG4gICAgICAgICAgICBcIlNhdHVyZGF5XCIsXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBtb250aHM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXG4gICAgICAgICAgICBcIkphblwiLFxuICAgICAgICAgICAgXCJGZWJcIixcbiAgICAgICAgICAgIFwiTWFyXCIsXG4gICAgICAgICAgICBcIkFwclwiLFxuICAgICAgICAgICAgXCJNYXlcIixcbiAgICAgICAgICAgIFwiSnVuXCIsXG4gICAgICAgICAgICBcIkp1bFwiLFxuICAgICAgICAgICAgXCJBdWdcIixcbiAgICAgICAgICAgIFwiU2VwXCIsXG4gICAgICAgICAgICBcIk9jdFwiLFxuICAgICAgICAgICAgXCJOb3ZcIixcbiAgICAgICAgICAgIFwiRGVjXCIsXG4gICAgICAgIF0sXG4gICAgICAgIGxvbmdoYW5kOiBbXG4gICAgICAgICAgICBcIkphbnVhcnlcIixcbiAgICAgICAgICAgIFwiRmVicnVhcnlcIixcbiAgICAgICAgICAgIFwiTWFyY2hcIixcbiAgICAgICAgICAgIFwiQXByaWxcIixcbiAgICAgICAgICAgIFwiTWF5XCIsXG4gICAgICAgICAgICBcIkp1bmVcIixcbiAgICAgICAgICAgIFwiSnVseVwiLFxuICAgICAgICAgICAgXCJBdWd1c3RcIixcbiAgICAgICAgICAgIFwiU2VwdGVtYmVyXCIsXG4gICAgICAgICAgICBcIk9jdG9iZXJcIixcbiAgICAgICAgICAgIFwiTm92ZW1iZXJcIixcbiAgICAgICAgICAgIFwiRGVjZW1iZXJcIixcbiAgICAgICAgXSxcbiAgICB9LFxuICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXG4gICAgZmlyc3REYXlPZldlZWs6IDAsXG4gICAgb3JkaW5hbDogZnVuY3Rpb24gKG50aCkge1xuICAgICAgICB2YXIgcyA9IG50aCAlIDEwMDtcbiAgICAgICAgaWYgKHMgPiAzICYmIHMgPCAyMSlcbiAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic3RcIjtcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJuZFwiO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInJkXCI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJhbmdlU2VwYXJhdG9yOiBcIiB0byBcIixcbiAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXG4gICAgc2Nyb2xsVGl0bGU6IFwiU2Nyb2xsIHRvIGluY3JlbWVudFwiLFxuICAgIHRvZ2dsZVRpdGxlOiBcIkNsaWNrIHRvIHRvZ2dsZVwiLFxuICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXG4gICAgeWVhckFyaWFMYWJlbDogXCJZZWFyXCIsXG4gICAgbW9udGhBcmlhTGFiZWw6IFwiTW9udGhcIixcbiAgICBob3VyQXJpYUxhYmVsOiBcIkhvdXJcIixcbiAgICBtaW51dGVBcmlhTGFiZWw6IFwiTWludXRlXCIsXG4gICAgdGltZV8yNGhyOiBmYWxzZSxcbn07XG5leHBvcnQgZGVmYXVsdCBlbmdsaXNoO1xuIiwgImV4cG9ydCB2YXIgcGFkID0gZnVuY3Rpb24gKG51bWJlciwgbGVuZ3RoKSB7XG4gICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7IGxlbmd0aCA9IDI7IH1cbiAgICByZXR1cm4gKFwiMDAwXCIgKyBudW1iZXIpLnNsaWNlKGxlbmd0aCAqIC0xKTtcbn07XG5leHBvcnQgdmFyIGludCA9IGZ1bmN0aW9uIChib29sKSB7IHJldHVybiAoYm9vbCA9PT0gdHJ1ZSA/IDEgOiAwKTsgfTtcbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZShmbiwgd2FpdCkge1xuICAgIHZhciB0O1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICBjbGVhclRpbWVvdXQodCk7XG4gICAgICAgIHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuLmFwcGx5KF90aGlzLCBhcmdzKTsgfSwgd2FpdCk7XG4gICAgfTtcbn1cbmV4cG9ydCB2YXIgYXJyYXlpZnkgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gb2JqIDogW29ial07XG59O1xuIiwgImV4cG9ydCBmdW5jdGlvbiB0b2dnbGVDbGFzcyhlbGVtLCBjbGFzc05hbWUsIGJvb2wpIHtcbiAgICBpZiAoYm9vbCA9PT0gdHJ1ZSlcbiAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcbiAgICB2YXIgZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XG4gICAgY29udGVudCA9IGNvbnRlbnQgfHwgXCJcIjtcbiAgICBlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBlLnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICByZXR1cm4gZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhck5vZGUobm9kZSkge1xuICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpXG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikge1xuICAgIGlmIChjb25kaXRpb24obm9kZSkpXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSlcbiAgICAgICAgcmV0dXJuIGZpbmRQYXJlbnQobm9kZS5wYXJlbnROb2RlLCBjb25kaXRpb24pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTnVtYmVySW5wdXQoaW5wdXRDbGFzc05hbWUsIG9wdHMpIHtcbiAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJudW1JbnB1dFdyYXBwZXJcIiksIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwibnVtSW5wdXQgXCIgKyBpbnB1dENsYXNzTmFtZSksIGFycm93VXAgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93VXBcIiksIGFycm93RG93biA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dEb3duXCIpO1xuICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFIDkuMFwiKSA9PT0gLTEpIHtcbiAgICAgICAgbnVtSW5wdXQudHlwZSA9IFwibnVtYmVyXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBudW1JbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIG51bUlucHV0LnBhdHRlcm4gPSBcIlxcXFxkKlwiO1xuICAgIH1cbiAgICBpZiAob3B0cyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0cylcbiAgICAgICAgICAgIG51bUlucHV0LnNldEF0dHJpYnV0ZShrZXksIG9wdHNba2V5XSk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChudW1JbnB1dCk7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd1VwKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93RG93bik7XG4gICAgcmV0dXJuIHdyYXBwZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGV2ZW50LmNvbXBvc2VkUGF0aCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhdGhbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBldmVudC50YXJnZXQ7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IGludCwgcGFkIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG52YXIgZG9Ob3RoaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9O1xuZXhwb3J0IHZhciBtb250aFRvU3RyID0gZnVuY3Rpb24gKG1vbnRoTnVtYmVyLCBzaG9ydGhhbmQsIGxvY2FsZSkgeyByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07IH07XG5leHBvcnQgdmFyIHJldkZvcm1hdCA9IHtcbiAgICBEOiBkb05vdGhpbmcsXG4gICAgRjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoTmFtZSwgbG9jYWxlKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgobG9jYWxlLm1vbnRocy5sb25naGFuZC5pbmRleE9mKG1vbnRoTmFtZSkpO1xuICAgIH0sXG4gICAgRzogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycygoZGF0ZU9iai5nZXRIb3VycygpID49IDEyID8gMTIgOiAwKSArIHBhcnNlRmxvYXQoaG91cikpO1xuICAgIH0sXG4gICAgSDogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICB9LFxuICAgIEo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgfSxcbiAgICBLOiBmdW5jdGlvbiAoZGF0ZU9iaiwgYW1QTSwgbG9jYWxlKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSAlIDEyKSArXG4gICAgICAgICAgICAxMiAqIGludChuZXcgUmVnRXhwKGxvY2FsZS5hbVBNWzFdLCBcImlcIikudGVzdChhbVBNKSkpO1xuICAgIH0sXG4gICAgTTogZnVuY3Rpb24gKGRhdGVPYmosIHNob3J0TW9udGgsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMuc2hvcnRoYW5kLmluZGV4T2Yoc2hvcnRNb250aCkpO1xuICAgIH0sXG4gICAgUzogZnVuY3Rpb24gKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgIH0sXG4gICAgVTogZnVuY3Rpb24gKF8sIHVuaXhTZWNvbmRzKSB7IHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhTZWNvbmRzKSAqIDEwMDApOyB9LFxuICAgIFc6IGZ1bmN0aW9uIChkYXRlT2JqLCB3ZWVrTnVtLCBsb2NhbGUpIHtcbiAgICAgICAgdmFyIHdlZWtOdW1iZXIgPSBwYXJzZUludCh3ZWVrTnVtKTtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XG4gICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRhdGUuZ2V0RGF5KCkgKyBsb2NhbGUuZmlyc3REYXlPZldlZWspO1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9LFxuICAgIFk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIocGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgfSxcbiAgICBaOiBmdW5jdGlvbiAoXywgSVNPRGF0ZSkgeyByZXR1cm4gbmV3IERhdGUoSVNPRGF0ZSk7IH0sXG4gICAgZDogZnVuY3Rpb24gKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICB9LFxuICAgIGg6IGZ1bmN0aW9uIChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSA+PSAxMiA/IDEyIDogMCkgKyBwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICB9LFxuICAgIGk6IGZ1bmN0aW9uIChkYXRlT2JqLCBtaW51dGVzKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TWludXRlcyhwYXJzZUZsb2F0KG1pbnV0ZXMpKTtcbiAgICB9LFxuICAgIGo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgfSxcbiAgICBsOiBkb05vdGhpbmcsXG4gICAgbTogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICB9LFxuICAgIG46IGZ1bmN0aW9uIChkYXRlT2JqLCBtb250aCkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7XG4gICAgfSxcbiAgICBzOiBmdW5jdGlvbiAoZGF0ZU9iaiwgc2Vjb25kcykge1xuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XG4gICAgfSxcbiAgICB1OiBmdW5jdGlvbiAoXywgdW5peE1pbGxTZWNvbmRzKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhNaWxsU2Vjb25kcykpO1xuICAgIH0sXG4gICAgdzogZG9Ob3RoaW5nLFxuICAgIHk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIoMjAwMCArIHBhcnNlRmxvYXQoeWVhcikpO1xuICAgIH0sXG59O1xuZXhwb3J0IHZhciB0b2tlblJlZ2V4ID0ge1xuICAgIEQ6IFwiXCIsXG4gICAgRjogXCJcIixcbiAgICBHOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIEg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgSjogXCIoXFxcXGRcXFxcZHxcXFxcZClcXFxcdytcIixcbiAgICBLOiBcIlwiLFxuICAgIE06IFwiXCIsXG4gICAgUzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBVOiBcIiguKylcIixcbiAgICBXOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIFk6IFwiKFxcXFxkezR9KVwiLFxuICAgIFo6IFwiKC4rKVwiLFxuICAgIGQ6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgaDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICBpOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIGo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgbDogXCJcIixcbiAgICBtOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIG46IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgczogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICB1OiBcIiguKylcIixcbiAgICB3OiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgIHk6IFwiKFxcXFxkezJ9KVwiLFxufTtcbmV4cG9ydCB2YXIgZm9ybWF0cyA9IHtcbiAgICBaOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpOyB9LFxuICAgIEQ6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xuICAgIH0sXG4gICAgRjogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbW9udGhUb1N0cihmb3JtYXRzLm4oZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSAtIDEsIGZhbHNlLCBsb2NhbGUpO1xuICAgIH0sXG4gICAgRzogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gcGFkKGZvcm1hdHMuaChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpKTtcbiAgICB9LFxuICAgIEg6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpKTsgfSxcbiAgICBKOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUub3JkaW5hbCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGRhdGUuZ2V0RGF0ZSgpICsgbG9jYWxlLm9yZGluYWwoZGF0ZS5nZXREYXRlKCkpXG4gICAgICAgICAgICA6IGRhdGUuZ2V0RGF0ZSgpO1xuICAgIH0sXG4gICAgSzogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkgeyByZXR1cm4gbG9jYWxlLmFtUE1baW50KGRhdGUuZ2V0SG91cnMoKSA+IDExKV07IH0sXG4gICAgTTogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbW9udGhUb1N0cihkYXRlLmdldE1vbnRoKCksIHRydWUsIGxvY2FsZSk7XG4gICAgfSxcbiAgICBTOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKTsgfSxcbiAgICBVOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwOyB9LFxuICAgIFc6IGZ1bmN0aW9uIChkYXRlLCBfLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XG4gICAgfSxcbiAgICBZOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0RnVsbFllYXIoKSwgNCk7IH0sXG4gICAgZDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldERhdGUoKSk7IH0sXG4gICAgaDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIChkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTIpOyB9LFxuICAgIGk6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXRNaW51dGVzKCkpOyB9LFxuICAgIGo6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldERhdGUoKTsgfSxcbiAgICBsOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMubG9uZ2hhbmRbZGF0ZS5nZXREYXkoKV07XG4gICAgfSxcbiAgICBtOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpOyB9LFxuICAgIG46IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldE1vbnRoKCkgKyAxOyB9LFxuICAgIHM6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldFNlY29uZHMoKTsgfSxcbiAgICB1OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCk7IH0sXG4gICAgdzogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0RGF5KCk7IH0sXG4gICAgeTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIFN0cmluZyhkYXRlLmdldEZ1bGxZZWFyKCkpLnN1YnN0cmluZygyKTsgfSxcbn07XG4iLCAiaW1wb3J0IHsgdG9rZW5SZWdleCwgcmV2Rm9ybWF0LCBmb3JtYXRzLCB9IGZyb20gXCIuL2Zvcm1hdHRpbmdcIjtcbmltcG9ydCB7IGRlZmF1bHRzIH0gZnJvbSBcIi4uL3R5cGVzL29wdGlvbnNcIjtcbmltcG9ydCB7IGVuZ2xpc2ggfSBmcm9tIFwiLi4vbDEwbi9kZWZhdWx0XCI7XG5leHBvcnQgdmFyIGNyZWF0ZURhdGVGb3JtYXR0ZXIgPSBmdW5jdGlvbiAoX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5jb25maWcsIGNvbmZpZyA9IF9iID09PSB2b2lkIDAgPyBkZWZhdWx0cyA6IF9iLCBfYyA9IF9hLmwxMG4sIGwxMG4gPSBfYyA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9jLCBfZCA9IF9hLmlzTW9iaWxlLCBpc01vYmlsZSA9IF9kID09PSB2b2lkIDAgPyBmYWxzZSA6IF9kO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZU9iaiwgZnJtdCwgb3ZlcnJpZGVMb2NhbGUpIHtcbiAgICAgICAgdmFyIGxvY2FsZSA9IG92ZXJyaWRlTG9jYWxlIHx8IGwxMG47XG4gICAgICAgIGlmIChjb25maWcuZm9ybWF0RGF0ZSAhPT0gdW5kZWZpbmVkICYmICFpc01vYmlsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5mb3JtYXREYXRlKGRhdGVPYmosIGZybXQsIGxvY2FsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZybXRcbiAgICAgICAgICAgIC5zcGxpdChcIlwiKVxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYywgaSwgYXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0c1tjXSAmJiBhcnJbaSAtIDFdICE9PSBcIlxcXFxcIlxuICAgICAgICAgICAgICAgID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZylcbiAgICAgICAgICAgICAgICA6IGMgIT09IFwiXFxcXFwiXG4gICAgICAgICAgICAgICAgICAgID8gY1xuICAgICAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKTtcbiAgICB9O1xufTtcbmV4cG9ydCB2YXIgY3JlYXRlRGF0ZVBhcnNlciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2M7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlLCBnaXZlbkZvcm1hdCwgdGltZWxlc3MsIGN1c3RvbUxvY2FsZSkge1xuICAgICAgICBpZiAoZGF0ZSAhPT0gMCAmJiAhZGF0ZSlcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBsb2NhbGUgPSBjdXN0b21Mb2NhbGUgfHwgbDEwbjtcbiAgICAgICAgdmFyIHBhcnNlZERhdGU7XG4gICAgICAgIHZhciBkYXRlT3JpZyA9IGRhdGU7XG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSlcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlICE9PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSBnaXZlbkZvcm1hdCB8fCAoY29uZmlnIHx8IGRlZmF1bHRzKS5kYXRlRm9ybWF0O1xuICAgICAgICAgICAgdmFyIGRhdGVzdHIgPSBTdHJpbmcoZGF0ZSkudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGRhdGVzdHIgPT09IFwidG9kYXlcIikge1xuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZyAmJiBjb25maWcucGFyc2VEYXRlKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKC9aJC8udGVzdChkYXRlc3RyKSB8fFxuICAgICAgICAgICAgICAgIC9HTVQkLy50ZXN0KGRhdGVzdHIpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSB2b2lkIDAsIG9wcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXRjaEluZGV4ID0gMCwgcmVnZXhTdHIgPSBcIlwiOyBpIDwgZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IGZvcm1hdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQmFja1NsYXNoID0gdG9rZW4gPT09IFwiXFxcXFwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXNjYXBlZCA9IGZvcm1hdFtpIC0gMV0gPT09IFwiXFxcXFwiIHx8IGlzQmFja1NsYXNoO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5SZWdleFt0b2tlbl0gJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4U3RyICs9IHRva2VuUmVnZXhbdG9rZW5dO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleFN0cikuZXhlYyhkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiAobWF0Y2hlZCA9IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BzW3Rva2VuICE9PSBcIllcIiA/IFwicHVzaFwiIDogXCJ1bnNoaWZ0XCJdKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogbWF0Y2hbKyttYXRjaEluZGV4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNCYWNrU2xhc2gpXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSBcIi5cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9XG4gICAgICAgICAgICAgICAgICAgICFjb25maWcgfHwgIWNvbmZpZy5ub0NhbGVuZGFyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IERhdGUobmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7XG4gICAgICAgICAgICAgICAgb3BzLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IF9hLmZuLCB2YWwgPSBfYS52YWw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAocGFyc2VkRGF0ZSA9IGZuKHBhcnNlZERhdGUsIHZhbCwgbG9jYWxlKSB8fCBwYXJzZWREYXRlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbWF0Y2hlZCA/IHBhcnNlZERhdGUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEocGFyc2VkRGF0ZSBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKHBhcnNlZERhdGUuZ2V0VGltZSgpKSkpIHtcbiAgICAgICAgICAgIGNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiSW52YWxpZCBkYXRlIHByb3ZpZGVkOiBcIiArIGRhdGVPcmlnKSk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHBhcnNlZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIHJldHVybiBwYXJzZWREYXRlO1xuICAgIH07XG59O1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVEYXRlcyhkYXRlMSwgZGF0ZTIsIHRpbWVsZXNzKSB7XG4gICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHsgdGltZWxlc3MgPSB0cnVlOyB9XG4gICAgaWYgKHRpbWVsZXNzICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gKG5ldyBEYXRlKGRhdGUxLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCkgLVxuICAgICAgICAgICAgbmV3IERhdGUoZGF0ZTIuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVRpbWVzKGRhdGUxLCBkYXRlMikge1xuICAgIHJldHVybiAoMzYwMCAqIChkYXRlMS5nZXRIb3VycygpIC0gZGF0ZTIuZ2V0SG91cnMoKSkgK1xuICAgICAgICA2MCAqIChkYXRlMS5nZXRNaW51dGVzKCkgLSBkYXRlMi5nZXRNaW51dGVzKCkpICtcbiAgICAgICAgZGF0ZTEuZ2V0U2Vjb25kcygpIC1cbiAgICAgICAgZGF0ZTIuZ2V0U2Vjb25kcygpKTtcbn1cbmV4cG9ydCB2YXIgaXNCZXR3ZWVuID0gZnVuY3Rpb24gKHRzLCB0czEsIHRzMikge1xuICAgIHJldHVybiB0cyA+IE1hdGgubWluKHRzMSwgdHMyKSAmJiB0cyA8IE1hdGgubWF4KHRzMSwgdHMyKTtcbn07XG5leHBvcnQgdmFyIGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0ID0gZnVuY3Rpb24gKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgcmV0dXJuIGhvdXJzICogMzYwMCArIG1pbnV0ZXMgKiA2MCArIHNlY29uZHM7XG59O1xuZXhwb3J0IHZhciBwYXJzZVNlY29uZHMgPSBmdW5jdGlvbiAoc2Vjb25kc1NpbmNlTWlkbmlnaHQpIHtcbiAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHNTaW5jZU1pZG5pZ2h0IC8gMzYwMCksIG1pbnV0ZXMgPSAoc2Vjb25kc1NpbmNlTWlkbmlnaHQgLSBob3VycyAqIDM2MDApIC8gNjA7XG4gICAgcmV0dXJuIFtob3VycywgbWludXRlcywgc2Vjb25kc1NpbmNlTWlkbmlnaHQgLSBob3VycyAqIDM2MDAgLSBtaW51dGVzICogNjBdO1xufTtcbmV4cG9ydCB2YXIgZHVyYXRpb24gPSB7XG4gICAgREFZOiA4NjQwMDAwMCxcbn07XG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEhvdXJzKGNvbmZpZykge1xuICAgIHZhciBob3VycyA9IGNvbmZpZy5kZWZhdWx0SG91cjtcbiAgICB2YXIgbWludXRlcyA9IGNvbmZpZy5kZWZhdWx0TWludXRlO1xuICAgIHZhciBzZWNvbmRzID0gY29uZmlnLmRlZmF1bHRTZWNvbmRzO1xuICAgIGlmIChjb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBtaW5Ib3VyID0gY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgdmFyIG1pbk1pbnV0ZXMgPSBjb25maWcubWluRGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIHZhciBtaW5TZWNvbmRzID0gY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpO1xuICAgICAgICBpZiAoaG91cnMgPCBtaW5Ib3VyKSB7XG4gICAgICAgICAgICBob3VycyA9IG1pbkhvdXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvdXJzID09PSBtaW5Ib3VyICYmIG1pbnV0ZXMgPCBtaW5NaW51dGVzKSB7XG4gICAgICAgICAgICBtaW51dGVzID0gbWluTWludXRlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaG91cnMgPT09IG1pbkhvdXIgJiYgbWludXRlcyA9PT0gbWluTWludXRlcyAmJiBzZWNvbmRzIDwgbWluU2Vjb25kcylcbiAgICAgICAgICAgIHNlY29uZHMgPSBjb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgfVxuICAgIGlmIChjb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBtYXhIciA9IGNvbmZpZy5tYXhEYXRlLmdldEhvdXJzKCk7XG4gICAgICAgIHZhciBtYXhNaW51dGVzID0gY29uZmlnLm1heERhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhIcik7XG4gICAgICAgIGlmIChob3VycyA9PT0gbWF4SHIpXG4gICAgICAgICAgICBtaW51dGVzID0gTWF0aC5taW4obWF4TWludXRlcywgbWludXRlcyk7XG4gICAgICAgIGlmIChob3VycyA9PT0gbWF4SHIgJiYgbWludXRlcyA9PT0gbWF4TWludXRlcylcbiAgICAgICAgICAgIHNlY29uZHMgPSBjb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgfVxuICAgIHJldHVybiB7IGhvdXJzOiBob3VycywgbWludXRlczogbWludXRlcywgc2Vjb25kczogc2Vjb25kcyB9O1xufVxuIiwgIlwidXNlIHN0cmljdFwiO1xuaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAodGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XSk7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGFyZ3NfMSA9IGFyZ3M7IF9hIDwgYXJnc18xLmxlbmd0aDsgX2ErKykge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3NfMVtfYV07XG4gICAgICAgICAgICBfbG9vcF8xKHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9O1xufVxuIiwgInZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19zcHJlYWRBcnJheXMgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xuICAgIHJldHVybiByO1xufTtcbmltcG9ydCB7IGRlZmF1bHRzIGFzIGRlZmF1bHRPcHRpb25zLCBIT09LUywgfSBmcm9tIFwiLi90eXBlcy9vcHRpb25zXCI7XG5pbXBvcnQgRW5nbGlzaCBmcm9tIFwiLi9sMTBuL2RlZmF1bHRcIjtcbmltcG9ydCB7IGFycmF5aWZ5LCBkZWJvdW5jZSwgaW50LCBwYWQgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHsgY2xlYXJOb2RlLCBjcmVhdGVFbGVtZW50LCBjcmVhdGVOdW1iZXJJbnB1dCwgZmluZFBhcmVudCwgdG9nZ2xlQ2xhc3MsIGdldEV2ZW50VGFyZ2V0LCB9IGZyb20gXCIuL3V0aWxzL2RvbVwiO1xuaW1wb3J0IHsgY29tcGFyZURhdGVzLCBjcmVhdGVEYXRlUGFyc2VyLCBjcmVhdGVEYXRlRm9ybWF0dGVyLCBkdXJhdGlvbiwgaXNCZXR3ZWVuLCBnZXREZWZhdWx0SG91cnMsIGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0LCBwYXJzZVNlY29uZHMsIH0gZnJvbSBcIi4vdXRpbHMvZGF0ZXNcIjtcbmltcG9ydCB7IHRva2VuUmVnZXgsIG1vbnRoVG9TdHIgfSBmcm9tIFwiLi91dGlscy9mb3JtYXR0aW5nXCI7XG5pbXBvcnQgXCIuL3V0aWxzL3BvbHlmaWxsc1wiO1xudmFyIERFQk9VTkNFRF9DSEFOR0VfTVMgPSAzMDA7XG5mdW5jdGlvbiBGbGF0cGlja3JJbnN0YW5jZShlbGVtZW50LCBpbnN0YW5jZUNvbmZpZykge1xuICAgIHZhciBzZWxmID0ge1xuICAgICAgICBjb25maWc6IF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucyksIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSxcbiAgICAgICAgbDEwbjogRW5nbGlzaCxcbiAgICB9O1xuICAgIHNlbGYucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7IGNvbmZpZzogc2VsZi5jb25maWcsIGwxMG46IHNlbGYubDEwbiB9KTtcbiAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuICAgIHNlbGYucGx1Z2luRWxlbWVudHMgPSBbXTtcbiAgICBzZWxmLmxvYWRlZFBsdWdpbnMgPSBbXTtcbiAgICBzZWxmLl9iaW5kID0gYmluZDtcbiAgICBzZWxmLl9zZXRIb3Vyc0Zyb21EYXRlID0gc2V0SG91cnNGcm9tRGF0ZTtcbiAgICBzZWxmLl9wb3NpdGlvbkNhbGVuZGFyID0gcG9zaXRpb25DYWxlbmRhcjtcbiAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7XG4gICAgc2VsZi5jaGFuZ2VZZWFyID0gY2hhbmdlWWVhcjtcbiAgICBzZWxmLmNsZWFyID0gY2xlYXI7XG4gICAgc2VsZi5jbG9zZSA9IGNsb3NlO1xuICAgIHNlbGYub25Nb3VzZU92ZXIgPSBvbk1vdXNlT3ZlcjtcbiAgICBzZWxmLl9jcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudDtcbiAgICBzZWxmLmNyZWF0ZURheSA9IGNyZWF0ZURheTtcbiAgICBzZWxmLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgIHNlbGYuaXNFbmFibGVkID0gaXNFbmFibGVkO1xuICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7XG4gICAgc2VsZi51cGRhdGVWYWx1ZSA9IHVwZGF0ZVZhbHVlO1xuICAgIHNlbGYub3BlbiA9IG9wZW47XG4gICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7XG4gICAgc2VsZi5zZXQgPSBzZXQ7XG4gICAgc2VsZi5zZXREYXRlID0gc2V0RGF0ZTtcbiAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTtcbiAgICBmdW5jdGlvbiBzZXR1cEhlbHBlckZ1bmN0aW9ucygpIHtcbiAgICAgICAgc2VsZi51dGlscyA9IHtcbiAgICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiAobW9udGgsIHlyKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vbnRoID09PSB2b2lkIDApIHsgbW9udGggPSBzZWxmLmN1cnJlbnRNb250aDsgfVxuICAgICAgICAgICAgICAgIGlmICh5ciA9PT0gdm9pZCAwKSB7IHlyID0gc2VsZi5jdXJyZW50WWVhcjsgfVxuICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gMSAmJiAoKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCkgfHwgeXIgJSA0MDAgPT09IDApKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYubDEwbi5kYXlzSW5Nb250aFttb250aF07XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBzZWxmLmVsZW1lbnQgPSBzZWxmLmlucHV0ID0gZWxlbWVudDtcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgcGFyc2VDb25maWcoKTtcbiAgICAgICAgc2V0dXBMb2NhbGUoKTtcbiAgICAgICAgc2V0dXBJbnB1dHMoKTtcbiAgICAgICAgc2V0dXBEYXRlcygpO1xuICAgICAgICBzZXR1cEhlbHBlckZ1bmN0aW9ucygpO1xuICAgICAgICBpZiAoIXNlbGYuaXNNb2JpbGUpXG4gICAgICAgICAgICBidWlsZCgpO1xuICAgICAgICBiaW5kRXZlbnRzKCk7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIHx8IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHNldENhbGVuZGFyV2lkdGgoKTtcbiAgICAgICAgdmFyIGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlICYmIGlzU2FmYXJpKSB7XG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25SZWFkeVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q2xvc2VzdEFjdGl2ZUVsZW1lbnQoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuICgoKF9hID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJvb3ROb2RlKCkpXG4gICAgICAgICAgICAuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYmluZFRvSW5zdGFuY2UoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuLmJpbmQoc2VsZik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldENhbGVuZGFyV2lkdGgoKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBzZWxmLmNvbmZpZztcbiAgICAgICAgaWYgKGNvbmZpZy53ZWVrTnVtYmVycyA9PT0gZmFsc2UgJiYgY29uZmlnLnNob3dNb250aHMgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25maWcubm9DYWxlbmRhciAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF5c1dpZHRoID0gKHNlbGYuZGF5cy5vZmZzZXRXaWR0aCArIDEpICogY29uZmlnLnNob3dNb250aHM7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlzV2lkdGggK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcInZpc2liaWxpdHlcIik7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWUoZSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHREYXRlID0gc2VsZi5jb25maWcubWluRGF0ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKG5ldyBEYXRlKCksIHNlbGYuY29uZmlnLm1pbkRhdGUpID49IDBcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKClcbiAgICAgICAgICAgICAgICA6IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cyA9IGdldERlZmF1bHRIb3VycyhzZWxmLmNvbmZpZyk7XG4gICAgICAgICAgICBkZWZhdWx0RGF0ZS5zZXRIb3VycyhkZWZhdWx0cy5ob3VycywgZGVmYXVsdHMubWludXRlcywgZGVmYXVsdHMuc2Vjb25kcywgZGVmYXVsdERhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpO1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW2RlZmF1bHREYXRlXTtcbiAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gZGVmYXVsdERhdGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgIT09IHVuZGVmaW5lZCAmJiBlLnR5cGUgIT09IFwiYmx1clwiKSB7XG4gICAgICAgICAgICB0aW1lV3JhcHBlcihlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldlZhbHVlID0gc2VsZi5faW5wdXQudmFsdWU7XG4gICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoc2VsZi5faW5wdXQudmFsdWUgIT09IHByZXZWYWx1ZSkge1xuICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYW1wbTJtaWxpdGFyeShob3VyLCBhbVBNKSB7XG4gICAgICAgIHJldHVybiAoaG91ciAlIDEyKSArIDEyICogaW50KGFtUE0gPT09IHNlbGYubDEwbi5hbVBNWzFdKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7XG4gICAgICAgIHN3aXRjaCAoaG91ciAlIDI0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMjtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgc2VsZi5taW51dGVFbGVtZW50ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBob3VycyA9IChwYXJzZUludChzZWxmLmhvdXJFbGVtZW50LnZhbHVlLnNsaWNlKC0yKSwgMTApIHx8IDApICUgMjQsIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCwgc2Vjb25kcyA9IHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IChwYXJzZUludChzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaG91cnMgPSBhbXBtMm1pbGl0YXJ5KGhvdXJzLCBzZWxmLmFtUE0udGV4dENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgICAgIHNlbGYubWluRGF0ZUhhc1RpbWUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5jb25maWcubWluRGF0ZSwgdHJ1ZSkgPT09XG4gICAgICAgICAgICAgICAgICAgIDApO1xuICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICBzZWxmLm1heERhdGVIYXNUaW1lICYmXG4gICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiZcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1heERhdGUsIHRydWUpID09PVxuICAgICAgICAgICAgICAgICAgICAwKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5UaW1lID4gc2VsZi5jb25maWcubWF4VGltZSkge1xuICAgICAgICAgICAgdmFyIG1pbkJvdW5kID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoc2VsZi5jb25maWcubWluVGltZS5nZXRIb3VycygpLCBzZWxmLmNvbmZpZy5taW5UaW1lLmdldE1pbnV0ZXMoKSwgc2VsZi5jb25maWcubWluVGltZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICAgICAgdmFyIG1heEJvdW5kID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoc2VsZi5jb25maWcubWF4VGltZS5nZXRIb3VycygpLCBzZWxmLmNvbmZpZy5tYXhUaW1lLmdldE1pbnV0ZXMoKSwgc2VsZi5jb25maWcubWF4VGltZS5nZXRTZWNvbmRzKCkpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID4gbWF4Qm91bmQgJiYgY3VycmVudFRpbWUgPCBtaW5Cb3VuZCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBwYXJzZVNlY29uZHMobWluQm91bmQpO1xuICAgICAgICAgICAgICAgIGhvdXJzID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSByZXN1bHRbMV07XG4gICAgICAgICAgICAgICAgc2Vjb25kcyA9IHJlc3VsdFsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChsaW1pdE1heEhvdXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1heFRpbWUgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhUaW1lXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZTtcbiAgICAgICAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhUaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4VGltZS5nZXRIb3VycygpKVxuICAgICAgICAgICAgICAgICAgICBtaW51dGVzID0gTWF0aC5taW4obWludXRlcywgbWF4VGltZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChtaW51dGVzID09PSBtYXhUaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IE1hdGgubWluKHNlY29uZHMsIG1heFRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaW1pdE1pbkhvdXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pblRpbWUgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5UaW1lXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZTtcbiAgICAgICAgICAgICAgICBob3VycyA9IE1hdGgubWF4KGhvdXJzLCBtaW5UaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgICAgICAgIGlmIChob3VycyA9PT0gbWluVGltZS5nZXRIb3VycygpICYmIG1pbnV0ZXMgPCBtaW5UaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IG1pblRpbWUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgIGlmIChtaW51dGVzID09PSBtaW5UaW1lLmdldE1pbnV0ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IE1hdGgubWF4KHNlY29uZHMsIG1pblRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xuICAgICAgICB2YXIgZGF0ZSA9IGRhdGVPYmogfHwgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmo7XG4gICAgICAgIGlmIChkYXRlICYmIGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBzZXRIb3VycyhkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcbiAgICAgICAgaWYgKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLnNldEhvdXJzKGhvdXJzICUgMjQsIG1pbnV0ZXMsIHNlY29uZHMgfHwgMCwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZWxmLmhvdXJFbGVtZW50IHx8ICFzZWxmLm1pbnV0ZUVsZW1lbnQgfHwgc2VsZi5pc01vYmlsZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyXG4gICAgICAgICAgICA/ICgoMTIgKyBob3VycykgJSAxMikgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKVxuICAgICAgICAgICAgOiBob3Vycyk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChtaW51dGVzKTtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KGhvdXJzID49IDEyKV07XG4gICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb25ZZWFySW5wdXQoZXZlbnQpIHtcbiAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpO1xuICAgICAgICB2YXIgeWVhciA9IHBhcnNlSW50KGV2ZW50VGFyZ2V0LnZhbHVlKSArIChldmVudC5kZWx0YSB8fCAwKTtcbiAgICAgICAgaWYgKHllYXIgLyAxMDAwID4gMSB8fFxuICAgICAgICAgICAgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiICYmICEvW15cXGRdLy50ZXN0KHllYXIudG9TdHJpbmcoKSkpKSB7XG4gICAgICAgICAgICBjaGFuZ2VZZWFyKHllYXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHsgcmV0dXJuIGJpbmQoZWxlbWVudCwgZXYsIGhhbmRsZXIsIG9wdGlvbnMpOyB9KTtcbiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmZvckVhY2goZnVuY3Rpb24gKGVsKSB7IHJldHVybiBiaW5kKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7IH0pO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICBzZWxmLl9oYW5kbGVycy5wdXNoKHtcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTsgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRyaWdnZXJDaGFuZ2UoKSB7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkge1xuICAgICAgICAgICAgW1wib3BlblwiLCBcImNsb3NlXCIsIFwidG9nZ2xlXCIsIFwiY2xlYXJcIl0uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLVwiICsgZXZ0ICsgXCJdXCIpLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIFwiY2xpY2tcIiwgc2VsZltldnRdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBzZXR1cE1vYmlsZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApO1xuICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSh0cmlnZ2VyQ2hhbmdlLCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiAhL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKVxuICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsIFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIilcbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU92ZXIoZ2V0RXZlbnRUYXJnZXQoZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuaW5saW5lICYmICFzZWxmLmNvbmZpZy5zdGF0aWMpXG4gICAgICAgICAgICBiaW5kKHdpbmRvdywgXCJyZXNpemVcIiwgZGVib3VuY2VkUmVzaXplKTtcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcInRvdWNoc3RhcnRcIiwgZG9jdW1lbnRDbGljayk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcIm1vdXNlZG93blwiLCBkb2N1bWVudENsaWNrKTtcbiAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwiZm9jdXNcIiwgZG9jdW1lbnRDbGljaywgeyBjYXB0dXJlOiB0cnVlIH0pO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJmb2N1c1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcImNsaWNrXCIsIG9uTW9udGhOYXZDbGljayk7XG4gICAgICAgICAgICBiaW5kKHNlbGYubW9udGhOYXYsIFtcImtleXVwXCIsIFwiaW5jcmVtZW50XCJdLCBvblllYXJJbnB1dCk7XG4gICAgICAgICAgICBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJjbGlja1wiLCBzZWxlY3REYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBzZWxUZXh0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXZlbnRUYXJnZXQoZSkuc2VsZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImluY3JlbWVudFwiXSwgdXBkYXRlVGltZSk7XG4gICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJibHVyXCIsIHVwZGF0ZVRpbWUsIHsgY2FwdHVyZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBcImNsaWNrXCIsIHRpbWVJbmNyZW1lbnQpO1xuICAgICAgICAgICAgYmluZChbc2VsZi5ob3VyRWxlbWVudCwgc2VsZi5taW51dGVFbGVtZW50XSwgW1wiZm9jdXNcIiwgXCJjbGlja1wiXSwgc2VsVGV4dCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgYmluZChzZWxmLnNlY29uZEVsZW1lbnQsIFwiZm9jdXNcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5zZWNvbmRFbGVtZW50ICYmIHNlbGYuc2Vjb25kRWxlbWVudC5zZWxlY3QoKTsgfSk7XG4gICAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcImJsdXJcIiwgb25CbHVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBqdW1wVG9EYXRlKGp1bXBEYXRlLCB0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgIHZhciBqdW1wVG8gPSBqdW1wRGF0ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHNlbGYucGFyc2VEYXRlKGp1bXBEYXRlKVxuICAgICAgICAgICAgOiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fFxuICAgICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUgPiBzZWxmLm5vd1xuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUgPCBzZWxmLm5vd1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93KTtcbiAgICAgICAgdmFyIG9sZFllYXIgPSBzZWxmLmN1cnJlbnRZZWFyO1xuICAgICAgICB2YXIgb2xkTW9udGggPSBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChqdW1wVG8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGp1bXBUby5nZXRNb250aCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBlLm1lc3NhZ2UgPSBcIkludmFsaWQgZGF0ZSBzdXBwbGllZDogXCIgKyBqdW1wVG87XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgJiYgc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhcikge1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICYmXG4gICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhciB8fCBzZWxmLmN1cnJlbnRNb250aCAhPT0gb2xkTW9udGgpKSB7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHRpbWVJbmNyZW1lbnQoZSkge1xuICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgaWYgKH5ldmVudFRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcImFycm93XCIpKVxuICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQoZSwgZXZlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dVcFwiKSA/IDEgOiAtMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGluY3JlbWVudE51bUlucHV0KGUsIGRlbHRhLCBpbnB1dEVsZW0pIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IGUgJiYgZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgIHZhciBpbnB1dCA9IGlucHV0RWxlbSB8fFxuICAgICAgICAgICAgKHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5maXJzdENoaWxkKTtcbiAgICAgICAgdmFyIGV2ZW50ID0gY3JlYXRlRXZlbnQoXCJpbmNyZW1lbnRcIik7XG4gICAgICAgIGV2ZW50LmRlbHRhID0gZGVsdGE7XG4gICAgICAgIGlucHV0ICYmIGlucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZCgpIHtcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY2FsZW5kYXJcIik7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChidWlsZE1vbnRoTmF2KCkpO1xuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBidWlsZFdlZWtzKCksIHdlZWtXcmFwcGVyID0gX2Eud2Vla1dyYXBwZXIsIHdlZWtOdW1iZXJzID0gX2Eud2Vla051bWJlcnM7XG4gICAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrV3JhcHBlcik7XG4gICAgICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzO1xuICAgICAgICAgICAgICAgIHNlbGYud2Vla1dyYXBwZXIgPSB3ZWVrV3JhcHBlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItckNvbnRhaW5lclwiKTtcbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChidWlsZFdlZWtkYXlzKCkpO1xuICAgICAgICAgICAgaWYgKCFzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWRheXNcIik7XG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmRheXNDb250YWluZXIpO1xuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLnJDb250YWluZXIpO1xuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2VsZi5pbm5lckNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkVGltZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJhbmdlTW9kZVwiLCBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFuaW1hdGVcIiwgc2VsZi5jb25maWcuYW5pbWF0ZSA9PT0gdHJ1ZSk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwibXVsdGlNb250aFwiLCBzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSk7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgICB2YXIgY3VzdG9tQXBwZW5kID0gc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8ubm9kZVR5cGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSB8fCBzZWxmLmNvbmZpZy5zdGF0aWMpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChzZWxmLmNvbmZpZy5pbmxpbmUgPyBcImlubGluZVwiIDogXCJzdGF0aWNcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBzZWxmLl9pbnB1dC5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdyYXBwZXJcIik7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuZWxlbWVudC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlciwgc2VsZi5lbGVtZW50KTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYyAmJiAhc2VsZi5jb25maWcuaW5saW5lKVxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFwcGVuZFRvXG4gICAgICAgICAgICAgICAgOiB3aW5kb3cuZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIF9kYXlOdW1iZXIsIGkpIHtcbiAgICAgICAgdmFyIGRhdGVJc0VuYWJsZWQgPSBpc0VuYWJsZWQoZGF0ZSwgdHJ1ZSksIGRheUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xuICAgICAgICBkYXlFbGVtZW50LiRpID0gaTtcbiAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYuZm9ybWF0RGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5hcmlhRGF0ZUZvcm1hdCkpO1xuICAgICAgICBpZiAoY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5ub3cpID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLnRvZGF5RGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xuICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidG9kYXlcIik7XG4gICAgICAgICAgICBkYXlFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtY3VycmVudFwiLCBcImRhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGRheUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIGlmIChpc0RhdGVTZWxlY3RlZChkYXRlKSkge1xuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IGRheUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcInN0YXJ0UmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsIFwiZW5kUmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT09IFwibmV4dE1vbnRoRGF5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZsYXRwaWNrci1kaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgICBpZiAoaXNEYXRlSW5SYW5nZShkYXRlKSAmJiAhaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpXG4gICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi53ZWVrTnVtYmVycyAmJlxuICAgICAgICAgICAgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSAmJlxuICAgICAgICAgICAgY2xhc3NOYW1lICE9PSBcInByZXZNb250aERheVwiICYmXG4gICAgICAgICAgICBpICUgNyA9PT0gNikge1xuICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycy5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgXCI8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLWRheSc+XCIgKyBzZWxmLmNvbmZpZy5nZXRXZWVrKGRhdGUpICsgXCI8L3NwYW4+XCIpO1xuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGF5Q3JlYXRlXCIsIGRheUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZGF5RWxlbWVudDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZm9jdXNPbkRheUVsZW0odGFyZ2V0Tm9kZSkge1xuICAgICAgICB0YXJnZXROb2RlLmZvY3VzKCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXG4gICAgICAgICAgICBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Rmlyc3RBdmFpbGFibGVEYXkoZGVsdGEpIHtcbiAgICAgICAgdmFyIHN0YXJ0TW9udGggPSBkZWx0YSA+IDAgPyAwIDogc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDE7XG4gICAgICAgIHZhciBlbmRNb250aCA9IGRlbHRhID4gMCA/IHNlbGYuY29uZmlnLnNob3dNb250aHMgOiAtMTtcbiAgICAgICAgZm9yICh2YXIgbSA9IHN0YXJ0TW9udGg7IG0gIT0gZW5kTW9udGg7IG0gKz0gZGVsdGEpIHtcbiAgICAgICAgICAgIHZhciBtb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttXTtcbiAgICAgICAgICAgIHZhciBzdGFydEluZGV4ID0gZGVsdGEgPiAwID8gMCA6IG1vbnRoLmNoaWxkcmVuLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBkZWx0YSA+IDAgPyBtb250aC5jaGlsZHJlbi5sZW5ndGggOiAtMTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpICE9IGVuZEluZGV4OyBpICs9IGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBtb250aC5jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBpZiAoYy5jbGFzc05hbWUuaW5kZXhPZihcImhpZGRlblwiKSA9PT0gLTEgJiYgaXNFbmFibGVkKGMuZGF0ZU9iaikpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldE5leHRBdmFpbGFibGVEYXkoY3VycmVudCwgZGVsdGEpIHtcbiAgICAgICAgdmFyIGdpdmVuTW9udGggPSBjdXJyZW50LmNsYXNzTmFtZS5pbmRleE9mKFwiTW9udGhcIikgPT09IC0xXG4gICAgICAgICAgICA/IGN1cnJlbnQuZGF0ZU9iai5nZXRNb250aCgpXG4gICAgICAgICAgICA6IHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICB2YXIgZW5kTW9udGggPSBkZWx0YSA+IDAgPyBzZWxmLmNvbmZpZy5zaG93TW9udGhzIDogLTE7XG4gICAgICAgIHZhciBsb29wRGVsdGEgPSBkZWx0YSA+IDAgPyAxIDogLTE7XG4gICAgICAgIGZvciAodmFyIG0gPSBnaXZlbk1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGg7IG0gIT0gZW5kTW9udGg7IG0gKz0gbG9vcERlbHRhKSB7XG4gICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgICB2YXIgc3RhcnRJbmRleCA9IGdpdmVuTW9udGggLSBzZWxmLmN1cnJlbnRNb250aCA9PT0gbVxuICAgICAgICAgICAgICAgID8gY3VycmVudC4kaSArIGRlbHRhXG4gICAgICAgICAgICAgICAgOiBkZWx0YSA8IDBcbiAgICAgICAgICAgICAgICAgICAgPyBtb250aC5jaGlsZHJlbi5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgIHZhciBudW1Nb250aERheXMgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA+PSAwICYmIGkgPCBudW1Nb250aERheXMgJiYgaSAhPSAoZGVsdGEgPiAwID8gbnVtTW9udGhEYXlzIDogLTEpOyBpICs9IGxvb3BEZWx0YSkge1xuICAgICAgICAgICAgICAgIHZhciBjID0gbW9udGguY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgaWYgKGMuY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgICAgIGlzRW5hYmxlZChjLmRhdGVPYmopICYmXG4gICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGN1cnJlbnQuJGkgLSBpKSA+PSBNYXRoLmFicyhkZWx0YSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmb2N1c09uRGF5RWxlbShjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZWxmLmNoYW5nZU1vbnRoKGxvb3BEZWx0YSk7XG4gICAgICAgIGZvY3VzT25EYXkoZ2V0Rmlyc3RBdmFpbGFibGVEYXkobG9vcERlbHRhKSwgMCk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvY3VzT25EYXkoY3VycmVudCwgb2Zmc2V0KSB7XG4gICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZ2V0Q2xvc2VzdEFjdGl2ZUVsZW1lbnQoKTtcbiAgICAgICAgdmFyIGRheUZvY3VzZWQgPSBpc0luVmlldyhhY3RpdmVFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpO1xuICAgICAgICB2YXIgc3RhcnRFbGVtID0gY3VycmVudCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IGN1cnJlbnRcbiAgICAgICAgICAgIDogZGF5Rm9jdXNlZFxuICAgICAgICAgICAgICAgID8gYWN0aXZlRWxlbWVudFxuICAgICAgICAgICAgICAgIDogc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYgaXNJblZpZXcoc2VsZi5zZWxlY3RlZERhdGVFbGVtKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuc2VsZWN0ZWREYXRlRWxlbVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYudG9kYXlEYXRlRWxlbSAhPT0gdW5kZWZpbmVkICYmIGlzSW5WaWV3KHNlbGYudG9kYXlEYXRlRWxlbSlcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi50b2RheURhdGVFbGVtXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldEZpcnN0QXZhaWxhYmxlRGF5KG9mZnNldCA+IDAgPyAxIDogLTEpO1xuICAgICAgICBpZiAoc3RhcnRFbGVtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWRheUZvY3VzZWQpIHtcbiAgICAgICAgICAgIGZvY3VzT25EYXlFbGVtKHN0YXJ0RWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBnZXROZXh0QXZhaWxhYmxlRGF5KHN0YXJ0RWxlbSwgb2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkge1xuICAgICAgICB2YXIgZmlyc3RPZk1vbnRoID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSAtIHNlbGYubDEwbi5maXJzdERheU9mV2VlayArIDcpICUgNztcbiAgICAgICAgdmFyIHByZXZNb250aERheXMgPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKChtb250aCAtIDEgKyAxMikgJSAxMiwgeWVhcik7XG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgsIHllYXIpLCBkYXlzID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgaXNNdWx0aU1vbnRoID0gc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEsIHByZXZNb250aERheUNsYXNzID0gaXNNdWx0aU1vbnRoID8gXCJwcmV2TW9udGhEYXkgaGlkZGVuXCIgOiBcInByZXZNb250aERheVwiLCBuZXh0TW9udGhEYXlDbGFzcyA9IGlzTXVsdGlNb250aCA/IFwibmV4dE1vbnRoRGF5IGhpZGRlblwiIDogXCJuZXh0TW9udGhEYXlcIjtcbiAgICAgICAgdmFyIGRheU51bWJlciA9IHByZXZNb250aERheXMgKyAxIC0gZmlyc3RPZk1vbnRoLCBkYXlJbmRleCA9IDA7XG4gICAgICAgIGZvciAoOyBkYXlOdW1iZXIgPD0gcHJldk1vbnRoRGF5czsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiZmxhdHBpY2tyLWRheSBcIiArIHByZXZNb250aERheUNsYXNzLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiZmxhdHBpY2tyLWRheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGRheU51bSA9IGRheXNJbk1vbnRoICsgMTsgZGF5TnVtIDw9IDQyIC0gZmlyc3RPZk1vbnRoICYmXG4gICAgICAgICAgICAoc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSB8fCBkYXlJbmRleCAlIDcgIT09IDApOyBkYXlOdW0rKywgZGF5SW5kZXgrKykge1xuICAgICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJmbGF0cGlja3ItZGF5IFwiICsgbmV4dE1vbnRoRGF5Q2xhc3MsIG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgZGF5TnVtICUgZGF5c0luTW9udGgpLCBkYXlOdW0sIGRheUluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XG4gICAgICAgIGRheUNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXlzKTtcbiAgICAgICAgcmV0dXJuIGRheUNvbnRhaW5lcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGREYXlzKCkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpXG4gICAgICAgICAgICBjbGVhck5vZGUoc2VsZi53ZWVrTnVtYmVycyk7XG4gICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGkrKykge1xuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGJ1aWxkTW9udGhEYXlzKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBvbk1vdXNlT3ZlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGhTd2l0Y2goKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fFxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9udGhTZWxlY3RvclR5cGUgIT09IFwiZHJvcGRvd25cIilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIHNob3VsZEJ1aWxkTW9udGggPSBmdW5jdGlvbiAobW9udGgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgJiZcbiAgICAgICAgICAgICAgICBtb250aCA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKHNlbGYuY29uZmlnLm1heERhdGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSAmJlxuICAgICAgICAgICAgICAgIG1vbnRoID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNb250aCgpKTtcbiAgICAgICAgfTtcbiAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFzaG91bGRCdWlsZE1vbnRoKGkpKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gY3JlYXRlRWxlbWVudChcIm9wdGlvblwiLCBcImZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRoXCIpO1xuICAgICAgICAgICAgbW9udGgudmFsdWUgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBpKS5nZXRNb250aCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBtb250aC50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoaSwgc2VsZi5jb25maWcuc2hvcnRoYW5kQ3VycmVudE1vbnRoLCBzZWxmLmwxMG4pO1xuICAgICAgICAgICAgbW9udGgudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIG1vbnRoLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIuYXBwZW5kQ2hpbGQobW9udGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGgoKSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLW1vbnRoXCIpO1xuICAgICAgICB2YXIgbW9udGhOYXZGcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBtb250aEVsZW1lbnQ7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fFxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9udGhTZWxlY3RvclR5cGUgPT09IFwic3RhdGljXCIpIHtcbiAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiY3VyLW1vbnRoXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiwgXCJmbGF0cGlja3ItbW9udGhEcm9wZG93bi1tb250aHNcIik7XG4gICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5sMTBuLm1vbnRoQXJpYUxhYmVsKTtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lciwgXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkTW9udGggPSBwYXJzZUludCh0YXJnZXQudmFsdWUsIDEwKTtcbiAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1vbnRoKHNlbGVjdGVkTW9udGggLSBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICAgICAgbW9udGhFbGVtZW50ID0gc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgeWVhcklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJjdXIteWVhclwiLCB7IHRhYmluZGV4OiBcIi0xXCIgfSk7XG4gICAgICAgIHZhciB5ZWFyRWxlbWVudCA9IHllYXJJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYubDEwbi55ZWFyQXJpYUxhYmVsKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpIHtcbiAgICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpIHtcbiAgICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heFwiLCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB5ZWFyRWxlbWVudC5kaXNhYmxlZCA9XG4gICAgICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJyZW50TW9udGggPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWN1cnJlbnQtbW9udGhcIik7XG4gICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZChtb250aEVsZW1lbnQpO1xuICAgICAgICBjdXJyZW50TW9udGguYXBwZW5kQ2hpbGQoeWVhcklucHV0KTtcbiAgICAgICAgbW9udGhOYXZGcmFnbWVudC5hcHBlbmRDaGlsZChjdXJyZW50TW9udGgpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobW9udGhOYXZGcmFnbWVudCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICAgIHllYXJFbGVtZW50OiB5ZWFyRWxlbWVudCxcbiAgICAgICAgICAgIG1vbnRoRWxlbWVudDogbW9udGhFbGVtZW50LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRocygpIHtcbiAgICAgICAgY2xlYXJOb2RlKHNlbGYubW9udGhOYXYpO1xuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnNob3dNb250aHMpIHtcbiAgICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzID0gW107XG4gICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBtID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgbS0tOykge1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gYnVpbGRNb250aCgpO1xuICAgICAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMucHVzaChtb250aC55ZWFyRWxlbWVudCk7XG4gICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMucHVzaChtb250aC5tb250aEVsZW1lbnQpO1xuICAgICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aC5jb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5uZXh0TW9udGhOYXYpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBidWlsZE1vbnRoTmF2KCkge1xuICAgICAgICBzZWxmLm1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aHNcIik7XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzID0gW107XG4gICAgICAgIHNlbGYubW9udGhFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXByZXYtbW9udGhcIik7XG4gICAgICAgIHNlbGYucHJldk1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLnByZXZBcnJvdztcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1uZXh0LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLm5leHRNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5uZXh0QXJyb3c7XG4gICAgICAgIGJ1aWxkTW9udGhzKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93OyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9faGlkZVByZXZNb250aEFycm93ICE9PSBib29sKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYucHJldk1vbnRoTmF2LCBcImZsYXRwaWNrci1kaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZU5leHRNb250aEFycm93OyB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLl9faGlkZU5leHRNb250aEFycm93ICE9PSBib29sKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYubmV4dE1vbnRoTmF2LCBcImZsYXRwaWNrci1kaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50ID0gc2VsZi55ZWFyRWxlbWVudHNbMF07XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYubW9udGhOYXY7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkVGltZSgpIHtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGFzVGltZVwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJub0NhbGVuZGFyXCIpO1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXRpbWVcIik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICB2YXIgc2VwYXJhdG9yID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpO1xuICAgICAgICB2YXIgaG91cklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItaG91clwiLCB7XG4gICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogc2VsZi5sMTBuLmhvdXJBcmlhTGFiZWwsXG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50ID0gaG91cklucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF07XG4gICAgICAgIHZhciBtaW51dGVJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLW1pbnV0ZVwiLCB7XG4gICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogc2VsZi5sMTBuLm1pbnV0ZUFyaWFMYWJlbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudCA9IG1pbnV0ZUlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIilbMF07XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudGFiSW5kZXggPSBzZWxmLm1pbnV0ZUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRIb3VycygpXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLnRpbWVfMjRoclxuICAgICAgICAgICAgICAgID8gZGVmYXVsdHMuaG91cnNcbiAgICAgICAgICAgICAgICA6IG1pbGl0YXJ5MmFtcG0oZGVmYXVsdHMuaG91cnMpKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqXG4gICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKVxuICAgICAgICAgICAgOiBkZWZhdWx0cy5taW51dGVzKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdGVwXCIsIHNlbGYuY29uZmlnLm1pbnV0ZUluY3JlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgc2VsZi5jb25maWcudGltZV8yNGhyID8gXCIwXCIgOiBcIjFcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMjNcIiA6IFwiMTJcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMlwiKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBcIjBcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgXCI1OVwiKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1heGxlbmd0aFwiLCBcIjJcIik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChob3VySW5wdXQpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKG1pbnV0ZUlucHV0KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnRpbWVfMjRocilcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGltZTI0aHJcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1NlY29uZHNcIik7XG4gICAgICAgICAgICB2YXIgc2Vjb25kSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1zZWNvbmRcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQgPSBzZWNvbmRJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWzBdO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqXG4gICAgICAgICAgICAgICAgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRTZWNvbmRzKClcbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRzLnNlY29uZHMpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcInN0ZXBcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcInN0ZXBcIikpO1xuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1pblwiLCBcIjBcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4XCIsIFwiNTlcIik7XG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWF4bGVuZ3RoXCIsIFwiMlwiKTtcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci10aW1lLXNlcGFyYXRvclwiLCBcIjpcIikpO1xuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlY29uZElucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikge1xuICAgICAgICAgICAgc2VsZi5hbVBNID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItYW0tcG1cIiwgc2VsZi5sMTBuLmFtUE1baW50KChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxuICAgICAgICAgICAgICAgID8gc2VsZi5ob3VyRWxlbWVudC52YWx1ZVxuICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpID4gMTEpXSk7XG4gICAgICAgICAgICBzZWxmLmFtUE0udGl0bGUgPSBzZWxmLmwxMG4udG9nZ2xlVGl0bGU7XG4gICAgICAgICAgICBzZWxmLmFtUE0udGFiSW5kZXggPSAtMTtcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmFtUE0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxmLnRpbWVDb250YWluZXI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla2RheXMoKSB7XG4gICAgICAgIGlmICghc2VsZi53ZWVrZGF5Q29udGFpbmVyKVxuICAgICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5c1wiKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla2RheUNvbnRhaW5lcik7XG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpLS07KSB7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5Y29udGFpbmVyXCIpO1xuICAgICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYud2Vla2RheUNvbnRhaW5lcjtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlV2Vla2RheXMoKSB7XG4gICAgICAgIGlmICghc2VsZi53ZWVrZGF5Q29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZpcnN0RGF5T2ZXZWVrID0gc2VsZi5sMTBuLmZpcnN0RGF5T2ZXZWVrO1xuICAgICAgICB2YXIgd2Vla2RheXMgPSBfX3NwcmVhZEFycmF5cyhzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kKTtcbiAgICAgICAgaWYgKGZpcnN0RGF5T2ZXZWVrID4gMCAmJiBmaXJzdERheU9mV2VlayA8IHdlZWtkYXlzLmxlbmd0aCkge1xuICAgICAgICAgICAgd2Vla2RheXMgPSBfX3NwcmVhZEFycmF5cyh3ZWVrZGF5cy5zcGxpY2UoZmlyc3REYXlPZldlZWssIHdlZWtkYXlzLmxlbmd0aCksIHdlZWtkYXlzLnNwbGljZSgwLCBmaXJzdERheU9mV2VlaykpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpLS07KSB7XG4gICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuY2hpbGRyZW5baV0uaW5uZXJIVE1MID0gXCJcXG4gICAgICA8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLXdlZWtkYXknPlxcbiAgICAgICAgXCIgKyB3ZWVrZGF5cy5qb2luKFwiPC9zcGFuPjxzcGFuIGNsYXNzPSdmbGF0cGlja3Itd2Vla2RheSc+XCIpICsgXCJcXG4gICAgICA8L3NwYW4+XFxuICAgICAgXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYnVpbGRXZWVrcygpIHtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaGFzV2Vla3NcIik7XG4gICAgICAgIHZhciB3ZWVrV3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla3dyYXBwZXJcIik7XG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXdlZWtkYXlcIiwgc2VsZi5sMTBuLndlZWtBYmJyZXZpYXRpb24pKTtcbiAgICAgICAgdmFyIHdlZWtOdW1iZXJzID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrc1wiKTtcbiAgICAgICAgd2Vla1dyYXBwZXIuYXBwZW5kQ2hpbGQod2Vla051bWJlcnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLFxuICAgICAgICAgICAgd2Vla051bWJlcnM6IHdlZWtOdW1iZXJzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFuZ2VNb250aCh2YWx1ZSwgaXNPZmZzZXQpIHtcbiAgICAgICAgaWYgKGlzT2Zmc2V0ID09PSB2b2lkIDApIHsgaXNPZmZzZXQgPSB0cnVlOyB9XG4gICAgICAgIHZhciBkZWx0YSA9IGlzT2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICBpZiAoKGRlbHRhIDwgMCAmJiBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPT09IHRydWUpIHx8XG4gICAgICAgICAgICAoZGVsdGEgPiAwICYmIHNlbGYuX2hpZGVOZXh0TW9udGhBcnJvdyA9PT0gdHJ1ZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoICs9IGRlbHRhO1xuICAgICAgICBpZiAoc2VsZi5jdXJyZW50TW9udGggPCAwIHx8IHNlbGYuY3VycmVudE1vbnRoID4gMTEpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gKHNlbGYuY3VycmVudE1vbnRoICsgMTIpICUgMTI7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgICAgICBidWlsZE1vbnRoU3dpdGNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50LCB0b0luaXRpYWwpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7IH1cbiAgICAgICAgaWYgKHRvSW5pdGlhbCA9PT0gdm9pZCAwKSB7IHRvSW5pdGlhbCA9IHRydWU7IH1cbiAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0b0luaXRpYWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpLCBob3VycyA9IF9hLmhvdXJzLCBtaW51dGVzID0gX2EubWludXRlcywgc2Vjb25kcyA9IF9hLnNlY29uZHM7XG4gICAgICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudClcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWxmLl9pbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGVzdHJveVwiKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuX2hhbmRsZXJzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgc2VsZi5faGFuZGxlcnNbaV0ucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYubW9iaWxlSW5wdXQpO1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICYmIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmxhc3RDaGlsZCAmJiB3cmFwcGVyLnJlbW92ZUNoaWxkKHdyYXBwZXIubGFzdENoaWxkKTtcbiAgICAgICAgICAgICAgICBpZiAod3JhcHBlci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh3cmFwcGVyLmZpcnN0Q2hpbGQpXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIuZmlyc3RDaGlsZCwgd3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh3cmFwcGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuYWx0SW5wdXQpO1xuICAgICAgICAgICAgZGVsZXRlIHNlbGYuYWx0SW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuaW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IHNlbGYuaW5wdXQuX3R5cGU7XG4gICAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgICAgICBzZWxmLmlucHV0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpO1xuICAgICAgICB9XG4gICAgICAgIFtcbiAgICAgICAgICAgIFwiX3Nob3dUaW1lSW5wdXRcIixcbiAgICAgICAgICAgIFwibGF0ZXN0U2VsZWN0ZWREYXRlT2JqXCIsXG4gICAgICAgICAgICBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIixcbiAgICAgICAgICAgIFwiX2hpZGVQcmV2TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJfX2hpZGVOZXh0TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJfX2hpZGVQcmV2TW9udGhBcnJvd1wiLFxuICAgICAgICAgICAgXCJpc01vYmlsZVwiLFxuICAgICAgICAgICAgXCJpc09wZW5cIixcbiAgICAgICAgICAgIFwic2VsZWN0ZWREYXRlRWxlbVwiLFxuICAgICAgICAgICAgXCJtaW5EYXRlSGFzVGltZVwiLFxuICAgICAgICAgICAgXCJtYXhEYXRlSGFzVGltZVwiLFxuICAgICAgICAgICAgXCJkYXlzXCIsXG4gICAgICAgICAgICBcImRheXNDb250YWluZXJcIixcbiAgICAgICAgICAgIFwiX2lucHV0XCIsXG4gICAgICAgICAgICBcIl9wb3NpdGlvbkVsZW1lbnRcIixcbiAgICAgICAgICAgIFwiaW5uZXJDb250YWluZXJcIixcbiAgICAgICAgICAgIFwickNvbnRhaW5lclwiLFxuICAgICAgICAgICAgXCJtb250aE5hdlwiLFxuICAgICAgICAgICAgXCJ0b2RheURhdGVFbGVtXCIsXG4gICAgICAgICAgICBcImNhbGVuZGFyQ29udGFpbmVyXCIsXG4gICAgICAgICAgICBcIndlZWtkYXlDb250YWluZXJcIixcbiAgICAgICAgICAgIFwicHJldk1vbnRoTmF2XCIsXG4gICAgICAgICAgICBcIm5leHRNb250aE5hdlwiLFxuICAgICAgICAgICAgXCJtb250aHNEcm9wZG93bkNvbnRhaW5lclwiLFxuICAgICAgICAgICAgXCJjdXJyZW50TW9udGhFbGVtZW50XCIsXG4gICAgICAgICAgICBcImN1cnJlbnRZZWFyRWxlbWVudFwiLFxuICAgICAgICAgICAgXCJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoXCIsXG4gICAgICAgICAgICBcInNlbGVjdGVkRGF0ZUVsZW1cIixcbiAgICAgICAgICAgIFwiY29uZmlnXCIsXG4gICAgICAgIF0uZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2VsZltrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzQ2FsZW5kYXJFbGVtKGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY29udGFpbnMoZWxlbSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRvY3VtZW50Q2xpY2soZSkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0XzEgPSBnZXRFdmVudFRhcmdldChlKTtcbiAgICAgICAgICAgIHZhciBpc0NhbGVuZGFyRWxlbWVudCA9IGlzQ2FsZW5kYXJFbGVtKGV2ZW50VGFyZ2V0XzEpO1xuICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBldmVudFRhcmdldF8xID09PSBzZWxmLmlucHV0IHx8XG4gICAgICAgICAgICAgICAgZXZlbnRUYXJnZXRfMSA9PT0gc2VsZi5hbHRJbnB1dCB8fFxuICAgICAgICAgICAgICAgIHNlbGYuZWxlbWVudC5jb250YWlucyhldmVudFRhcmdldF8xKSB8fFxuICAgICAgICAgICAgICAgIChlLnBhdGggJiZcbiAgICAgICAgICAgICAgICAgICAgZS5wYXRoLmluZGV4T2YgJiZcbiAgICAgICAgICAgICAgICAgICAgKH5lLnBhdGguaW5kZXhPZihzZWxmLmlucHV0KSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgfmUucGF0aC5pbmRleE9mKHNlbGYuYWx0SW5wdXQpKSk7XG4gICAgICAgICAgICB2YXIgbG9zdEZvY3VzID0gIWlzSW5wdXQgJiZcbiAgICAgICAgICAgICAgICAhaXNDYWxlbmRhckVsZW1lbnQgJiZcbiAgICAgICAgICAgICAgICAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBpc0lnbm9yZWQgPSAhc2VsZi5jb25maWcuaWdub3JlZEZvY3VzRWxlbWVudHMuc29tZShmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLmNvbnRhaW5zKGV2ZW50VGFyZ2V0XzEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAobG9zdEZvY3VzICYmIGlzSWdub3JlZCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgZmFsc2UsIHNlbGYuY29uZmlnLmFsdElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlbGYudGltZUNvbnRhaW5lciAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlICE9PSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcgJiZcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoYW5nZVllYXIobmV3WWVhcikge1xuICAgICAgICBpZiAoIW5ld1llYXIgfHxcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIG5ld1llYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpIHx8XG4gICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdmFyIG5ld1llYXJOdW0gPSBuZXdZZWFyLCBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBuZXdZZWFyTnVtO1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gbmV3WWVhck51bSB8fCBzZWxmLmN1cnJlbnRZZWFyO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSAmJlxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IE1hdGgubWluKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSwgc2VsZi5jdXJyZW50TW9udGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1heChzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRW5hYmxlZChkYXRlLCB0aW1lbGVzcykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfVxuICAgICAgICB2YXIgZGF0ZVRvQ2hlY2sgPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCB1bmRlZmluZWQsIHRpbWVsZXNzKTtcbiAgICAgICAgaWYgKChzZWxmLmNvbmZpZy5taW5EYXRlICYmXG4gICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxuICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5taW5EYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5taW5EYXRlSGFzVGltZSkgPCAwKSB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWF4RGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWF4RGF0ZUhhc1RpbWUpID4gMCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuZW5hYmxlICYmIHNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgYm9vbCA9ICEhc2VsZi5jb25maWcuZW5hYmxlLCBhcnJheSA9IChfYSA9IHNlbGYuY29uZmlnLmVuYWJsZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogc2VsZi5jb25maWcuZGlzYWJsZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGQgPSB2b2lkIDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZCA9IGFycmF5W2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICBkKGRhdGVUb0NoZWNrKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIGQuZ2V0VGltZSgpID09PSBkYXRlVG9DaGVjay5nZXRUaW1lKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSBzZWxmLnBhcnNlRGF0ZShkLCB1bmRlZmluZWQsIHRydWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgICAgID8gYm9vbFxuICAgICAgICAgICAgICAgICAgICA6ICFib29sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGQgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgZC5mcm9tICYmXG4gICAgICAgICAgICAgICAgZC50byAmJlxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA+PSBkLmZyb20uZ2V0VGltZSgpICYmXG4gICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpIDw9IGQudG8uZ2V0VGltZSgpKVxuICAgICAgICAgICAgICAgIHJldHVybiBib29sO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhYm9vbDtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNJblZpZXcoZWxlbSkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gKGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoXCJoaWRkZW5cIikgPT09IC0xICYmXG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUuaW5kZXhPZihcImZsYXRwaWNrci1kaXNhYmxlZFwiKSA9PT0gLTEgJiZcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuY29udGFpbnMoZWxlbSkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uQmx1cihlKSB7XG4gICAgICAgIHZhciBpc0lucHV0ID0gZS50YXJnZXQgPT09IHNlbGYuX2lucHV0O1xuICAgICAgICB2YXIgdmFsdWVDaGFuZ2VkID0gc2VsZi5faW5wdXQudmFsdWUudHJpbUVuZCgpICE9PSBnZXREYXRlU3RyKCk7XG4gICAgICAgIGlmIChpc0lucHV0ICYmXG4gICAgICAgICAgICB2YWx1ZUNoYW5nZWQgJiZcbiAgICAgICAgICAgICEoZS5yZWxhdGVkVGFyZ2V0ICYmIGlzQ2FsZW5kYXJFbGVtKGUucmVsYXRlZFRhcmdldCkpKSB7XG4gICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5faW5wdXQudmFsdWUsIHRydWUsIGUudGFyZ2V0ID09PSBzZWxmLmFsdElucHV0XG4gICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXRcbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICB2YXIgaXNJbnB1dCA9IHNlbGYuY29uZmlnLndyYXBcbiAgICAgICAgICAgID8gZWxlbWVudC5jb250YWlucyhldmVudFRhcmdldClcbiAgICAgICAgICAgIDogZXZlbnRUYXJnZXQgPT09IHNlbGYuX2lucHV0O1xuICAgICAgICB2YXIgYWxsb3dJbnB1dCA9IHNlbGYuY29uZmlnLmFsbG93SW5wdXQ7XG4gICAgICAgIHZhciBhbGxvd0tleWRvd24gPSBzZWxmLmlzT3BlbiAmJiAoIWFsbG93SW5wdXQgfHwgIWlzSW5wdXQpO1xuICAgICAgICB2YXIgYWxsb3dJbmxpbmVLZXlkb3duID0gc2VsZi5jb25maWcuaW5saW5lICYmIGlzSW5wdXQgJiYgIWFsbG93SW5wdXQ7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzICYmIGlzSW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChhbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBldmVudFRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dFxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdFxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRUYXJnZXQuYmx1cigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNDYWxlbmRhckVsZW0oZXZlbnRUYXJnZXQpIHx8XG4gICAgICAgICAgICBhbGxvd0tleWRvd24gfHxcbiAgICAgICAgICAgIGFsbG93SW5saW5lS2V5ZG93bikge1xuICAgICAgICAgICAgdmFyIGlzVGltZU9iaiA9ICEhc2VsZi50aW1lQ29udGFpbmVyICYmXG4gICAgICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGltZU9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdERhdGUoZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgY2FzZSA0NjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5wdXQgJiYgIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmICFpc0lucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYWxsb3dJbnB1dCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGl2ZUVsZW1lbnQgJiYgaXNJblZpZXcoYWN0aXZlRWxlbWVudCkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YV8xID0gZS5rZXlDb2RlID09PSAzOSA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheSh1bmRlZmluZWQsIGRlbHRhXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VNb250aChkZWx0YV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShnZXRGaXJzdEF2YWlsYWJsZURheSgxKSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuaG91ckVsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLmtleUNvZGUgPT09IDQwID8gMSA6IC0xO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHNlbGYuZGF5c0NvbnRhaW5lciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuJGkgIT09IHVuZGVmaW5lZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZ2V0Rmlyc3RBdmFpbGFibGVEYXkoMSksIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzVGltZU9iailcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KHVuZGVmaW5lZCwgZGVsdGEgKiA3KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldCA9PT0gc2VsZi5jdXJyZW50WWVhckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiBzZWxmLmhvdXJFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLFxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5wbHVnaW5FbGVtZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZWxlbXMuaW5kZXhPZihldmVudFRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZWxlbXNbaSArIChlLnNoaWZ0S2V5ID8gLTEgOiAxKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0YXJnZXQgfHwgc2VsZi5faW5wdXQpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50VGFyZ2V0KSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZXZlbnRUYXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApOlxuICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNWzBdO1xuICAgICAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCk6XG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKTpcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XG4gICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNJbnB1dCB8fCBpc0NhbGVuZGFyRWxlbShldmVudFRhcmdldCkpIHtcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uS2V5RG93blwiLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBvbk1vdXNlT3ZlcihlbGVtLCBjZWxsQ2xhc3MpIHtcbiAgICAgICAgaWYgKGNlbGxDbGFzcyA9PT0gdm9pZCAwKSB7IGNlbGxDbGFzcyA9IFwiZmxhdHBpY2tyLWRheVwiOyB9XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICE9PSAxIHx8XG4gICAgICAgICAgICAoZWxlbSAmJlxuICAgICAgICAgICAgICAgICghZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoY2VsbENsYXNzKSB8fFxuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kaXNhYmxlZFwiKSkpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgaG92ZXJEYXRlID0gZWxlbVxuICAgICAgICAgICAgPyBlbGVtLmRhdGVPYmouZ2V0VGltZSgpXG4gICAgICAgICAgICA6IHNlbGYuZGF5cy5maXJzdEVsZW1lbnRDaGlsZC5kYXRlT2JqLmdldFRpbWUoKSwgaW5pdGlhbERhdGUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHVuZGVmaW5lZCwgdHJ1ZSkuZ2V0VGltZSgpLCByYW5nZVN0YXJ0RGF0ZSA9IE1hdGgubWluKGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksIHJhbmdlRW5kRGF0ZSA9IE1hdGgubWF4KGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSk7XG4gICAgICAgIHZhciBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBtaW5SYW5nZSA9IDAsIG1heFJhbmdlID0gMDtcbiAgICAgICAgZm9yICh2YXIgdCA9IHJhbmdlU3RhcnREYXRlOyB0IDwgcmFuZ2VFbmREYXRlOyB0ICs9IGR1cmF0aW9uLkRBWSkge1xuICAgICAgICAgICAgaWYgKCFpc0VuYWJsZWQobmV3IERhdGUodCksIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbnNEaXNhYmxlZCA9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgfHwgKHQgPiByYW5nZVN0YXJ0RGF0ZSAmJiB0IDwgcmFuZ2VFbmREYXRlKTtcbiAgICAgICAgICAgICAgICBpZiAodCA8IGluaXRpYWxEYXRlICYmICghbWluUmFuZ2UgfHwgdCA+IG1pblJhbmdlKSlcbiAgICAgICAgICAgICAgICAgICAgbWluUmFuZ2UgPSB0O1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPiBpbml0aWFsRGF0ZSAmJiAoIW1heFJhbmdlIHx8IHQgPCBtYXhSYW5nZSkpXG4gICAgICAgICAgICAgICAgICAgIG1heFJhbmdlID0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaG92ZXJhYmxlQ2VsbHMgPSBBcnJheS5mcm9tKHNlbGYuckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFwiKjpudGgtY2hpbGQoLW4rXCIgKyBzZWxmLmNvbmZpZy5zaG93TW9udGhzICsgXCIpID4gLlwiICsgY2VsbENsYXNzKSk7XG4gICAgICAgIGhvdmVyYWJsZUNlbGxzLmZvckVhY2goZnVuY3Rpb24gKGRheUVsZW0pIHtcbiAgICAgICAgICAgIHZhciBkYXRlID0gZGF5RWxlbS5kYXRlT2JqO1xuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIG91dE9mUmFuZ2UgPSAobWluUmFuZ2UgPiAwICYmIHRpbWVzdGFtcCA8IG1pblJhbmdlKSB8fFxuICAgICAgICAgICAgICAgIChtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2UpO1xuICAgICAgICAgICAgaWYgKG91dE9mUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJub3RBbGxvd2VkXCIpO1xuICAgICAgICAgICAgICAgIFtcImluUmFuZ2VcIiwgXCJzdGFydFJhbmdlXCIsIFwiZW5kUmFuZ2VcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBbXCJzdGFydFJhbmdlXCIsIFwiaW5SYW5nZVwiLCBcImVuZFJhbmdlXCIsIFwibm90QWxsb3dlZFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoZWxlbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKGhvdmVyRGF0ZSA8PSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0uZ2V0VGltZSgpXG4gICAgICAgICAgICAgICAgICAgID8gXCJzdGFydFJhbmdlXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcImVuZFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsRGF0ZSA8IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKVxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJzdGFydFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluaXRpYWxEYXRlID4gaG92ZXJEYXRlICYmIHRpbWVzdGFtcCA9PT0gaW5pdGlhbERhdGUpXG4gICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImVuZFJhbmdlXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPj0gbWluUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgKG1heFJhbmdlID09PSAwIHx8IHRpbWVzdGFtcCA8PSBtYXhSYW5nZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgaXNCZXR3ZWVuKHRpbWVzdGFtcCwgaW5pdGlhbERhdGUsIGhvdmVyRGF0ZSkpXG4gICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImluUmFuZ2VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSlcbiAgICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gb3BlbihlLCBwb3NpdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHBvc2l0aW9uRWxlbWVudCA9PT0gdm9pZCAwKSB7IHBvc2l0aW9uRWxlbWVudCA9IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDsgfVxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uT3BlblwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2FzT3BlbiA9IHNlbGYuaXNPcGVuO1xuICAgICAgICBzZWxmLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIGlmICghd2FzT3Blbikge1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKHBvc2l0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPT09IHRydWUgJiYgc2VsZi5jb25maWcubm9DYWxlbmRhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsbG93SW5wdXQgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgKGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAhc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpOyB9LCA1MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbWluTWF4RGF0ZVNldHRlcih0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgdmFyIGRhdGVPYmogPSAoc2VsZi5jb25maWdbXCJfXCIgKyB0eXBlICsgXCJEYXRlXCJdID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCkpO1xuICAgICAgICAgICAgdmFyIGludmVyc2VEYXRlT2JqID0gc2VsZi5jb25maWdbXCJfXCIgKyAodHlwZSA9PT0gXCJtaW5cIiA/IFwibWF4XCIgOiBcIm1pblwiKSArIFwiRGF0ZVwiXTtcbiAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzZWxmW3R5cGUgPT09IFwibWluXCIgPyBcIm1pbkRhdGVIYXNUaW1lXCIgOiBcIm1heERhdGVIYXNUaW1lXCJdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRNaW51dGVzKCkgPiAwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqLmdldFNlY29uZHMoKSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gc2VsZi5zZWxlY3RlZERhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gaXNFbmFibGVkKGQpOyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggJiYgdHlwZSA9PT0gXCJtaW5cIilcbiAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHJlZHJhdygpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50W3R5cGVdID0gZGF0ZU9iai5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodHlwZSk7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZGlzYWJsZWQgPVxuICAgICAgICAgICAgICAgICAgICAhIWludmVyc2VEYXRlT2JqICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmVyc2VEYXRlT2JqLmdldEZ1bGxZZWFyKCkgPT09IGRhdGVPYmouZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VDb25maWcoKSB7XG4gICAgICAgIHZhciBib29sT3B0cyA9IFtcbiAgICAgICAgICAgIFwid3JhcFwiLFxuICAgICAgICAgICAgXCJ3ZWVrTnVtYmVyc1wiLFxuICAgICAgICAgICAgXCJhbGxvd0lucHV0XCIsXG4gICAgICAgICAgICBcImFsbG93SW52YWxpZFByZWxvYWRcIixcbiAgICAgICAgICAgIFwiY2xpY2tPcGVuc1wiLFxuICAgICAgICAgICAgXCJ0aW1lXzI0aHJcIixcbiAgICAgICAgICAgIFwiZW5hYmxlVGltZVwiLFxuICAgICAgICAgICAgXCJub0NhbGVuZGFyXCIsXG4gICAgICAgICAgICBcImFsdElucHV0XCIsXG4gICAgICAgICAgICBcInNob3J0aGFuZEN1cnJlbnRNb250aFwiLFxuICAgICAgICAgICAgXCJpbmxpbmVcIixcbiAgICAgICAgICAgIFwic3RhdGljXCIsXG4gICAgICAgICAgICBcImVuYWJsZVNlY29uZHNcIixcbiAgICAgICAgICAgIFwiZGlzYWJsZU1vYmlsZVwiLFxuICAgICAgICBdO1xuICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVsZW1lbnQuZGF0YXNldCB8fCB7fSkpKSwgaW5zdGFuY2VDb25maWcpO1xuICAgICAgICB2YXIgZm9ybWF0cyA9IHt9O1xuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcbiAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImVuYWJsZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9lbmFibGU7IH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChkYXRlcykge1xuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLl9lbmFibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImRpc2FibGVcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZTsgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGRhdGVzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWcuX2Rpc2FibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHRpbWVNb2RlID0gdXNlckNvbmZpZy5tb2RlID09PSBcInRpbWVcIjtcbiAgICAgICAgaWYgKCF1c2VyQ29uZmlnLmRhdGVGb3JtYXQgJiYgKHVzZXJDb25maWcuZW5hYmxlVGltZSB8fCB0aW1lTW9kZSkpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZUZvcm1hdCA9IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQgfHwgZGVmYXVsdE9wdGlvbnMuZGF0ZUZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdHMuZGF0ZUZvcm1hdCA9XG4gICAgICAgICAgICAgICAgdXNlckNvbmZpZy5ub0NhbGVuZGFyIHx8IHRpbWVNb2RlXG4gICAgICAgICAgICAgICAgICAgID8gXCJIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKVxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHREYXRlRm9ybWF0ICsgXCIgSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXJDb25maWcuYWx0SW5wdXQgJiZcbiAgICAgICAgICAgICh1c2VyQ29uZmlnLmVuYWJsZVRpbWUgfHwgdGltZU1vZGUpICYmXG4gICAgICAgICAgICAhdXNlckNvbmZpZy5hbHRGb3JtYXQpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0QWx0Rm9ybWF0ID0gZmxhdHBpY2tyLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0IHx8IGRlZmF1bHRPcHRpb25zLmFsdEZvcm1hdDtcbiAgICAgICAgICAgIGZvcm1hdHMuYWx0Rm9ybWF0ID1cbiAgICAgICAgICAgICAgICB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgfHwgdGltZU1vZGVcbiAgICAgICAgICAgICAgICAgICAgPyBcImg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlMgS1wiIDogXCIgS1wiKVxuICAgICAgICAgICAgICAgICAgICA6IGRlZmF1bHRBbHRGb3JtYXQgKyAoXCIgaDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIikgKyBcIiBLXCIpO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5EYXRlXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7IH0sXG4gICAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIiksXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWF4RGF0ZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKFwibWF4XCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG1pbk1heFRpbWVTZXR0ZXIgPSBmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbdHlwZSA9PT0gXCJtaW5cIiA/IFwiX21pblRpbWVcIiA6IFwiX21heFRpbWVcIl0gPSBzZWxmLnBhcnNlRGF0ZSh2YWwsIFwiSDppOlNcIik7XG4gICAgICAgIH07IH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5UaW1lXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7IH0sXG4gICAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoXCJtaW5cIiksXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWF4VGltZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhUaW1lOyB9LFxuICAgICAgICAgICAgc2V0OiBtaW5NYXhUaW1lU2V0dGVyKFwibWF4XCIpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVzZXJDb25maWcubW9kZSA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPSB0cnVlO1xuICAgICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgZm9ybWF0cywgdXNlckNvbmZpZyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm9vbE9wdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPVxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gdHJ1ZSB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IFwidHJ1ZVwiO1xuICAgICAgICBIT09LUy5maWx0ZXIoZnVuY3Rpb24gKGhvb2spIHsgcmV0dXJuIHNlbGYuY29uZmlnW2hvb2tdICE9PSB1bmRlZmluZWQ7IH0pLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW2hvb2tdID0gYXJyYXlpZnkoc2VsZi5jb25maWdbaG9va10gfHwgW10pLm1hcChiaW5kVG9JbnN0YW5jZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmlzTW9iaWxlID1cbiAgICAgICAgICAgICFzZWxmLmNvbmZpZy5kaXNhYmxlTW9iaWxlICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmlubGluZSAmJlxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZW5hYmxlICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLndlZWtOdW1iZXJzICYmXG4gICAgICAgICAgICAgICAgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwbHVnaW5Db25mID0gc2VsZi5jb25maWcucGx1Z2luc1tpXShzZWxmKSB8fCB7fTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XG4gICAgICAgICAgICAgICAgaWYgKEhPT0tTLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBhcnJheWlmeShwbHVnaW5Db25mW2tleV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGJpbmRUb0luc3RhbmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChzZWxmLmNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdba2V5XSA9IHBsdWdpbkNvbmZba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXVzZXJDb25maWcuYWx0SW5wdXRDbGFzcykge1xuICAgICAgICAgICAgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcyA9XG4gICAgICAgICAgICAgICAgZ2V0SW5wdXRFbGVtKCkuY2xhc3NOYW1lICsgXCIgXCIgKyBzZWxmLmNvbmZpZy5hbHRJbnB1dENsYXNzO1xuICAgICAgICB9XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUGFyc2VDb25maWdcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldElucHV0RWxlbSgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLndyYXBcbiAgICAgICAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtaW5wdXRdXCIpXG4gICAgICAgICAgICA6IGVsZW1lbnQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwTG9jYWxlKCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcImZsYXRwaWNrcjogaW52YWxpZCBsb2NhbGUgXCIgKyBzZWxmLmNvbmZpZy5sb2NhbGUpKTtcbiAgICAgICAgc2VsZi5sMTBuID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0KSwgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgID8gc2VsZi5jb25maWcubG9jYWxlXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgICA/IGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpKTtcbiAgICAgICAgdG9rZW5SZWdleC5EID0gXCIoXCIgKyBzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXgubCA9IFwiKFwiICsgc2VsZi5sMTBuLndlZWtkYXlzLmxvbmdoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXguTSA9IFwiKFwiICsgc2VsZi5sMTBuLm1vbnRocy5zaG9ydGhhbmQuam9pbihcInxcIikgKyBcIilcIjtcbiAgICAgICAgdG9rZW5SZWdleC5GID0gXCIoXCIgKyBzZWxmLmwxMG4ubW9udGhzLmxvbmdoYW5kLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgIHRva2VuUmVnZXguSyA9IFwiKFwiICsgc2VsZi5sMTBuLmFtUE1bMF0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVswXS50b0xvd2VyQ2FzZSgpICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXS50b0xvd2VyQ2FzZSgpICsgXCIpXCI7XG4gICAgICAgIHZhciB1c2VyQ29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGluc3RhbmNlQ29uZmlnKSwgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSk7XG4gICAgICAgIGlmICh1c2VyQ29uZmlnLnRpbWVfMjRociA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy50aW1lXzI0aHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWcudGltZV8yNGhyID0gc2VsZi5sMTBuLnRpbWVfMjRocjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHNlbGYpO1xuICAgICAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoeyBjb25maWc6IHNlbGYuY29uZmlnLCBsMTBuOiBzZWxmLmwxMG4gfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5jb25maWcucG9zaXRpb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgc2VsZi5jb25maWcucG9zaXRpb24oc2VsZiwgY3VzdG9tUG9zaXRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIik7XG4gICAgICAgIHZhciBwb3NpdGlvbkVsZW1lbnQgPSBjdXN0b21Qb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5fcG9zaXRpb25FbGVtZW50O1xuICAgICAgICB2YXIgY2FsZW5kYXJIZWlnaHQgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jaGlsZHJlbiwgKGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7IHJldHVybiBhY2MgKyBjaGlsZC5vZmZzZXRIZWlnaHQ7IH0pLCAwKSwgY2FsZW5kYXJXaWR0aCA9IHNlbGYuY2FsZW5kYXJDb250YWluZXIub2Zmc2V0V2lkdGgsIGNvbmZpZ1BvcyA9IHNlbGYuY29uZmlnLnBvc2l0aW9uLnNwbGl0KFwiIFwiKSwgY29uZmlnUG9zVmVydGljYWwgPSBjb25maWdQb3NbMF0sIGNvbmZpZ1Bvc0hvcml6b250YWwgPSBjb25maWdQb3MubGVuZ3RoID4gMSA/IGNvbmZpZ1Bvc1sxXSA6IG51bGwsIGlucHV0Qm91bmRzID0gcG9zaXRpb25FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sIHNob3dPblRvcCA9IGNvbmZpZ1Bvc1ZlcnRpY2FsID09PSBcImFib3ZlXCIgfHxcbiAgICAgICAgICAgIChjb25maWdQb3NWZXJ0aWNhbCAhPT0gXCJiZWxvd1wiICYmXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tQm90dG9tIDwgY2FsZW5kYXJIZWlnaHQgJiZcbiAgICAgICAgICAgICAgICBpbnB1dEJvdW5kcy50b3AgPiBjYWxlbmRhckhlaWdodCk7XG4gICAgICAgIHZhciB0b3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgK1xuICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wICtcbiAgICAgICAgICAgICghc2hvd09uVG9wID8gcG9zaXRpb25FbGVtZW50Lm9mZnNldEhlaWdodCArIDIgOiAtY2FsZW5kYXJIZWlnaHQgLSAyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1RvcFwiLCAhc2hvd09uVG9wKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgbGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCArIGlucHV0Qm91bmRzLmxlZnQ7XG4gICAgICAgIHZhciBpc0NlbnRlciA9IGZhbHNlO1xuICAgICAgICB2YXIgaXNSaWdodCA9IGZhbHNlO1xuICAgICAgICBpZiAoY29uZmlnUG9zSG9yaXpvbnRhbCA9PT0gXCJjZW50ZXJcIikge1xuICAgICAgICAgICAgbGVmdCAtPSAoY2FsZW5kYXJXaWR0aCAtIGlucHV0Qm91bmRzLndpZHRoKSAvIDI7XG4gICAgICAgICAgICBpc0NlbnRlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uZmlnUG9zSG9yaXpvbnRhbCA9PT0gXCJyaWdodFwiKSB7XG4gICAgICAgICAgICBsZWZ0IC09IGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aDtcbiAgICAgICAgICAgIGlzUmlnaHQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dMZWZ0XCIsICFpc0NlbnRlciAmJiAhaXNSaWdodCk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dDZW50ZXJcIiwgaXNDZW50ZXIpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93UmlnaHRcIiwgaXNSaWdodCk7XG4gICAgICAgIHZhciByaWdodCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC1cbiAgICAgICAgICAgICh3aW5kb3cucGFnZVhPZmZzZXQgKyBpbnB1dEJvdW5kcy5yaWdodCk7XG4gICAgICAgIHZhciByaWdodE1vc3QgPSBsZWZ0ICsgY2FsZW5kYXJXaWR0aCA+IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgY2VudGVyTW9zdCA9IHJpZ2h0ICsgY2FsZW5kYXJXaWR0aCA+IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJpZ2h0TW9zdFwiLCByaWdodE1vc3QpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcbiAgICAgICAgaWYgKCFyaWdodE1vc3QpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gXCJhdXRvXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWNlbnRlck1vc3QpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IFwiYXV0b1wiO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRvYyA9IGdldERvY3VtZW50U3R5bGVTaGVldCgpO1xuICAgICAgICAgICAgaWYgKGRvYyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHZhciBib2R5V2lkdGggPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgIHZhciBjZW50ZXJMZWZ0ID0gTWF0aC5tYXgoMCwgYm9keVdpZHRoIC8gMiAtIGNhbGVuZGFyV2lkdGggLyAyKTtcbiAgICAgICAgICAgIHZhciBjZW50ZXJCZWZvcmUgPSBcIi5mbGF0cGlja3ItY2FsZW5kYXIuY2VudGVyTW9zdDpiZWZvcmVcIjtcbiAgICAgICAgICAgIHZhciBjZW50ZXJBZnRlciA9IFwiLmZsYXRwaWNrci1jYWxlbmRhci5jZW50ZXJNb3N0OmFmdGVyXCI7XG4gICAgICAgICAgICB2YXIgY2VudGVySW5kZXggPSBkb2MuY3NzUnVsZXMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNlbnRlclN0eWxlID0gXCJ7bGVmdDpcIiArIGlucHV0Qm91bmRzLmxlZnQgKyBcInB4O3JpZ2h0OmF1dG87fVwiO1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyaWdodE1vc3RcIiwgZmFsc2UpO1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJjZW50ZXJNb3N0XCIsIHRydWUpO1xuICAgICAgICAgICAgZG9jLmluc2VydFJ1bGUoY2VudGVyQmVmb3JlICsgXCIsXCIgKyBjZW50ZXJBZnRlciArIGNlbnRlclN0eWxlLCBjZW50ZXJJbmRleCk7XG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBjZW50ZXJMZWZ0ICsgXCJweFwiO1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldERvY3VtZW50U3R5bGVTaGVldCgpIHtcbiAgICAgICAgdmFyIGVkaXRhYmxlU2hlZXQgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXTtcbiAgICAgICAgICAgIGlmICghc2hlZXQuY3NzUnVsZXMpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNoZWV0LmNzc1J1bGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWRpdGFibGVTaGVldCA9IHNoZWV0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVkaXRhYmxlU2hlZXQgIT0gbnVsbCA/IGVkaXRhYmxlU2hlZXQgOiBjcmVhdGVTdHlsZVNoZWV0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZVN0eWxlU2hlZXQoKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgICAgIHJldHVybiBzdHlsZS5zaGVldDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBidWlsZE1vbnRoU3dpdGNoKCk7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XG4gICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG4gICAgICAgIGlmICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSAhPT0gLTEgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoc2VsZi5jbG9zZSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmFyIGlzU2VsZWN0YWJsZSA9IGZ1bmN0aW9uIChkYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmXG4gICAgICAgICAgICAgICAgZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kYXlcIikgJiZcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kaXNhYmxlZFwiKSAmJlxuICAgICAgICAgICAgICAgICFkYXkuY2xhc3NMaXN0LmNvbnRhaW5zKFwibm90QWxsb3dlZFwiKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHQgPSBmaW5kUGFyZW50KGdldEV2ZW50VGFyZ2V0KGUpLCBpc1NlbGVjdGFibGUpO1xuICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdDtcbiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKHRhcmdldC5kYXRlT2JqLmdldFRpbWUoKSkpO1xuICAgICAgICB2YXIgc2hvdWxkQ2hhbmdlTW9udGggPSAoc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPCBzZWxmLmN1cnJlbnRNb250aCB8fFxuICAgICAgICAgICAgc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPlxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoICsgc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDEpICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIpXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbc2VsZWN0ZWREYXRlXTtcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJtdWx0aXBsZVwiKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IGlzRGF0ZVNlbGVjdGVkKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleClcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc3BsaWNlKHBhcnNlSW50KHNlbGVjdGVkSW5kZXgpLCAxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGVjdGVkRGF0ZTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgICBpZiAoY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSAhPT0gMClcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgIGlmIChzaG91bGRDaGFuZ2VNb250aCkge1xuICAgICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKTtcbiAgICAgICAgICAgIGlmIChpc05ld1llYXIpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoIXNob3VsZENoYW5nZU1vbnRoICYmXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgJiZcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEpXG4gICAgICAgICAgICBmb2N1c09uRGF5RWxlbSh0YXJnZXQpO1xuICAgICAgICBlbHNlIGlmIChzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gJiYgc2VsZi5zZWxlY3RlZERhdGVFbGVtLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XG4gICAgICAgICAgICB2YXIgc2luZ2xlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcbiAgICAgICAgICAgIHZhciByYW5nZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJlxuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcbiAgICAgICAgICAgIGlmIChzaW5nbGUgfHwgcmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xuICAgIH1cbiAgICB2YXIgQ0FMTEJBQ0tTID0ge1xuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZSwgdXBkYXRlV2Vla2RheXNdLFxuICAgICAgICBzaG93TW9udGhzOiBbYnVpbGRNb250aHMsIHNldENhbGVuZGFyV2lkdGgsIGJ1aWxkV2Vla2RheXNdLFxuICAgICAgICBtaW5EYXRlOiBbanVtcFRvRGF0ZV0sXG4gICAgICAgIG1heERhdGU6IFtqdW1wVG9EYXRlXSxcbiAgICAgICAgcG9zaXRpb25FbGVtZW50OiBbdXBkYXRlUG9zaXRpb25FbGVtZW50XSxcbiAgICAgICAgY2xpY2tPcGVuczogW1xuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHNlbGYub3Blbik7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfTtcbiAgICBmdW5jdGlvbiBzZXQob3B0aW9uLCB2YWx1ZSkge1xuICAgICAgICBpZiAob3B0aW9uICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIG9wdGlvbik7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKENBTExCQUNLU1trZXldICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIENBTExCQUNLU1trZXldLmZvckVhY2goZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgoKTsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tvcHRpb25dID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoQ0FMTEJBQ0tTW29wdGlvbl0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBDQUxMQkFDS1Nbb3B0aW9uXS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pO1xuICAgICAgICAgICAgZWxzZSBpZiAoSE9PS1MuaW5kZXhPZihvcHRpb24pID4gLTEpXG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWdbb3B0aW9uXSA9IGFycmF5aWZ5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICB1cGRhdGVWYWx1ZSh0cnVlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0U2VsZWN0ZWREYXRlKGlucHV0RGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHZhciBkYXRlcyA9IFtdO1xuICAgICAgICBpZiAoaW5wdXREYXRlIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGQsIGZvcm1hdCk7IH0pO1xuICAgICAgICBlbHNlIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBpbnB1dERhdGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICBkYXRlcyA9IFtzZWxmLnBhcnNlRGF0ZShpbnB1dERhdGUsIGZvcm1hdCldO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNlbGYuY29uZmlnLm1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcInRpbWVcIjpcbiAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm11bHRpcGxlXCI6XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInJhbmdlXCI6XG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5sMTBuLnJhbmdlU2VwYXJhdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSAoc2VsZi5jb25maWcuYWxsb3dJbnZhbGlkUHJlbG9hZFxuICAgICAgICAgICAgPyBkYXRlc1xuICAgICAgICAgICAgOiBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQgaW5zdGFuY2VvZiBEYXRlICYmIGlzRW5hYmxlZChkLCBmYWxzZSk7IH0pKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIilcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmdldFRpbWUoKSAtIGIuZ2V0VGltZSgpOyB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0cmlnZ2VyQ2hhbmdlLCBmb3JtYXQpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlID0gZmFsc2U7IH1cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7IGZvcm1hdCA9IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQ7IH1cbiAgICAgICAgaWYgKChkYXRlICE9PSAwICYmICFkYXRlKSB8fCAoZGF0ZSBpbnN0YW5jZW9mIEFycmF5ICYmIGRhdGUubGVuZ3RoID09PSAwKSlcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBzZXRTZWxlY3RlZERhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzW3NlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSh1bmRlZmluZWQsIHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKCk7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UpXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VEYXRlUnVsZXMoYXJyKSB7XG4gICAgICAgIHJldHVybiBhcnJcbiAgICAgICAgICAgIC5zbGljZSgpXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUgPT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fFxuICAgICAgICAgICAgICAgIHJ1bGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKHJ1bGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChydWxlICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHJ1bGUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICBydWxlLmZyb20gJiZcbiAgICAgICAgICAgICAgICBydWxlLnRvKVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZyb206IHNlbGYucGFyc2VEYXRlKHJ1bGUuZnJvbSwgdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdG86IHNlbGYucGFyc2VEYXRlKHJ1bGUudG8sIHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBydWxlO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldHVwRGF0ZXMoKSB7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtdO1xuICAgICAgICBzZWxmLm5vdyA9IHNlbGYucGFyc2VEYXRlKHNlbGYuY29uZmlnLm5vdykgfHwgbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIHByZWxvYWRlZERhdGUgPSBzZWxmLmNvbmZpZy5kZWZhdWx0RGF0ZSB8fFxuICAgICAgICAgICAgKChzZWxmLmlucHV0Lm5vZGVOYW1lID09PSBcIklOUFVUXCIgfHxcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0Lm5vZGVOYW1lID09PSBcIlRFWFRBUkVBXCIpICYmXG4gICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5wbGFjZWhvbGRlciAmJlxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPT09IHNlbGYuaW5wdXQucGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgICA6IHNlbGYuaW5wdXQudmFsdWUpO1xuICAgICAgICBpZiAocHJlbG9hZGVkRGF0ZSlcbiAgICAgICAgICAgIHNldFNlbGVjdGVkRGF0ZShwcmVsb2FkZWREYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgc2VsZi5faW5pdGlhbERhdGUgPVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICA/IHNlbGYuc2VsZWN0ZWREYXRlc1swXVxuICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSA+IHNlbGYubm93LmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldFRpbWUoKSA8IHNlbGYubm93LmdldFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93O1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBzZWxmLl9pbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApXG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGYuc2VsZWN0ZWREYXRlc1swXTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9XG4gICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1pbkRhdGUgJiZcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZS5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSA9XG4gICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1heERhdGUgJiZcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fFxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0dXBJbnB1dHMoKSB7XG4gICAgICAgIHNlbGYuaW5wdXQgPSBnZXRJbnB1dEVsZW0oKTtcbiAgICAgICAgaWYgKCFzZWxmLmlucHV0KSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCBlbGVtZW50IHNwZWNpZmllZFwiKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5pbnB1dC5fdHlwZSA9IHNlbGYuaW5wdXQudHlwZTtcbiAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIHNlbGYuaW5wdXQuY2xhc3NMaXN0LmFkZChcImZsYXRwaWNrci1pbnB1dFwiKTtcbiAgICAgICAgc2VsZi5faW5wdXQgPSBzZWxmLmlucHV0O1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWx0SW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQgPSBjcmVhdGVFbGVtZW50KHNlbGYuaW5wdXQubm9kZU5hbWUsIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xuICAgICAgICAgICAgc2VsZi5faW5wdXQgPSBzZWxmLmFsdElucHV0O1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5wbGFjZWhvbGRlciA9IHNlbGYuaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucmVxdWlyZWQgPSBzZWxmLmlucHV0LnJlcXVpcmVkO1xuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC50YWJJbmRleCA9IHNlbGYuaW5wdXQudGFiSW5kZXg7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICAgIHNlbGYuaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmIHNlbGYuaW5wdXQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYWxsb3dJbnB1dClcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgIHVwZGF0ZVBvc2l0aW9uRWxlbWVudCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVQb3NpdGlvbkVsZW1lbnQoKSB7XG4gICAgICAgIHNlbGYuX3Bvc2l0aW9uRWxlbWVudCA9IHNlbGYuY29uZmlnLnBvc2l0aW9uRWxlbWVudCB8fCBzZWxmLl9pbnB1dDtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0dXBNb2JpbGUoKSB7XG4gICAgICAgIHZhciBpbnB1dFR5cGUgPSBzZWxmLmNvbmZpZy5lbmFibGVUaW1lXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXJcbiAgICAgICAgICAgICAgICA/IFwidGltZVwiXG4gICAgICAgICAgICAgICAgOiBcImRhdGV0aW1lLWxvY2FsXCJcbiAgICAgICAgICAgIDogXCJkYXRlXCI7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBmbGF0cGlja3ItbW9iaWxlXCIpO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICBzZWxmLm1vYmlsZUZvcm1hdFN0ciA9XG4gICAgICAgICAgICBpbnB1dFR5cGUgPT09IFwiZGF0ZXRpbWUtbG9jYWxcIlxuICAgICAgICAgICAgICAgID8gXCJZLW0tZFxcXFxUSDppOlNcIlxuICAgICAgICAgICAgICAgIDogaW5wdXRUeXBlID09PSBcImRhdGVcIlxuICAgICAgICAgICAgICAgICAgICA/IFwiWS1tLWRcIlxuICAgICAgICAgICAgICAgICAgICA6IFwiSDppOlNcIjtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRlZmF1bHRWYWx1ZSA9IHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0Lm1pbiA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSlcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQubWF4ID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1heERhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIGlmIChzZWxmLmlucHV0LmdldEF0dHJpYnV0ZShcInN0ZXBcIikpXG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnN0ZXAgPSBTdHJpbmcoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpKTtcbiAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJoaWRkZW5cIjtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5pbnB1dC5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5tb2JpbGVJbnB1dCwgc2VsZi5pbnB1dC5uZXh0U2libGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKGdldEV2ZW50VGFyZ2V0KGUpLnZhbHVlLCBmYWxzZSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgc2VsZi5vcGVuKGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBob29rcyA9IHNlbGYuY29uZmlnW2V2ZW50XTtcbiAgICAgICAgaWYgKGhvb2tzICE9PSB1bmRlZmluZWQgJiYgaG9va3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGhvb2tzW2ldICYmIGkgPCBob29rcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudCA9PT0gXCJvbkNoYW5nZVwiKSB7XG4gICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJjaGFuZ2VcIikpO1xuICAgICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiaW5wdXRcIikpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KG5hbWUpIHtcbiAgICAgICAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO1xuICAgICAgICBlLmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRGF0ZVNlbGVjdGVkKGRhdGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSBzZWxmLnNlbGVjdGVkRGF0ZXNbaV07XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlIGluc3RhbmNlb2YgRGF0ZSAmJlxuICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIGRhdGUpID09PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBcIlwiICsgaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzRGF0ZUluUmFuZ2UoZGF0ZSkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiIHx8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPCAyKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gKGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pID49IDAgJiZcbiAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0pIDw9IDApO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uICh5ZWFyRWxlbWVudCwgaSkge1xuICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHxcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb250aFNlbGVjdG9yVHlwZSA9PT0gXCJzdGF0aWNcIikge1xuICAgICAgICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50c1tpXS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIudmFsdWUgPSBkLmdldE1vbnRoKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHllYXJFbGVtZW50LnZhbHVlID0gZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPVxuICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY3VycmVudE1vbnRoIDw9IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgICBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPVxuICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY3VycmVudE1vbnRoICsgMSA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKVxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXREYXRlU3RyKHNwZWNpZmljRm9ybWF0KSB7XG4gICAgICAgIHZhciBmb3JtYXQgPSBzcGVjaWZpY0Zvcm1hdCB8fFxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFsdElucHV0ID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0IDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHJldHVybiBzZWxmLnNlbGVjdGVkRGF0ZXNcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRPYmopIHsgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBmb3JtYXQpOyB9KVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZCwgaSwgYXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiIHx8XG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSB8fFxuICAgICAgICAgICAgICAgIGFyci5pbmRleE9mKGQpID09PSBpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLmNvbmp1bmN0aW9uXG4gICAgICAgICAgICA6IHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlRm9ybWF0U3RyKSB7XG4gICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID1cbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5mb3JtYXREYXRlKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLm1vYmlsZUZvcm1hdFN0cilcbiAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBnZXREYXRlU3RyKHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LnZhbHVlID0gZ2V0RGF0ZVN0cihzZWxmLmNvbmZpZy5hbHRGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICE9PSBmYWxzZSlcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9uTW9udGhOYXZDbGljayhlKSB7XG4gICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpO1xuICAgICAgICB2YXIgaXNQcmV2TW9udGggPSBzZWxmLnByZXZNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7XG4gICAgICAgIHZhciBpc05leHRNb250aCA9IHNlbGYubmV4dE1vbnRoTmF2LmNvbnRhaW5zKGV2ZW50VGFyZ2V0KTtcbiAgICAgICAgaWYgKGlzUHJldk1vbnRoIHx8IGlzTmV4dE1vbnRoKSB7XG4gICAgICAgICAgICBjaGFuZ2VNb250aChpc1ByZXZNb250aCA/IC0xIDogMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZi55ZWFyRWxlbWVudHMuaW5kZXhPZihldmVudFRhcmdldCkgPj0gMCkge1xuICAgICAgICAgICAgZXZlbnRUYXJnZXQuc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dVcFwiKSkge1xuICAgICAgICAgICAgc2VsZi5jaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhcnJvd0Rvd25cIikpIHtcbiAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpc0tleURvd24gPSBlLnR5cGUgPT09IFwia2V5ZG93blwiLCBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpLCBpbnB1dCA9IGV2ZW50VGFyZ2V0O1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZXZlbnRUYXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBzZWxmLmwxMG4uYW1QTVtpbnQoc2VsZi5hbVBNLnRleHRDb250ZW50ID09PSBzZWxmLmwxMG4uYW1QTVswXSldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtaW4gPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcIm1pblwiKSksIG1heCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwibWF4XCIpKSwgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSksIGN1clZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSwgZGVsdGEgPSBlLmRlbHRhIHx8XG4gICAgICAgICAgICAoaXNLZXlEb3duID8gKGUud2hpY2ggPT09IDM4ID8gMSA6IC0xKSA6IDApO1xuICAgICAgICB2YXIgbmV3VmFsdWUgPSBjdXJWYWx1ZSArIHN0ZXAgKiBkZWx0YTtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpbnB1dC52YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHZhciBpc0hvdXJFbGVtID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQsIGlzTWludXRlRWxlbSA9IGlucHV0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgPCBtaW4pIHtcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9XG4gICAgICAgICAgICAgICAgICAgIG1heCArXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSArXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnQoIWlzSG91ckVsZW0pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKVxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIC0xLCBzZWxmLmhvdXJFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5ld1ZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPVxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCA/IG5ld1ZhbHVlIC0gbWF4IC0gaW50KCFzZWxmLmFtUE0pIDogbWluO1xuICAgICAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pXG4gICAgICAgICAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgMSwgc2VsZi5ob3VyRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZi5hbVBNICYmXG4gICAgICAgICAgICAgICAgaXNIb3VyRWxlbSAmJlxuICAgICAgICAgICAgICAgIChzdGVwID09PSAxXG4gICAgICAgICAgICAgICAgICAgID8gbmV3VmFsdWUgKyBjdXJWYWx1ZSA9PT0gMjNcbiAgICAgICAgICAgICAgICAgICAgOiBNYXRoLmFicyhuZXdWYWx1ZSAtIGN1clZhbHVlKSA+IHN0ZXApKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbml0KCk7XG4gICAgcmV0dXJuIHNlbGY7XG59XG5mdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHtcbiAgICB2YXIgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2VcbiAgICAgICAgLmNhbGwobm9kZUxpc3QpXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggaW5zdGFuY2VvZiBIVE1MRWxlbWVudDsgfSk7XG4gICAgdmFyIGluc3RhbmNlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGlmIChub2RlLl9mbGF0cGlja3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gRmxhdHBpY2tySW5zdGFuY2Uobm9kZSwgY29uZmlnIHx8IHt9KTtcbiAgICAgICAgICAgIGluc3RhbmNlcy5wdXNoKG5vZGUuX2ZsYXRwaWNrcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluc3RhbmNlcy5sZW5ndGggPT09IDEgPyBpbnN0YW5jZXNbMF0gOiBpbnN0YW5jZXM7XG59XG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIEhUTUxDb2xsZWN0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIE5vZGVMaXN0ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXRwaWNrciA9IE5vZGVMaXN0LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgfTtcbiAgICBIVE1MRWxlbWVudC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihbdGhpc10sIGNvbmZpZyk7XG4gICAgfTtcbn1cbnZhciBmbGF0cGlja3IgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGNvbmZpZykge1xuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3Iod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBjb25maWcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3NlbGVjdG9yXSwgY29uZmlnKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpO1xuICAgIH1cbn07XG5mbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IHt9O1xuZmxhdHBpY2tyLmwxMG5zID0ge1xuICAgIGVuOiBfX2Fzc2lnbih7fSwgRW5nbGlzaCksXG4gICAgZGVmYXVsdDogX19hc3NpZ24oe30sIEVuZ2xpc2gpLFxufTtcbmZsYXRwaWNrci5sb2NhbGl6ZSA9IGZ1bmN0aW9uIChsMTBuKSB7XG4gICAgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQpLCBsMTBuKTtcbn07XG5mbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcpLCBjb25maWcpO1xufTtcbmZsYXRwaWNrci5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHt9KTtcbmZsYXRwaWNrci5mb3JtYXREYXRlID0gY3JlYXRlRGF0ZUZvcm1hdHRlcih7fSk7XG5mbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xuaWYgKHR5cGVvZiBqUXVlcnkgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGpRdWVyeS5mbiAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgfTtcbn1cbkRhdGUucHJvdG90eXBlLmZwX2luY3IgPSBmdW5jdGlvbiAoZGF5cykge1xuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksIHRoaXMuZ2V0TW9udGgoKSwgdGhpcy5nZXREYXRlKCkgKyAodHlwZW9mIGRheXMgPT09IFwic3RyaW5nXCIgPyBwYXJzZUludChkYXlzLCAxMCkgOiBkYXlzKSk7XG59O1xuaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW5kb3cuZmxhdHBpY2tyID0gZmxhdHBpY2tyO1xufVxuZXhwb3J0IGRlZmF1bHQgZmxhdHBpY2tyO1xuIiwgImltcG9ydCBJbnB1dCBmcm9tICcuL0lucHV0RmllbGQnXG5pbXBvcnQgQm9vbGVhbiBmcm9tICcuL0Jvb2xlYW5GaWVsZCdcbmltcG9ydCBOdW1iZXIgZnJvbSAnLi9OdW1iZXJGaWVsZCdcbmltcG9ydCBTZWxlY3QgZnJvbSAnLi9TZWxlY3RGaWVsZCdcbmltcG9ydCBDeWNsZSBmcm9tICcuL0N5Y2xlRmllbGQnXG5pbXBvcnQgTXVsdGkgZnJvbSAnLi9NdWx0aUZpZWxkJ1xuaW1wb3J0IEZpbGUgZnJvbSAnLi9GaWxlRmllbGQnXG5pbXBvcnQgRGF0ZSBmcm9tICcuL0RhdGVGaWVsZCdcblxuY29uc3QgTWFuYWdlcnMgPSB7XG4gICAgSW5wdXQsXG4gICAgQm9vbGVhbixcbiAgICBOdW1iZXIsXG4gICAgU2VsZWN0LFxuICAgIEN5Y2xlLFxuICAgIE11bHRpLFxuICAgIEZpbGUsXG4gICAgRGF0ZVxufVxuXG5leHBvcnQgZGVmYXVsdCBNYW5hZ2VycyIsICJpbXBvcnQgTWFuYWdlcnMgZnJvbSBcInNyYy9maWVsZHMvZmllbGRNYW5hZ2Vycy9NYW5hZ2Vyc1wiO1xuXG5leHBvcnQgY29uc3QgZW51bSBGaWVsZFR5cGUge1xuICAgICdJbnB1dCcgPSBcIklucHV0XCIsXG4gICAgJ1NlbGVjdCcgPSBcIlNlbGVjdFwiLFxuICAgICdNdWx0aScgPSBcIk11bHRpXCIsXG4gICAgJ0N5Y2xlJyA9IFwiQ3ljbGVcIixcbiAgICAnQm9vbGVhbicgPSBcIkJvb2xlYW5cIixcbiAgICBcIk51bWJlclwiID0gXCJOdW1iZXJcIixcbiAgICBcIkZpbGVcIiA9IFwiRmlsZVwiLFxuICAgIFwiRGF0ZVwiID0gXCJEYXRlXCJcbn1cblxuZXhwb3J0IGNvbnN0IEZpZWxkVHlwZUxhYmVsTWFwcGluZzogUmVjb3JkPGtleW9mIHR5cGVvZiBGaWVsZFR5cGUsIEZpZWxkVHlwZT4gPSB7XG4gICAgXCJJbnB1dFwiOiBGaWVsZFR5cGUuSW5wdXQsXG4gICAgXCJTZWxlY3RcIjogRmllbGRUeXBlLlNlbGVjdCxcbiAgICBcIk11bHRpXCI6IEZpZWxkVHlwZS5NdWx0aSxcbiAgICBcIkN5Y2xlXCI6IEZpZWxkVHlwZS5DeWNsZSxcbiAgICBcIkJvb2xlYW5cIjogRmllbGRUeXBlLkJvb2xlYW4sXG4gICAgXCJOdW1iZXJcIjogRmllbGRUeXBlLk51bWJlcixcbiAgICBcIkZpbGVcIjogRmllbGRUeXBlLkZpbGUsXG4gICAgXCJEYXRlXCI6IEZpZWxkVHlwZS5EYXRlXG59O1xuXG5leHBvcnQgY29uc3QgRmllbGRUeXBlVGFnQ2xhc3M6IFJlY29yZDxrZXlvZiB0eXBlb2YgRmllbGRUeXBlLCBzdHJpbmc+ID0ge1xuICAgIFwiSW5wdXRcIjogXCJzaW5nbGVcIixcbiAgICBcIlNlbGVjdFwiOiBcInNlbGVjdFwiLFxuICAgIFwiTXVsdGlcIjogXCJtdWx0aVwiLFxuICAgIFwiQ3ljbGVcIjogXCJjeWNsZVwiLFxuICAgIFwiQm9vbGVhblwiOiBcImJvb2xlYW5cIixcbiAgICBcIk51bWJlclwiOiBcIm51bWJlclwiLFxuICAgIFwiRmlsZVwiOiBcImZpbGVcIixcbiAgICBcIkRhdGVcIjogXCJkYXRlXCJcbn1cblxuZXhwb3J0IGNvbnN0IEZpZWxkVHlwZVRvb2x0aXA6IFJlY29yZDxrZXlvZiB0eXBlb2YgRmllbGRUeXBlLCBzdHJpbmc+ID0ge1xuICAgIFwiSW5wdXRcIjogXCJBY2NlcHQgYW55IHZhbHVlXCIsXG4gICAgXCJTZWxlY3RcIjogXCJBY2NlcHQgYSBzaW5nbGUgdmFsdWUgZnJvbSBhIGxpc3RcIixcbiAgICBcIk11bHRpXCI6IFwiQWNjZXB0IG11bHRpcGxlIHZhbHVlcyBmcm9tIGEgbGlzdFwiLFxuICAgIFwiQ3ljbGVcIjogXCJDeWNsZSB0aHJvdWdoIHZhbHVlcyBmcm9tIGEgbGlzdFwiLFxuICAgIFwiQm9vbGVhblwiOiBcIkFjY2VwdCB0cnVlIG9mIGZhbHNlXCIsXG4gICAgXCJOdW1iZXJcIjogXCJBY2NlcHQgYSBudW1iZXJcIixcbiAgICBcIkZpbGVcIjogXCJBY2NlcHQgYSBsaW5rIHRvIGEgZmlsZSBpbiB5b3VyIHZhdWx0XCIsXG4gICAgXCJEYXRlXCI6IFwiQWNjZXB0IGEgZGF0ZVwiXG59XG5cbmV4cG9ydCBjb25zdCBGaWVsZE1hbmFnZXI6IFJlY29yZDxrZXlvZiB0eXBlb2YgRmllbGRUeXBlLCBhbnk+ID0ge1xuICAgIFwiSW5wdXRcIjogTWFuYWdlcnMuSW5wdXQsXG4gICAgXCJTZWxlY3RcIjogTWFuYWdlcnMuU2VsZWN0LFxuICAgIFwiTXVsdGlcIjogTWFuYWdlcnMuTXVsdGksXG4gICAgXCJDeWNsZVwiOiBNYW5hZ2Vycy5DeWNsZSxcbiAgICBcIkJvb2xlYW5cIjogTWFuYWdlcnMuQm9vbGVhbixcbiAgICBcIk51bWJlclwiOiBNYW5hZ2Vycy5OdW1iZXIsXG4gICAgXCJGaWxlXCI6IE1hbmFnZXJzLkZpbGUsXG4gICAgXCJEYXRlXCI6IE1hbmFnZXJzLkRhdGVcbn0iLCAiaW1wb3J0IHsgRmllbGRUeXBlIH0gZnJvbSBcIi4uL3R5cGVzL2ZpZWxkVHlwZXNcIlxuXG5pbnRlcmZhY2UgRmllbGQge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgdmFsdWVzTGlzdE5vdGVQYXRoOiBzdHJpbmc7XG4gICAgdHlwZTogRmllbGRUeXBlXG59XG5cbmNsYXNzIEZpZWxkIHtcblxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZyA9IFwiXCIsXG4gICAgICAgIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fSxcbiAgICAgICAgaWQ6IHN0cmluZyA9IFwiXCIsXG4gICAgICAgIHZhbHVlc0xpc3ROb3RlUGF0aDogc3RyaW5nID0gXCJcIixcbiAgICAgICAgdHlwZTogRmllbGRUeXBlID0gRmllbGRUeXBlLklucHV0XG4gICAgKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy52YWx1ZXNMaXN0Tm90ZVBhdGggPSB2YWx1ZXNMaXN0Tm90ZVBhdGg7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGVcbiAgICAgICAgdGhpcy5pbnNlcnROZXdWYWx1ZS5iaW5kKHRoaXMpO1xuICAgIH07XG5cbiAgICBwdWJsaWMgYXN5bmMgaW5zZXJ0TmV3VmFsdWUodmFsdWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGxldCBuZXdLZXkgPSAxO1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGlmIChwYXJzZUludChrZXkpICYmIHBhcnNlSW50KGtleSkgPj0gbmV3S2V5KSB7XG4gICAgICAgICAgICAgICAgbmV3S2V5ID0gcGFyc2VJbnQoa2V5KSArIDE7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vcHRpb25zW25ld0tleS50b1N0cmluZygpXSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gbmV3S2V5LnRvU3RyaW5nKCk7XG4gICAgfTtcblxuICAgIHN0YXRpYyBjb3B5UHJvcGVydHkodGFyZ2V0OiBGaWVsZCwgc291cmNlOiBGaWVsZCkge1xuICAgICAgICB0YXJnZXQuaWQgPSBzb3VyY2UuaWQ7XG4gICAgICAgIHRhcmdldC5uYW1lID0gc291cmNlLm5hbWU7XG4gICAgICAgIHRhcmdldC52YWx1ZXNMaXN0Tm90ZVBhdGggPSBzb3VyY2UudmFsdWVzTGlzdE5vdGVQYXRoO1xuICAgICAgICB0YXJnZXQudHlwZSA9IHNvdXJjZS50eXBlXG4gICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZS5vcHRpb25zKS5mb3JFYWNoKGsgPT4ge1xuICAgICAgICAgICAgdGFyZ2V0Lm9wdGlvbnNba10gPSBzb3VyY2Uub3B0aW9uc1trXTtcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5rZXlzKHRhcmdldC5vcHRpb25zKS5mb3JFYWNoKGsgPT4ge1xuICAgICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhzb3VyY2Uub3B0aW9ucykuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0Lm9wdGlvbnNba107XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVEZWZhdWx0KG5hbWU6IHN0cmluZyk6IEZpZWxkIHtcbiAgICAgICAgY29uc3QgZmllbGQgPSBuZXcgRmllbGQoKTtcbiAgICAgICAgZmllbGQudHlwZSA9IEZpZWxkVHlwZS5JbnB1dDtcbiAgICAgICAgZmllbGQubmFtZSA9IG5hbWU7XG4gICAgICAgIHJldHVybiBmaWVsZDtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBGaWVsZDsiLCAiLy8gQ3JlZGl0cyBnbyB0byBMaWFtJ3MgUGVyaW9kaWMgTm90ZXMgUGx1Z2luOiBodHRwczovL2dpdGh1Yi5jb20vbGlhbWNhaW4vb2JzaWRpYW4tcGVyaW9kaWMtbm90ZXNcblxuaW1wb3J0IHsgVEFic3RyYWN0RmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgVGV4dElucHV0U3VnZ2VzdCB9IGZyb20gXCIuL3N1Z2dlc3RcIjtcblxuZXhwb3J0IGNsYXNzIEZvbGRlclN1Z2dlc3QgZXh0ZW5kcyBUZXh0SW5wdXRTdWdnZXN0PFRGb2xkZXI+IHtcbiAgICBnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogVEZvbGRlcltdIHtcbiAgICAgICAgY29uc3QgYWJzdHJhY3RGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG4gICAgICAgIGNvbnN0IGZvbGRlcnM6IFRGb2xkZXJbXSA9IFtdO1xuICAgICAgICBjb25zdCBsb3dlckNhc2VJbnB1dFN0ciA9IGlucHV0U3RyLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgYWJzdHJhY3RGaWxlcy5mb3JFYWNoKChmb2xkZXI6IFRBYnN0cmFjdEZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyICYmXG4gICAgICAgICAgICAgICAgZm9sZGVyLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlckNhc2VJbnB1dFN0cilcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGZvbGRlcnMucHVzaChmb2xkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZm9sZGVycztcbiAgICB9XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKGZpbGU6IFRGb2xkZXIsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBlbC5zZXRUZXh0KGZpbGUucGF0aCk7XG4gICAgfVxuXG4gICAgc2VsZWN0U3VnZ2VzdGlvbihmaWxlOiBURm9sZGVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IGZpbGUucGF0aDtcbiAgICAgICAgdGhpcy5pbnB1dEVsLnRyaWdnZXIoXCJpbnB1dFwiKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgRmllbGQgZnJvbSBcInNyYy9maWVsZHMvRmllbGRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBNZXRhZGF0YU1lbnVTZXR0aW5ncyB7XG5cdHByZXNldEZpZWxkczogQXJyYXk8RmllbGQ+O1xuXHRkaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudTogYm9vbGVhbjtcblx0Z2xvYmFsbHlJZ25vcmVkRmllbGRzOiBBcnJheTxzdHJpbmc+O1xuXHRjbGFzc0ZpbGVzUGF0aDogc3RyaW5nO1xuXHRpc0F1dG9zdWdnZXN0RW5hYmxlZDogYm9vbGVhbjtcblx0ZmlsZUNsYXNzQWxpYXM6IHN0cmluZztcblx0c2V0dGluZ3NWZXJzaW9uPzogbnVtYmVyO1xuXHRnbG9iYWxGaWxlQ2xhc3M/OiBzdHJpbmc7XG5cdGZpcnN0RGF5T2ZXZWVrOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNZXRhZGF0YU1lbnVTZXR0aW5ncyA9IHtcblx0cHJlc2V0RmllbGRzOiBbXSxcblx0ZGlzcGxheUZpZWxkc0luQ29udGV4dE1lbnU6IHRydWUsXG5cdGdsb2JhbGx5SWdub3JlZEZpZWxkczogW10sXG5cdGNsYXNzRmlsZXNQYXRoOiBcIlwiLFxuXHRpc0F1dG9zdWdnZXN0RW5hYmxlZDogdHJ1ZSxcblx0ZmlsZUNsYXNzQWxpYXM6IFwiZmlsZUNsYXNzXCIsXG5cdHNldHRpbmdzVmVyc2lvbjogdW5kZWZpbmVkLFxuXHRnbG9iYWxGaWxlQ2xhc3M6IHVuZGVmaW5lZCxcblx0Zmlyc3REYXlPZldlZWs6IDFcbn07IiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIlxuaW1wb3J0IHsgaW5saW5lRmllbGRSZWdleCwgZW5jb2RlTGluaywgZGVjb2RlTGluayB9IGZyb20gXCJzcmMvdXRpbHMvcGFyc2VyXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWYWx1ZXMoYXBwOiBBcHAsIGZpbGVPcmZpbGVQYXRoOiBURmlsZSB8IHN0cmluZywgYXR0cmlidXRlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgbGV0IGZpbGU6IFRGaWxlO1xuICAgIGlmIChmaWxlT3JmaWxlUGF0aCBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGZpbGUgPSBmaWxlT3JmaWxlUGF0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBfZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZU9yZmlsZVBhdGgpXG4gICAgICAgIGlmIChfZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIF9maWxlLmV4dGVuc2lvbiA9PSBcIm1kXCIpIHtcbiAgICAgICAgICAgIGZpbGUgPSBfZmlsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicGF0aCBkb2Vzbid0IGNvcnJlc3BvbmQgdG8gYSBwcm9wZXIgZmlsZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjb250ZW50ID0gKGF3YWl0IGFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpKS5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgY29uc3QgeyBwb3NpdGlvbjogeyBzdGFydCwgZW5kIH0gfSA9IGZyb250bWF0dGVyID8gZnJvbnRtYXR0ZXIgOiB7IHBvc2l0aW9uOiB7IHN0YXJ0OiB1bmRlZmluZWQsIGVuZDogdW5kZWZpbmVkIH0gfTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgY29udGVudC5tYXAoKGxpbmUsIGkpID0+IHtcbiAgICAgICAgaWYgKGZyb250bWF0dGVyICYmIGkgPj0gc3RhcnQubGluZSAmJiBpIDw9IGVuZC5saW5lKSB7XG4gICAgICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYCR7YXR0cmlidXRlfTooLiopYCwgJ3UnKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBsaW5lLm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgICAgIGlmIChyICYmIHIubGVuZ3RoID4gMCkgcmVzdWx0LnB1c2goclsxXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsTGluZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7aW5saW5lRmllbGRSZWdleChhdHRyaWJ1dGUpfWAsIFwidVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGZSID0gZW5jb2RlTGluayhsaW5lKS5tYXRjaChmdWxsTGluZVJlZ2V4KTtcbiAgICAgICAgICAgIGlmIChmUj8uZ3JvdXBzKSB7IHJlc3VsdC5wdXNoKGRlY29kZUxpbmsoZlIuZ3JvdXBzLnZhbHVlcykpIH07XG4gICAgICAgICAgICBjb25zdCBpblNlbnRlbmNlUmVnZXhCcmFja2V0cyA9IG5ldyBSZWdFeHAoYFxcXFxbJHtpbmxpbmVGaWVsZFJlZ2V4KGF0dHJpYnV0ZSl9XFxcXF1gLCBcImd1XCIpO1xuICAgICAgICAgICAgY29uc3Qgc1JCID0gZW5jb2RlTGluayhsaW5lKS5tYXRjaEFsbChpblNlbnRlbmNlUmVnZXhCcmFja2V0cyk7XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHNSQi5uZXh0KCk7XG4gICAgICAgICAgICB3aGlsZSAoIW5leHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLmdyb3VwcykgeyByZXN1bHQucHVzaChkZWNvZGVMaW5rKG5leHQudmFsdWUuZ3JvdXBzLnZhbHVlcykpIH1cbiAgICAgICAgICAgICAgICBuZXh0ID0gc1JCLm5leHQoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5TZW50ZW5jZVJlZ2V4UGFyID0gbmV3IFJlZ0V4cChgXFxcXCgke2lubGluZUZpZWxkUmVnZXgoYXR0cmlidXRlKX1cXFxcKWAsIFwiZ3VcIik7XG4gICAgICAgICAgICBjb25zdCBzUlAgPSBlbmNvZGVMaW5rKGxpbmUpLm1hdGNoQWxsKGluU2VudGVuY2VSZWdleFBhcik7XG4gICAgICAgICAgICBuZXh0ID0gc1JQLm5leHQoKTtcbiAgICAgICAgICAgIHdoaWxlICghbmV4dC5kb25lKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUuZ3JvdXBzKSB7IHJlc3VsdC5wdXNoKGRlY29kZUxpbmsobmV4dC52YWx1ZS5ncm91cHMudmFsdWVzKSkgfVxuICAgICAgICAgICAgICAgIG5leHQgPSBzUlAubmV4dCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiByZXN1bHQ7XG59IiwgImltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZFwiO1xuaW1wb3J0IHsgRmlsZUNsYXNzIH0gZnJvbSBcInNyYy9maWxlQ2xhc3MvZmlsZUNsYXNzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZChwbHVnaW46IE1ldGFkYXRhTWVudSwgcHJvcGVydHlOYW1lOiBzdHJpbmcsIGZpbGVDbGFzcz86IEZpbGVDbGFzcyk6IEZpZWxkIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBtYXRjaGluZ1NldHRpbmdzID0gcGx1Z2luLnNldHRpbmdzLnByZXNldEZpZWxkcy5maWx0ZXIocCA9PiBwLm5hbWUgPT0gcHJvcGVydHlOYW1lKTtcbiAgICBpZiAoZmlsZUNsYXNzKSB7XG4gICAgICAgIGNvbnN0IGZpbGVDbGFzc0F0dHJpYnV0ZXNXaXRoTmFtZSA9IGZpbGVDbGFzcy5hdHRyaWJ1dGVzLmZpbHRlcihhdHRyID0+IGF0dHIubmFtZSA9PSBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICBpZiAoZmlsZUNsYXNzQXR0cmlidXRlc1dpdGhOYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDbGFzc0F0dHJpYnV0ZSA9IGZpbGVDbGFzc0F0dHJpYnV0ZXNXaXRoTmFtZVswXTtcbiAgICAgICAgICAgIGlmIChmaWxlQ2xhc3NBdHRyaWJ1dGUudHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlQ2xhc3NBdHRyaWJ1dGUuZ2V0RmllbGQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hpbmdTZXR0aW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nU2V0dGluZ3NbMF07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChtYXRjaGluZ1NldHRpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nU2V0dGluZ3NbMF07XG4gICAgfTtcbn07IiwgImV4cG9ydCBjb25zdCBjYXBpdGFsaXplID0gKHM6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBzICYmIHNbMF0udG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XG59IiwgImltcG9ydCBGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZFwiO1xuaW1wb3J0IHsgRmllbGRUeXBlLCBGaWVsZFR5cGVMYWJlbE1hcHBpbmcgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcbmltcG9ydCB7IGNhcGl0YWxpemUgfSBmcm9tIFwic3JjL3V0aWxzL3RleHRVdGlsc1wiO1xuaW1wb3J0IHsgZ2VuZXJpY0ZpZWxkUmVnZXggfSBmcm9tIFwic3JjL3V0aWxzL3BhcnNlclwiO1xuXG5pbnRlcmZhY2UgRmlsZUNsYXNzQXR0cmlidXRlIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdHlwZTogRmllbGRUeXBlO1xuICAgIG9wdGlvbnM6IHN0cmluZ1tdIHwgUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgICBvcmlnaW46IHN0cmluZztcbn1cblxuY2xhc3MgRmlsZUNsYXNzQXR0cmlidXRlIHtcblxuICAgIGNvbnN0cnVjdG9yKHJhdzogc3RyaW5nLCBvcmlnaW46IHN0cmluZykge1xuICAgICAgICB0aGlzLm9yaWdpbiA9IG9yaWdpblxuICAgICAgICBjb25zdCBjb21wbGV0ZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiR7Z2VuZXJpY0ZpZWxkUmVnZXh9OjooPzxmaWVsZFNldHRpbmdzPi4rKT9gLCBcInVcIik7XG4gICAgICAgIGNvbnN0IG5hbWVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2dlbmVyaWNGaWVsZFJlZ2V4fSRgLCBcInVcIik7XG4gICAgICAgIGxldCBmaWVsZE5hbWU6IHN0cmluZ1xuICAgICAgICBsZXQgeyBhdHRyaWJ1dGUsIGZpZWxkU2V0dGluZ3MgfSA9IHJhdy5tYXRjaChjb21wbGV0ZVJlZ2V4KT8uZ3JvdXBzIHx8IHt9XG4gICAgICAgIGlmIChhdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIGZpZWxkTmFtZSA9IGF0dHJpYnV0ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHsgYXR0cmlidXRlIH0gPSByYXcubWF0Y2gobmFtZVJlZ2V4KT8uZ3JvdXBzIHx8IHt9XG4gICAgICAgICAgICBmaWVsZE5hbWUgPSBhdHRyaWJ1dGVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmllbGROYW1lKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBmaWVsZE5hbWUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKGZpZWxkU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IEpTT04ucGFyc2UoYCR7ZmllbGRTZXR0aW5ncy50cmltKCl9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gRmllbGRUeXBlTGFiZWxNYXBwaW5nW2NhcGl0YWxpemUoc2V0dGluZ3NbJ3R5cGUnXSkgYXMga2V5b2YgdHlwZW9mIEZpZWxkVHlwZV07XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gc2V0dGluZ3NbJ29wdGlvbnMnXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID0gRmllbGRUeXBlLklucHV0IC8vIGRlZmF1bHQgdHlwZSB3aGVuIG5vIHNldHRpbmcgaXMgcHJvdmlkZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFwiSW1wcm9wZXIgdmFsdWVcIik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGaWVsZCgpIHtcbiAgICAgICAgbGV0IG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zKSkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zPy5mb3JFYWNoKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgb3B0aW9uc1tpbmRleF0gPSBvcHRpb247XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9uc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRmllbGQodGhpcy5uYW1lLCBvcHRpb25zLCB0aGlzLm5hbWUsIHVuZGVmaW5lZCwgdGhpcy50eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEZpbGVDbGFzc0F0dHJpYnV0ZSB9OyIsICJpbXBvcnQgeyBGaWxlQ2xhc3NBdHRyaWJ1dGUgfSBmcm9tIFwiLi9maWxlQ2xhc3NBdHRyaWJ1dGVcIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBGaWVsZFR5cGUgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcblxuaW50ZXJmYWNlIEZpbGVDbGFzcyB7XG4gICAgcGx1Z2luOiBNZXRhZGF0YU1lbnU7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGF0dHJpYnV0ZXM6IEFycmF5PEZpbGVDbGFzc0F0dHJpYnV0ZT47XG4gICAgb2JqZWN0czogRmlsZUNsYXNzTWFuYWdlcjtcbiAgICBlcnJvcnM6IHN0cmluZ1tdO1xuICAgIHBhcmVudD86IEZpbGVDbGFzcztcbiAgICBleGNsdWRlcz86IEFycmF5PEZpbGVDbGFzc0F0dHJpYnV0ZT47XG59XG5cbmNsYXNzIEZpbGVDbGFzc01hbmFnZXIge1xuICAgIHB1YmxpYyBpbnN0YW5jZTogRmlsZUNsYXNzO1xuXG4gICAgY29uc3RydWN0b3IoaW5zdGFuY2U6IEZpbGVDbGFzcykge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcHVibGljIGFsbCgpIHtcbiAgICAgICAgY29uc3QgZmlsZXNXaXRoRmlsZUNsYXNzTmFtZSA9IHRoaXMuaW5zdGFuY2UucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmluc3RhbmNlLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBmaWxlQ2xhc3NBbGlhcyA9IHRoaXMuaW5zdGFuY2UucGx1Z2luLnNldHRpbmdzLmZpbGVDbGFzc0FsaWFzO1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlPy5mcm9udG1hdHRlclxuICAgICAgICAgICAgICAgICYmIE9iamVjdC5rZXlzKGNhY2hlLmZyb250bWF0dGVyKS5pbmNsdWRlcyhmaWxlQ2xhc3NBbGlhcylcbiAgICAgICAgICAgICAgICAmJiBjYWNoZS5mcm9udG1hdHRlcltmaWxlQ2xhc3NBbGlhc10gPT0gdGhpcy5pbnN0YW5jZS5uYW1lO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmlsZXNXaXRoRmlsZUNsYXNzTmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0KG5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBmaWxlc1dpdGhOYW1lID0gdGhpcy5hbGwoKS5maWx0ZXIoZmlsZSA9PiBmaWxlLmJhc2VuYW1lID09IG5hbWUpO1xuICAgICAgICBpZiAoZmlsZXNXaXRoTmFtZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk1vcmUgdGhhbiBvbmUgdmFsdWUgZm91bmRcIik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsZXNXaXRoTmFtZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJObyBmaWxlIHZhbHVlIGZvdW5kXCIpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGVzV2l0aE5hbWVbMF07XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UGF0aChwYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZmlsZXNXaXRoTmFtZSA9IHRoaXMuYWxsKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoID09IHBhdGgpO1xuICAgICAgICBpZiAoZmlsZXNXaXRoTmFtZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk1vcmUgdGhhbiBvbmUgdmFsdWUgZm91bmRcIik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsZXNXaXRoTmFtZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXCJObyBmaWxlIHZhbHVlIGZvdW5kXCIpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbGVzV2l0aE5hbWVbMF07XG5cbiAgICB9XG59XG5cbmNsYXNzIEZpbGVDbGFzcyB7XG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBNZXRhZGF0YU1lbnUsIG5hbWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5vYmplY3RzID0gbmV3IEZpbGVDbGFzc01hbmFnZXIodGhpcyk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDbGFzc0ZpbGUoKTogVEZpbGUge1xuICAgICAgICBjb25zdCBmaWxlc0NsYXNzUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNsYXNzRmlsZXNQYXRoO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChgJHtmaWxlc0NsYXNzUGF0aH0ke3RoaXMubmFtZX0ubWRgKTtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PSBcIm1kXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYG5vIGZpbGUgbmFtZWQgPCR7dGhpcy5uYW1lfS5tZD4gaW4gPCR7ZmlsZXNDbGFzc1BhdGh9PiBmb2xkZXIgdG8gbWF0Y2ggPCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZUNsYXNzQWxpYXN9OiAke3RoaXMubmFtZX0+IGluIG9uZSBvZiB0aGVzZSBub3Rlc2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQYXJlbnRDbGFzcygpOiBGaWxlQ2xhc3MgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0QXR0cmlidXRlcyhleGNsdWRlUGFyZW50czogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5nZXRDbGFzc0ZpbGUoKTtcbiAgICAgICAgICAgIGxldCBhdHRyaWJ1dGVzOiBBcnJheTxGaWxlQ2xhc3NBdHRyaWJ1dGU+ID0gW107XG4gICAgICAgICAgICBsZXQgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSlcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI/LmV4dGVuZHNcbiAgICAgICAgICAgIGNvbnN0IGV4Y2x1ZGVkRmllbGRzID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcj8uZXhjbHVkZXNcbiAgICAgICAgICAgIGlmIChwYXJlbnQgJiYgIWV4Y2x1ZGVQYXJlbnRzKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50RmlsZUNsYXNzID0gYXdhaXQgY3JlYXRlRmlsZUNsYXNzKHRoaXMucGx1Z2luLCBwYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwYXJlbnRGaWxlQ2xhc3MuZ2V0QXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzID0gWy4uLnBhcmVudEZpbGVDbGFzcy5hdHRyaWJ1dGVzXVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGVycm9yKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBuZXcgRmlsZUNsYXNzQXR0cmlidXRlKGxpbmUsIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaChhdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gQXJyYXkuaXNBcnJheShleGNsdWRlZEZpZWxkcykgPyBhdHRyaWJ1dGVzLmZpbHRlcihhdHRyID0+ICFleGNsdWRlZEZpZWxkcy5pbmNsdWRlcyhhdHRyLm5hbWUpKSA6IGF0dHJpYnV0ZXM7XG4gICAgICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgdXBkYXRlQXR0cmlidXRlKG5ld1R5cGU6IGtleW9mIHR5cGVvZiBGaWVsZFR5cGUsIG5ld05hbWU6IHN0cmluZywgbmV3T3B0aW9ucz86IHN0cmluZ1tdIHwgUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgYXR0cj86IEZpbGVDbGFzc0F0dHJpYnV0ZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5nZXRDbGFzc0ZpbGUoKTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpXG4gICAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgICAgICBsZXQgbmV3Q29udGVudDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIHJlc3VsdC5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKGF0dHIubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1R5cGUgPT0gXCJJbnB1dFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2goYCR7bmV3TmFtZX06OiB7XCJ0eXBlXCI6IFwiSW5wdXRcIn1gKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZXR0aW5nczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NbXCJ0eXBlXCJdID0gbmV3VHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdPcHRpb25zKSBzZXR0aW5nc1tcIm9wdGlvbnNcIl0gPSBuZXdPcHRpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Q29udGVudC5wdXNoKGAke25ld05hbWV9OjogJHtKU09OLnN0cmluZ2lmeShzZXR0aW5ncyl9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50LnB1c2gobGluZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudC5qb2luKCdcXG4nKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgc2V0dGluZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICAgICAgICAgIHNldHRpbmdzW1widHlwZVwiXSA9IG5ld1R5cGU7XG4gICAgICAgICAgICBpZiAobmV3T3B0aW9ucykgc2V0dGluZ3NbXCJvcHRpb25zXCJdID0gbmV3T3B0aW9ucztcbiAgICAgICAgICAgIHJlc3VsdCArPSAoYFxcbiR7bmV3TmFtZX06OiAke0pTT04uc3RyaW5naWZ5KHNldHRpbmdzKX1gKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyByZW1vdmVBdHRyaWJ1dGUoYXR0cjogRmlsZUNsYXNzQXR0cmlidXRlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmdldENsYXNzRmlsZSgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKVxuICAgICAgICBsZXQgbmV3Q29udGVudDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgcmVzdWx0LnNwbGl0KCdcXG4nKS5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICAgICAgaWYgKCFsaW5lLnN0YXJ0c1dpdGgoYXR0ci5uYW1lKSkge1xuICAgICAgICAgICAgICAgIG5ld0NvbnRlbnQucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBuZXdDb250ZW50LmpvaW4oJ1xcbicpKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUZpbGVDbGFzcyhwbHVnaW46IE1ldGFkYXRhTWVudSwgbmFtZTogc3RyaW5nLCBleGNsdWRlUGFyZW50OiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPEZpbGVDbGFzcz4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVDbGFzcyA9IG5ldyBGaWxlQ2xhc3MocGx1Z2luLCBuYW1lKTtcbiAgICAgICAgZmlsZUNsYXNzLmdldEF0dHJpYnV0ZXMoZXhjbHVkZVBhcmVudCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGZpbGVDbGFzcyk7XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5leHBvcnQgeyBjcmVhdGVGaWxlQ2xhc3MsIEZpbGVDbGFzcyB9OyIsICJpbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBnZXRGaWVsZCB9IGZyb20gXCJzcmMvY29tbWFuZHMvZ2V0RmllbGRcIjtcbmltcG9ydCB7IGNyZWF0ZUZpbGVDbGFzcyB9IGZyb20gXCJzcmMvZmlsZUNsYXNzL2ZpbGVDbGFzc1wiO1xuaW1wb3J0IHsgRmllbGRNYW5hZ2VyIH0gZnJvbSBcInNyYy90eXBlcy9maWVsZFR5cGVzXCI7XG5pbXBvcnQgeyBGaWVsZE1hbmFnZXIgYXMgRiB9IGZyb20gXCJzcmMvZmllbGRzL0ZpZWxkTWFuYWdlclwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmllbGRNb2RpZmllcihwbHVnaW46IE1ldGFkYXRhTWVudSwgZHY6IGFueSwgcDogYW55LCBmaWVsZE5hbWU6IHN0cmluZywgYXR0cnM/OiB7IGNscz86IHN0cmluZywgYXR0cj86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IH0pOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XG5cbiAgICAvKiBmaWVsZENvbnRhaW5lciovXG4gICAgY29uc3QgZmllbGRDb250YWluZXI6IEhUTUxFbGVtZW50ID0gZHYuZWwoXCJkaXZcIiwgXCJcIilcbiAgICBmaWVsZENvbnRhaW5lci5zZXRBdHRyKFwiY2xhc3NcIiwgXCJtZXRhZGF0YS1tZW51LWR2LWZpZWxkLWNvbnRhaW5lclwiKVxuXG4gICAgLyogY3JlYXRlIGZpZWxkTW9kaWZpZXIgZGVwZW5kaW5nIG9uIGZpbGVDbGFzcyB0eXBlIG9yIHByZXNldCB2YWx1ZSovXG5cbiAgICBpZiAocFtmaWVsZE5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZW1wdHlGaWVsZCA9IGR2LmVsKFwic3BhblwiLCBudWxsLCBhdHRycyk7XG4gICAgICAgIGZpZWxkQ29udGFpbmVyLmFwcGVuZENoaWxkKGVtcHR5RmllbGQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZpbGVDbGFzc0FsaWFzID0gcGx1Z2luLnNldHRpbmdzLmZpbGVDbGFzc0FsaWFzO1xuICAgICAgICBpZiAocFtmaWxlQ2xhc3NBbGlhc10gfHwgcGx1Z2luLnNldHRpbmdzLmdsb2JhbEZpbGVDbGFzcykge1xuICAgICAgICAgICAgY29uc3QgZmlsZUNsYXNzTmFtZSA9IHBbZmlsZUNsYXNzQWxpYXNdIHx8IHBsdWdpbi5zZXR0aW5ncy5nbG9iYWxGaWxlQ2xhc3MgLy8gaW5uZXIgZmlsZUNsYXNzIGhhcyB0aGUgcHJpb3JpdHkgb3ZlciBnbG9iYWwgZmlsZUNsYXNzXG4gICAgICAgICAgICBjb25zdCBmaWxlQ2xhc3MgPSBhd2FpdCBjcmVhdGVGaWxlQ2xhc3MocGx1Z2luLCBmaWxlQ2xhc3NOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gZ2V0RmllbGQocGx1Z2luLCBmaWVsZE5hbWUsIGZpbGVDbGFzcyk7XG4gICAgICAgICAgICBpZiAoZmllbGQ/LnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE1hbmFnZXIgPSBuZXcgRmllbGRNYW5hZ2VyW2ZpZWxkLnR5cGVdKGZpZWxkKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBmaWVsZE1hbmFnZXIuY3JlYXRlRHZGaWVsZChwbHVnaW4sIGR2LCBwLCBmaWVsZENvbnRhaW5lciwgYXR0cnMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE1hbmFnZXIgPSBGLmNyZWF0ZURlZmF1bHQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBmaWVsZE1hbmFnZXIuY3JlYXRlRHZGaWVsZChwbHVnaW4sIGR2LCBwLCBmaWVsZENvbnRhaW5lciwgYXR0cnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHBsdWdpbi5zZXR0aW5ncy5wcmVzZXRGaWVsZHMuZmlsdGVyKGF0dHIgPT4gYXR0ci5uYW1lID09IGZpZWxkTmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkID0gZ2V0RmllbGQocGx1Z2luLCBmaWVsZE5hbWUpXG4gICAgICAgICAgICBpZiAoZmllbGQ/LnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE1hbmFnZXIgPSBuZXcgRmllbGRNYW5hZ2VyW2ZpZWxkLnR5cGVdKGZpZWxkKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBmaWVsZE1hbmFnZXIuY3JlYXRlRHZGaWVsZChwbHVnaW4sIGR2LCBwLCBmaWVsZENvbnRhaW5lciwgYXR0cnMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE1hbmFnZXIgPSBGLmNyZWF0ZURlZmF1bHQoZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBmaWVsZE1hbmFnZXIuY3JlYXRlRHZGaWVsZChwbHVnaW4sIGR2LCBwLCBmaWVsZENvbnRhaW5lciwgYXR0cnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmllbGRNYW5hZ2VyID0gRi5jcmVhdGVEZWZhdWx0KGZpZWxkTmFtZSk7XG4gICAgICAgICAgICBhd2FpdCBmaWVsZE1hbmFnZXIuY3JlYXRlRHZGaWVsZChwbHVnaW4sIGR2LCBwLCBmaWVsZENvbnRhaW5lciwgYXR0cnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmaWVsZENvbnRhaW5lclxufTsgIiwgImltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7IGNyZWF0ZUZpbGVDbGFzcywgRmlsZUNsYXNzIH0gZnJvbSBcInNyYy9maWxlQ2xhc3MvZmlsZUNsYXNzXCI7XG5pbXBvcnQgeyBGaWVsZE1hbmFnZXIsIEZpZWxkVHlwZSB9IGZyb20gXCJzcmMvdHlwZXMvZmllbGRUeXBlc1wiO1xuaW1wb3J0IHsgZ2V0TGluZUZpZWxkcyB9IGZyb20gXCJzcmMvdXRpbHMvcGFyc2VyXCI7XG5pbXBvcnQgeyBnZXRGaWVsZCB9IGZyb20gXCIuL2dldEZpZWxkXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWVsZEluZm8ge1xuICAgIHR5cGU/OiBGaWVsZFR5cGUgPSB1bmRlZmluZWQ7XG4gICAgc291cmNlVHlwZT86IFwiZmlsZUNsYXNzXCIgfCBcInNldHRpbmdzXCIgPSB1bmRlZmluZWQ7XG4gICAgZmlsZUNsYXNzPzogc3RyaW5nID0gdW5kZWZpbmVkO1xuICAgIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHwgc3RyaW5nW10gPSB1bmRlZmluZWQ7XG4gICAgaXNWYWxpZD86IGJvb2xlYW4gPSB1bmRlZmluZWQ7XG4gICAgaWdub3JlSW5NZW51OiBib29sZWFuXG4gICAgdmFsdWU6IHN0cmluZyA9IFwiXCI7XG4gICAgdmFsdWVzTGlzdE5vdGVQYXRoPzogc3RyaW5nID0gdW5kZWZpbmVkO1xuICAgIHVuaXF1ZTogYm9vbGVhbiA9IHRydWVcblxuICAgIGFzeW5jIHNldEluZm9zKHBsdWdpbjogTWV0YWRhdGFNZW51LCBmaWVsZE5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZmlsZUNsYXNzPzogRmlsZUNsYXNzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5pZ25vcmVJbk1lbnUgPSBwbHVnaW4uc2V0dGluZ3MuZ2xvYmFsbHlJZ25vcmVkRmllbGRzLmluY2x1ZGVzKGZpZWxkTmFtZSk7XG4gICAgICAgIGlmIChmaWxlQ2xhc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDbGFzc0ZpZWxkcyA9IGZpbGVDbGFzcy5hdHRyaWJ1dGVzLm1hcChhdHRyID0+IGF0dHIubmFtZSk7XG4gICAgICAgICAgICBpZiAoZmlsZUNsYXNzRmllbGRzLmluY2x1ZGVzKGZpZWxkTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IGdldEZpZWxkKHBsdWdpbiwgZmllbGROYW1lLCBmaWxlQ2xhc3MpO1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE1hbmFnZXIgPSBuZXcgRmllbGRNYW5hZ2VyW2ZpZWxkLnR5cGVdKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1ZhbGlkID0gYXdhaXQgZmllbGRNYW5hZ2VyLnZhbGlkYXRlVmFsdWUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlVHlwZSA9IFwiZmlsZUNsYXNzXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGZpbGVDbGFzcy5hdHRyaWJ1dGVzLmZpbHRlcihhID0+IGEubmFtZSA9PT0gZmllbGROYW1lKVswXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWxlQ2xhc3MgPSBhdHRyaWJ1dGUub3JpZ2luO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBhdHRyaWJ1dGUudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gYXR0cmlidXRlLm9wdGlvbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHBsdWdpbi5zZXR0aW5ncy5wcmVzZXRGaWVsZHMubWFwKGYgPT4gZi5uYW1lKS5pbmNsdWRlcyhmaWVsZE5hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZCA9IGdldEZpZWxkKHBsdWdpbiwgZmllbGROYW1lKTtcbiAgICAgICAgICAgIGlmIChmaWVsZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTWFuYWdlciA9IG5ldyBGaWVsZE1hbmFnZXJbZmllbGQudHlwZV0oZmllbGQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNWYWxpZCA9IGF3YWl0IGZpZWxkTWFuYWdlci52YWxpZGF0ZVZhbHVlKHZhbHVlKVxuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IGZpZWxkLnR5cGU7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gZmllbGQub3B0aW9ucztcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc0xpc3ROb3RlUGF0aCA9IGZpZWxkLnZhbHVlc0xpc3ROb3RlUGF0aDtcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZVR5cGUgPSBcInNldHRpbmdzXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWxlRmllbGRzKHBsdWdpbjogTWV0YWRhdGFNZW51LCBmaWxlT3JmaWxlUGF0aDogVEZpbGUgfCBzdHJpbmcpOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIEZpZWxkSW5mbz4+IHtcbiAgICAvKlxuICAgIHJldHVybnMgYWxsIGZpZWxkcyB3aXRoIHNvdXJjZSwgdHlwZSwgb3B0aW9ucywgaXNWYWxpZCwgaWdub3JlZFxuICAgICovXG4gICAgbGV0IGZpbGU6IFRGaWxlO1xuICAgIGlmIChmaWxlT3JmaWxlUGF0aCBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGZpbGUgPSBmaWxlT3JmaWxlUGF0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBfZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZU9yZmlsZVBhdGgpXG4gICAgICAgIGlmIChfZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIF9maWxlLmV4dGVuc2lvbiA9PSBcIm1kXCIpIHtcbiAgICAgICAgICAgIGZpbGUgPSBfZmlsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwicGF0aCBkb2Vzbid0IGNvcnJlc3BvbmQgdG8gYSBwcm9wZXIgZmlsZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBmcm9udG1hdHRlciA9IHBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRDYWNoZShmaWxlLnBhdGgpPy5mcm9udG1hdHRlcjtcbiAgICBjb25zdCBmaWVsZHM6IFJlY29yZDxzdHJpbmcsIEZpZWxkSW5mbz4gPSB7fVxuICAgIGxldCBmaWxlQ2xhc3M6IEZpbGVDbGFzcyB8IHVuZGVmaW5lZDtcbiAgICBpZiAocGx1Z2luLnNldHRpbmdzLmdsb2JhbEZpbGVDbGFzcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmlsZUNsYXNzID0gYXdhaXQgY3JlYXRlRmlsZUNsYXNzKHBsdWdpbiwgcGx1Z2luLnNldHRpbmdzLmdsb2JhbEZpbGVDbGFzcylcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGZpbGVDbGFzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgY29uc3QgeyBwb3NpdGlvbiwgLi4uYXR0cmlidXRlcyB9ID0gZnJvbnRtYXR0ZXI7XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlJ3MgYSBmaWxlQ2xhc3NcbiAgICAgICAgY29uc3QgZmlsZUNsYXNzQWxpYXMgPSBwbHVnaW4uc2V0dGluZ3MuZmlsZUNsYXNzQWxpYXM7XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5pbmNsdWRlcyhmaWxlQ2xhc3NBbGlhcykpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDbGFzc05hbWUgPSBhdHRyaWJ1dGVzW2ZpbGVDbGFzc0FsaWFzXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZmlsZUNsYXNzID0gYXdhaXQgY3JlYXRlRmlsZUNsYXNzKHBsdWdpbiwgZmlsZUNsYXNzTmFtZSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZmlsZUNsYXNzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHRoZW4gZXhwbG9yZSBmcm9udG1hdHRlciBmaWVsZHMgYWthIGF0dHJpYnV0ZXNcbiAgICAgICAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChhc3luYyBrZXkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmllbGRJbmZvID0gbmV3IEZpZWxkSW5mbztcbiAgICAgICAgICAgIGZpZWxkSW5mby51bmlxdWUgPSAhT2JqZWN0LmtleXMoZmllbGRzKS5pbmNsdWRlcyhrZXkpO1xuICAgICAgICAgICAgZmllbGRzW2tleV0gPSBmaWVsZEluZm87XG4gICAgICAgICAgICBhd2FpdCBmaWVsZEluZm8uc2V0SW5mb3MocGx1Z2luLCBrZXksIGF0dHJpYnV0ZXNba2V5XSwgZmlsZUNsYXNzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGxldCdzIGV4cGxvcmUgdGhlIHJlc3Qgb2YgdGhlIGZpbGU6IGdldCBpbmxpbmUgZmllbGRzXG5cbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZyA9IGF3YWl0IHBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKVxuICAgIHJlc3VsdC5zcGxpdCgnXFxuJykubWFwKGFzeW5jIGxpbmUgPT4ge1xuICAgICAgICBjb25zdCBsaW5lRmllbGRzID0gZ2V0TGluZUZpZWxkcyhsaW5lKVxuICAgICAgICBsaW5lRmllbGRzLmZvckVhY2goYXN5bmMgKHsgYXR0cmlidXRlLCB2YWx1ZXMgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gYXR0cmlidXRlLnRyaW0oKVxuICAgICAgICAgICAgY29uc3QgZmllbGRJbmZvID0gbmV3IEZpZWxkSW5mbztcbiAgICAgICAgICAgIGZpZWxkSW5mby51bmlxdWUgPSAhT2JqZWN0LmtleXMoZmllbGRzKS5pbmNsdWRlcyhmaWVsZE5hbWUpO1xuICAgICAgICAgICAgZmllbGRzW2ZpZWxkTmFtZV0gPSBmaWVsZEluZm87XG4gICAgICAgICAgICBhd2FpdCBmaWVsZEluZm8uc2V0SW5mb3MocGx1Z2luLCBmaWVsZE5hbWUsIHZhbHVlcywgZmlsZUNsYXNzKTtcbiAgICAgICAgfSlcbiAgICB9KTtcbiAgICByZXR1cm4gZmllbGRzO1xufSIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCJcbmltcG9ydCB7IGdldFZhbHVlcyB9IGZyb20gXCIuL2NvbW1hbmRzL2dldFZhbHVlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZVZhbHVlcyB9IGZyb20gXCIuL2NvbW1hbmRzL3JlcGxhY2VWYWx1ZXNcIjtcbmltcG9ydCB7IGluc2VydFZhbHVlcyB9IGZyb20gXCIuL2NvbW1hbmRzL2luc2VydFZhbHVlc1wiO1xuaW1wb3J0IHsgZmllbGRNb2RpZmllciB9IGZyb20gXCIuL2NvbW1hbmRzL2ZpZWxkTW9kaWZpZXJcIjtcbmltcG9ydCB7IGZpbGVGaWVsZHMsIEZpZWxkSW5mbyB9IGZyb20gXCIuL2NvbW1hbmRzL2ZpbGVGaWVsZHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJTWV0YWRhdGFNZW51QXBpIHtcbiAgICBnZXRWYWx1ZXM6IChmaWxlT3JGaWxlUGF0aDogVEZpbGUgfCBzdHJpbmcsIGF0dHJpYnV0ZTogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZ1tdPjtcbiAgICByZXBsYWNlVmFsdWVzOiAoZmlsZU9yRmlsZVBhdGg6IFRGaWxlIHwgc3RyaW5nLCBhdHRyaWJ1dGU6IHN0cmluZywgaW5wdXQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgICBpbnNlcnRWYWx1ZXM6IChmaWxlT3JGaWxlUGF0aDogVEZpbGUgfCBzdHJpbmcsIGZpZWxkTmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBsaW5lTnVtYmVyPzogbnVtYmVyLCBpbkZyb250bWF0dGVyPzogYm9vbGVhbiwgdG9wPzogYm9vbGVhbikgPT4gUHJvbWlzZTx2b2lkPlxuICAgIGZpbGVGaWVsZHM6IChmaWxlT3JGaWxlUGF0aDogVEZpbGUgfCBzdHJpbmcpID0+IFByb21pc2U8UmVjb3JkPHN0cmluZywgRmllbGRJbmZvPj47XG4gICAgZmllbGRNb2RpZmllcjogKGR2OiBhbnksIHA6IGFueSwgZmllbGROYW1lOiBzdHJpbmcsIGF0dHJzPzogeyBjbHM/OiBzdHJpbmcsIGF0dHI/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB9KSA9PiBQcm9taXNlPEhUTUxFbGVtZW50Pjtcbn1cblxuZXhwb3J0IGNsYXNzIE1ldGFkYXRhTWVudUFwaSB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTWV0YWRhdGFNZW51KSB7XG4gICAgfVxuXG4gICAgcHVibGljIG1ha2UoKTogSU1ldGFkYXRhTWVudUFwaSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZXRWYWx1ZXM6IHRoaXMuZ2V0VmFsdWVzKCksXG4gICAgICAgICAgICByZXBsYWNlVmFsdWVzOiB0aGlzLnJlcGxhY2VWYWx1ZXMoKSxcbiAgICAgICAgICAgIGluc2VydFZhbHVlczogdGhpcy5pbnNlcnRWYWx1ZXMoKSxcbiAgICAgICAgICAgIGZpZWxkTW9kaWZpZXI6IHRoaXMuZmllbGRNb2RpZmllcigpLFxuICAgICAgICAgICAgZmlsZUZpZWxkczogdGhpcy5maWxlRmllbGRzKClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFZhbHVlcygpOiAoZmlsZU9yRmlsZVBhdGg6IFRGaWxlIHwgc3RyaW5nLCBhdHRyaWJ1dGU6IHN0cmluZykgPT4gUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICByZXR1cm4gYXN5bmMgKGZpbGVPckZpbGVQYXRoOiBURmlsZSB8IHN0cmluZywgYXR0cmlidXRlOiBzdHJpbmcpID0+IGdldFZhbHVlcyh0aGlzLnBsdWdpbi5hcHAsIGZpbGVPckZpbGVQYXRoLCBhdHRyaWJ1dGUpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXBsYWNlVmFsdWVzKCk6IChmaWxlT3JGaWxlUGF0aDogVEZpbGUgfCBzdHJpbmcsIGF0dHJpYnV0ZTogc3RyaW5nLCBpbnB1dDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIGFzeW5jIChmaWxlT3JGaWxlUGF0aDogVEZpbGUgfCBzdHJpbmcsIGF0dHJpYnV0ZTogc3RyaW5nLCBpbnB1dDogc3RyaW5nKSA9PiByZXBsYWNlVmFsdWVzKHRoaXMucGx1Z2luLmFwcCwgZmlsZU9yRmlsZVBhdGgsIGF0dHJpYnV0ZSwgaW5wdXQpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbnNlcnRWYWx1ZXMoKTogKGZpbGVPckZpbGVQYXRoOiBURmlsZSB8IHN0cmluZywgZmllbGROYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGxpbmVOdW1iZXI/OiBudW1iZXIsIGluRnJvbnRtYXR0ZXI/OiBib29sZWFuLCB0b3A/OiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIGFzeW5jIChmaWxlT3JGaWxlUGF0aDogVEZpbGUgfCBzdHJpbmcsIGZpZWxkTmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBsaW5lTnVtYmVyPzogbnVtYmVyLCBpbkZyb250bWF0dGVyPzogYm9vbGVhbiwgdG9wPzogYm9vbGVhbikgPT4gaW5zZXJ0VmFsdWVzKHRoaXMucGx1Z2luLmFwcCwgZmlsZU9yRmlsZVBhdGgsIGZpZWxkTmFtZSwgdmFsdWUsIGxpbmVOdW1iZXIsIGluRnJvbnRtYXR0ZXIsIHRvcClcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpZWxkTW9kaWZpZXIoKTogKGR2OiBhbnksIHA6IGFueSwgZmllbGROYW1lOiBzdHJpbmcsIGF0dHJzPzogeyBjbHM/OiBzdHJpbmcsIGF0dHI/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBvcHRpb25zPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB9KSA9PiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XG4gICAgICAgIHJldHVybiAoZHY6IGFueSwgcDogYW55LCBmaWVsZE5hbWU6IHN0cmluZywgYXR0cnM/OiB7IGNscz86IHN0cmluZywgYXR0cj86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIG9wdGlvbnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IH0pID0+IGZpZWxkTW9kaWZpZXIodGhpcy5wbHVnaW4sIGR2LCBwLCBmaWVsZE5hbWUsIGF0dHJzKVxuICAgIH1cblxuICAgIHByaXZhdGUgZmlsZUZpZWxkcygpOiAoZmlsZU9yRmlsZVBhdGg6IFRGaWxlIHwgc3RyaW5nKSA9PiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIEZpZWxkSW5mbz4+IHtcbiAgICAgICAgcmV0dXJuIGFzeW5jIChmaWxlT3JGaWxlUGF0aDogVEZpbGUgfCBzdHJpbmcpID0+IGZpbGVGaWVsZHModGhpcy5wbHVnaW4sIGZpbGVPckZpbGVQYXRoKVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCBPcHRpb25zTGlzdCBmcm9tIFwic3JjL29wdGlvbnMvT3B0aW9uc0xpc3RcIjtcbmltcG9ydCBGaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbCBmcm9tIFwic3JjL2ZpbGVDbGFzcy9GaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbFwiO1xuaW1wb3J0IE5vdGVGaWVsZHNDb21tYW5kc01vZGFsIGZyb20gXCIuL05vdGVGaWVsZHNDb21tYW5kc01vZGFsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGxpbmtDb250ZXh0TWVudSB7XG5cdHByaXZhdGUgcGx1Z2luOiBNZXRhZGF0YU1lbnU7XG5cdHByaXZhdGUgZmlsZTogVEZpbGU7XG5cdHByaXZhdGUgb3B0aW9uc0xpc3Q6IE9wdGlvbnNMaXN0O1xuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogTWV0YWRhdGFNZW51KSB7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5jcmVhdGVDb250ZXh0TWVudSgpO1xuXHR9O1xuXG5cdHByaXZhdGUgY3JlYXRlQ29udGV4dE1lbnUoKTogdm9pZCB7XG5cdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBhYnN0cmFjdEZpbGUsIHNvdXJjZSkgPT4ge1xuXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGFic3RyYWN0RmlsZS5wYXRoKTtcblxuXHRcdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKSB7XG5cdFx0XHRcdFx0dGhpcy5maWxlID0gZmlsZTtcblxuXHRcdFx0XHRcdC8vSWYgZmlsZUNsYXNzXG5cdFx0XHRcdFx0aWYgKGZpbGUucGFyZW50LnBhdGggKyBcIi9cIiA9PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jbGFzc0ZpbGVzUGF0aCkge1xuXHRcdFx0XHRcdFx0bWVudS5hZGRTZXBhcmF0b3IoKTtcblx0XHRcdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpdGVtLnNldEljb24oXCJnZWFyXCIpO1xuXHRcdFx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKGBNYW5hZ2UgPCR7ZmlsZS5iYXNlbmFtZX0+IGZpZWxkc2ApO1xuXHRcdFx0XHRcdFx0XHRpdGVtLm9uQ2xpY2soKGV2dCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsID0gbmV3IEZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsKHRoaXMucGx1Z2luLCBmaWxlKTtcblx0XHRcdFx0XHRcdFx0XHRmaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vSWYgZGlzcGxheUZpZWxkc0luQ29udGV4dE1lbnUgdHJ1ZSwgc2hvdyBhbGwgZmllbGRzIGluIG5vdGVcblx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmllbGRzSW5Db250ZXh0TWVudSkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLm9wdGlvbnNMaXN0ID0gbmV3IE9wdGlvbnNMaXN0KHRoaXMucGx1Z2luLCB0aGlzLmZpbGUsIG1lbnUpO1xuXHRcdFx0XHRcdFx0XHR0aGlzLm9wdGlvbnNMaXN0LmNyZWF0ZUV4dHJhT3B0aW9uTGlzdCgpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvL05ldyBGaWVsZFxuXHRcdFx0XHRcdFx0XHR0aGlzLm9wdGlvbnNMaXN0ID0gbmV3IE9wdGlvbnNMaXN0KHRoaXMucGx1Z2luLCB0aGlzLmZpbGUsIG1lbnUpO1xuXG5cdFx0XHRcdFx0XHRcdC8vRmllbGQgT3B0aW9uc1xuXHRcdFx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpdGVtLnNldEljb24oXCJidWxsZXQtbGlzdFwiKSxcblx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoYEZpZWxkIE9wdGlvbnNgKSxcblx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0ub25DbGljaygoZXZ0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGZpZWxkT3B0aW9ucyA9IG5ldyBOb3RlRmllbGRzQ29tbWFuZHNNb2RhbChhcHAsIHRoaXMucGx1Z2luLCBmaWxlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZmllbGRPcHRpb25zLm9wZW4oKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0aXRlbS5zZXRTZWN0aW9uKFwidGFyZ2V0LW1ldGFkYXRhXCIpO1xuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cdFx0XHR9KVxuXHRcdCk7XG5cdH07XG59OyIsICJpbXBvcnQgeyBNb2RhbCwgRHJvcGRvd25Db21wb25lbnQsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgZmllbGRTZWxlY3RNb2RhbCBmcm9tIFwiLi9maWVsZFNlbGVjdE1vZGFsXCI7XG5pbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBGaWxlQ2xhc3MgfSBmcm9tIFwic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgY2hvb3NlU2VjdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXG4gICAgcHJpdmF0ZSBwbHVnaW46IE1ldGFkYXRhTWVudTtcbiAgICBwcml2YXRlIGZpbGU6IFRGaWxlO1xuICAgIHByaXZhdGUgZmlsZUNsYXNzPzogRmlsZUNsYXNzXG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IE1ldGFkYXRhTWVudSwgZmlsZTogVEZpbGUsIGZpbGVDbGFzcz86IEZpbGVDbGFzcykge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZmlsZUNsYXNzID0gZmlsZUNsYXNzXG4gICAgfTtcblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoXCJBZGQgYSBmaWVsZCBpbiB0aGlzIG5vdGUgYWZ0ZXI6XCIpO1xuICAgICAgICBjb25zdCBpbnB1dERpdiA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtZXRhZGF0YS1tZW51LW1vZGFsLXZhbHVlXCIgfSk7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0RWwgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoaW5wdXREaXYpO1xuICAgICAgICBzZWxlY3RFbC5zZWxlY3RFbC5hZGRDbGFzcyhcIm1ldGFkYXRhLW1lbnUtc2VsZWN0XCIpO1xuICAgICAgICBzZWxlY3RFbC5hZGRPcHRpb24oXCJcIiwgXCJTZWxlY3QgbGluZVwiKTtcbiAgICAgICAgc2VsZWN0RWwuYWRkT3B0aW9uKFwidG9wXzBcIiwgXCJ0b3BcIik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGhpcy5maWxlKVxuICAgICAgICBsZXQgZm9yZUhlYWRUZXh0ID0gZmFsc2U7XG4gICAgICAgIGxldCBmcm9udG1hdHRlclN0YXJ0ID0gZmFsc2U7XG4gICAgICAgIGxldCBmcm9udG1hdHRlckVuZCA9IGZhbHNlO1xuICAgICAgICBsZXQgaW5Gcm9udG1hdHRlciA9IGZhbHNlO1xuICAgICAgICByZXN1bHQuc3BsaXQoXCJcXG5cIikuZm9yRWFjaCgobGluZSwgbGluZU51bWJlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGxpbmUgIT0gXCItLS1cIiAmJiAhZm9yZUhlYWRUZXh0ICYmICFmcm9udG1hdHRlclN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgZm9yZUhlYWRUZXh0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAobGluZSA9PSBcIi0tLVwiICYmICFmb3JlSGVhZFRleHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWZyb250bWF0dGVyU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXJTdGFydCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGluRnJvbnRtYXR0ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWZyb250bWF0dGVyRW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyRW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaW5Gcm9udG1hdHRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5Gcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgIHNlbGVjdEVsLmFkZE9wdGlvbihgZnJvbnRtYXR0ZXJfJHtsaW5lTnVtYmVyfWAsIGAke2xpbmUuc3Vic3RyaW5nKDAsIDMwKX0ke2xpbmUubGVuZ3RoID4gMzAgPyBcIi4uLlwiIDogXCJcIn1gKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0RWwuYWRkT3B0aW9uKGBib2R5XyR7bGluZU51bWJlcn1gLCBgJHtsaW5lLnN1YnN0cmluZygwLCAzMCl9JHtsaW5lLmxlbmd0aCA+IDMwID8gXCIuLi5cIiA6IFwiXCJ9YCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0RWwub25DaGFuZ2UoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVBcnJheSA9IHNlbGVjdEVsLmdldFZhbHVlKCkubWF0Y2goLyhcXHcrKV8oXFxkKykvKTtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdmFsdWVBcnJheSAmJiB2YWx1ZUFycmF5Lmxlbmd0aCA+IDAgPyB2YWx1ZUFycmF5WzFdIDogMDtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVOdW1iZXIgPSBOdW1iZXIodmFsdWVBcnJheSAmJiB2YWx1ZUFycmF5Lmxlbmd0aCA+IDEgPyB2YWx1ZUFycmF5WzJdIDogMCk7XG4gICAgICAgICAgICBjb25zdCBpbkZyb250bWF0dGVyID0gcG9zaXRpb24gPT0gXCJmcm9udG1hdHRlclwiID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgdG9wID0gcG9zaXRpb24gPT0gXCJ0b3BcIiA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IGZpZWxkU2VsZWN0TW9kYWwodGhpcy5wbHVnaW4sIHRoaXMuZmlsZSwgbGluZU51bWJlciwgcmVzdWx0LnNwbGl0KCdcXG4nKVtsaW5lTnVtYmVyXSwgaW5Gcm9udG1hdHRlciwgdG9wLCB0aGlzLmZpbGVDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG59OyIsICJpbXBvcnQgeyBNb2RhbCwgRHJvcGRvd25Db21wb25lbnQsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCI7XG5pbXBvcnQgYWRkTmV3RmllbGRNb2RhbCBmcm9tIFwiLi9hZGROZXdGaWVsZE1vZGFsXCI7XG5pbXBvcnQgeyBGaWxlQ2xhc3MgfSBmcm9tIFwic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3NcIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZFwiO1xuaW1wb3J0IHsgRmllbGRNYW5hZ2VyLCBGaWVsZFR5cGUgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgZmllbGRTZWxlY3RNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIC8vIGNob29zZSBhIGZpZWxkIHR5cGUgYWZ0ZXIgXCJhZGQgZmllbGQgYXQgc2VjdGlvbiBjb21tYW5kXCJcblxuICAgIHByaXZhdGUgbGluZU51bWJlcjogbnVtYmVyO1xuICAgIHByaXZhdGUgbGluZTogc3RyaW5nO1xuICAgIHByaXZhdGUgcGx1Z2luOiBNZXRhZGF0YU1lbnU7XG4gICAgcHJpdmF0ZSBmaWxlOiBURmlsZTtcbiAgICBwcml2YXRlIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSB0b3A6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBmaWxlQ2xhc3M/OiBGaWxlQ2xhc3NcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogTWV0YWRhdGFNZW51LCBmaWxlOiBURmlsZSwgbGluZU51bWJlcjogbnVtYmVyLCBsaW5lOiBzdHJpbmcsIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW4sIHRvcDogYm9vbGVhbiwgZmlsZUNsYXNzPzogRmlsZUNsYXNzKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgICAgICB0aGlzLmxpbmUgPSBsaW5lO1xuICAgICAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lTnVtYmVyO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5pbkZyb250bWF0dGVyID0gaW5Gcm9udG1hdHRlcjtcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgICAgIHRoaXMuZmlsZUNsYXNzID0gZmlsZUNsYXNzXG4gICAgfTtcblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYEluc2VydCBmaWVsZCBhZnRlciA+ICR7dGhpcy5saW5lLnN1YnN0cmluZygwLCAyMCl9JHt0aGlzLmxpbmUubGVuZ3RoID4gMjAgPyBcIi4uLlwiIDogXCJcIn1gKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcIm1ldGFkYXRhLW1lbnUtZmllbGQtc2VsZWN0XCIgfSk7XG5cbiAgICAgICAgY29uc3Qgc2V0dGluZ3NEcm9wZG93bkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NTZWxlY3RvciA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChzZXR0aW5nc0Ryb3Bkb3duQ29udGFpbmVyKTtcbiAgICAgICAgc2V0dGluZ3NTZWxlY3Rvci5hZGRPcHRpb24oXCItLS1cIiwgXCJDaG9vc2UgRmllbGRcIik7XG4gICAgICAgIHNldHRpbmdzU2VsZWN0b3IuYWRkT3B0aW9uKFwiKytOZXdcIiwgXCJOZXdcIik7XG4gICAgICAgIGlmICh0aGlzLmZpbGVDbGFzcykge1xuICAgICAgICAgICAgdGhpcy5maWxlQ2xhc3MuYXR0cmlidXRlcy5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzU2VsZWN0b3IuYWRkT3B0aW9uKGF0dHIubmFtZSwgYXR0ci5uYW1lKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVzZXRGaWVsZHMuZm9yRWFjaChzZXR0aW5nID0+IHtcbiAgICAgICAgICAgICAgICBzZXR0aW5nc1NlbGVjdG9yLmFkZE9wdGlvbihzZXR0aW5nLm5hbWUsIHNldHRpbmcubmFtZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgIHNldHRpbmdzU2VsZWN0b3Iub25DaGFuZ2Uoc2VsZWN0ZWRGaWVsZE5hbWUgPT4ge1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkRmllbGROYW1lID09IFwiKytOZXdcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpZWxkTW9kYWwgPSBuZXcgYWRkTmV3RmllbGRNb2RhbCh0aGlzLnBsdWdpbiwgdGhpcy5saW5lTnVtYmVyLCB0aGlzLmZpbGUsIHRoaXMuaW5Gcm9udG1hdHRlciwgdGhpcy50b3ApO1xuICAgICAgICAgICAgICAgIG5ld0ZpZWxkTW9kYWwub3BlbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5maWxlQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ2xhc3NBdHRyaWJ1dGVzV2l0aE5hbWUgPSB0aGlzLmZpbGVDbGFzcy5hdHRyaWJ1dGVzLmZpbHRlcihhdHRyID0+IGF0dHIubmFtZSA9PSBzZWxlY3RlZEZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgbGV0IGZpZWxkOiBGaWVsZCB8IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIGxldCB0eXBlOiBGaWVsZFR5cGUgfCB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUNsYXNzQXR0cmlidXRlc1dpdGhOYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUNsYXNzQXR0cmlidXRlID0gZmlsZUNsYXNzQXR0cmlidXRlc1dpdGhOYW1lWzBdO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZCA9IGZpbGVDbGFzc0F0dHJpYnV0ZS5nZXRGaWVsZCgpO1xuICAgICAgICAgICAgICAgICAgICB0eXBlID0gZmlsZUNsYXNzQXR0cmlidXRlLnR5cGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTWFuYWdlciA9IG5ldyBGaWVsZE1hbmFnZXJbZmllbGQudHlwZV0oZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZE1hbmFnZXIuY3JlYXRlQW5kT3BlbkZpZWxkTW9kYWwodGhpcy5hcHAsIHRoaXMuZmlsZSwgc2VsZWN0ZWRGaWVsZE5hbWUsIHRoaXMubGluZU51bWJlciwgdGhpcy5pbkZyb250bWF0dGVyLCB0aGlzLnRvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByZXNldEZpZWxkcy5maWx0ZXIoX2ZpZWxkID0+IF9maWVsZC5uYW1lID09IHNlbGVjdGVkRmllbGROYW1lKVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZE1hbmFnZXIgPSBuZXcgRmllbGRNYW5hZ2VyW2ZpZWxkLnR5cGVdKGZpZWxkKTtcbiAgICAgICAgICAgICAgICBmaWVsZE1hbmFnZXIuY3JlYXRlQW5kT3BlbkZpZWxkTW9kYWwodGhpcy5hcHAsIHRoaXMuZmlsZSwgc2VsZWN0ZWRGaWVsZE5hbWUsIHRoaXMubGluZU51bWJlciwgdGhpcy5pbkZyb250bWF0dGVyLCB0aGlzLnRvcCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn07IiwgImltcG9ydCB7IE1vZGFsLCBUZXh0Q29tcG9uZW50LCBCdXR0b25Db21wb25lbnQsIEV4dHJhQnV0dG9uQ29tcG9uZW50LCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IE1ldGFkYXRhTWVudSBmcm9tIFwibWFpblwiO1xuaW1wb3J0IHsgaW5zZXJ0VmFsdWVzIH0gZnJvbSBcInNyYy9jb21tYW5kcy9pbnNlcnRWYWx1ZXNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgYWRkTmV3RmllbGRNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIHByaXZhdGUgbGluZU51bWJlcjogbnVtYmVyO1xuICAgIHByaXZhdGUgZmlsZTogVEZpbGU7XG4gICAgcHJpdmF0ZSBpbkZyb250bWF0dGVyOiBib29sZWFuO1xuICAgIHByaXZhdGUgdG9wOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBNZXRhZGF0YU1lbnUsIGxpbmVOdW1iZXI6IG51bWJlciwgZmlsZTogVEZpbGUsIGluRnJvbnRtYXR0ZXI6IGJvb2xlYW4sIHRvcDogYm9vbGVhbikge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICAgICAgdGhpcy5saW5lTnVtYmVyID0gbGluZU51bWJlcjtcbiAgICAgICAgdGhpcy5pbkZyb250bWF0dGVyID0gaW5Gcm9udG1hdHRlcjtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy50b3AgPSB0b3A7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIkluc2VydCBuZXcgZmllbGRcIik7XG4gICAgICAgIGNvbnN0IGFkZE5ld0ZpZWxkQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGNvbnN0IG5hbWVJbnB1dENvbnRhaW5lciA9IGFkZE5ld0ZpZWxkQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICBuYW1lSW5wdXRDb250YWluZXIuc2V0VGV4dChcIkZpZWxkIE5hbWU6IFwiKTtcbiAgICAgICAgY29uc3QgbmFtZUlucHV0RWwgPSBuZXcgVGV4dENvbXBvbmVudChuYW1lSW5wdXRDb250YWluZXIpO1xuICAgICAgICBuYW1lSW5wdXRFbC5zZXRQbGFjZWhvbGRlcihcIkZpZWxkIG5hbWVcIik7XG4gICAgICAgIGNvbnN0IHZhbHVlSW5wdXRDb250YWluZXIgPSBhZGROZXdGaWVsZENvbnRhaW5lci5jcmVhdGVEaXYoKTtcbiAgICAgICAgdmFsdWVJbnB1dENvbnRhaW5lci5zZXRUZXh0KFwiRmllbGQgdmFsdWU6IFwiKTtcbiAgICAgICAgY29uc3QgdmFsdWVJbnB1dEVsID0gbmV3IFRleHRDb21wb25lbnQodmFsdWVJbnB1dENvbnRhaW5lcik7XG4gICAgICAgIHZhbHVlSW5wdXRFbC5zZXRQbGFjZWhvbGRlcihcIkZpZWxkIHZhbHVlXCIpO1xuICAgICAgICBjb25zdCBmb290ZXJCdXR0b25zID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIGNsczogJ21ldGFkYXRhLW1lbnUtdGV4dGFyZWEtYnV0dG9ucydcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGZvb3RlckJ1dHRvbnMpO1xuICAgICAgICBzYXZlQnV0dG9uLnNldEljb24oXCJjaGVja21hcmtcIik7XG4gICAgICAgIHNhdmVCdXR0b24ub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpbnNlcnRWYWx1ZXModGhpcy5hcHAsIHRoaXMuZmlsZSwgbmFtZUlucHV0RWwuZ2V0VmFsdWUoKSwgdmFsdWVJbnB1dEVsLmdldFZhbHVlKCksIHRoaXMubGluZU51bWJlciwgdGhpcy5pbkZyb250bWF0dGVyLCB0aGlzLnRvcCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBuZXcgRXh0cmFCdXR0b25Db21wb25lbnQoZm9vdGVyQnV0dG9ucyk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zZXRJY29uKFwiY3Jvc3NcIik7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cblxuICAgIH07XG59OyIsICJpbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBEcm9wZG93bkNvbXBvbmVudCwgTW9kYWwsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBjcmVhdGVGaWxlQ2xhc3MgfSBmcm9tIFwic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3NcIjtcbmltcG9ydCB7IEZpbGVDbGFzc0F0dHJpYnV0ZU1vZGFsIH0gZnJvbSBcInNyYy9maWxlQ2xhc3MvRmlsZUNsYXNzQXR0cmlidXRlTW9kYWxcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cbiAgICBwbHVnaW46IE1ldGFkYXRhTWVudTtcbiAgICBmaWxlOiBURmlsZTtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogTWV0YWRhdGFNZW51LCBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChgU2VsZWN0IHRoZSBmaWVsZCB0byB1cGRhdGVgKTtcbiAgICAgICAgY29uc3QgZmlsZUNsYXNzID0gYXdhaXQgY3JlYXRlRmlsZUNsYXNzKHRoaXMucGx1Z2luLCB0aGlzLmZpbGUuYmFzZW5hbWUsIHRydWUpIC8vIGxpbWl0IGZpZWxkcyBtYW5hZ2UgdG8gY3VycmVudCBmaWxlQ2xhc3NcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYFNlbGVjdCB0aGUgZmllbGQgdG8gdXBkYXRlIGluICR7ZmlsZUNsYXNzLm5hbWV9YCk7XG4gICAgICAgIGNvbnN0IHNlbGVjdENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBjb25zdCBzZWxlY3QgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoc2VsZWN0Q29udGFpbmVyKTtcbiAgICAgICAgc2VsZWN0LmFkZE9wdGlvbihcInNlbGVjdCBhbiBhdHRyaWJ1dGVcIiwgXCItLXNlbGVjdCBhbiBhdHRyaWJ1dGUtLVwiKTtcbiAgICAgICAgZmlsZUNsYXNzLmF0dHJpYnV0ZXMuZm9yRWFjaChhdHRyID0+IHtcbiAgICAgICAgICAgIHNlbGVjdC5hZGRPcHRpb24oYXR0ci5uYW1lLCBhdHRyLm5hbWUpO1xuICAgICAgICB9KVxuXG4gICAgICAgIHNlbGVjdC5hZGRPcHRpb24oXCIrK25ld0F0dHIrK1wiLCBcIisrQWRkIGEgbmV3IGF0dHJpYnV0ZSsrXCIpO1xuICAgICAgICBzZWxlY3Qub25DaGFuZ2UoKGF0dHJOYW1lKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXR0ck5hbWUgPT0gXCIrK25ld0F0dHJcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVDbGFzc0F0dHJpYnV0ZU1vZGFsKHRoaXMucGx1Z2luLCBmaWxlQ2xhc3MpO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IEZpbGVDbGFzc0F0dHJpYnV0ZU1vZGFsKHRoaXMucGx1Z2luLCBmaWxlQ2xhc3MsIGZpbGVDbGFzcy5hdHRyaWJ1dGVzLmZpbHRlcihhdHRyID0+IGF0dHIubmFtZSA9PSBhdHRyTmFtZSlbMF0pO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufSIsICJpbXBvcnQgeyBEcm9wZG93bkNvbXBvbmVudCwgTW9kYWwsIFRleHRDb21wb25lbnQsIEJ1dHRvbkNvbXBvbmVudCwgRXh0cmFCdXR0b25Db21wb25lbnQsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRmlsZUNsYXNzQXR0cmlidXRlIH0gZnJvbSBcInNyYy9maWxlQ2xhc3MvZmlsZUNsYXNzQXR0cmlidXRlXCI7XG5pbXBvcnQgeyBGaWVsZFR5cGVUb29sdGlwLCBGaWVsZFR5cGUsIEZpZWxkVHlwZUxhYmVsTWFwcGluZywgRmllbGRNYW5hZ2VyIH0gZnJvbSBcInNyYy90eXBlcy9maWVsZFR5cGVzXCI7XG5pbXBvcnQgeyBGaWxlQ2xhc3MgfSBmcm9tIFwic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3NcIjtcbmltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZFwiO1xuaW1wb3J0IHsgRmllbGRNYW5hZ2VyIGFzIEYsIFNldHRpbmdMb2NhdGlvbiB9IGZyb20gXCJzcmMvZmllbGRzL0ZpZWxkTWFuYWdlclwiO1xuXG5jbGFzcyBGaWxlQ2xhc3NBdHRyaWJ1dGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblxuICAgIHByaXZhdGUgYXR0cj86IEZpbGVDbGFzc0F0dHJpYnV0ZTtcbiAgICBwcml2YXRlIGZpbGVDbGFzczogRmlsZUNsYXNzO1xuICAgIHByaXZhdGUgcGx1Z2luOiBNZXRhZGF0YU1lbnVcbiAgICBwcml2YXRlIG5hbWVJbnB1dENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBuYW1lSW5wdXQ6IFRleHRDb21wb25lbnQ7XG4gICAgcHJpdmF0ZSBhdHRyTmFtZTogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSB0eXBlU2VsZWN0Q29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIGluaXRpYWxGaWVsZDogRmllbGQ7XG4gICAgcHJpdmF0ZSBmaWVsZDogRmllbGQ7XG4gICAgcHJpdmF0ZSBmaWVsZE1hbmFnZXI6IEY7XG4gICAgcHJpdmF0ZSBmaWVsZE9wdGlvbnNDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuXG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IE1ldGFkYXRhTWVudSwgZmlsZUNsYXNzOiBGaWxlQ2xhc3MsIGF0dHI/OiBGaWxlQ2xhc3NBdHRyaWJ1dGUpIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luXG4gICAgICAgIHRoaXMuYXR0ciA9IGF0dHI7XG4gICAgICAgIHRoaXMuZmlsZUNsYXNzID0gZmlsZUNsYXNzO1xuICAgICAgICB0aGlzLmluaXRpYWxGaWVsZCA9IG5ldyBGaWVsZCgpO1xuICAgICAgICBpZiAodGhpcy5hdHRyKSB7XG4gICAgICAgICAgICB0aGlzLmZpZWxkID0gYXR0ciEuZ2V0RmllbGQoKVxuICAgICAgICAgICAgRmllbGQuY29weVByb3BlcnR5KHRoaXMuaW5pdGlhbEZpZWxkLCB0aGlzLmZpZWxkKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5maWVsZCA9IG5ldyBGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmllbGRNYW5hZ2VyID0gbmV3IEZpZWxkTWFuYWdlclt0aGlzLmZpZWxkLnR5cGVdKHRoaXMuZmllbGQpO1xuICAgICAgICB0aGlzLm5hbWVJbnB1dENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICB0aGlzLnR5cGVTZWxlY3RDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtZXRhZGF0YS1tZW51LXZhbHVlLXNlbGVjdG9yLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIHRoaXMuZmllbGRPcHRpb25zQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KClcbiAgICB9XG5cbiAgICBidWlsZE5hbWVJbnB1dENvbnRhaW5lcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5uYW1lSW5wdXRDb250YWluZXIuc2V0VGV4dChcIk5hbWU6IFwiKTtcbiAgICAgICAgdGhpcy5uYW1lSW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudCh0aGlzLm5hbWVJbnB1dENvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuYXR0ciA/IHRoaXMubmFtZUlucHV0LnNldFZhbHVlKHRoaXMuZmllbGQubmFtZSkgOiB0aGlzLm5hbWVJbnB1dC5zZXRQbGFjZWhvbGRlcihcIlR5cGUgYSBuYW1lIGZvciB0aGlzIGF0dHJpYnV0ZVwiKTtcbiAgICAgICAgdGhpcy5uYW1lSW5wdXQub25DaGFuZ2UodmFsdWUgPT4geyB0aGlzLmZpZWxkLm5hbWUgPSB2YWx1ZTsgdGhpcy5hdHRyTmFtZS5zZXRUZXh0KGA8JHt2YWx1ZX0+YCkgfSk7XG4gICAgICAgIHRoaXMudHlwZVNlbGVjdENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtZXRhZGF0YS1tZW51LXNlcGFyYXRvcicgfSkuY3JlYXRlRWwoXCJoclwiKTtcbiAgICB9XG5cbiAgICBidWlsZFR5cGVTZWxlY3RDb250YWluZXIoKTogdm9pZCB7XG5cbiAgICAgICAgLy9oZWFkZXIgZm9yIHNlbGVjdFxuICAgICAgICBjb25zdCB0eXBlU2VsZWN0SGVhZGVyID0gdGhpcy50eXBlU2VsZWN0Q29udGFpbmVyLmNyZWF0ZURpdigpO1xuICAgICAgICBjb25zdCBhdHRyTGluZSA9IHR5cGVTZWxlY3RIZWFkZXIuY3JlYXRlRWwoXCJkaXZcIik7XG4gICAgICAgIHRoaXMuYXR0ck5hbWUgPSBhdHRyTGluZS5jcmVhdGVFbChcInN0cm9uZ1wiKTtcbiAgICAgICAgdGhpcy5hdHRyTmFtZS5zZXRUZXh0KGA8JHt0aGlzLmZpZWxkLm5hbWV9PmApO1xuICAgICAgICBhdHRyTGluZS5hcHBlbmQoXCIgZmllbGRzIGluIGZpbGVzIHdpdGg6XCIpO1xuICAgICAgICBTdHJpbmcoYC0tLVxcbiR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZUNsYXNzQWxpYXN9OiAke3RoaXMuZmlsZUNsYXNzLm5hbWV9XFxuLi4uXFxuLS0tYCkuc3BsaXQoJ1xcbicpLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgICAgICB0eXBlU2VsZWN0SGVhZGVyLmNyZWF0ZUVsKFwiZGl2XCIsIFwieWFtbC1tZXRhZGF0YS1tZW51LXJlZFwiKS5zZXRUZXh0KGxpbmUpO1xuICAgICAgICB9KVxuICAgICAgICAvL2Ryb3Bkb3duXG4gICAgICAgIGNvbnN0IHR5cGVTZWxlY3RMYWJlbCA9IHRoaXMudHlwZVNlbGVjdENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdtZXRhZGF0YS1tZW51LXZhbHVlLXNlbGVjdG9yLWlubGluZS1sYWJlbCcgfSk7XG4gICAgICAgIHR5cGVTZWxlY3RMYWJlbC5zZXRUZXh0KFwid2lsbDogXCIpO1xuICAgICAgICBjb25zdCB0eXBlU2VsZWN0RHJvcERvd24gPSB0aGlzLnR5cGVTZWxlY3RDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnbWV0YWRhdGEtbWVudS12YWx1ZS1zZWxlY3Rvci10b2dnbGVyJyB9KTtcblxuICAgICAgICBjb25zdCB0eXBlU2VsZWN0ID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHR5cGVTZWxlY3REcm9wRG93bik7XG5cbiAgICAgICAgT2JqZWN0LmtleXMoRmllbGRUeXBlVG9vbHRpcCkuZm9yRWFjaCgoa2V5OiBrZXlvZiB0eXBlb2YgRmllbGRUeXBlKSA9PiB0eXBlU2VsZWN0LmFkZE9wdGlvbihrZXksIEZpZWxkVHlwZVRvb2x0aXBba2V5XSkpXG4gICAgICAgIHR5cGVTZWxlY3Quc2V0VmFsdWUodGhpcy5maWVsZC50eXBlKVxuICAgICAgICB0eXBlU2VsZWN0Lm9uQ2hhbmdlKCh0eXBlTGFiZWw6IGtleW9mIHR5cGVvZiBGaWVsZFR5cGUpID0+IHtcblxuICAgICAgICAgICAgdGhpcy5maWVsZCA9IG5ldyBGaWVsZCgpO1xuICAgICAgICAgICAgRmllbGQuY29weVByb3BlcnR5KHRoaXMuZmllbGQsIHRoaXMuaW5pdGlhbEZpZWxkKTtcbiAgICAgICAgICAgIHRoaXMuZmllbGQubmFtZSA9IHRoaXMubmFtZUlucHV0LmdldFZhbHVlKClcbiAgICAgICAgICAgIHRoaXMuZmllbGQudHlwZSA9IEZpZWxkVHlwZUxhYmVsTWFwcGluZ1t0eXBlTGFiZWxdO1xuICAgICAgICAgICAgaWYgKHRoaXMuZmllbGQudHlwZSAhPT0gdGhpcy5pbml0aWFsRmllbGQudHlwZSAmJlxuICAgICAgICAgICAgICAgICFbdGhpcy5maWVsZC50eXBlLCB0aGlzLmluaXRpYWxGaWVsZC50eXBlXS5ldmVyeShmaWVsZFR5cGUgPT5cbiAgICAgICAgICAgICAgICAgICAgW0ZpZWxkVHlwZS5NdWx0aSwgRmllbGRUeXBlLlNlbGVjdCwgRmllbGRUeXBlLkN5Y2xlXS5pbmNsdWRlcyhmaWVsZFR5cGUpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZC5vcHRpb25zID0ge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlICh0aGlzLmZpZWxkT3B0aW9uc0NvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZE9wdGlvbnNDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5maWVsZE9wdGlvbnNDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpZWxkTWFuYWdlciA9IG5ldyBGaWVsZE1hbmFnZXJbdGhpcy5maWVsZC50eXBlXSh0aGlzLmZpZWxkKVxuICAgICAgICAgICAgdGhpcy5maWVsZE1hbmFnZXIuY3JlYXRlU2V0dGluZ0NvbnRhaW5lcih0aGlzLmZpZWxkT3B0aW9uc0NvbnRhaW5lciwgdGhpcy5wbHVnaW4sIFNldHRpbmdMb2NhdGlvbi5GaWxlQ2xhc3NBdHRyaWJ1dGVTZXR0aW5ncylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcml2YXRlIHZhbGlkYXRlRmllbGRzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZE1hbmFnZXIudmFsaWRhdGVOYW1lKFxuICAgICAgICAgICAgdGhpcy5uYW1lSW5wdXQsXG4gICAgICAgICAgICB0aGlzLm5hbWVJbnB1dC5pbnB1dEVsXG4gICAgICAgICkgJiZcbiAgICAgICAgICAgIHRoaXMuZmllbGRNYW5hZ2VyLnZhbGlkYXRlT3B0aW9ucygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlU2F2ZUJ0bihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lcik7XG4gICAgICAgIHNhdmVCdXR0b24uc2V0SWNvbihcImNoZWNrbWFya1wiKTtcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgIGxldCBlcnJvciA9ICF0aGlzLnZhbGlkYXRlRmllbGRzKCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRml4IGVycm9ycyBiZWZvcmUgc2F2aW5nLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5maWxlQ2xhc3MudXBkYXRlQXR0cmlidXRlKHRoaXMuZmllbGQudHlwZSwgdGhpcy5maWVsZC5uYW1lLCB0aGlzLmZpZWxkLm9wdGlvbnMsIHRoaXMuYXR0cik7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVSZW1vdmVsQnRuKGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXIpO1xuICAgICAgICByZW1vdmVCdXR0b24uc2V0SWNvbihcInRyYXNoXCIpO1xuICAgICAgICByZW1vdmVCdXR0b24ub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC50aXRsZUVsLnNldFRleHQoXCJQbGVhc2UgY29uZmlybVwiKTtcbiAgICAgICAgICAgIGNvbmZpcm1Nb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KCkuc2V0VGV4dChgRG8geW91IHJlYWxseSB3YW50IHRvIHJlbW92ZSAke3RoaXMuYXR0cj8ubmFtZX0gYXR0cmlidXRlIGZyb20gJHt0aGlzLmZpbGVDbGFzcy5uYW1lfT9gKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1Gb290ZXIgPSBjb25maXJtTW9kYWwuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJtZXRhZGF0YS1tZW51LXZhbHVlLWdyaWQtZm9vdGVyXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb25maXJtRm9vdGVyKTtcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b24uc2V0SWNvbihcImNoZWNrbWFya1wiKTtcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b24ub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXR0cikgdGhpcy5maWxlQ2xhc3MucmVtb3ZlQXR0cmlidXRlKHRoaXMuYXR0cik7XG4gICAgICAgICAgICAgICAgY29uZmlybU1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnN0IGRpc21pc3NCdXR0b24gPSBuZXcgRXh0cmFCdXR0b25Db21wb25lbnQoY29uZmlybUZvb3Rlcik7XG4gICAgICAgICAgICBkaXNtaXNzQnV0dG9uLnNldEljb24oXCJjcm9zc1wiKTtcbiAgICAgICAgICAgIGRpc21pc3NCdXR0b24ub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgICAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUNhbmNlbEJ0bihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IG5ldyBFeHRyYUJ1dHRvbkNvbXBvbmVudChjb250YWluZXIpO1xuICAgICAgICBjYW5jZWxCdXR0b24uc2V0SWNvbihcImNyb3NzXCIpO1xuICAgICAgICBjYW5jZWxCdXR0b24ub25DbGljaygoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgLy90aXRsZVxuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCh0aGlzLmF0dHIgPyBgTWFuYWdlICR7dGhpcy5hdHRyLm5hbWV9YCA6IGBDcmVhdGUgYSBuZXcgYXR0cmlidXRlIGZvciAke3RoaXMuZmlsZUNsYXNzLm5hbWV9YCk7XG5cbiAgICAgICAgdGhpcy5idWlsZE5hbWVJbnB1dENvbnRhaW5lcigpXG4gICAgICAgIHRoaXMuYnVpbGRUeXBlU2VsZWN0Q29udGFpbmVyKClcbiAgICAgICAgdGhpcy5maWVsZE1hbmFnZXIuY3JlYXRlU2V0dGluZ0NvbnRhaW5lcih0aGlzLmZpZWxkT3B0aW9uc0NvbnRhaW5lciwgdGhpcy5wbHVnaW4sIFNldHRpbmdMb2NhdGlvbi5GaWxlQ2xhc3NBdHRyaWJ1dGVTZXR0aW5ncylcblxuICAgICAgICAvLyBmb290ZXIgYnV0dG9uc1xuICAgICAgICBjb25zdCBmb290ZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwibWV0YWRhdGEtbWVudS12YWx1ZS1ncmlkLWZvb3RlclwiIH0pO1xuICAgICAgICB0aGlzLmNyZWF0ZVNhdmVCdG4oZm9vdGVyKTtcbiAgICAgICAgaWYgKHRoaXMuYXR0cikgdGhpcy5jcmVhdGVSZW1vdmVsQnRuKGZvb3Rlcik7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2FuY2VsQnRuKGZvb3Rlcik7XG4gICAgfVxufVxuXG5leHBvcnQgeyBGaWxlQ2xhc3NBdHRyaWJ1dGVNb2RhbCB9IiwgImltcG9ydCBNZXRhZGF0YU1lbnUgZnJvbSBcIm1haW5cIjtcbmltcG9ydCB7IEFwcCwgVEZpbGUsIE1lbnUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9GaWVsZFwiO1xuaW1wb3J0IHsgRmllbGRUeXBlLCBGaWVsZE1hbmFnZXIgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcbmltcG9ydCBjaG9vc2VTZWN0aW9uTW9kYWwgZnJvbSBcIi4uL29wdGlvbk1vZGFscy9jaG9vc2VTZWN0aW9uTW9kYWxcIjtcbmltcG9ydCBTZWxlY3RNb2RhbCBmcm9tIFwic3JjL29wdGlvbk1vZGFscy9TZWxlY3RNb2RhbFwiO1xuaW1wb3J0IHsgY3JlYXRlRmlsZUNsYXNzLCBGaWxlQ2xhc3MgfSBmcm9tIFwic3JjL2ZpbGVDbGFzcy9maWxlQ2xhc3NcIjtcbmltcG9ydCB7IGdldEZpZWxkIH0gZnJvbSBcInNyYy9jb21tYW5kcy9nZXRGaWVsZFwiO1xuaW1wb3J0IEZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsIGZyb20gXCJzcmMvZmlsZUNsYXNzL0ZpbGVDbGFzc0F0dHJpYnV0ZVNlbGVjdE1vZGFsXCI7XG5pbXBvcnQgeyBnZXRMaW5lRmllbGRzIH0gZnJvbSBcIi4uL3V0aWxzL3BhcnNlclwiO1xuaW1wb3J0IE1hbmFnZXJzIGZyb20gXCJzcmMvZmllbGRzL2ZpZWxkTWFuYWdlcnMvTWFuYWdlcnNcIjtcblxuZnVuY3Rpb24gaXNNZW51KGNhdGVnb3J5OiBNZW51IHwgU2VsZWN0TW9kYWwpOiBjYXRlZ29yeSBpcyBNZW51IHtcblx0cmV0dXJuIChjYXRlZ29yeSBhcyBNZW51KS5hZGRJdGVtICE9PSB1bmRlZmluZWQ7XG59O1xuXG5mdW5jdGlvbiBpc1NlbGVjdChjYXRlZ29yeTogTWVudSB8IFNlbGVjdE1vZGFsKTogY2F0ZWdvcnkgaXMgU2VsZWN0TW9kYWwge1xuXHRyZXR1cm4gKGNhdGVnb3J5IGFzIFNlbGVjdE1vZGFsKS5tb2RhbHMgIT09IHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9wdGlvbnNMaXN0IHtcblxuXHQvLyBhZGRzIG9wdGlvbnMgdG8gY29udGV4dCBtZW51IG9yIHRvIGEgZHJvcGRvd24gbW9kYWwgdHJpZ2dlciB3aXRoIFwiRmllbGQ6IE9wdGlvbnNcIiBjb21tYW5kIGluIGNvbW1hbmQgcGFsbGV0dGVcblxuXHRhcHA6IEFwcDtcblx0ZmlsZTogVEZpbGU7XG5cdHBsdWdpbjogTWV0YWRhdGFNZW51O1xuXHRwYXRoOiBzdHJpbmc7XG5cdGNhdGVnb3J5OiBNZW51IHwgU2VsZWN0TW9kYWw7XG5cdGZpbGVDbGFzczogRmlsZUNsYXNzO1xuXHRhdHRyaWJ1dGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuXHRmaWxlQ2xhc3NGb3JGaWVsZHM6IGJvb2xlYW47XG5cdGZpbGVDbGFzc0ZpZWxkczogc3RyaW5nW107XG5cblx0Y29uc3RydWN0b3IocGx1Z2luOiBNZXRhZGF0YU1lbnUsIGZpbGU6IFRGaWxlLCBjYXRlZ29yeTogTWVudSB8IFNlbGVjdE1vZGFsKSB7XG5cdFx0dGhpcy5maWxlID0gZmlsZTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XG5cdFx0dGhpcy5hdHRyaWJ1dGVzID0ge307XG5cdFx0dGhpcy5maWxlQ2xhc3NGaWVsZHMgPSBbXTtcblx0XHR0aGlzLmZpbGVDbGFzc0ZvckZpZWxkcyA9IGZhbHNlO1xuXHR9O1xuXG5cdHByaXZhdGUgYXN5bmMgZmV0Y2hGcm9udG1hdHRlckZpZWxkcygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldENhY2hlKHRoaXMuZmlsZS5wYXRoKT8uZnJvbnRtYXR0ZXI7XG5cdFx0aWYgKGZyb250bWF0dGVyKSB7XG5cdFx0XHRjb25zdCB7IHBvc2l0aW9uLCAuLi5hdHRyaWJ1dGVzIH0gPSBmcm9udG1hdHRlcjtcblx0XHRcdE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmZvckVhY2goa2V5ID0+IHtcblx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5nbG9iYWxseUlnbm9yZWRGaWVsZHMuaW5jbHVkZXMoa2V5KSkge1xuXHRcdFx0XHRcdHRoaXMuYXR0cmlidXRlc1trZXldID0gYXR0cmlidXRlc1trZXldO1xuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0XHRjb25zdCBmaWxlQ2xhc3NBbGlhcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVDbGFzc0FsaWFzO1xuXHRcdFx0aWYgKE9iamVjdC5rZXlzKHRoaXMuYXR0cmlidXRlcykuaW5jbHVkZXMoZmlsZUNsYXNzQWxpYXMpIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbEZpbGVDbGFzcykge1xuXHRcdFx0XHRjb25zdCBmaWxlQ2xhc3MgPSB0aGlzLmF0dHJpYnV0ZXNbZmlsZUNsYXNzQWxpYXNdIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbEZpbGVDbGFzcyBhcyBzdHJpbmc7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgX2ZpbGVDbGFzcyA9IGF3YWl0IGNyZWF0ZUZpbGVDbGFzcyh0aGlzLnBsdWdpbiwgZmlsZUNsYXNzKVxuXHRcdFx0XHRcdHRoaXMuZmlsZUNsYXNzID0gX2ZpbGVDbGFzcztcblx0XHRcdFx0XHR0aGlzLmZpbGVDbGFzc0ZpZWxkcyA9IF9maWxlQ2xhc3MuYXR0cmlidXRlcy5tYXAoYXR0ciA9PiBhdHRyLm5hbWUpO1xuXHRcdFx0XHRcdHRoaXMuZmlsZUNsYXNzRm9yRmllbGRzID0gdHJ1ZTtcblx0XHRcdFx0XHRPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGtleSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIXRoaXMuZmlsZUNsYXNzRmllbGRzLmluY2x1ZGVzKGtleSkgJiYga2V5ICE9IGZpbGVDbGFzc0FsaWFzKSB7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLmF0dHJpYnV0ZXNba2V5XTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0Ly9kbyBub3RoaW5nXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGZldGNoSW5saW5lRmllbGRzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKHRoaXMuZmlsZSk7XG5cdFx0cmVzdWx0LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiB7XG5cdFx0XHRjb25zdCBsaW5lRmllbGRzID0gZ2V0TGluZUZpZWxkcyhsaW5lKTtcblx0XHRcdGxpbmVGaWVsZHMuZm9yRWFjaCgoeyBhdHRyaWJ1dGUsIHZhbHVlcyB9KSA9PiB7XG5cdFx0XHRcdGlmIChhdHRyaWJ1dGUgJiYgIXRoaXMucGx1Z2luLnNldHRpbmdzLmdsb2JhbGx5SWdub3JlZEZpZWxkcy5pbmNsdWRlcyhhdHRyaWJ1dGUudHJpbSgpKSkge1xuXHRcdFx0XHRcdGlmICh0aGlzLmZpbGVDbGFzc0ZvckZpZWxkcykge1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuZmlsZUNsYXNzRmllbGRzLmluY2x1ZGVzKGF0dHJpYnV0ZS50cmltKCkpKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGUudHJpbSgpXSA9IHZhbHVlcyA/IHZhbHVlcy50cmltKCkgOiBcIlwiO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZS50cmltKCldID0gdmFsdWVzID8gdmFsdWVzLnRyaW0oKSA6IFwiXCI7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblxuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBhc3luYyBjcmVhdGVFeHRyYU9wdGlvbkxpc3QoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5mZXRjaEZyb250bWF0dGVyRmllbGRzKCk7XG5cdFx0YXdhaXQgdGhpcy5mZXRjaElubGluZUZpZWxkcygpO1xuXHRcdGlmICh0aGlzLmZpbGVDbGFzcykge1xuXHRcdFx0Y29uc3QgZmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwgPSBuZXcgRmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwodGhpcy5wbHVnaW4sIHRoaXMuZmlsZUNsYXNzLmdldENsYXNzRmlsZSgpKTtcblx0XHRcdGlmIChpc01lbnUodGhpcy5jYXRlZ29yeSkpIHtcblx0XHRcdFx0dGhpcy5jYXRlZ29yeS5hZGRTZXBhcmF0b3IoKTtcblx0XHRcdFx0dGhpcy5jYXRlZ29yeS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdFx0aXRlbS5zZXRJY29uKFwiZ2VhclwiKTtcblx0XHRcdFx0XHRpdGVtLnNldFRpdGxlKGBNYW5hZ2UgPCR7dGhpcy5maWxlQ2xhc3MubmFtZX0+IGZpZWxkc2ApO1xuXHRcdFx0XHRcdGl0ZW0ub25DbGljaygoKSA9PiBmaWxlQ2xhc3NBdHRyaWJ1dGVTZWxlY3RNb2RhbC5vcGVuKCkpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5jYXRlZ29yeS5hZGRPcHRpb24oXCJtYW5hZ2VfZmlsZUNsYXNzX2F0dHJpYnV0ZXNcIiwgYE1hbmFnZSA8JHt0aGlzLmZpbGVDbGFzcy5uYW1lfT4gZmllbGRzYCk7XG5cdFx0XHRcdHRoaXMuY2F0ZWdvcnkubW9kYWxzW1wibWFuYWdlX2ZpbGVDbGFzc19hdHRyaWJ1dGVzXCJdID0gKCkgPT4gZmlsZUNsYXNzQXR0cmlidXRlU2VsZWN0TW9kYWwub3BlbigpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFx0aWYgKGlzTWVudSh0aGlzLmNhdGVnb3J5KSkgeyB0aGlzLmNhdGVnb3J5LmFkZFNlcGFyYXRvcigpOyB9O1xuXHRcdHRoaXMuYnVpbGRGaWVsZE9wdGlvbnMoKTtcblx0XHR0aGlzLmFkZFNlY3Rpb25TZWxlY3RNb2RhbE9wdGlvbigpO1xuXHR9XG5cblx0cHJpdmF0ZSBidWlsZEZpZWxkT3B0aW9ucygpOiB2b2lkIHtcblx0XHRPYmplY3Qua2V5cyh0aGlzLmF0dHJpYnV0ZXMpLmZvckVhY2goKGtleTogc3RyaW5nKSA9PiB7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IHRoaXMuYXR0cmlidXRlc1trZXldO1xuXHRcdFx0Y29uc3QgZmllbGQgPSBnZXRGaWVsZCh0aGlzLnBsdWdpbiwga2V5LCB0aGlzLmZpbGVDbGFzcyk7XG5cdFx0XHRpZiAoZmllbGQpIHtcblx0XHRcdFx0Y29uc3QgZmllbGRNYW5hZ2VyID0gbmV3IEZpZWxkTWFuYWdlcltmaWVsZC50eXBlXShmaWVsZCk7XG5cdFx0XHRcdGZpZWxkTWFuYWdlci5hZGRNZW51T3B0aW9uKGtleSwgdmFsdWUsIHRoaXMucGx1Z2luLmFwcCwgdGhpcy5maWxlLCB0aGlzLmNhdGVnb3J5KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnN0IGRlZmF1bHRGaWVsZCA9IG5ldyBGaWVsZChrZXkpXG5cdFx0XHRcdGRlZmF1bHRGaWVsZC50eXBlID0gRmllbGRUeXBlLklucHV0XG5cdFx0XHRcdGNvbnN0IGZpZWxkTWFuYWdlciA9IG5ldyBNYW5hZ2Vycy5JbnB1dChkZWZhdWx0RmllbGQpXG5cdFx0XHRcdGZpZWxkTWFuYWdlci5hZGRNZW51T3B0aW9uKGtleSwgdmFsdWUsIHRoaXMucGx1Z2luLmFwcCwgdGhpcy5maWxlLCB0aGlzLmNhdGVnb3J5KVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBhZGRTZWN0aW9uU2VsZWN0TW9kYWxPcHRpb24oKTogdm9pZCB7XG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgY2hvb3NlU2VjdGlvbk1vZGFsKHRoaXMucGx1Z2luLCB0aGlzLmZpbGUsIHRoaXMuZmlsZUNsYXNzKTtcblx0XHRpZiAoaXNNZW51KHRoaXMuY2F0ZWdvcnkpKSB7XG5cdFx0XHR0aGlzLmNhdGVnb3J5LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdFx0aXRlbS5zZXRJY29uKFwicGVuY2lsXCIpO1xuXHRcdFx0XHRpdGVtLnNldFRpdGxlKFwiQWRkIGZpZWxkIGF0IHNlY3Rpb24uLi5cIik7XG5cdFx0XHRcdGl0ZW0ub25DbGljaygoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0bW9kYWwub3BlbigpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aXRlbS5zZXRTZWN0aW9uKFwidGFyZ2V0LW1ldGFkYXRhXCIpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGlmIChpc1NlbGVjdCh0aGlzLmNhdGVnb3J5KSkge1xuXHRcdFx0dGhpcy5jYXRlZ29yeS5hZGRPcHRpb24oXCJhZGRfZmllbGRfYXRfc2VjdGlvblwiLCBcIkFkZCBmaWVsZCBhdCBzZWN0aW9uLi4uXCIpO1xuXHRcdFx0dGhpcy5jYXRlZ29yeS5tb2RhbHNbXCJhZGRfZmllbGRfYXRfc2VjdGlvblwiXSA9ICgpID0+IG1vZGFsLm9wZW4oKTtcblx0XHR9O1xuXHR9O1xufTtcbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IE1ldGFkYXRhTWVudSBmcm9tIFwibWFpblwiO1xuaW1wb3J0IE9wdGlvbnNMaXN0IGZyb20gXCJzcmMvb3B0aW9ucy9PcHRpb25zTGlzdFwiO1xuaW1wb3J0IFNlbGVjdE1vZGFsIGZyb20gXCJzcmMvb3B0aW9uTW9kYWxzL1NlbGVjdE1vZGFsXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGVGaWVsZHNDb21tYW5kc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHB1YmxpYyBhcHA6IEFwcDtcbiAgICBwcml2YXRlIHBsdWdpbjogTWV0YWRhdGFNZW51O1xuICAgIHByaXZhdGUgZmlsZTogVEZpbGU7XG4gICAgcHJpdmF0ZSBzZWxlY3Q6IFNlbGVjdE1vZGFsO1xuICAgIHByaXZhdGUgb3B0aW9uc0xpc3Q6IE9wdGlvbnNMaXN0O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTWV0YWRhdGFNZW51LCBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgfTtcblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYFNlbGVjdCB0aGUgZmllbGQgdG8gbWFuYWdlYCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoXCJtZXRhZGF0YS1tZW51XCIpO1xuICAgICAgICBjb25zdCBvcHRpb25zTGlzdENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogXCJmaWVsZC1vcHRpb25zXCJ9KTtcblxuICAgICAgICB0aGlzLnNlbGVjdCA9IG5ldyBTZWxlY3RNb2RhbChvcHRpb25zTGlzdENvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuc2VsZWN0LmFkZE9wdGlvbihcIi0tLVwiLCBcIkNob29zZSBGaWVsZFwiKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMub3B0aW9uc0xpc3QgPSBuZXcgT3B0aW9uc0xpc3QodGhpcy5wbHVnaW4sIHRoaXMuZmlsZSwgdGhpcy5zZWxlY3QpO1xuICAgICAgICBhd2FpdCB0aGlzLm9wdGlvbnNMaXN0LmNyZWF0ZUV4dHJhT3B0aW9uTGlzdCgpO1xuICAgICAgICB0aGlzLnNlbGVjdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Lm1vZGFsc1t2YWx1ZV0oKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VsZWN0LnNlbGVjdEVsLmZvY3VzKCk7XG4gICAgfTtcbn07IiwgImltcG9ydCB7IERyb3Bkb3duQ29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbGVjdE1vZGFsIGV4dGVuZHMgRHJvcGRvd25Db21wb25lbnQge1xuICAgIHB1YmxpYyBtb2RhbHM6IFJlY29yZDxzdHJpbmcsIGFueT47XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoY29udGFpbmVyRWwpO1xuICAgICAgICB0aGlzLm1vZGFscyA9IHt9O1xuICAgIH07XG59OyIsICJpbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCI7XG5pbXBvcnQge1xuICAgIEFwcCxcbiAgICBFZGl0b3IsXG4gICAgRWRpdG9yUG9zaXRpb24sXG4gICAgRWRpdG9yU3VnZ2VzdCxcbiAgICBFZGl0b3JTdWdnZXN0Q29udGV4dCxcbiAgICBFZGl0b3JTdWdnZXN0VHJpZ2dlckluZm8sXG4gICAgTWFya2Rvd25WaWV3LFxuICAgIFRGaWxlLFxuICAgIHBhcnNlWWFtbCxcbiAgICBOb3RpY2Vcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBjcmVhdGVGaWxlQ2xhc3MsIEZpbGVDbGFzcyB9IGZyb20gXCJzcmMvZmlsZUNsYXNzL2ZpbGVDbGFzc1wiO1xuaW1wb3J0IHsgRmllbGRNYW5hZ2VyLCBGaWVsZFR5cGUgfSBmcm9tIFwic3JjL3R5cGVzL2ZpZWxkVHlwZXNcIjtcbmltcG9ydCB7IGdlbmVyaWNGaWVsZFJlZ2V4LCBnZXRMaW5lRmllbGRzLCBlbmNvZGVMaW5rIH0gZnJvbSBcIi4uL3V0aWxzL3BhcnNlclwiO1xuaW1wb3J0IEZpbGVGaWVsZCBmcm9tIFwic3JjL2ZpZWxkcy9maWVsZE1hbmFnZXJzL0ZpbGVGaWVsZFwiO1xuXG5pbnRlcmZhY2UgSVZhbHVlQ29tcGxldGlvbiB7XG4gICAgdmFsdWU6IHN0cmluZztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZhbHVlU3VnZ2VzdCBleHRlbmRzIEVkaXRvclN1Z2dlc3Q8SVZhbHVlQ29tcGxldGlvbj4ge1xuICAgIHByaXZhdGUgcGx1Z2luOiBNZXRhZGF0YU1lbnU7XG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcbiAgICBwcml2YXRlIGZpbGVDbGFzczogRmlsZUNsYXNzO1xuICAgIHByaXZhdGUgaW5Gcm9udG1hdHRlcjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgaW5GdWxsTGluZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgaW5TZW50ZW5jZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgZGlkU2VsZWN0OiBib29sZWFuID0gZmFsc2VcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE1ldGFkYXRhTWVudSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2V0SW5zdHJ1Y3Rpb25zKFt7IGNvbW1hbmQ6IFwiU2hpZnRcIiwgcHVycG9zZTogXCJwdXQgYSBzcGFjZSBhZnRlcjo6XCIgfV0pO1xuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgdGhpcy5zY29wZS5yZWdpc3RlcihbXCJTaGlmdFwiXSwgXCJFbnRlclwiLCAoZXZ0OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0aGlzLnN1Z2dlc3Rpb25zLnVzZVNlbGVjdGVkSXRlbShldnQpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgb25UcmlnZ2VyKFxuICAgICAgICBjdXJzb3I6IEVkaXRvclBvc2l0aW9uLFxuICAgICAgICBlZGl0b3I6IEVkaXRvcixcbiAgICAgICAgZmlsZTogVEZpbGVcbiAgICApOiBFZGl0b3JTdWdnZXN0VHJpZ2dlckluZm8gfCBudWxsIHtcbiAgICAgICAgaWYgKHRoaXMuZGlkU2VsZWN0KSB7XG4gICAgICAgICAgICB0aGlzLmRpZFNlbGVjdCA9IGZhbHNlXG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNBdXRvc3VnZ2VzdEVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSkuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGNvbnN0IGZ1bGxMaW5lID0gZWRpdG9yLmdldExpbmUoZWRpdG9yLmdldEN1cnNvcigpLmxpbmUpXG4gICAgICAgIHRoaXMuaW5Gcm9udG1hdHRlciA9IGZyb250bWF0dGVyICE9PSB1bmRlZmluZWQgJiYgZnJvbnRtYXR0ZXIucG9zaXRpb24uc3RhcnQubGluZSA8IGN1cnNvci5saW5lICYmIGN1cnNvci5saW5lIDwgZnJvbnRtYXR0ZXIucG9zaXRpb24uZW5kLmxpbmVcbiAgICAgICAgaWYgKHRoaXMuaW5Gcm9udG1hdHRlcikge1xuICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBeJHtnZW5lcmljRmllbGRSZWdleH06KD88dmFsdWVzPi4qKWAsIFwidVwiKTtcbiAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChmdWxsTGluZSkpIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGdldExpbmVGaWVsZHMoZnVsbExpbmUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXJ0OiBjdXJzb3IsXG4gICAgICAgICAgICBlbmQ6IGN1cnNvcixcbiAgICAgICAgICAgIHF1ZXJ5OiBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSksXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHByaXZhdGUgZmlsdGVyT3B0aW9uID0gKGZpcnN0VmFsdWVzOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCwgbGFzdFZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQsIG9wdGlvbjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICAgIHJldHVybiAhZmlyc3RWYWx1ZXMgfHxcbiAgICAgICAgICAgICFmaXJzdFZhbHVlcz8uY29udGFpbnMoZW5jb2RlTGluayhvcHRpb24pKSAmJiAoIWxhc3RWYWx1ZSB8fFxuICAgICAgICAgICAgICAgICEhbGFzdFZhbHVlICYmIGVuY29kZUxpbmsob3B0aW9uKS5jb250YWlucyhsYXN0VmFsdWUpKVxuICAgIH1cblxuICAgIGFzeW5jIGdldFN1Z2dlc3Rpb25zKGNvbnRleHQ6IEVkaXRvclN1Z2dlc3RDb250ZXh0KTogUHJvbWlzZTxJVmFsdWVDb21wbGV0aW9uW10+IHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBhd2FpdCB0aGlzLmdldFZhbHVlU3VnZ2VzdGlvbnMoY29udGV4dCk7XG4gICAgICAgIGlmIChzdWdnZXN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBzdWdnZXN0aW9ucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfTtcblxuICAgIGFzeW5jIGdldFZhbHVlU3VnZ2VzdGlvbnMoY29udGV4dDogRWRpdG9yU3VnZ2VzdENvbnRleHQpOiBQcm9taXNlPElWYWx1ZUNvbXBsZXRpb25bXT4ge1xuICAgICAgICBjb25zdCBsaW5lTnVtYmVyID0gY29udGV4dC5zdGFydC5saW5lO1xuICAgICAgICBjb25zdCBtYXRjaEZpZWxkOiB7IGF0dHJpYnV0ZT86IHN0cmluZywgdmFsdWVzPzogc3RyaW5nIH0gPSB7IGF0dHJpYnV0ZTogdW5kZWZpbmVkLCB2YWx1ZXM6IFwiXCIgfVxuICAgICAgICBpZiAoIXRoaXMuaW5Gcm9udG1hdHRlcikge1xuICAgICAgICAgICAgY29uc3QgbGluZUZpZWxkcyA9IGdldExpbmVGaWVsZHMoZW5jb2RlTGluayhjb250ZXh0LmVkaXRvci5nZXRMaW5lKGxpbmVOdW1iZXIpKSk7XG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGNvbnRleHQuZWRpdG9yLmdldEN1cnNvcigpLmNoXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVMaW5lRmllbGQgPSBsaW5lRmllbGRzLmZpbmQobGluZUZpZWxkID0+IGxpbmVGaWVsZC5pbmRleCA8PSBwb3NpdGlvbiAmJiBsaW5lRmllbGQuaW5kZXggKyBsaW5lRmllbGQubGVuZ3RoID49IHBvc2l0aW9uKVxuICAgICAgICAgICAgaWYgKGFjdGl2ZUxpbmVGaWVsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5TZW50ZW5jZSA9IGFjdGl2ZUxpbmVGaWVsZC5pbmRleCA+IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5pbkZ1bGxMaW5lID0gYWN0aXZlTGluZUZpZWxkLmluZGV4ID09PSAwO1xuICAgICAgICAgICAgICAgIG1hdGNoRmllbGQuYXR0cmlidXRlID0gYWN0aXZlTGluZUZpZWxkLmF0dHJpYnV0ZTtcbiAgICAgICAgICAgICAgICBtYXRjaEZpZWxkLnZhbHVlcyA9IGFjdGl2ZUxpbmVGaWVsZC52YWx1ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYF4ke2dlbmVyaWNGaWVsZFJlZ2V4fTooPzx2YWx1ZXM+LispP2AsIFwidVwiKTtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2V4UmVzdWx0ID0gY29udGV4dC5lZGl0b3IuZ2V0UmFuZ2UoeyBsaW5lOiBsaW5lTnVtYmVyLCBjaDogMCB9LCBjb250ZXh0LmVuZCkubWF0Y2gocmVnZXgpO1xuICAgICAgICAgICAgaWYgKHJlZ2V4UmVzdWx0Py5ncm91cHMpIHtcbiAgICAgICAgICAgICAgICBtYXRjaEZpZWxkLmF0dHJpYnV0ZSA9IHJlZ2V4UmVzdWx0Lmdyb3Vwcy5hdHRyaWJ1dGU7XG4gICAgICAgICAgICAgICAgbWF0Y2hGaWVsZC52YWx1ZXMgPSByZWdleFJlc3VsdC5ncm91cHMudmFsdWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXRjaEZpZWxkLmF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gbWF0Y2hGaWVsZC5hdHRyaWJ1dGU7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZXNMaXN0ID0gbWF0Y2hGaWVsZC52YWx1ZXM/LnJlcGxhY2UoL15cXFt8Xlxcc1xcW3xeXFwofF5cXHNcXCgvLCAnJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxdJHxcXCkkLywgJycpXG4gICAgICAgICAgICAgICAgLnNwbGl0KFwiLFwiKS5tYXAobyA9PiBlbmNvZGVMaW5rKG8udHJpbSgpKSlcbiAgICAgICAgICAgIGNvbnN0IGxhc3RWYWx1ZSA9IHZhbHVlc0xpc3Q/Lmxhc3QoKVxuICAgICAgICAgICAgY29uc3QgZmlyc3RWYWx1ZXMgPSB2YWx1ZXNMaXN0Py5zbGljZSgwLCAtMSlcbiAgICAgICAgICAgIC8vdGFncyBzcGVjaWZpYyBjYXNcbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWUgPT09IFwidGFnc1wiICYmIHRoaXMuaW5Gcm9udG1hdHRlcikge1xuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldFRhZ3MoKSlcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih0ID0+IGxhc3RWYWx1ZSA/IHQuY29udGFpbnMobGFzdFZhbHVlKSA6IHQpXG4gICAgICAgICAgICAgICAgICAgIC5zb3J0KClcbiAgICAgICAgICAgICAgICAgICAgLm1hcCh0YWcgPT4gT2JqZWN0KHsgdmFsdWU6IHRhZy5yZXBsYWNlKC9eIy8sIFwiXCIpIH0pKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9pZiB0aGlzIG5vdGUgaGFzIGEgZmlsZUNsYXNzLCBjaGVjayBpZiBmaWVsZCBvcHRpb25zIGFyZSBkZWZpbmVkIGluIHRoZSBGaWxlQ2xhc3NcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Q2FjaGUoY29udGV4dC5maWxlLnBhdGgpO1xuICAgICAgICAgICAgbGV0IHRyeVdpdGhQcmVzZXRGaWVsZCA9ICFjYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAoY2FjaGU/LmZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBwb3NpdGlvbiwgLi4uYXR0cmlidXRlcyB9ID0gY2FjaGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUNsYXNzQWxpYXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlQ2xhc3NBbGlhcztcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoYXR0cmlidXRlcykuY29udGFpbnMoZmlsZUNsYXNzQWxpYXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVDbGFzc1ZhbHVlID0gYXR0cmlidXRlc1tmaWxlQ2xhc3NBbGlhc107XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ2xhc3MgPSBhd2FpdCBjcmVhdGVGaWxlQ2xhc3ModGhpcy5wbHVnaW4sIGZpbGVDbGFzc1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZUNsYXNzID0gZmlsZUNsYXNzO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUNsYXNzQXR0cmlidXRlcyA9IHRoaXMuZmlsZUNsYXNzLmF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZUNsYXNzQXR0cmlidXRlcy5tYXAoYXR0ciA9PiBhdHRyLm5hbWUpLmNvbnRhaW5zKGZpZWxkTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZCA9IGZpbGVDbGFzc0F0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoYXR0ciA9PiBhdHRyLm5hbWUgPT0gZmllbGROYW1lKSEuZ2V0RmllbGQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChbRmllbGRUeXBlLkN5Y2xlLCBGaWVsZFR5cGUuTXVsdGksIEZpZWxkVHlwZS5TZWxlY3RdLmNvbnRhaW5zKGZpZWxkLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkT3B0aW9ucyA9IEFycmF5LmlzQXJyYXkoZmllbGQub3B0aW9ucykgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQub3B0aW9ucy5maWx0ZXIob3B0aW9uID0+IHRoaXMuZmlsdGVyT3B0aW9uKGZpcnN0VmFsdWVzLCBsYXN0VmFsdWUsIG9wdGlvbikpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGZpZWxkLm9wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChrID0+IGZpZWxkLm9wdGlvbnNba10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihvcHRpb24gPT4gdGhpcy5maWx0ZXJPcHRpb24oZmlyc3RWYWx1ZXMsIGxhc3RWYWx1ZSwgb3B0aW9uKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcmVkT3B0aW9ucy5tYXAob3B0aW9uID0+IE9iamVjdCh7IHZhbHVlOiBvcHRpb24gfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGQudHlwZSA9PT0gRmllbGRUeXBlLkZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRNYW5hZ2VyOiBGaWxlRmllbGQgPSBuZXcgRmllbGRNYW5hZ2VyW2ZpZWxkLnR5cGVdKGZpZWxkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlcyA9IGZpZWxkTWFuYWdlci5nZXRGaWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGYgPT4gZi5iYXNlbmFtZS5pbmNsdWRlcyhsYXN0VmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZiA9PiBPYmplY3QoeyB2YWx1ZTogRmlsZUZpZWxkLmJ1aWxkTWFya0Rvd25MaW5rKGFwcCwgY29udGV4dC5maWxlLCBmLmJhc2VuYW1lKSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGYgPT4gT2JqZWN0KHsgdmFsdWU6IEZpbGVGaWVsZC5idWlsZE1hcmtEb3duTGluayhhcHAsIGNvbnRleHQuZmlsZSwgZi5iYXNlbmFtZSkgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5V2l0aFByZXNldEZpZWxkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnlXaXRoUHJlc2V0RmllbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRyeVdpdGhQcmVzZXRGaWVsZCkge1xuICAgICAgICAgICAgICAgIC8vZWxzZSBjaGVjayBpZiB0aGVyZSBhcmUgZ2xvYmFsIHByZXNldCB2b3B0aW9zYWx1ZXNcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZXRGaWVsZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByZXNldEZpZWxkcy5maW5kKGZpZWxkID0+IGZpZWxkLm5hbWUgPT0gZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAocHJlc2V0RmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFtGaWVsZFR5cGUuQ3ljbGUsIEZpZWxkVHlwZS5NdWx0aSwgRmllbGRUeXBlLlNlbGVjdF0uY29udGFpbnMocHJlc2V0RmllbGQudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmVzZXRGaWVsZC52YWx1ZXNMaXN0Tm90ZVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL292ZXJyaWRlIHByZXNldFZhbHVlcyBpZiB0aGVyZSBpcyBhIHZhbHVlc0xpc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXNGaWxlID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwcmVzZXRGaWVsZC52YWx1ZXNMaXN0Tm90ZVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZXNGaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgdmFsdWVzRmlsZS5leHRlbnNpb24gPT0gXCJtZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlczogeyB2YWx1ZTogc3RyaW5nIH1bXSA9IGF3YWl0IChhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZCh2YWx1ZXNGaWxlKSkuc3BsaXQoXCJcXG5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIob3B0aW9uID0+IHRoaXMuZmlsdGVyT3B0aW9uKGZpcnN0VmFsdWVzLCBsYXN0VmFsdWUsIG9wdGlvbikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKF92YWx1ZSA9PiBPYmplY3QoeyB2YWx1ZTogX3ZhbHVlIH0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmVudHJpZXMocHJlc2V0RmllbGQub3B0aW9ucykubWFwKG9wdGlvbiA9PiBvcHRpb25bMV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihvcHRpb24gPT4gdGhpcy5maWx0ZXJPcHRpb24oZmlyc3RWYWx1ZXMsIGxhc3RWYWx1ZSwgb3B0aW9uKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKF92YWx1ZSA9PiBPYmplY3QoeyB2YWx1ZTogX3ZhbHVlIH0pKVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJlc2V0RmllbGQudHlwZSA9PT0gRmllbGRUeXBlLkZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkTWFuYWdlcjogRmlsZUZpZWxkID0gbmV3IEZpZWxkTWFuYWdlcltwcmVzZXRGaWVsZC50eXBlXShwcmVzZXRGaWVsZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZmllbGRNYW5hZ2VyLmdldEZpbGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZiA9PiBmLmJhc2VuYW1lLmluY2x1ZGVzKGxhc3RWYWx1ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZiA9PiBPYmplY3QoeyB2YWx1ZTogRmlsZUZpZWxkLmJ1aWxkTWFya0Rvd25MaW5rKGFwcCwgY29udGV4dC5maWxlLCBmLmJhc2VuYW1lKSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGYgPT4gT2JqZWN0KHsgdmFsdWU6IEZpbGVGaWVsZC5idWlsZE1hcmtEb3duTGluayhhcHAsIGNvbnRleHQuZmlsZSwgZi5iYXNlbmFtZSkgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH07XG5cbiAgICByZW5kZXJTdWdnZXN0aW9uKHN1Z2dlc3Rpb246IElWYWx1ZUNvbXBsZXRpb24sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBlbC5zZXRUZXh0KHN1Z2dlc3Rpb24udmFsdWUpO1xuICAgIH07XG5cbiAgICBzZWxlY3RTdWdnZXN0aW9uKHN1Z2dlc3Rpb246IElWYWx1ZUNvbXBsZXRpb24sIGV2ZW50OiBLZXlib2FyZEV2ZW50IHwgTW91c2VFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKCFhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgICAgICBjb25zdCBhY3RpdmVMaW5lID0gZWRpdG9yLmdldExpbmUodGhpcy5jb250ZXh0IS5zdGFydC5saW5lKTtcblxuICAgICAgICBpZiAodGhpcy5pbkZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAvL2Zvcm1hdCBsaXN0IGlmIGluIGZyb250bWF0dGVyXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZWRGaWVsZDogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10gfCBudWxsPiA9IHBhcnNlWWFtbChhY3RpdmVMaW5lKVxuICAgICAgICAgICAgICAgIGxldCBbYXR0ciwgcGFzdFZhbHVlc10gPSBPYmplY3QuZW50cmllcyhwYXJzZWRGaWVsZClbMF1cbiAgICAgICAgICAgICAgICBsZXQgbmV3RmllbGQ6IHN0cmluZ1xuICAgICAgICAgICAgICAgIGlmICghcGFzdFZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICBuZXdGaWVsZCA9IGF0dHIgKyBcIjogXCIgKyBzdWdnZXN0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhc3RWYWx1ZXMgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXN0VmFsdWVzLmNvbnRhaW5zKFwiLFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBhdHRyICsgXCI6IFwiICsgc3VnZ2VzdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ZpZWxkID0gYXR0ciArIFwiOiBbXCIgKyBwYXN0VmFsdWVzLnNwbGl0KFwiLFwiKS5tYXAobyA9PiBvLnRyaW0oKSkuc2xpY2UoMCwgLTEpLmpvaW4oJywgJykgKyBcIiwgXCIgKyBzdWdnZXN0aW9uLnZhbHVlICsgXCJdXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkocGFzdFZhbHVlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUxpbmUuZW5kc1dpdGgoXCIsXVwiKSB8fCBhY3RpdmVMaW5lLmVuZHNXaXRoKFwiLCBdXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhbHVlIGNhbiBiZSBkaXJlY3RseSBhZGRlZCBzaW5jZSBwYXJzZVlhbWwgd29udCBjcmVhdGUgYW4gZW1wdHkgbGFzdCBpdGVtIGluIHBhc3RWYWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ZpZWxkID0gYXR0ciArIFwiOiBbXCIgKyBbLi4ucGFzdFZhbHVlcywgc3VnZ2VzdGlvbi52YWx1ZV0uam9pbihcIiwgXCIpICsgXCJdXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3dlIGhhdmUgdHlwZWQgc29tZXRoaW5nIHRoYXQgd2UgYWh2ZSB0byByZW1vdmUgdG8gcmVwbGFjZSB3aXRoIHNlbGVjdGVkIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdGaWVsZCA9IGF0dHIgKyBcIjogW1wiICsgWy4uLnBhc3RWYWx1ZXMuc2xpY2UoMCwgLTEpLCBzdWdnZXN0aW9uLnZhbHVlXS5qb2luKFwiLCBcIikgKyBcIl1cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBhdHRyICsgXCI6IFtcIiArIFsuLi5wYXN0VmFsdWVzXS5qb2luKFwiLCBcIikgKyBcIl1cIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShuZXdGaWVsZCwgeyBsaW5lOiB0aGlzLmNvbnRleHQhLnN0YXJ0LmxpbmUsIGNoOiAwIH0sIHsgbGluZTogdGhpcy5jb250ZXh0IS5zdGFydC5saW5lLCBjaDogYWN0aXZlTGluZS5sZW5ndGggfSk7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFzdFZhbHVlcykgfHwgdHlwZW9mIHBhc3RWYWx1ZXMgPT09ICdzdHJpbmcnICYmIHBhc3RWYWx1ZXMuY29udGFpbnMoXCIsXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiB0aGlzLmNvbnRleHQhLnN0YXJ0LmxpbmUsIGNoOiBuZXdGaWVsZC5sZW5ndGggLSAxIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IHRoaXMuY29udGV4dCEuc3RhcnQubGluZSwgY2g6IG5ld0ZpZWxkLmxlbmd0aCB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkZyb250bWF0dGVyIHdyb25nbHkgZm9ybWF0dGVkXCIsIDIwMDApXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbkZ1bGxMaW5lKSB7XG4gICAgICAgICAgICBsZXQgY2xlYW5lZExpbmUgPSBhY3RpdmVMaW5lXG4gICAgICAgICAgICB3aGlsZSAoIVsnLCcsICc6J10uY29udGFpbnMoY2xlYW5lZExpbmUuY2hhckF0KGNsZWFuZWRMaW5lLmxlbmd0aCAtIDEpKSkge1xuICAgICAgICAgICAgICAgIGNsZWFuZWRMaW5lID0gY2xlYW5lZExpbmUuc2xpY2UoMCwgLTEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGAke2NsZWFuZWRMaW5lfSR7ZXZlbnQuc2hpZnRLZXkgPyBcIiBcIiA6IFwiXCJ9YCArIHN1Z2dlc3Rpb24udmFsdWUsXG4gICAgICAgICAgICAgICAgeyBsaW5lOiB0aGlzLmNvbnRleHQhLnN0YXJ0LmxpbmUsIGNoOiAwIH0sIHRoaXMuY29udGV4dCEuZW5kKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmluU2VudGVuY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jb250ZXh0Py5lZGl0b3IuZ2V0Q3Vyc29yKCkuY2ggfHwgMFxuICAgICAgICAgICAgbGV0IGJlZm9yZUN1cnNvciA9IGFjdGl2ZUxpbmUuc2xpY2UoMCwgcG9zaXRpb24pXG4gICAgICAgICAgICBsZXQgYWZ0ZXJDdXJzb3IgPSBhY3RpdmVMaW5lLnNsaWNlKHBvc2l0aW9uKVxuICAgICAgICAgICAgbGV0IHNlcGFyYXRvclBvcyA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZUxlbmd0aCA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoIWJlZm9yZUN1cnNvci5lbmRzV2l0aChcIjo6XCIpICYmICFiZWZvcmVDdXJzb3IuZW5kc1dpdGgoXCIsXCIpICYmIGJlZm9yZUN1cnNvci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBzZXBhcmF0b3JQb3MgPSBzZXBhcmF0b3JQb3MgLSAxO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZUxlbmd0aCA9IGN1cnJlbnRWYWx1ZUxlbmd0aCArIDFcbiAgICAgICAgICAgICAgICBiZWZvcmVDdXJzb3IgPSBiZWZvcmVDdXJzb3Iuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5leHRCcmFja2V0UG9zID0gcG9zaXRpb247XG4gICAgICAgICAgICB3aGlsZSAoIWVuY29kZUxpbmsoYWZ0ZXJDdXJzb3IpLm1hdGNoKFwiKFxcXFxdfFxcXFwpKS4qXCIpICYmIGFmdGVyQ3Vyc29yLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG5leHRCcmFja2V0UG9zID0gbmV4dEJyYWNrZXRQb3MgKyAxO1xuICAgICAgICAgICAgICAgIGFmdGVyQ3Vyc29yID0gYWZ0ZXJDdXJzb3Iuc2xpY2UobmV4dEJyYWNrZXRQb3MgLSBwb3NpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb24udmFsdWUsXG4gICAgICAgICAgICAgICAgeyBsaW5lOiB0aGlzLmNvbnRleHQhLnN0YXJ0LmxpbmUsIGNoOiBzZXBhcmF0b3JQb3MgfSxcbiAgICAgICAgICAgICAgICB7IGxpbmU6IHRoaXMuY29udGV4dCEuc3RhcnQubGluZSwgY2g6IG5leHRCcmFja2V0UG9zIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IoeyBsaW5lOiB0aGlzLmNvbnRleHQhLnN0YXJ0LmxpbmUsIGNoOiBuZXh0QnJhY2tldFBvcyAtIGN1cnJlbnRWYWx1ZUxlbmd0aCArIHN1Z2dlc3Rpb24udmFsdWUubGVuZ3RoIH0pXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaWRTZWxlY3QgPSB0cnVlXG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH07XG59OyIsICJpbXBvcnQgTWV0YWRhdGFNZW51IGZyb20gXCJtYWluXCJcbmltcG9ydCBGaWVsZCBmcm9tIFwiLi4vZmllbGRzL0ZpZWxkXCJcbmltcG9ydCB7IEZpZWxkVHlwZSB9IGZyb20gXCJzcmMvdHlwZXMvZmllbGRUeXBlc1wiXG5cbmludGVyZmFjZSBPbGRGaWVsZCBleHRlbmRzIEZpZWxkIHtcbiAgICBpc011bHRpPzogYm9vbGVhbixcbiAgICBpc0N5Y2xlPzogYm9vbGVhbixcbiAgICBpc0Jvb2xlYW4/OiBib29sZWFuLFxuICAgIHZhbHVlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbn1cblxuZXhwb3J0IGNvbnN0IG1pZ3JhdGVTZXR0aW5nc1YxdG9WMiA9IGFzeW5jIChwbHVnaW46IE1ldGFkYXRhTWVudSkgPT4ge1xuICAgIGNvbnN0IHByZXNldEZpZWxkcyA9IHBsdWdpbi5zZXR0aW5ncy5wcmVzZXRGaWVsZHNcbiAgICBwcmVzZXRGaWVsZHMuZm9yRWFjaCgocDogT2xkRmllbGQpID0+IHtcbiAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhwKS5jb250YWlucyhcInR5cGVcIikpIHtcbiAgICAgICAgICAgIGlmIChwLmlzTXVsdGkpIHAudHlwZSA9IEZpZWxkVHlwZS5NdWx0aVxuICAgICAgICAgICAgZWxzZSBpZiAocC5pc0N5Y2xlKSBwLnR5cGUgPSBGaWVsZFR5cGUuQ3ljbGVcbiAgICAgICAgICAgIGVsc2UgaWYgKHAuaXNCb29sZWFuKSBwLnR5cGUgPSBGaWVsZFR5cGUuQm9vbGVhblxuICAgICAgICAgICAgZWxzZSBpZiAocC5vcHRpb25zICYmIE9iamVjdC5rZXlzKHAub3B0aW9ucykubGVuZ3RoID4gMCkgcC50eXBlID0gRmllbGRUeXBlLlNlbGVjdFxuICAgICAgICAgICAgZWxzZSBwLnR5cGUgPSBGaWVsZFR5cGUuSW5wdXRcbiAgICAgICAgfVxuICAgICAgICAvL2VyYXNlIGlzTXVsdGksIGlzQ3ljbGUsIGlzQm9vbGVhbiBpZiBleGlzdHNcbiAgICAgICAgZGVsZXRlIHAuaXNNdWx0aTtcbiAgICAgICAgZGVsZXRlIHAuaXNDeWNsZTtcbiAgICAgICAgZGVsZXRlIHAuaXNCb29sZWFuXG4gICAgICAgIC8vcmVuYW1lIFwidmFsdWVzXCIgaW4gXCJvcHRpb25cIlxuICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwLCBcInZhbHVlc1wiKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocCwgXCJvcHRpb25zXCIsXG4gICAgICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihwLCBcInZhbHVlc1wiKSEpO1xuICAgICAgICAgICAgZGVsZXRlIHBbXCJ2YWx1ZXNcIl07XG4gICAgICAgIH1cbiAgICB9KVxuICAgIHBsdWdpbi5zZXR0aW5ncy5zZXR0aW5nc1ZlcnNpb24gPSAyXG4gICAgYXdhaXQgcGx1Z2luLnNhdmVEYXRhKHBsdWdpbi5zZXR0aW5ncylcbiAgICBjb25zb2xlLmxvZyhcIk1ldGFkYXRhIG1lbnUgc2V0dGluZ3MgbWlncmF0ZWRcIilcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHdCQUFxQzs7O0FDQXJDLHdCQUFtSDs7O0FDQ25ILHdCQUF3STs7O0FDRHhJLHVCQUFnRDs7O0FDQWhELHNCQUEyQjs7O0FDQXBCLElBQU0sa0JBQWtCLENBQUMsVUFBVSxjQUFjLGFBQWEsWUFBWSx5QkFBeUIsd0JBQXdCLFFBQVE7QUFFbkksSUFBTSxvQkFBb0I7QUFFMUIsSUFBTSxtQkFBbUIsQ0FBQyxjQUFzQix1REFBdUQ7QUFFdkcsSUFBTSxnQkFBZ0IsSUFBSSxPQUFPLElBQUksdUNBQXdDLEdBQUc7QUFHaEYsSUFBTSwwQkFBMEIsSUFBSSxPQUFPLE1BQU0sK0NBQWdELElBQUk7QUFDckcsSUFBTSxxQkFBcUIsSUFBSSxPQUFPLE1BQU0sK0NBQWdELElBQUk7QUFFaEcsSUFBTSxhQUFhLENBQUMsVUFBMEI7QUFFakQsU0FBTyxRQUFRLE1BQ1YsUUFBUSxTQUFTLG9CQUFNLEVBQ3ZCLFFBQVEsU0FBUyxvQkFBTSxJQUFJO0FBQ3BDO0FBRU8sSUFBTSxhQUFhLENBQUMsVUFBMEI7QUFFakQsU0FBTyxRQUFRLE1BQ1YsUUFBUSxVQUFVLElBQUksRUFDdEIsUUFBUSxVQUFVLElBQUksSUFB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QUFJLGNBQU07QUFDM0IsZUFBTyxPQUFPLFVBQVUsSUFBSTtBQUM1QixhQUFLLGtCQUFrQixLQUFLLFFBQVE7QUFBQSxNQUNyQyxDQUFDO0FBQ0QsV0FBSyxjQUFjLElBQUksdUJBQXVCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFFN0QsV0FBSyxzQkFBc0IsSUFBSSxhQUFhLEtBQUssS0FBSyxJQUFJLENBQUM7QUFDM0QsV0FBSyxNQUFNLElBQUksZ0JBQWdCLElBQUksRUFBRSxLQUFLO0FBRTFDLFdBQUssV0FBVztBQUFBLFFBQ2YsSUFBSTtBQUFBLFFBQ0osTUFBTTtBQUFBLFFBQ04sZUFBZSxDQUFDLGFBQXNCO0FBQ3JDLGdCQUFNLE9BQU8sS0FBSyxJQUFJLFVBQVUsb0JBQW9CLDhCQUFZO0FBQ2hFLGNBQUksVUFBVTtBQUNiLG1CQUFPLENBQUMsQ0FBRSw4QkFBTTtBQUFBLFVBQ2pCO0FBQ0EsZ0JBQU0scUJBQXFCLElBQUksd0JBQXdCLEtBQUssS0FBSyxNQUFNLEtBQU0sSUFBSTtBQUNqRiw2QkFBbUIsS0FBSztBQUFBLFFBQ3pCO0FBQUEsTUFDRCxDQUFDO0FBR0QsV0FBSyxXQUFXO0FBQUEsUUFDZixJQUFJO0FBQUEsUUFDSixNQUFNO0FBQUEsUUFDTixlQUFlLENBQUMsYUFBc0I7QUFDckMsZ0JBQU0sT0FBTyxLQUFLLElBQUksVUFBVSxvQkFBb0IsOEJBQVk7QUFDaEUsY0FBSSxVQUFVO0FBQ2IsbUJBQU8sQ0FBQyxDQUFFLDhCQUFNLFNBQVMsR0FBRyxLQUFLLEtBQUssT0FBTyxXQUFXLEtBQUssU0FBUztBQUFBLFVBQ3ZFO0FBQ0EsZ0JBQU0sUUFBUSxJQUFJLDhCQUE4QixNQUFNLEtBQU0sSUFBSTtBQUNoRSxnQkFBTSxLQUFLO0FBQUEsUUFDWjtBQUFBLE1BQ0QsQ0FBQztBQUVELFVBQUksZ0JBQWdCLElBQUk7QUFBQSxJQUN6QjtBQUFBO0FBQUEsRUFFQSxXQUFXO0FBQ1YsWUFBUSxJQUFJLHdCQUF3QjtBQUFBLEVBQ3JDO0FBQUEsRUFFQSxBQUFNLGVBQWU7QUFBQTtBQUNwQixXQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLElBQzFFO0FBQUE7QUFBQSxFQUVBLEFBQU0sZUFBZTtBQUFBO0FBQ3BCLFdBQUssU0FBUyxlQUFlLEtBQUs7QUFDbEMsWUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsSUFDbEM7QUFBQTtBQUNEOyIsCiAgIm5hbWVzIjogW10KfQo=
