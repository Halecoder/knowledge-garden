/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/obsidian-dataview/lib/index.js
var require_lib = __commonJS({
  "node_modules/obsidian-dataview/lib/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    require("obsidian");
    var getAPI3 = (app) => {
      var _a;
      if (app)
        return (_a = app.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
      else
        return window.DataviewAPI;
    };
    var isPluginEnabled = (app) => app.plugins.enabledPlugins.has("dataview");
    exports.getAPI = getAPI3;
    exports.isPluginEnabled = isPluginEnabled;
  }
});

// main.ts
__export(exports, {
  default: () => FileCookerPlugin
});
var import_obsidian12 = __toModule(require("obsidian"));

// src/modal/move-modal.ts
var import_obsidian3 = __toModule(require("obsidian"));

// src/action/move-action.ts
var import_obsidian2 = __toModule(require("obsidian"));

// src/modal/confirm-modal.ts
var import_obsidian = __toModule(require("obsidian"));
var ConfirmModal = class extends import_obsidian.Modal {
  constructor(app, moveInfos) {
    super(app);
    this.moveInfos = moveInfos;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Confirm Move?" });
    this.moveInfos.forEach((info) => {
      contentEl.createEl("div", { text: info.sourceFile.path + " -> " + info.targetDir + "/" + info.sourceFile.name });
    });
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => __async(this, null, function* () {
      this.close();
      for (const key in this.moveInfos) {
        let info = this.moveInfos[key];
        yield this.app.fileManager.renameFile(info.sourceFile, info.targetDir + "/" + info.sourceFile.name);
      }
      new import_obsidian.Notice("Move Success!");
    }))).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
      this.close();
      new import_obsidian.Notice("Move Canceled!");
    }));
  }
};

// src/action/move-action.ts
var MoveAction = class {
  constructor(app, targetPath) {
    this.app = app;
    this.targetPath = targetPath;
  }
  act(resultArr) {
    const moveInfos = [];
    if (resultArr.length > 0) {
      resultArr.forEach((ff) => {
        moveInfos.push({
          sourceFile: ff,
          targetDir: this.targetPath
        });
      });
      new ConfirmModal(this.app, moveInfos).open();
    } else {
      new import_obsidian2.Notice("No Files Found!");
    }
  }
};

// src/modal/move-modal.ts
var MoveModal = class extends import_obsidian3.SuggestModal {
  constructor(app, readable) {
    super(app);
    this.readable = readable;
  }
  getSuggestions(query) {
    const abstractFiles = this.app.vault.getAllLoadedFiles();
    const folders = [];
    const lowerCaseInputStr = query.toLowerCase();
    abstractFiles.forEach((folder) => {
      if (folder instanceof import_obsidian3.TFolder && folder.path.toLowerCase().contains(lowerCaseInputStr)) {
        folders.push(folder);
      }
    });
    return folders;
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path });
  }
  onChooseSuggestion(folder, evt) {
    let action = new MoveAction(this.app, folder.path);
    this.readable.read(action);
  }
};

// src/reader/clipboard-reader.ts
var import_obsidian4 = __toModule(require("obsidian"));

// src/reader/read-info.ts
var ReadInfo = class {
  constructor(limit = 300) {
    this.limit = limit;
    this.resultArr = [];
  }
  add(file) {
    if (this.resultArr.length >= this.limit) {
      throw new Error("Load more than " + this.limit + " files!");
    }
    this.resultArr.push(file);
  }
  getFiles() {
    return this.resultArr;
  }
};

// src/reader/clipboard-reader.ts
var ClipboardReader = class {
  constructor(app) {
    this.app = app;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let promiseStr = navigator.clipboard.readText();
    promiseStr.then((str) => {
      let lines = str.split("\n");
      try {
        lines.forEach((line) => {
          let f = line;
          if (f.startsWith("[[")) {
            f = f.substring(2, f.length);
          }
          if (f.endsWith("]]")) {
            f = f.substring(0, f.length - 2);
          }
          if (!f.endsWith(".md") && !f.endsWith(".MD") && !f.endsWith(".Md") && !f.endsWith(".mD")) {
            f = f + ".md";
          }
          let ff = this.app.vault.getAbstractFileByPath(f);
          if (ff != null) {
            readInfo.add(ff);
          }
        });
        action.act(readInfo.getFiles());
      } catch (e) {
        new import_obsidian4.Notice(e.message);
      }
    }).catch((e) => {
      new import_obsidian4.Notice("Clipboard Content Error!" + e);
    });
  }
};

// src/action/delete-action.ts
var import_obsidian6 = __toModule(require("obsidian"));

// src/modal/delete-confirm-modal.ts
var import_obsidian5 = __toModule(require("obsidian"));
var DeleteConfirmModal = class extends import_obsidian5.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    return __async(this, null, function* () {
      const { contentEl } = this;
      contentEl.createEl("h1", { text: "Confirm Delete?" });
      if (this.resultArr.length == 0) {
        contentEl.createEl("div", { text: "No files found!" });
        new import_obsidian5.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
          this.close();
        }));
      } else {
        this.resultArr.forEach((info) => {
          contentEl.createEl("div", { text: info.path });
        });
        new import_obsidian5.Setting(contentEl).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => {
          this.close();
          this.resultArr.forEach((info) => {
            this.app.vault.trash(info, true);
          });
          new import_obsidian5.Notice("Delete Success!");
        })).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
          this.close();
          new import_obsidian5.Notice("Delete Canceled!");
        }));
      }
    });
  }
};

// src/action/delete-action.ts
var DeleteAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      new DeleteConfirmModal(this.app, resultArr).open();
    } else {
      new import_obsidian6.Notice("No Files Found!");
    }
  }
};

// src/reader/current-file-reader.ts
var import_obsidian7 = __toModule(require("obsidian"));
var CurrentFileReader = class {
  constructor(app) {
    this.app = app;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let currentFile = this.app.workspace.getActiveFile();
    if (currentFile == null) {
      new import_obsidian7.Notice("No active file!");
      return;
    }
    let currentFilePath = currentFile.path;
    let linkObj = this.app.metadataCache.resolvedLinks[currentFilePath];
    try {
      for (let key in linkObj) {
        let ff = this.app.vault.getAbstractFileByPath(key);
        if (ff != null) {
          readInfo.add(ff);
        }
      }
      action.act(readInfo.getFiles());
    } catch (e) {
      new import_obsidian7.Notice(e.message);
    }
  }
};

// src/reader/dataview-reader.ts
var import_obsidian8 = __toModule(require("obsidian"));
var import_obsidian_dataview = __toModule(require_lib());
var DataviewReader = class {
  constructor(app, queryStr) {
    this.app = app;
    this.queryStr = queryStr;
  }
  read(action) {
    let readInfo = new ReadInfo();
    let api = (0, import_obsidian_dataview.getAPI)();
    let qStr = formatStr(this.queryStr);
    api.query(qStr).then((res) => {
      if (res.successful) {
        let filePaths = [];
        if (res.value.type == "list") {
          res.value.values.forEach((it) => {
            filePaths.push(it.path);
          });
        } else if (res.value.type == "table") {
          filePaths = res.value.values;
          res.value.values.forEach((it) => {
            it.forEach((innerIt) => {
              if (innerIt && innerIt.path) {
                filePaths.push(innerIt.path);
                return;
              }
            });
          });
        } else {
          res.value.values.forEach((it) => {
            filePaths.push(it.link.path);
          });
        }
        try {
          filePaths.forEach((filePath) => {
            let ff = this.app.vault.getAbstractFileByPath(filePath.toString());
            if (ff != null) {
              readInfo.add(ff);
            }
          });
          action.act(readInfo.getFiles());
        } catch (e) {
          new import_obsidian8.Notice(e.message);
        }
      } else {
        new import_obsidian8.Notice("Query string error![" + this.queryStr + "]");
      }
    });
  }
};
function formatStr(queryStr) {
  let str = queryStr.trimStart();
  let commandStr = str.substring(0, 4);
  if (commandStr.toUpperCase() == "LIST") {
    return "LIST" + str.substring(4, str.length);
  }
  if (commandStr.toUpperCase() == "TABL") {
    return "TABLE" + str.substring(5, str.length);
  }
  if (commandStr.toUpperCase() == "TASK") {
    return "TASK" + str.substring(4, str.length);
  }
  return queryStr;
}

// src/action/copy-action.ts
var import_obsidian9 = __toModule(require("obsidian"));
var CopyAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      let str = "";
      resultArr.forEach((ff) => {
        let name = ff.name;
        if (name.endsWith(".md")) {
          name = name.substring(0, name.lastIndexOf("."));
        }
        str += "[[" + ff.path + "|" + name + "]]\n";
      });
      navigator.clipboard.writeText(str);
      new import_obsidian9.Notice("Copy links success!");
    } else {
      new import_obsidian9.Notice("No Files Found!");
    }
  }
};

// main.ts
var import_obsidian_dataview2 = __toModule(require_lib());

// src/action/edit-front-matter-action.ts
var import_obsidian11 = __toModule(require("obsidian"));

// src/modal/edit-front-matter-modal.ts
var import_obsidian10 = __toModule(require("obsidian"));
var EditFrontMatterModal = class extends import_obsidian10.Modal {
  constructor(app, resultArr) {
    super(app);
    this.resultArr = resultArr;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: "Edit Front Matter" });
    if (this.resultArr.length == 0) {
      contentEl.createEl("div", { text: "No files found!" });
      new import_obsidian10.Setting(contentEl).addButton((btn) => btn.setButtonText("Close").setCta().onClick(() => {
        this.close();
      }));
    } else {
      this.resultArr.forEach((info) => {
        contentEl.createEl("div", { text: info.path });
      });
      new import_obsidian10.Setting(contentEl).addText((txt) => txt.setPlaceholder("Front Matter Key").onChange((val) => {
        this.key = val;
      })).addText((txt) => txt.setPlaceholder("Front Matter Value").onChange((val) => {
        this.val = val;
      })).addButton((btn) => btn.setButtonText("Confirm").setCta().onClick(() => {
        this.close();
        let api = this.app.plugins.plugins["metaedit"].api;
        this.resultArr.forEach((info) => __async(this, null, function* () {
          let val = yield api.getPropertyValue(this.key, info);
          if (val == null) {
            api.createYamlProperty(this.key, this.val, info);
          } else {
            api.update(this.key, this.val, info);
          }
        }));
        new import_obsidian10.Notice("Edit Success!");
      })).addButton((btn) => btn.setButtonText("Cancel").setCta().onClick(() => {
        this.close();
        new import_obsidian10.Notice("Edit Canceled!");
      }));
    }
  }
};

// src/action/edit-front-matter-action.ts
var EditFrontMatterAction = class {
  constructor(app) {
    this.app = app;
  }
  act(resultArr) {
    if (resultArr.length > 0) {
      new EditFrontMatterModal(this.app, resultArr).open();
    } else {
      new import_obsidian11.Notice("No Files Found!");
    }
  }
};

// main.ts
var FileCookerPlugin = class extends import_obsidian12.Plugin {
  onload() {
    return __async(this, null, function* () {
      let dataviewApi = (0, import_obsidian_dataview2.getAPI)();
      this.addCommand({
        id: "move-files-to",
        name: "Move files to ...",
        callback: () => {
          new MoveModal(this.app, new ClipboardReader(this.app)).open();
        }
      });
      this.addCommand({
        id: "move-links-to",
        name: "Move links in current file to ...",
        callback: () => {
          new MoveModal(this.app, new CurrentFileReader(this.app)).open();
        }
      });
      this.addCommand({
        id: "move-dataview-results-to",
        name: "Move dataview query results to ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new MoveModal(this.app, new DataviewReader(this.app, editor.getSelection())).open();
          }
          return dataviewApi != null;
        }
      });
      this.addCommand({
        id: "delete-files-in-clipboard",
        name: "Delete files in clipboard!",
        callback: () => {
          new ClipboardReader(this.app).read(new DeleteAction(this.app));
        }
      });
      this.addCommand({
        id: "delete-links-in-current-file",
        name: "Delete link-files in current file!",
        callback: () => {
          new CurrentFileReader(this.app).read(new DeleteAction(this.app));
        }
      });
      this.addCommand({
        id: "delete-dataview-results",
        name: "Delete dataview query results!",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new DataviewReader(this.app, editor.getSelection()).read(new DeleteAction(this.app));
          }
          return dataviewApi != null;
        }
      });
      this.addCommand({
        id: "copy-dataview-result-links",
        name: "Copy dataview result links!",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new DataviewReader(this.app, editor.getSelection()).read(new CopyAction(this.app));
          }
          return dataviewApi != null;
        }
      });
      let metaedit = this.app.plugins.plugins["metaedit"];
      this.addCommand({
        id: "edit-front-matter-in-clipboard-files",
        name: "Edit Front Matter in clipboard files ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new ClipboardReader(this.app).read(new EditFrontMatterAction(this.app));
          }
          return dataviewApi != null && metaedit != null;
        }
      });
      this.addCommand({
        id: "edit-front-matter-in-current-file-links",
        name: "Edit Front Matter in current file links ... ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new CurrentFileReader(this.app).read(new EditFrontMatterAction(this.app));
          }
          return dataviewApi != null && metaedit != null;
        }
      });
      this.addCommand({
        id: "edit-front-matter-in-dataview-results",
        name: "Edit Front Matter in dataview results ...",
        editorCheckCallback: (checking, editor, view) => {
          if (!checking) {
            new DataviewReader(this.app, editor.getSelection()).read(new EditFrontMatterAction(this.app));
          }
          return dataviewApi != null && metaedit != null;
        }
      });
    });
  }
  onunload() {
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhdGF2aWV3L3NyYy9pbmRleC50cyIsICJtYWluLnRzIiwgInNyYy9tb2RhbC9tb3ZlLW1vZGFsLnRzIiwgInNyYy9hY3Rpb24vbW92ZS1hY3Rpb24udHMiLCAic3JjL21vZGFsL2NvbmZpcm0tbW9kYWwudHMiLCAic3JjL3JlYWRlci9jbGlwYm9hcmQtcmVhZGVyLnRzIiwgInNyYy9yZWFkZXIvcmVhZC1pbmZvLnRzIiwgInNyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbi50cyIsICJzcmMvbW9kYWwvZGVsZXRlLWNvbmZpcm0tbW9kYWwudHMiLCAic3JjL3JlYWRlci9jdXJyZW50LWZpbGUtcmVhZGVyLnRzIiwgInNyYy9yZWFkZXIvZGF0YXZpZXctcmVhZGVyLnRzIiwgInNyYy9hY3Rpb24vY29weS1hY3Rpb24udHMiLCAic3JjL2FjdGlvbi9lZGl0LWZyb250LW1hdHRlci1hY3Rpb24udHMiLCAic3JjL21vZGFsL2VkaXQtZnJvbnQtbWF0dGVyLW1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBCYXNpYyBBUEkgdHlwZS5cbmV4cG9ydCB0eXBlIHsgRGF0YXZpZXdBcGkgfSBmcm9tIFwiYXBpL3BsdWdpbi1hcGlcIjtcblxuLy8gQ29yZSBEYXRhdmlldyB0eXBlcy5cbmV4cG9ydCB0eXBlIHsgRGF0ZVRpbWUsIER1cmF0aW9uIH0gZnJvbSBcImx1eG9uXCI7XG5leHBvcnQgdHlwZSB7XG4gICAgTGluayxcbiAgICBEYXRhT2JqZWN0LFxuICAgIExpdGVyYWxUeXBlLFxuICAgIExpdGVyYWwsXG4gICAgTGl0ZXJhbFJlcHIsXG4gICAgV3JhcHBlZExpdGVyYWwsXG4gICAgTGl0ZXJhbFdyYXBwZXIsXG4gICAgV2lkZ2V0LFxufSBmcm9tIFwiZGF0YS1tb2RlbC92YWx1ZVwiO1xuXG5leHBvcnQgdHlwZSB7IFJlc3VsdCwgU3VjY2VzcywgRmFpbHVyZSB9IGZyb20gXCJhcGkvcmVzdWx0XCI7XG5leHBvcnQgdHlwZSB7IERhdGFBcnJheSB9IGZyb20gXCJhcGkvZGF0YS1hcnJheVwiO1xuXG4vLyBEYXRhdmlldyBJbmRleC5cbmV4cG9ydCB0eXBlIHsgTGlzdEl0ZW0sIFBhZ2VNZXRhZGF0YSB9IGZyb20gXCJkYXRhLW1vZGVsL21hcmtkb3duXCI7XG5leHBvcnQgdHlwZSB7IEZ1bGxJbmRleCwgUHJlZml4SW5kZXgsIEluZGV4TWFwIH0gZnJvbSBcImRhdGEtaW5kZXgvaW5kZXhcIjtcblxuLy8gU2VyaWFsaXplZCB0eXBlcyB3aGljaCBkZXNjcmliZSBhbGwgb3V0cHV0cyBvZiBzZXJpYWxpemF0aW9uLlxuZXhwb3J0IHR5cGUgeyBTTWFya2Rvd25QYWdlLCBTTGlzdEVudHJ5LCBTVGFzayB9IGZyb20gXCJkYXRhLW1vZGVsL3NlcmlhbGl6ZWQvbWFya2Rvd25cIjtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIEltcGxlbWVudGF0aW9uIC8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5pbXBvcnQgdHlwZSB7IERhdGF2aWV3QXBpIH0gZnJvbSBcImFwaS9wbHVnaW4tYXBpXCI7XG5cbmltcG9ydCBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG4vLyBVdGlsaXR5IGZ1bmN0aW9ucy5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IERhdGF2aWV3IEFQSSBmcm9tIHRoZSBhcHAgaWYgcHJvdmlkZWQ7IGlmIG5vdCwgaXQgaXMgaW5mZXJyZWQgZnJvbSB0aGUgZ2xvYmFsIEFQSSBvYmplY3QgaW5zdGFsbGVkXG4gKiBvbiB0aGUgd2luZG93LlxuICovXG5leHBvcnQgY29uc3QgZ2V0QVBJID0gKGFwcD86IEFwcCk6IERhdGF2aWV3QXBpIHwgdW5kZWZpbmVkID0+IHtcbiAgICBpZiAoYXBwKSByZXR1cm4gYXBwLnBsdWdpbnMucGx1Z2lucy5kYXRhdmlldz8uYXBpO1xuICAgIGVsc2UgcmV0dXJuIHdpbmRvdy5EYXRhdmlld0FQSTtcbn07XG5cbi8qKiBEZXRlcm1pbmUgaWYgRGF0YXZpZXcgaXMgZW5hYmxlZCBpbiB0aGUgZ2l2ZW4gYXBwbGljYXRpb24uICovXG5leHBvcnQgY29uc3QgaXNQbHVnaW5FbmFibGVkID0gKGFwcDogQXBwKSA9PiBhcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoXCJkYXRhdmlld1wiKTtcbiIsICJpbXBvcnQgeyBQbHVnaW4sIEVkaXRvciwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTW92ZU1vZGFsIH0gZnJvbSAnc3JjL21vZGFsL21vdmUtbW9kYWwnO1xuaW1wb3J0IHsgQ2xpcGJvYXJkUmVhZGVyIH0gZnJvbSAnc3JjL3JlYWRlci9jbGlwYm9hcmQtcmVhZGVyJztcbmltcG9ydCB7IERlbGV0ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vZGVsZXRlLWFjdGlvbic7XG5pbXBvcnQgeyBDdXJyZW50RmlsZVJlYWRlciB9IGZyb20gJ3NyYy9yZWFkZXIvY3VycmVudC1maWxlLXJlYWRlcic7XG5pbXBvcnQgeyBEYXRhdmlld1JlYWRlciB9IGZyb20gJ3NyYy9yZWFkZXIvZGF0YXZpZXctcmVhZGVyJztcbmltcG9ydCB7IENvcHlBY3Rpb24gfSBmcm9tICdzcmMvYWN0aW9uL2NvcHktYWN0aW9uJztcbmltcG9ydCB7IGdldEFQSSB9IGZyb20gXCJvYnNpZGlhbi1kYXRhdmlld1wiO1xuaW1wb3J0IHsgRWRpdEZyb250TWF0dGVyQWN0aW9uIH0gZnJvbSAnc3JjL2FjdGlvbi9lZGl0LWZyb250LW1hdHRlci1hY3Rpb24nO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpbGVDb29rZXJQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHQvLyBjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oJ2NsaXBib2FyZC1saXN0JywgJ01vdmUgZmlsZXMgdG8gLi4uJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdC8vIFx0bmV3IE1vdmVNb2RhbCh0aGlzLmFwcCwgRlJPTV9DTElQQk9BUkQpLm9wZW4oKTtcblx0XHQvLyB9KTtcblx0XHQvLyByaWJib25JY29uRWwuYWRkQ2xhc3MoJ215LXBsdWdpbi1yaWJib24tY2xhc3MnKTtcblxuXHRcdGxldCBkYXRhdmlld0FwaSA9IGdldEFQSSgpO1xuXG5cdFx0Ly8gTW92ZSBGaWxlc1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ21vdmUtZmlsZXMtdG8nLFxuXHRcdFx0bmFtZTogJ01vdmUgZmlsZXMgdG8gLi4uJyxcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBNb3ZlTW9kYWwodGhpcy5hcHAsIG5ldyBDbGlwYm9hcmRSZWFkZXIodGhpcy5hcHApKS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwibW92ZS1saW5rcy10b1wiLFxuXHRcdFx0bmFtZTogXCJNb3ZlIGxpbmtzIGluIGN1cnJlbnQgZmlsZSB0byAuLi5cIixcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRcdG5ldyBNb3ZlTW9kYWwodGhpcy5hcHAsIG5ldyBDdXJyZW50RmlsZVJlYWRlcih0aGlzLmFwcCkpLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ21vdmUtZGF0YXZpZXctcmVzdWx0cy10bycsXG5cdFx0XHRuYW1lOiAnTW92ZSBkYXRhdmlldyBxdWVyeSByZXN1bHRzIHRvIC4uLicsXG5cdFx0XHRlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdG5ldyBNb3ZlTW9kYWwodGhpcy5hcHAsIG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLmFwcCwgZWRpdG9yLmdldFNlbGVjdGlvbigpKSkub3BlbigpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRGVsZXRlIEZpbGVzXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnZGVsZXRlLWZpbGVzLWluLWNsaXBib2FyZCcsXG5cdFx0XHRuYW1lOiAnRGVsZXRlIGZpbGVzIGluIGNsaXBib2FyZCEnLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bmV3IENsaXBib2FyZFJlYWRlcih0aGlzLmFwcCkucmVhZChuZXcgRGVsZXRlQWN0aW9uKHRoaXMuYXBwKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZGVsZXRlLWxpbmtzLWluLWN1cnJlbnQtZmlsZVwiLFxuXHRcdFx0bmFtZTogXCJEZWxldGUgbGluay1maWxlcyBpbiBjdXJyZW50IGZpbGUhXCIsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5hcHApLnJlYWQobmV3IERlbGV0ZUFjdGlvbih0aGlzLmFwcCkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnZGVsZXRlLWRhdGF2aWV3LXJlc3VsdHMnLFxuXHRcdFx0bmFtZTogJ0RlbGV0ZSBkYXRhdmlldyBxdWVyeSByZXN1bHRzIScsXG5cdFx0XHRlZGl0b3JDaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4sIGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0aWYgKCFjaGVja2luZykge1xuXHRcdFx0XHRcdG5ldyBEYXRhdmlld1JlYWRlcih0aGlzLmFwcCwgZWRpdG9yLmdldFNlbGVjdGlvbigpKS5yZWFkKG5ldyBEZWxldGVBY3Rpb24odGhpcy5hcHApKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIGNvcHkgZmlsZSBsaW5rc1xuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NvcHktZGF0YXZpZXctcmVzdWx0LWxpbmtzJyxcblx0XHRcdG5hbWU6ICdDb3B5IGRhdGF2aWV3IHJlc3VsdCBsaW5rcyEnLFxuXHRcdFx0ZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5hcHAsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgQ29weUFjdGlvbih0aGlzLmFwcCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRWRpdCBGcm9udCBNYXR0ZXIgXG5cdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2xpanl6ZS9vYnNpZGlhbi1zdGF0ZS1zd2l0Y2hlci9ibG9iL2QwYTgwMDgxYjBmY2MxYjg5OWVlZDJlM2Q3ZTgzNGMyZDU3MDM4NzUvc3JjL3V0aWwudHMjTDQyXG5cdFx0bGV0IG1ldGFlZGl0ID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1wibWV0YWVkaXRcIl07XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdlZGl0LWZyb250LW1hdHRlci1pbi1jbGlwYm9hcmQtZmlsZXMnLFxuXHRcdFx0bmFtZTogJ0VkaXQgRnJvbnQgTWF0dGVyIGluIGNsaXBib2FyZCBmaWxlcyAuLi4nLFxuXHRcdFx0ZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRuZXcgQ2xpcGJvYXJkUmVhZGVyKHRoaXMuYXBwKS5yZWFkKG5ldyBFZGl0RnJvbnRNYXR0ZXJBY3Rpb24odGhpcy5hcHApKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZGF0YXZpZXdBcGkgIT0gbnVsbCAmJiBtZXRhZWRpdCAhPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcImVkaXQtZnJvbnQtbWF0dGVyLWluLWN1cnJlbnQtZmlsZS1saW5rc1wiLFxuXHRcdFx0bmFtZTogXCJFZGl0IEZyb250IE1hdHRlciBpbiBjdXJyZW50IGZpbGUgbGlua3MgLi4uIC4uLlwiLFxuXHRcdFx0ZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRuZXcgQ3VycmVudEZpbGVSZWFkZXIodGhpcy5hcHApLnJlYWQobmV3IEVkaXRGcm9udE1hdHRlckFjdGlvbih0aGlzLmFwcCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBkYXRhdmlld0FwaSAhPSBudWxsICYmIG1ldGFlZGl0ICE9IG51bGw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6IFwiZWRpdC1mcm9udC1tYXR0ZXItaW4tZGF0YXZpZXctcmVzdWx0c1wiLFxuXHRcdFx0bmFtZTogXCJFZGl0IEZyb250IE1hdHRlciBpbiBkYXRhdmlldyByZXN1bHRzIC4uLlwiLFxuXHRcdFx0ZWRpdG9yQ2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuLCBlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRuZXcgRGF0YXZpZXdSZWFkZXIodGhpcy5hcHAsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSkucmVhZChuZXcgRWRpdEZyb250TWF0dGVyQWN0aW9uKHRoaXMuYXBwKSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGRhdGF2aWV3QXBpICE9IG51bGwgJiYgbWV0YWVkaXQgIT0gbnVsbDtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIHRvZG8gbWVyZ2UgbXVsdGkgZmlsZVxuXHRcdC8vIHRvZG8gZGVhbCB0YWdzXG5cdFx0Ly8gdG9kbyBkZWFsIHlhbWxcblx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZWRpdFwiXS5hcGkpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgU3VnZ2VzdE1vZGFsLCBUQWJzdHJhY3RGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRlJPTV9DTElQQk9BUkQsIEZST01fQ1VSUkVOVF9GSUxFIH0gZnJvbSAnc3JjL21vZGFsL21vdmUtaW5mbyc7XG5pbXBvcnQgeyBDbGlwYm9hcmRSZWFkZXIgfSBmcm9tICdzcmMvcmVhZGVyL2NsaXBib2FyZC1yZWFkZXInO1xuaW1wb3J0IHsgTW92ZUFjdGlvbiB9IGZyb20gJ3NyYy9hY3Rpb24vbW92ZS1hY3Rpb24nO1xuaW1wb3J0IHsgQ3VycmVudEZpbGVSZWFkZXIgfSBmcm9tICdzcmMvcmVhZGVyL2N1cnJlbnQtZmlsZS1yZWFkZXInO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tICdzcmMvcmVhZGVyL3JlYWRhYmxlJztcblxuLyoqXG4gKiBcdTkwMDlcdTYyRTlcdTc2RUVcdTVGNTVcdTVGMzlcdTdBOTdcbiAqL1xuZXhwb3J0IGNsYXNzIE1vdmVNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxUQWJzdHJhY3RGaWxlPiB7XG5cblx0dHlwZTogc3RyaW5nO1xuXHRyZWFkYWJsZTogUmVhZGFibGU7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHJlYWRhYmxlOiBSZWFkYWJsZSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5yZWFkYWJsZSA9IHJlYWRhYmxlO1xuXHR9XG5cblx0Ly8gUmV0dXJucyBhbGwgYXZhaWxhYmxlIHN1Z2dlc3Rpb25zLlxuXHRnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogVEFic3RyYWN0RmlsZVtdIHtcblx0XHRjb25zdCBhYnN0cmFjdEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKTtcblx0XHRjb25zdCBmb2xkZXJzOiBUQWJzdHJhY3RGaWxlW10gPSBbXTtcblx0XHRjb25zdCBsb3dlckNhc2VJbnB1dFN0ciA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCk7XG5cdFx0YWJzdHJhY3RGaWxlcy5mb3JFYWNoKChmb2xkZXIpID0+IHtcblx0XHRcdGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyICYmIGZvbGRlci5wYXRoLnRvTG93ZXJDYXNlKCkuY29udGFpbnMobG93ZXJDYXNlSW5wdXRTdHIpKSB7XG5cdFx0XHRcdGZvbGRlcnMucHVzaChmb2xkZXIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBmb2xkZXJzO1xuXHR9XG5cblx0Ly8gUmVuZGVycyBlYWNoIHN1Z2dlc3Rpb24gaXRlbS5cblx0cmVuZGVyU3VnZ2VzdGlvbihmb2xkZXI6IFRBYnN0cmFjdEZpbGUsIGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogZm9sZGVyLnBhdGggfSk7XG5cdFx0Ly8gZWwuY3JlYXRlRWwoXCJzbWFsbFwiLCB7IHRleHQ6IGZvbGRlci5wYXRoIH0pO1xuXHR9XG5cblx0Ly8gUGVyZm9ybSBhY3Rpb24gb24gdGhlIHNlbGVjdGVkIHN1Z2dlc3Rpb24uXG5cdG9uQ2hvb3NlU3VnZ2VzdGlvbihmb2xkZXI6IFRBYnN0cmFjdEZpbGUsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcblx0XHRsZXQgYWN0aW9uID0gbmV3IE1vdmVBY3Rpb24odGhpcy5hcHAsIGZvbGRlci5wYXRoKTtcblx0XHR0aGlzLnJlYWRhYmxlLnJlYWQoYWN0aW9uKTtcblx0fVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQ29uZmlybU1vZGFsIH0gZnJvbSBcIi4uL21vZGFsL2NvbmZpcm0tbW9kYWxcIjtcbmltcG9ydCB7IE1vdmVJbmZvIH0gZnJvbSBcIi4uL21vZGFsL21vdmUtaW5mb1wiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBNb3ZlQWN0aW9uIGltcGxlbWVudHMgQWN0aW9uIHtcblxuICAgIGFwcDogQXBwO1xuICAgIHRhcmdldFBhdGg6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0YXJnZXRQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMudGFyZ2V0UGF0aCA9IHRhcmdldFBhdGg7XG4gICAgfVxuXG4gICAgYWN0KHJlc3VsdEFycjogVEFic3RyYWN0RmlsZVtdKSB7XG5cbiAgICAgICAgY29uc3QgbW92ZUluZm9zOiBNb3ZlSW5mb1tdID0gW107XG5cbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHRBcnIuZm9yRWFjaChmZiA9PiB7XG4gICAgICAgICAgICAgICAgbW92ZUluZm9zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VGaWxlOiBmZixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGlyOiB0aGlzLnRhcmdldFBhdGhcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIG5ldyBDb25maXJtTW9kYWwodGhpcy5hcHAsIG1vdmVJbmZvcykub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsICJpbXBvcnQgeyBBcHAsIEZpbGVNYW5hZ2VyLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTW92ZUluZm8gfSBmcm9tICdzcmMvbW9kYWwvbW92ZS1pbmZvJztcblxuLyoqXG4gKiBcdTAwQTBcdTVGMzlcdTdBOTdcdTc4NkVcdThCQTRcdTg5ODFcdTc5RkJcdTUyQThcdTc2ODRcdTY1ODdcdTRFRjZcbiAqL1xuZXhwb3J0IGNsYXNzIENvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBtb3ZlSW5mb3M6IE1vdmVJbmZvW107XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbW92ZUluZm9zOiBNb3ZlSW5mb1tdKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMubW92ZUluZm9zID0gbW92ZUluZm9zO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNvbmZpcm0gTW92ZT9cIiB9KTtcblxuICAgICAgICB0aGlzLm1vdmVJbmZvcy5mb3JFYWNoKGluZm8gPT4ge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogaW5mby5zb3VyY2VGaWxlLnBhdGggKyBcIiAtPiBcIiArIGluZm8udGFyZ2V0RGlyICsgXCIvXCIgKyBpbmZvLnNvdXJjZUZpbGUubmFtZSB9KTtcbiAgICAgICAgfSlcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuLnNldEJ1dHRvblRleHQoXCJDb25maXJtXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm1vdmVJbmZvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmZvID0gdGhpcy5tb3ZlSW5mb3Nba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGluZm8uc291cmNlRmlsZSwgaW5mby50YXJnZXREaXIgKyBcIi9cIiArIGluZm8uc291cmNlRmlsZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJNb3ZlIFN1Y2Nlc3MhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJNb3ZlIENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8vIG9uQ2xvc2UoKSB7XG4gICAgLy8gICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAvLyAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgLy8gfVxufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEFic3RyYWN0RmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcInNyYy9hY3Rpb24vYWN0aW9uXCI7XG5pbXBvcnQgeyBSZWFkSW5mbyB9IGZyb20gXCIuL3JlYWQtaW5mb1wiO1xuaW1wb3J0IHsgUmVhZGFibGUgfSBmcm9tIFwiLi9yZWFkYWJsZVwiO1xuXG5cbmV4cG9ydCBjbGFzcyBDbGlwYm9hcmRSZWFkZXIgaW1wbGVtZW50cyBSZWFkYWJsZSB7XG5cbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIHJlYWQoYWN0aW9uOiBBY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlYWRJbmZvID0gbmV3IFJlYWRJbmZvKCk7XG5cbiAgICAgICAgbGV0IHByb21pc2VTdHIgPSBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCk7XG5cbiAgICAgICAgcHJvbWlzZVN0ci50aGVuKHN0ciA9PiB7XG4gICAgICAgICAgICBsZXQgbGluZXMgPSBzdHIuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmID0gbGluZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYuc3RhcnRzV2l0aChcIltbXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gZi5zdWJzdHJpbmcoMiwgZi5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmLmVuZHNXaXRoKFwiXV1cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBmLnN1YnN0cmluZygwLCBmLmxlbmd0aCAtIDIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZi5lbmRzV2l0aChcIi5tZFwiKSAmJiAhZi5lbmRzV2l0aChcIi5NRFwiKSAmJiAhZi5lbmRzV2l0aChcIi5NZFwiKSAmJiAhZi5lbmRzV2l0aChcIi5tRFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGYgKyBcIi5tZFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRJbmZvLmFkZChmZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhY3Rpb24uYWN0KHJlYWRJbmZvLmdldEZpbGVzKCkpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiQ2xpcGJvYXJkIENvbnRlbnQgRXJyb3IhXCIgKyBlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59IiwgImltcG9ydCB7IFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCAqIGFzIGludGVybmFsIGZyb20gXCJzdHJlYW1cIjtcblxuXG4vKipcbiAqIFx1OEJGQlx1NTNENlx1NzY4NFx1NEZFMVx1NjA2RlxuICovXG5leHBvcnQgY2xhc3MgUmVhZEluZm8ge1xuXG4gICAgbGltaXQ6IG51bWJlcjtcbiAgICByZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXTtcblxuICAgIGNvbnN0cnVjdG9yKGxpbWl0OiBudW1iZXIgPSAzMDApIHtcbiAgICAgICAgdGhpcy5saW1pdCA9IGxpbWl0O1xuICAgICAgICB0aGlzLnJlc3VsdEFyciA9IFtdO1xuICAgIH1cblxuICAgIGFkZChmaWxlOiBUQWJzdHJhY3RGaWxlKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc3VsdEFyci5sZW5ndGggPj0gdGhpcy5saW1pdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTG9hZCBtb3JlIHRoYW4gXCIgKyB0aGlzLmxpbWl0ICsgXCIgZmlsZXMhXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzdWx0QXJyLnB1c2goZmlsZSk7XG4gICAgfVxuXG4gICAgZ2V0RmlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdEFycjtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBEZWxldGVDb25maXJtTW9kYWwgfSBmcm9tIFwic3JjL21vZGFsL2RlbGV0ZS1jb25maXJtLW1vZGFsXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIERlbGV0ZUFjdGlvbiBpbXBsZW1lbnRzIEFjdGlvbiB7XG5cbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIGFjdChyZXN1bHRBcnI6IFRBYnN0cmFjdEZpbGVbXSkge1xuICAgICAgICBpZiAocmVzdWx0QXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG5ldyBEZWxldGVDb25maXJtTW9kYWwodGhpcy5hcHAsIHJlc3VsdEFycikub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBOb3RpY2UsIFNldHRpbmcsIFRBYnN0cmFjdEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8qKlxuICogXHUwMEEwXHU1RjM5XHU3QTk3XHU3ODZFXHU4QkE0XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU2NTg3XHU0RUY2XG4gKi9cbmV4cG9ydCBjbGFzcyBEZWxldGVDb25maXJtTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnI9IHJlc3VsdEFycjtcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJDb25maXJtIERlbGV0ZT9cIiB9KTtcblxuICAgICAgICBpZiAodGhpcy5yZXN1bHRBcnIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTm8gZmlsZXMgZm91bmQhXCIgfSk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDbG9zZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnBhdGggfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgICAgICBidG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ29uZmlybVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LnRyYXNoKGluZm8sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkRlbGV0ZSBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJEZWxldGUgQ2FuY2VsZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gb25DbG9zZSgpIHtcbiAgICAvLyAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgIC8vICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAvLyB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCJzcmMvYWN0aW9uL2FjdGlvblwiO1xuaW1wb3J0IHsgUmVhZEluZm8gfSBmcm9tIFwiLi9yZWFkLWluZm9cIjtcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSBcIi4vcmVhZGFibGVcIjtcblxuXG5leHBvcnQgY2xhc3MgQ3VycmVudEZpbGVSZWFkZXIgaW1wbGVtZW50cyBSZWFkYWJsZSB7XG5cbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIHJlYWQoYWN0aW9uOiBBY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgbGV0IHJlYWRJbmZvID0gbmV3IFJlYWRJbmZvKCk7XG5cbiAgICAgICAgbGV0IGN1cnJlbnRGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblxuICAgICAgICBpZiAoY3VycmVudEZpbGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGFjdGl2ZSBmaWxlIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjdXJyZW50RmlsZVBhdGggPSBjdXJyZW50RmlsZS5wYXRoO1xuXG4gICAgICAgIGxldCBsaW5rT2JqID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5yZXNvbHZlZExpbmtzW2N1cnJlbnRGaWxlUGF0aF07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBsaW5rT2JqKSB7XG4gICAgICAgICAgICAgICAgbGV0IGZmID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKGZmICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkKGZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3Rpb24uYWN0KHJlYWRJbmZvLmdldEZpbGVzKCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGUubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwic3JjL2FjdGlvbi9hY3Rpb25cIjtcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSBcIi4vcmVhZGFibGVcIjtcbmltcG9ydCB7IGdldEFQSSB9IGZyb20gXCJvYnNpZGlhbi1kYXRhdmlld1wiO1xuaW1wb3J0IHsgUmVhZEluZm8gfSBmcm9tIFwiLi9yZWFkLWluZm9cIjtcblxuZXhwb3J0IGNsYXNzIERhdGF2aWV3UmVhZGVyIGltcGxlbWVudHMgUmVhZGFibGUge1xuXG4gICAgYXBwOiBBcHA7XG4gICAgcXVlcnlTdHI6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBxdWVyeVN0cjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnF1ZXJ5U3RyID0gcXVlcnlTdHI7XG4gICAgfVxuXG4gICAgcmVhZChhY3Rpb246IEFjdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgcmVhZEluZm8gPSBuZXcgUmVhZEluZm8oKTtcblxuICAgICAgICBsZXQgYXBpID0gZ2V0QVBJKCk7XG5cbiAgICAgICAgbGV0IHFTdHIgPSBmb3JtYXRTdHIodGhpcy5xdWVyeVN0cik7XG5cbiAgICAgICAgYXBpLnF1ZXJ5KHFTdHIpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMuc3VjY2Vzc2Z1bCkge1xuICAgICAgICAgICAgICAgIGxldCBmaWxlUGF0aHM6IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChyZXMudmFsdWUudHlwZSA9PSBcImxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBMSVNUXG4gICAgICAgICAgICAgICAgICAgIHJlcy52YWx1ZS52YWx1ZXMuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChpdC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXMudmFsdWUudHlwZSA9PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVEFCTEVcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzID0gcmVzLnZhbHVlLnZhbHVlcztcbiAgICAgICAgICAgICAgICAgICAgcmVzLnZhbHVlLnZhbHVlcy5mb3JFYWNoKGl0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0LmZvckVhY2goaW5uZXJJdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVySXQgJiYgaW5uZXJJdC5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXRocy5wdXNoKGlubmVySXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUQVNLXG4gICAgICAgICAgICAgICAgICAgIHJlcy52YWx1ZS52YWx1ZXMuZm9yRWFjaChpdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aHMucHVzaChpdC5saW5rLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGhzLmZvckVhY2goKGZpbGVQYXRoOiB7IHRvU3RyaW5nOiAoKSA9PiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmZiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZEluZm8uYWRkKGZmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uLmFjdChyZWFkSW5mby5nZXRGaWxlcygpKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJRdWVyeSBzdHJpbmcgZXJyb3IhW1wiICsgdGhpcy5xdWVyeVN0ciArIFwiXVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbi8qKlxuICogXHU1OTI3XHU1MTk5XHU1NDdEXHU0RUU0XG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFN0cihxdWVyeVN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgc3RyID0gcXVlcnlTdHIudHJpbVN0YXJ0KCk7XG5cbiAgICBsZXQgY29tbWFuZFN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgNCk7XG5cbiAgICBpZiAoY29tbWFuZFN0ci50b1VwcGVyQ2FzZSgpID09IFwiTElTVFwiKSB7XG4gICAgICAgIHJldHVybiBcIkxJU1RcIiArIHN0ci5zdWJzdHJpbmcoNCwgc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmRTdHIudG9VcHBlckNhc2UoKSA9PSBcIlRBQkxcIikge1xuICAgICAgICByZXR1cm4gXCJUQUJMRVwiICsgc3RyLnN1YnN0cmluZyg1LCBzdHIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICBpZiAoY29tbWFuZFN0ci50b1VwcGVyQ2FzZSgpID09IFwiVEFTS1wiKSB7XG4gICAgICAgIHJldHVybiBcIlRBU0tcIiArIHN0ci5zdWJzdHJpbmcoNCwgc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXJ5U3RyO1xufVxuIiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi9hY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIENvcHlBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhY3QocmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcblxuICAgICAgICBpZiAocmVzdWx0QXJyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxldCBzdHIgPSBcIlwiO1xuICAgICAgICAgICAgcmVzdWx0QXJyLmZvckVhY2goZmYgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gZmYubmFtZTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZS5lbmRzV2l0aChcIi5tZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMCwgbmFtZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHIgKz0gXCJbW1wiICsgZmYucGF0aCArIFwifFwiICsgbmFtZSArIFwiXV1cXG5cIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChzdHIpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkNvcHkgbGlua3Mgc3VjY2VzcyFcIilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBGaWxlcyBGb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRBYnN0cmFjdEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEVkaXRGcm9udE1hdHRlck1vZGFsIH0gZnJvbSBcInNyYy9tb2RhbC9lZGl0LWZyb250LW1hdHRlci1tb2RhbFwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4vYWN0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBFZGl0RnJvbnRNYXR0ZXJBY3Rpb24gaW1wbGVtZW50cyBBY3Rpb24ge1xuXG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBhY3QocmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgaWYgKHJlc3VsdEFyci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBuZXcgRWRpdEZyb250TWF0dGVyTW9kYWwodGhpcy5hcHAsIHJlc3VsdEFycikub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIEZpbGVzIEZvdW5kIVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBUQWJzdHJhY3RGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIFx1MDBBMFx1NUYzOVx1N0E5N1x1N0YxNlx1OEY5MUZyb250IE1hdHRlclx1NUM1RVx1NjAyN1xuICovXG5leHBvcnQgY2xhc3MgRWRpdEZyb250TWF0dGVyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW107XG4gICAga2V5OiBTdHJpbmc7XG4gICAgdmFsOiBTdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcmVzdWx0QXJyOiBUQWJzdHJhY3RGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5yZXN1bHRBcnIgPSByZXN1bHRBcnI7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiRWRpdCBGcm9udCBNYXR0ZXJcIiB9KTtcblxuICAgICAgICBpZiAodGhpcy5yZXN1bHRBcnIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwiTm8gZmlsZXMgZm91bmQhXCIgfSk7XG5cbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgICAgIGJ0blxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJDbG9zZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRBcnIuZm9yRWFjaChpbmZvID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiBpbmZvLnBhdGggfSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHR4dCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdHh0LnNldFBsYWNlaG9sZGVyKFwiRnJvbnQgTWF0dGVyIEtleVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmtleSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS5hZGRUZXh0KCh0eHQpID0+XG4gICAgICAgICAgICAgICAgICAgIHR4dC5zZXRQbGFjZWhvbGRlcihcIkZyb250IE1hdHRlciBWYWx1ZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNvbmZpcm1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXBpID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1wibWV0YWVkaXRcIl0uYXBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0QXJyLmZvckVhY2goYXN5bmMgaW5mbyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBhd2FpdCBhcGkuZ2V0UHJvcGVydHlWYWx1ZSh0aGlzLmtleSwgaW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLmNyZWF0ZVlhbWxQcm9wZXJ0eSh0aGlzLmtleSwgdGhpcy52YWwsIGluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnVwZGF0ZSh0aGlzLmtleSwgdGhpcy52YWwsIGluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWRpdCBTdWNjZXNzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5hZGRCdXR0b24oKGJ0bikgPT5cbiAgICAgICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFZGl0IENhbmNlbGVkIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0NhLFFBQUEsVUFBUyxDQUFDLFFBQXNDOztBQUN6RCxVQUFJO0FBQUssZUFBTyxNQUFBLElBQUksUUFBUSxRQUFRLGNBQVUsUUFBQSxPQUFBLFNBQUEsU0FBQSxHQUFBOztBQUN6QyxlQUFPLE9BQU87O0FBSVYsUUFBQSxrQkFBa0IsQ0FBQyxRQUFhLElBQUksUUFBUSxlQUFlLElBQUk7Ozs7Ozs7QUM5QzVFO0FBQUE7QUFBQTtBQUFBLHdCQUE2Qzs7O0FDQTdDLHVCQUFrRTs7O0FDQWxFLHVCQUEyQzs7O0FDQTNDLHNCQUF5RDtBQU1sRCxpQ0FBMkIsc0JBQU07QUFBQSxFQUdwQyxZQUFZLEtBQVUsV0FBdUI7QUFDekMsVUFBTTtBQUNOLFNBQUssWUFBWTtBQUFBO0FBQUEsRUFHckIsU0FBUztBQUNMLFVBQU0sRUFBRSxjQUFjO0FBRXRCLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTTtBQUVqQyxTQUFLLFVBQVUsUUFBUSxVQUFRO0FBQzNCLGdCQUFVLFNBQVMsT0FBTyxFQUFFLE1BQU0sS0FBSyxXQUFXLE9BQU8sU0FBUyxLQUFLLFlBQVksTUFBTSxLQUFLLFdBQVc7QUFBQTtBQUc3RyxRQUFJLHdCQUFRLFdBQ1AsVUFBVSxDQUFDLFFBQ1IsSUFBSSxjQUFjLFdBQ2IsU0FDQSxRQUFRLE1BQVk7QUFDakIsV0FBSztBQUNMLGlCQUFXLE9BQU8sS0FBSyxXQUFXO0FBQzlCLFlBQUksT0FBTyxLQUFLLFVBQVU7QUFDMUIsY0FBTSxLQUFLLElBQUksWUFBWSxXQUFXLEtBQUssWUFBWSxLQUFLLFlBQVksTUFBTSxL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
